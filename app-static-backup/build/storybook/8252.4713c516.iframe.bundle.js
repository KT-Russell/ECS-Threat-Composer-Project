"use strict";(self.webpackChunk_aws_threat_composer=self.webpackChunk_aws_threat_composer||[]).push([[8252],{"./src/components/generic/BaseDiagramInfo/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>generic_BaseDiagramInfo});var components_button=__webpack_require__("../../node_modules/@cloudscape-design/components/button/index.js"),container=__webpack_require__("../../node_modules/@cloudscape-design/components/container/index.js"),header=__webpack_require__("../../node_modules/@cloudscape-design/components/header/index.js"),space_between=__webpack_require__("../../node_modules/@cloudscape-design/components/space-between/index.js"),react=__webpack_require__("../../node_modules/react/index.js");const styles_image=(0,__webpack_require__("../../node_modules/@emotion/react/dist/emotion-react.browser.esm.js").AH)({maxWidth:"1024px",width:"100%"});var ContentLayout=__webpack_require__("./src/components/generic/ContentLayout/index.tsx"),form_field=__webpack_require__("../../node_modules/@cloudscape-design/components/form-field/index.js"),radio_group=__webpack_require__("../../node_modules/@cloudscape-design/components/radio-group/index.js"),browser_image_compression=__webpack_require__("../../node_modules/browser-image-compression/dist/browser-image-compression.mjs"),configs=__webpack_require__("./src/configs/index.ts"),customTypes=__webpack_require__("./src/customTypes/index.ts");const utils_getBase64=file=>new Promise(((resolve,reject)=>{var reader=new FileReader;reader.readAsDataURL(file),reader.onload=function(){resolve(reader.result)},reader.onerror=function(error){reject(error)}}));var Input=__webpack_require__("./src/components/generic/Input/index.tsx"),FileUpload=__webpack_require__("./src/components/generic/FileUpload/index.tsx"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("../../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const IMAGE_COMPRESSION_OPTIONS={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0},IMAGE_COMPRESSION_TYPES=["image/png","image/gif","image/jpeg"],ImageEdit=({value,onChange})=>{const isValueBase64String=value&&value.startsWith("data:"),[selectedFiles,setSelectedFiles]=(0,react.useState)([]),[inputValue,setInputValue]=(0,react.useState)(isValueBase64String?"":value),[imageSource,setImageSource]=(0,react.useState)(value?isValueBase64String?"file":"url":"no"),[image,setImage]=(0,react.useState)(isValueBase64String?value:""),[errorText,setErrorText]=(0,react.useState)();(0,react.useEffect)((()=>{"no"===imageSource?onChange(""):"file"===imageSource?onChange(image):"url"===imageSource&&onChange(inputValue)}),[onChange,imageSource,image,inputValue]);const handleImageUpload=(0,react.useCallback)((async imageFile=>{try{if(IMAGE_COMPRESSION_TYPES.includes(imageFile.type)){const compressedFile=await(0,browser_image_compression.A)(imageFile,IMAGE_COMPRESSION_OPTIONS);return await utils_getBase64(compressedFile)}return await utils_getBase64(imageFile)}catch(error){return console.log(error),""}}),[]),handleChange=(0,react.useCallback)((async _selectedFiles=>{if(setSelectedFiles(_selectedFiles),setErrorText(void 0),_selectedFiles.length>0){const _image=await handleImageUpload(_selectedFiles[0]);_image.length>configs._f?setErrorText("Image size limit exceeded"):setImage(_image||"")}}),[]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(space_between.A,{direction:"vertical",size:"s",children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(form_field.A,{label:"Image source",children:(0,emotion_react_jsx_runtime_browser_esm.Y)(radio_group.A,{onChange:({detail})=>setImageSource(detail.value),value:imageSource,items:[{value:"file",label:"From file upload"},{value:"url",label:"From url"},{value:"no",label:"No Image"}]})},"imageSource"),"file"===imageSource&&(0,emotion_react_jsx_runtime_browser_esm.FD)(space_between.A,{direction:"vertical",size:"s",children:[image&&(0,emotion_react_jsx_runtime_browser_esm.Y)(header.A,{variant:"h3",children:"Preview"},"header"),image&&(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{css:styles_image,src:image,alt:"Preview Diagram"},"image"),(0,emotion_react_jsx_runtime_browser_esm.Y)(FileUpload.A,{label:"Image Upload",accept:"image/*",errorText,files:selectedFiles,onChange:handleChange},"fileUpload")]}),"url"===imageSource&&(0,emotion_react_jsx_runtime_browser_esm.FD)(form_field.A,{label:"Image Url",children:[inputValue&&(0,emotion_react_jsx_runtime_browser_esm.Y)(header.A,{variant:"h3",children:"Preview"},"header"),inputValue&&(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{css:styles_image,src:inputValue,alt:"Preview Diagram"}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Input.A,{value:inputValue,onChange:event=>setInputValue(event.detail.value),validateData:customTypes.SG.safeParse})]},"imageUrl")]})};ImageEdit.displayName="ImageEdit";const generic_ImageEdit=ImageEdit;try{ImageEdit.displayName="ImageEdit",ImageEdit.__docgenInfo={description:"",displayName:"ImageEdit",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/generic/ImageEdit/index.tsx#ImageEdit"]={docgenInfo:ImageEdit.__docgenInfo,name:"ImageEdit",path:"src/components/generic/ImageEdit/index.tsx#ImageEdit"})}catch(__react_docgen_typescript_loader_error){}var MarkdownEditor=__webpack_require__("./src/components/generic/MarkdownEditor/index.tsx"),MarkdownViewer=__webpack_require__("./src/components/generic/MarkdownViewer/index.tsx");const BaseDiagramInfo=({headerTitle,diagramTitle,entity,onConfirm,validateData,onEditModeChange,MarkdownEditorComponentType=MarkdownEditor.A})=>{const[editMode,setEditMode]=(0,react.useState)(!entity.description&&!entity.image),[image,setImage]=(0,react.useState)(""),[content,setContent]=(0,react.useState)("");(0,react.useEffect)((()=>{onEditModeChange?.(editMode)}),[editMode]);const handleSaveDiagramInfo=(0,react.useCallback)((()=>{onConfirm({image,description:content}),setEditMode(!1)}),[image,content,onConfirm]),handleEdit=(0,react.useCallback)((()=>{setContent(entity.description||""),setImage(entity.image||""),setEditMode(!0)}),[entity,setContent,setEditMode,setImage]),actions=(0,react.useMemo)((()=>editMode?(0,emotion_react_jsx_runtime_browser_esm.FD)(space_between.A,{direction:"horizontal",size:"s",children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(components_button.A,{onClick:()=>setEditMode(!1),children:"Cancel"},"cancelBtn"),(0,emotion_react_jsx_runtime_browser_esm.Y)(components_button.A,{variant:"primary",onClick:handleSaveDiagramInfo,children:"Confirm"},"confirmBtn")]}):(0,emotion_react_jsx_runtime_browser_esm.Y)(components_button.A,{onClick:handleEdit,children:"Edit"})),[editMode,handleSaveDiagramInfo,handleEdit,setEditMode]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(ContentLayout.A,{title:headerTitle,actions,children:(0,emotion_react_jsx_runtime_browser_esm.Y)(container.A,{children:editMode?(0,emotion_react_jsx_runtime_browser_esm.FD)(space_between.A,{direction:"vertical",size:"s",children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(MarkdownEditorComponentType,{label:"Introduction",value:content,onChange:setContent,validateData,focus:!0}),(0,emotion_react_jsx_runtime_browser_esm.FD)(header.A,{variant:"h3",children:[headerTitle," Diagram"]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(generic_ImageEdit,{value:image,onChange:setImage})]}):(0,emotion_react_jsx_runtime_browser_esm.FD)(space_between.A,{direction:"vertical",size:"s",children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(header.A,{variant:"h3",children:"Introduction"},"diagramInfo"),(0,emotion_react_jsx_runtime_browser_esm.Y)(MarkdownViewer.A,{children:entity.description||""}),(0,emotion_react_jsx_runtime_browser_esm.Y)(header.A,{variant:"h3",children:diagramTitle},"diagram"),entity.image&&(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{css:styles_image,src:entity.image,alt:diagramTitle})]})})})};BaseDiagramInfo.displayName="BaseDiagramInfo";const generic_BaseDiagramInfo=BaseDiagramInfo;try{BaseDiagramInfo.displayName="BaseDiagramInfo",BaseDiagramInfo.__docgenInfo={description:"",displayName:"BaseDiagramInfo",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"{ image?: string | undefined; description?: string | undefined; }"}},headerTitle:{defaultValue:null,description:"",name:"headerTitle",required:!0,type:{name:"string"}},diagramTitle:{defaultValue:null,description:"",name:"diagramTitle",required:!0,type:{name:"string"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"(info: { image?: string | undefined; description?: string | undefined; }) => void"}},validateData:{defaultValue:null,description:"",name:"validateData",required:!1,type:{name:"((newValue: string) => ZodSafeParseResult<string>)"}},onEditModeChange:{defaultValue:null,description:"",name:"onEditModeChange",required:!1,type:{name:"((editMode: boolean) => void)"}},MarkdownEditorComponentType:{defaultValue:null,description:"",name:"MarkdownEditorComponentType",required:!1,type:{name:"ComponentType<MarkdownEditorProps>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/generic/BaseDiagramInfo/index.tsx#BaseDiagramInfo"]={docgenInfo:BaseDiagramInfo.__docgenInfo,name:"BaseDiagramInfo",path:"src/components/generic/BaseDiagramInfo/index.tsx#BaseDiagramInfo"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/generic/ContentLayout/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _cloudscape_design_components_content_layout__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@cloudscape-design/components/content-layout/index.js"),_cloudscape_design_components_header__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@cloudscape-design/components/header/index.js"),_contexts_ApplicationContext__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/contexts/ApplicationContext/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const ContentLayout=({title,children,...props})=>{const{applicationInfo}=(0,_contexts_ApplicationContext__WEBPACK_IMPORTED_MODULE_0__.b)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_cloudscape_design_components_content_layout__WEBPACK_IMPORTED_MODULE_2__.A,{headerVariant:"high-contrast",header:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_cloudscape_design_components_header__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"h1",...props,info:applicationInfo.name?`| ${applicationInfo.name}`:void 0,children:title}),children})};ContentLayout.displayName="ContentLayout";const __WEBPACK_DEFAULT_EXPORT__=ContentLayout;try{ContentLayout.displayName="ContentLayout",ContentLayout.__docgenInfo={description:"",displayName:"ContentLayout",props:{title:{defaultValue:null,description:"The title of the header.",name:"title",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/generic/ContentLayout/index.tsx#ContentLayout"]={docgenInfo:ContentLayout.__docgenInfo,name:"ContentLayout",path:"src/components/generic/ContentLayout/index.tsx#ContentLayout"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/generic/FileUpload/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>generic_FileUpload});var components_button=__webpack_require__("../../node_modules/@cloudscape-design/components/button/index.js"),form_field=__webpack_require__("../../node_modules/@cloudscape-design/components/form-field/index.js"),space_between=__webpack_require__("../../node_modules/@cloudscape-design/components/space-between/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),status_indicator=__webpack_require__("../../node_modules/@cloudscape-design/components/status-indicator/index.js"),text_content=__webpack_require__("../../node_modules/@cloudscape-design/components/text-content/index.js");const utils_getDisplayLastModified=lastModified=>`Last modified: ${new Date(lastModified).toLocaleString()}`,utils_getDisplaySize=size=>{if(!size)return;const i=Math.floor(Math.log(size)/Math.log(1e3));return`${parseFloat((size/Math.pow(1e3,i)).toFixed(2))} ${["bytes","KB","MB","GB"][i]}`};var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const FileTokenLabel=({name,size,lastModified})=>(0,jsx_runtime.jsxs)(space_between.A,{direction:"horizontal",size:"xs",children:[(0,jsx_runtime.jsx)(status_indicator.A,{type:"success"}),(0,jsx_runtime.jsx)(text_content.A,{children:(0,jsx_runtime.jsxs)(space_between.A,{direction:"vertical",size:"xxxs",children:[(0,jsx_runtime.jsx)("span",{children:(0,jsx_runtime.jsx)("b",{children:name})},"name"),(0,jsx_runtime.jsxs)("span",{children:["Size: ",utils_getDisplaySize(size)]},"size"),lastModified&&(0,jsx_runtime.jsx)("span",{children:utils_getDisplayLastModified(lastModified)},"lastModified")]})})]});FileTokenLabel.displayName="FileTokenLabel";const components_FileTokenLabel=FileTokenLabel;try{FileTokenLabel.displayName="FileTokenLabel",FileTokenLabel.__docgenInfo={description:"",displayName:"FileTokenLabel",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"number"}},lastModified:{defaultValue:null,description:"",name:"lastModified",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/generic/FileUpload/components/FileTokenLabel/index.tsx#FileTokenLabel"]={docgenInfo:FileTokenLabel.__docgenInfo,name:"FileTokenLabel",path:"src/components/generic/FileUpload/components/FileTokenLabel/index.tsx#FileTokenLabel"})}catch(__react_docgen_typescript_loader_error){}const FileUpload=({controlId,label,description,constraintText,secondaryControl,info,buttonText="Choose file",name,accept,files,sizeLimit,onChange,...props})=>{const inputElement=(0,react.useRef)(null),[errorText,setErrorText]=(0,react.useState)(props.errorText);(0,react.useEffect)((()=>{setErrorText(props.errorText)}),[props.errorText]);const footer=(0,react.useMemo)((()=>files&&0!==files.length?(0,jsx_runtime.jsx)(components_FileTokenLabel,{name:files[0].name,lastModified:files[0].lastModified,size:files[0].size}):null),[files]),handleFileSelectionButtonClick=(0,react.useCallback)((()=>{inputElement.current?.click()}),[]),handleFileSelectionChange=(0,react.useCallback)((event=>{const newFiles=[];if(setErrorText(void 0),event.target.files){const targetFiles=event.target.files,len=targetFiles.length;for(let i=0;i<len;i++){const file=targetFiles.item(i);if(file){if(sizeLimit&&file.size>sizeLimit){setErrorText(`File ${file.name} exceeds maximum file size limit: ${utils_getDisplaySize(sizeLimit)}`);break}newFiles.push(file)}}}onChange?.(newFiles)}),[files,onChange]);return(0,jsx_runtime.jsxs)(space_between.A,{direction:"vertical",size:"m",children:[(0,jsx_runtime.jsxs)(form_field.A,{...props,label,info,description,constraintText,secondaryControl,errorText,children:[(0,jsx_runtime.jsx)("input",{ref:inputElement,name,style:{display:"none"},type:"file",accept,onChange:handleFileSelectionChange}),(0,jsx_runtime.jsx)(components_button.A,{iconName:"upload",onClick:handleFileSelectionButtonClick,children:buttonText})]}),footer]})};FileUpload.displayName="FileUpload";const generic_FileUpload=FileUpload;try{FileUpload.displayName="FileUpload",FileUpload.__docgenInfo={description:"",displayName:"FileUpload",props:{accept:{defaultValue:null,description:"",name:"accept",required:!1,type:{name:"string"}},sizeLimit:{defaultValue:null,description:"",name:"sizeLimit",required:!1,type:{name:"number"}},buttonText:{defaultValue:{value:"Choose file"},description:"",name:"buttonText",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((files: File[]) => void)"}},files:{defaultValue:null,description:"",name:"files",required:!1,type:{name:"File[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/generic/FileUpload/index.tsx#FileUpload"]={docgenInfo:FileUpload.__docgenInfo,name:"FileUpload",path:"src/components/generic/FileUpload/index.tsx#FileUpload"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/generic/Input/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _cloudscape_design_components_form_field__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@cloudscape-design/components/form-field/index.js"),_cloudscape_design_components_input__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@cloudscape-design/components/input/index.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_hooks_useContentValidation__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/hooks/useContentValidation/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const Input=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((({value,onChange,validateData,...props},ref)=>{const{tempValue,errorText,handleChange}=(0,_hooks_useContentValidation__WEBPACK_IMPORTED_MODULE_1__.A)(value,onChange,validateData);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_cloudscape_design_components_form_field__WEBPACK_IMPORTED_MODULE_3__.A,{...props,errorText,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_cloudscape_design_components_input__WEBPACK_IMPORTED_MODULE_4__.A,{...props,ref,value:tempValue,onChange:event=>handleChange(event)})})})),__WEBPACK_DEFAULT_EXPORT__=Input;try{Input.displayName="Input",Input.__docgenInfo={description:"",displayName:"Input",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"LegacyRef<any>"}},validateData:{defaultValue:null,description:"",name:"validateData",required:!1,type:{name:"((newValue: string) => ZodSafeParseResult<string>)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/generic/Input/index.tsx#Input"]={docgenInfo:Input.__docgenInfo,name:"Input",path:"src/components/generic/Input/index.tsx#Input"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/generic/MarkdownEditor/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>generic_MarkdownEditor});var form_field=__webpack_require__("../../node_modules/@cloudscape-design/components/form-field/index.js"),design_tokens=__webpack_require__("../../node_modules/@cloudscape-design/design-tokens/index.js"),global_styles=__webpack_require__("../../node_modules/@cloudscape-design/global-styles/index.js"),emotion_react_browser_esm=__webpack_require__("../../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),MDXEditor=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/MDXEditor.js"),toolbar=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/toolbar/index.js"),DiffSourceToggleWrapper=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/DiffSourceToggleWrapper.js"),BoldItalicUnderlineToggles=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/BoldItalicUnderlineToggles.js"),BlockTypeSelect=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/BlockTypeSelect.js"),CodeToggle=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/CodeToggle.js"),CreateLink=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/CreateLink.js"),InsertImage=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/InsertImage.js"),InsertTable=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/InsertTable.js"),ListsToggle=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/ListsToggle.js"),InsertCodeBlock=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/InsertCodeBlock.js"),UndoRedo=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/UndoRedo.js"),codeblock=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/codeblock/index.js"),codemirror=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/codemirror/index.js"),table=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/table/index.js"),diff_source=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/diff-source/index.js"),markdown_shortcut=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/markdown-shortcut/index.js"),lists=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/lists/index.js"),headings=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/headings/index.js"),plugins_link=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/link/index.js"),link_dialog=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/link-dialog/index.js"),plugins_image=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/image/index.js"),thematic_break=__webpack_require__("../../node_modules/@mdxeditor/editor/dist/plugins/thematic-break/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),useContentValidation=(__webpack_require__("./src/hooks/useMediaQuery/index.ts"),__webpack_require__("./src/hooks/useContentValidation/index.tsx")),ThemeProvider=__webpack_require__("./src/components/generic/ThemeProvider/index.tsx"),emotion_react_jsx_runtime_browser_esm=(__webpack_require__("../../node_modules/@mdxeditor/editor/dist/style.css"),__webpack_require__("../../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"));const styles={default:(0,emotion_react_browser_esm.AH)({borderWidth:"2px",borderStyle:"solid",borderRadius:` ${design_tokens.Bbo}`,borderColor:design_tokens.$Gi,"&:focus-within":{borderColor:design_tokens.Rtq}}),error:(0,emotion_react_browser_esm.AH)({"&&":{color:design_tokens.nhu,borderColor:design_tokens.nhu}}),hideAutocomplete:(0,emotion_react_browser_esm.AH)({"&&& .cm-tooltip-autocomplete, html body .cm-tooltip.cm-tooltip-autocomplete":{display:"none !important",opacity:0,visibility:"hidden",pointerEvents:"none"}})},ALLOWED_HEADING_LEVELS=[3,4,5,6],MarkdownEditor=({value,onChange,validateData,allowedHeadingLevels=ALLOWED_HEADING_LEVELS,focus=!1,...props})=>{const[previousValue]=(0,react.useState)(value),mdxEditorRef=(0,react.useRef)(null),{theme}=(0,ThemeProvider.wR)(),{tempValue,errorText,handleChange}=(0,useContentValidation.A)(value,onChange,validateData);return(0,emotion_react_jsx_runtime_browser_esm.Y)(form_field.A,{...props,errorText,children:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{css:[styles.default,errorText&&styles.error],children:(0,emotion_react_jsx_runtime_browser_esm.Y)(MDXEditor.R,{ref:mdxEditorRef,markdown:errorText?value:tempValue,className:theme==global_styles.Kt.Dark?"dark-theme dark-editor":"light-theme light-editor",css:styles.hideAutocomplete,autoFocus:focus,suppressHtmlProcessing:!0,onChange:handleChange,toMarkdownOptions:{emphasis:"_",bullet:"-",rule:"_"},plugins:[(0,toolbar.F7)({toolbarContents:()=>(0,emotion_react_jsx_runtime_browser_esm.FD)(DiffSourceToggleWrapper.K,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(BoldItalicUnderlineToggles.p,{options:["Bold","Italic"]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(BlockTypeSelect._,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CodeToggle.S,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CreateLink.d,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(InsertImage.N,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(InsertTable._,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ListsToggle.I,{options:["bullet","number"]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(InsertCodeBlock.O,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(UndoRedo.l,{})]})}),(0,codeblock.oe)({defaultCodeBlockLanguage:""}),(0,codemirror.sl)({codeBlockLanguages:{"":"text"}}),(0,table.c3)(),(0,diff_source.a2)({viewMode:"rich-text",diffMarkdown:previousValue}),(0,markdown_shortcut.r)(),(0,lists.Zq)(),(0,headings.xO)({allowedHeadingLevels}),(0,plugins_link.O)({disableAutoLink:!0}),(0,link_dialog.Mi)(),(0,plugins_image.Pz)({disableImageResize:!0}),(0,thematic_break.Y)()]})})})};MarkdownEditor.displayName="MarkdownEditor";const generic_MarkdownEditor=MarkdownEditor;try{MarkdownEditor.displayName="MarkdownEditor",MarkdownEditor.__docgenInfo={description:"",displayName:"MarkdownEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},validateData:{defaultValue:null,description:"",name:"validateData",required:!1,type:{name:"((newValue: string) => ZodSafeParseResult<string>)"}},allowedHeadingLevels:{defaultValue:{value:"[3, 4, 5, 6]"},description:"",name:"allowedHeadingLevels",required:!1,type:{name:"HEADING_LEVEL[]"}},focus:{defaultValue:{value:"false"},description:"",name:"focus",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/generic/MarkdownEditor/index.tsx#MarkdownEditor"]={docgenInfo:MarkdownEditor.__docgenInfo,name:"MarkdownEditor",path:"src/components/generic/MarkdownEditor/index.tsx#MarkdownEditor"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/generic/MarkdownViewer/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _cloudscape_design_components_icon__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@cloudscape-design/components/icon/index.js"),_cloudscape_design_components_text_content__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@cloudscape-design/components/text-content/index.js"),_cloudscape_design_design_tokens__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@cloudscape-design/design-tokens/index.js"),_emotion_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),react_markdown__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/react-markdown/lib/react-markdown.js"),rehype_raw__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/rehype-raw/index.js"),remark_frontmatter__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/remark-frontmatter/index.js"),remark_gfm__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/remark-gfm/index.js"),_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const externalPattern=/^((https?):\/\/)/,styles=(0,_emotion_react__WEBPACK_IMPORTED_MODULE_0__.AH)({"@media print":{color:"black !important"},"& img":{maxWidth:"1024px",width:"100%"},"& h1":{marginTop:`${_cloudscape_design_design_tokens__WEBPACK_IMPORTED_MODULE_1__.ktX} !important`,marginBottom:`${_cloudscape_design_design_tokens__WEBPACK_IMPORTED_MODULE_1__.ktX} !important`},"& h2":{marginTop:`${_cloudscape_design_design_tokens__WEBPACK_IMPORTED_MODULE_1__.HV} !important`,marginBottom:`${_cloudscape_design_design_tokens__WEBPACK_IMPORTED_MODULE_1__.ktX} !important`},"& h3":{marginTop:`${_cloudscape_design_design_tokens__WEBPACK_IMPORTED_MODULE_1__.ktX} !important`,marginBottom:`${_cloudscape_design_design_tokens__WEBPACK_IMPORTED_MODULE_1__.ktX} !important`},"& h4":{marginTop:`${_cloudscape_design_design_tokens__WEBPACK_IMPORTED_MODULE_1__.ktX} !important`,marginBottom:`${_cloudscape_design_design_tokens__WEBPACK_IMPORTED_MODULE_1__.ktX} !important`},"& table":{borderCollapse:"collapse"},"& tr":{borderTop:`1px solid ${_cloudscape_design_design_tokens__WEBPACK_IMPORTED_MODULE_1__.b28}`},"& th":{padding:"6px 13px",border:`1px solid ${_cloudscape_design_design_tokens__WEBPACK_IMPORTED_MODULE_1__.b28}`},"& td":{padding:"6px 13px",border:`1px solid ${_cloudscape_design_design_tokens__WEBPACK_IMPORTED_MODULE_1__.b28}`},"table tr:nth-of-type(2n)":{background:_cloudscape_design_design_tokens__WEBPACK_IMPORTED_MODULE_1__.HMw}}),components={a:props=>{if(props.href){return externalPattern.test(props.href)?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.FD)("a",{href:props.href,target:"_blank",rel:"noreferrer noopener",children:[props.children," ",(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Y)(_cloudscape_design_components_icon__WEBPACK_IMPORTED_MODULE_3__.A,{name:"external"})]}):(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Y)("a",{href:props.href,children:props.children})}return props.name?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Y)("a",{name:props.name,children:props.children}):(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Y)(_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.FK,{children:props.children})}},MarkdownViewer=({allowHtml=!1,children,...props})=>(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Y)("div",{css:styles,children:(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Y)(_cloudscape_design_components_text_content__WEBPACK_IMPORTED_MODULE_4__.A,{...props,children:(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Y)(react_markdown__WEBPACK_IMPORTED_MODULE_5__.$,{remarkPlugins:[remark_gfm__WEBPACK_IMPORTED_MODULE_6__.A,remark_frontmatter__WEBPACK_IMPORTED_MODULE_7__.A],rehypePlugins:allowHtml?[rehype_raw__WEBPACK_IMPORTED_MODULE_8__.A]:[],components,children})})});MarkdownViewer.displayName="MarkdownViewer";const __WEBPACK_DEFAULT_EXPORT__=MarkdownViewer;try{MarkdownViewer.displayName="MarkdownViewer",MarkdownViewer.__docgenInfo={description:"MarkdownViewer renders content with Markdown format.",displayName:"MarkdownViewer",props:{allowHtml:{defaultValue:{value:"false"},description:"",name:"allowHtml",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/generic/MarkdownViewer/index.tsx#MarkdownViewer"]={docgenInfo:MarkdownViewer.__docgenInfo,name:"MarkdownViewer",path:"src/components/generic/MarkdownViewer/index.tsx#MarkdownViewer"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/useContentValidation/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_utils_sanitizeHtml__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/sanitizeHtml/index.ts");const __WEBPACK_DEFAULT_EXPORT__=(value,onChange,validateData)=>{const[tempValue,setTempValue]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(value),[errorText,setErrorText]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{setTempValue(value),value||setErrorText("")}),[value]);return{tempValue,handleChange:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(((eventData,initialMarkdownNormalize)=>{if(!0===initialMarkdownNormalize)return;let newValue="string"==typeof eventData?eventData:eventData.detail.value;newValue=newValue.split("\n").map((line=>line.endsWith("&#x20;")?line.slice(0,-6):line)).join("\n"),setTempValue(newValue);if((0,_utils_sanitizeHtml__WEBPACK_IMPORTED_MODULE_1__.A)(newValue)===newValue){if(validateData){const validation=validateData(newValue);if(!validation.success)return void setErrorText(validation.error.issues.map((i=>i.message)).join("; "))}setErrorText(""),onChange&&onChange?.("string"==typeof eventData?newValue:eventData)}else setErrorText("Html tags not supported")}),[setTempValue,setErrorText,onChange,validateData]),errorText}}}}]);