"use strict";(self.webpackChunk_aws_threat_composer=self.webpackChunk_aws_threat_composer||[]).push([[8470],{"../../node_modules/@cloudscape-design/components/internal/analytics/components/analytics-funnel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{NW:()=>AnalyticsFunnelSubStep,tL:()=>AnalyticsFunnel,vP:()=>AnalyticsFunnelStep});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/tslib/tslib.es6.mjs"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_environment__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@cloudscape-design/components/internal/environment.js"),_hooks_use_debounce_callback__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/@cloudscape-design/components/internal/hooks/use-debounce-callback/index.js"),_hooks_use_unique_id__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/@cloudscape-design/components/internal/hooks/use-unique-id/index.js"),_hooks_use_visual_mode__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@cloudscape-design/components/internal/hooks/use-visual-mode/index.js"),_utils_node_belongs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/@cloudscape-design/components/internal/utils/node-belongs.js"),_context_analytics_context__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/@cloudscape-design/components/internal/analytics/context/analytics-context.js"),_hooks_use_funnel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@cloudscape-design/components/internal/analytics/hooks/use-funnel.js"),_index__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@cloudscape-design/components/internal/analytics/index.js"),_selectors__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@cloudscape-design/components/internal/analytics/selectors.js");const AnalyticsFunnel=props=>{const{isInFunnel}=(0,_hooks_use_funnel__WEBPACK_IMPORTED_MODULE_1__.oZ)();return isInFunnel&&"single-page"===props.funnelType?react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,props.children):react__WEBPACK_IMPORTED_MODULE_0__.createElement(InnerAnalyticsFunnel,Object.assign({},props))},onFunnelComplete=taskCompletionDataProps=>{_index__WEBPACK_IMPORTED_MODULE_2__.A2.funnelComplete({funnelInteractionId:taskCompletionDataProps.taskInteractionId,funnelIdentifier:taskCompletionDataProps.taskIdentifier}),_index__WEBPACK_IMPORTED_MODULE_2__.gs.taskCompletionData(taskCompletionDataProps),(()=>{var _a;try{null===(_a=window.top)||void 0===_a||_a.document.dispatchEvent(new Event("awsui-creation-edit-flow-done"))}catch(_b){}})()};const InnerAnalyticsFunnel=_a=>{var{mounted=!0,children,stepConfiguration}=_a,props=(0,tslib__WEBPACK_IMPORTED_MODULE_3__.Tt)(_a,["mounted","children","stepConfiguration"]);const[funnelInteractionId,setFunnelInteractionId]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),[submissionAttempt,setSubmissionAttempt]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),isVisualRefresh=(0,_hooks_use_visual_mode__WEBPACK_IMPORTED_MODULE_4__.P)(),funnelState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)("default"),funnelNameSelector=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)((0,_selectors__WEBPACK_IMPORTED_MODULE_5__.z3)()),errorCount=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0),loadingButtonCount=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0),wizardCount=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0),latestFocusCleanupFunction=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(void 0),formSubmitStartTime=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(!mounted)return;let funnelInteractionId;const handle=setTimeout((()=>{var _a,_b;if(funnelNameSelector.current=function evaluateSelectors(selectors,defaultSelector){for(const selector of selectors)if(document.querySelector(selector))return selector;return defaultSelector}((null===(_a=props.funnelNameSelectors)||void 0===_a?void 0:_a.call(props))||[],(0,_selectors__WEBPACK_IMPORTED_MODULE_5__.z3)()),"single-page"===props.funnelType&&wizardCount.current>0)return;funnelState.current="default";const funnelName=null!==(_b=(0,_selectors__WEBPACK_IMPORTED_MODULE_5__.zP)(funnelNameSelector.current))&&void 0!==_b?_b:"",singleStepFlowStepConfiguration=[{number:1,isOptional:!1,name:funnelName,stepIdentifier:props.funnelIdentifier}];let componentTheme=_environment__WEBPACK_IMPORTED_MODULE_6__.CV;"polaris"===_environment__WEBPACK_IMPORTED_MODULE_6__.CV&&(componentTheme=isVisualRefresh?"vr":"classic"),funnelInteractionId=_index__WEBPACK_IMPORTED_MODULE_2__.A2.funnelStart({funnelName,funnelIdentifier:props.funnelIdentifier,flowType:props.funnelFlowType,funnelNameSelector:funnelNameSelector.current,optionalStepNumbers:props.optionalStepNumbers,funnelType:props.funnelType,totalFunnelSteps:props.totalFunnelSteps,componentVersion:_environment__WEBPACK_IMPORTED_MODULE_6__.i8,componentTheme,funnelVersion:"1.4",stepConfiguration:null!=stepConfiguration?stepConfiguration:singleStepFlowStepConfiguration,resourceType:props.funnelResourceType||(0,_selectors__WEBPACK_IMPORTED_MODULE_5__.zP)(`[${_selectors__WEBPACK_IMPORTED_MODULE_5__.Tg}]`)}),setFunnelInteractionId(funnelInteractionId)}),1);return()=>{if(clearTimeout(handle),!("single-page"===props.funnelType&&wizardCount.current>0)){if("validating"===funnelState.current){const taskCompletionDataProps={taskIdentifier:props.funnelIdentifier,taskType:props.funnelType,timeToRespondAfterFormSubmit:performance.now()-formSubmitStartTime.current,taskInteractionId:funnelInteractionId,taskFlowType:props.funnelFlowType};onFunnelComplete(taskCompletionDataProps),funnelState.current="complete"}"complete"===funnelState.current?_index__WEBPACK_IMPORTED_MODULE_2__.A2.funnelSuccessful({funnelInteractionId,funnelIdentifier:props.funnelIdentifier}):(funnelState.current="cancelled",(({funnelInteractionId,funnelIdentifier})=>{_index__WEBPACK_IMPORTED_MODULE_2__.A2.funnelCancelled({funnelInteractionId,funnelIdentifier})})({funnelInteractionId,funnelIdentifier:props.funnelIdentifier}))}}}),[mounted]);const funnelContextValue={funnelInteractionId,funnelIdentifier:props.funnelIdentifier,funnelFlowType:props.funnelFlowType,funnelErrorContext:props.funnelErrorContext,setFunnelInteractionId,funnelType:props.funnelType,optionalStepNumbers:props.optionalStepNumbers,totalFunnelSteps:props.totalFunnelSteps,funnelNameSelector:funnelNameSelector.current,funnelSubmit:()=>{funnelState.current="validating",formSubmitStartTime.current=performance.now();const checkForCompleteness=()=>{if("complete"!==funnelState.current)if(loadingButtonCount.current>0)setTimeout(checkForCompleteness,100);else if(0===errorCount.current){const taskCompletionDataProps={taskIdentifier:props.funnelIdentifier,taskType:props.funnelType,timeToRespondAfterFormSubmit:performance.now()-formSubmitStartTime.current,taskInteractionId:funnelInteractionId,taskFlowType:props.funnelFlowType};onFunnelComplete(taskCompletionDataProps),funnelState.current="complete"}else funnelState.current="default"};setTimeout(checkForCompleteness,50)},funnelCancel:()=>{},submissionAttempt,funnelNextOrSubmitAttempt:()=>setSubmissionAttempt((i=>i+1)),funnelState,errorCount,loadingButtonCount,latestFocusCleanupFunction,isInFunnel:!0,wizardCount};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_context_analytics_context__WEBPACK_IMPORTED_MODULE_7__.kz.Provider,{value:funnelContextValue},children)},AnalyticsFunnelStep=props=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(InnerAnalyticsFunnelStep,Object.assign({},props,{key:props.stepNumber}));function getSubStepConfiguration(){return Array.from(document.querySelectorAll((0,_selectors__WEBPACK_IMPORTED_MODULE_5__.V4)())).map(((substep,index)=>{var _a,_b,_c,_d,_e;const subStepIdentifier=null===(_b=null===(_a=null==substep?void 0:substep.__awsuiMetadata__)||void 0===_a?void 0:_a.analytics)||void 0===_b?void 0:_b.instanceIdentifier;return{name:null!==(_e=null===(_d=null===(_c=substep.querySelector((0,_selectors__WEBPACK_IMPORTED_MODULE_5__.nu)()))||void 0===_c?void 0:_c.innerText)||void 0===_d?void 0:_d.trim())&&void 0!==_e?_e:"",number:index+1,subStepIdentifier}}))}const InnerAnalyticsFunnelStep=_a=>{var{mounted=!0,children,stepNumber,stepIdentifier,stepErrorContext}=_a,rest=(0,tslib__WEBPACK_IMPORTED_MODULE_3__.Tt)(_a,["mounted","children","stepNumber","stepIdentifier","stepErrorContext"]);const{funnelInteractionId,funnelIdentifier,funnelNameSelector,funnelState,funnelType}=(0,_hooks_use_funnel__WEBPACK_IMPORTED_MODULE_1__.oZ)(),parentStep=(0,_hooks_use_funnel__WEBPACK_IMPORTED_MODULE_1__.IU)(),parentStepExists=parentStep.isInStep,parentStepFunnelInteractionId=parentStep.funnelInteractionId,funnelStepProps={[_selectors__WEBPACK_IMPORTED_MODULE_5__.Bm]:stepNumber},subStepCount=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0),stepNameSelector=rest.stepNameSelector||funnelNameSelector,{onStepChange,subStepConfiguration}=function useStepChangeListener(stepNumber,handler){const subStepConfiguration=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new Map),listenForSubStepChanges=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const handle=setTimeout((()=>listenForSubStepChanges.current=!0),50);return()=>{clearTimeout(handle),listenForSubStepChanges.current=!1}}),[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const handle=setTimeout((()=>subStepConfiguration.current.set(stepNumber,getSubStepConfiguration())),50);return()=>{clearTimeout(handle)}}),[stepNumber]),{onStepChange:(0,_hooks_use_debounce_callback__WEBPACK_IMPORTED_MODULE_8__._)((()=>{listenForSubStepChanges.current&&(subStepConfiguration.current.set(stepNumber,getSubStepConfiguration()),handler(subStepConfiguration.current.get(stepNumber)))}),50),subStepConfiguration}}(stepNumber,(subStepConfiguration=>{funnelInteractionId&&_index__WEBPACK_IMPORTED_MODULE_2__.A2.funnelStepChange({stepIdentifier,funnelIdentifier,funnelInteractionId,stepNumber,stepNameSelector,subStepAllSelector:(0,_selectors__WEBPACK_IMPORTED_MODULE_5__.V4)(),totalSubSteps:subStepCount.current,subStepConfiguration})}));(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(!funnelInteractionId)return;if(mounted)return;const stepName=(0,_selectors__WEBPACK_IMPORTED_MODULE_5__.zP)(stepNameSelector),handler=setTimeout((()=>{"cancelled"!==funnelState.current&&_index__WEBPACK_IMPORTED_MODULE_2__.A2.funnelStepComplete({funnelIdentifier,funnelInteractionId,stepIdentifier,stepNumber,stepName,stepNameSelector,subStepAllSelector:(0,_selectors__WEBPACK_IMPORTED_MODULE_5__.V4)(),totalSubSteps:subStepCount.current})}),0);return()=>{clearTimeout(handler)}}),[stepIdentifier,funnelIdentifier,funnelInteractionId,stepNumber,stepNameSelector,funnelState,parentStepExists,funnelType,parentStepFunnelInteractionId,mounted]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(!funnelInteractionId)return;if(parentStepExists&&parentStepFunnelInteractionId)return;const stepName=(0,_selectors__WEBPACK_IMPORTED_MODULE_5__.zP)(stepNameSelector);return"default"===funnelState.current&&_index__WEBPACK_IMPORTED_MODULE_2__.A2.funnelStepStart({stepIdentifier,funnelIdentifier,funnelInteractionId,stepNumber,stepName,stepNameSelector,subStepAllSelector:(0,_selectors__WEBPACK_IMPORTED_MODULE_5__.V4)(),totalSubSteps:subStepCount.current,subStepConfiguration:getSubStepConfiguration()}),()=>{"cancelled"!==funnelState.current&&_index__WEBPACK_IMPORTED_MODULE_2__.A2.funnelStepComplete({funnelIdentifier,funnelInteractionId,stepIdentifier,stepNumber,stepName,stepNameSelector,subStepAllSelector:(0,_selectors__WEBPACK_IMPORTED_MODULE_5__.V4)(),totalSubSteps:subStepCount.current})}}),[stepIdentifier,funnelIdentifier,funnelInteractionId,stepNumber,stepNameSelector,funnelState,parentStepExists,funnelType,parentStepFunnelInteractionId]);const effectiveContextValue=parentStepExists&&parentStepFunnelInteractionId?parentStep:{stepIdentifier,stepNumber,stepNameSelector,funnelStepProps,subStepCount,isInStep:!0,funnelInteractionId,onStepChange,subStepConfiguration,stepErrorContext};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_context_analytics_context__WEBPACK_IMPORTED_MODULE_7__.q9.Provider,{value:effectiveContextValue},"function"==typeof children?children(effectiveContextValue):children)},AnalyticsFunnelSubStep=({children,subStepIdentifier,subStepErrorContext})=>{const subStepId=(0,_hooks_use_unique_id__WEBPACK_IMPORTED_MODULE_9__.Y)("substep"),subStepSelector=(0,_selectors__WEBPACK_IMPORTED_MODULE_5__.gd)(subStepId),subStepNameSelector=(0,_selectors__WEBPACK_IMPORTED_MODULE_5__.nu)(subStepId),subStepRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),{subStepCount,onStepChange}=(0,_hooks_use_funnel__WEBPACK_IMPORTED_MODULE_1__.IU)(),mousePressed=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),isFocusedSubStep=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),focusCleanupFunction=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(void 0),{funnelState,funnelInteractionId}=(0,_hooks_use_funnel__WEBPACK_IMPORTED_MODULE_1__.oZ)(),{stepNumber,stepNameSelector}=(0,_hooks_use_funnel__WEBPACK_IMPORTED_MODULE_1__.IU)(),newContext={subStepIdentifier,subStepErrorContext,subStepSelector,subStepNameSelector,subStepId,subStepRef,mousePressed,isFocusedSubStep,focusCleanupFunction,isNestedSubStep:!1},inheritedContext=Object.assign(Object.assign({},(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_analytics_context__WEBPACK_IMPORTED_MODULE_7__.OX)),{isNestedSubStep:!0}),isNested=Boolean(inheritedContext.subStepId);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(!isNested)return subStepCount.current++,onStepChange(),()=>{subStepCount.current--,onStepChange()}}),[isNested,subStepCount,onStepChange]);const context=isNested?inheritedContext:newContext;return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(isNested||!subStepRef.current)return;const controller=new AbortController;return window.addEventListener("mousedown",(()=>mousePressed.current=!0),{signal:controller.signal}),window.addEventListener("mouseup",(()=>(0,tslib__WEBPACK_IMPORTED_MODULE_3__.sH)(void 0,void 0,void 0,(function*(){var _a;mousePressed.current=!1,isFocusedSubStep.current&&(yield new Promise((r=>setTimeout(r,1))),subStepRef.current&&document.activeElement&&(0,_utils_node_belongs__WEBPACK_IMPORTED_MODULE_10__.t)(subStepRef.current,document.activeElement)||(isFocusedSubStep.current=!1,null===(_a=focusCleanupFunction.current)||void 0===_a||_a.call(focusCleanupFunction)))}))),{signal:controller.signal}),()=>{controller.abort()}}),[funnelInteractionId,funnelState,stepNameSelector,stepNumber,subStepNameSelector,subStepSelector,focusCleanupFunction,isNested,subStepRef]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_context_analytics_context__WEBPACK_IMPORTED_MODULE_7__.OX.Provider,{value:context},"function"==typeof children?children(context):children)}},"../../node_modules/@cloudscape-design/components/internal/debounce.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>debounce});const DEBOUNCE_DEFAULT_DELAY=200;function debounce(func,delay=DEBOUNCE_DEFAULT_DELAY){let timeout;return function(...args){timeout&&clearTimeout(timeout),timeout=setTimeout((()=>{timeout=null,func(...args)}),delay)}}},"../../node_modules/@cloudscape-design/components/internal/hooks/use-debounce-callback/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>useDebounceCallback});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_debounce__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@cloudscape-design/components/internal/debounce.js");function useDebounceCallback(callback,delay){const callbackRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();return callbackRef.current=callback,(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((0,_debounce__WEBPACK_IMPORTED_MODULE_1__.A)(((...args)=>{callbackRef.current&&callbackRef.current(...args)}),delay),[])}}}]);