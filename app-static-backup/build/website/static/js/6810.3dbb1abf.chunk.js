"use strict";(self.webpackChunk_aws_threat_composer_app=self.webpackChunk_aws_threat_composer_app||[]).push([[6810],{6810:(t,e,a)=>{a.r(e),a.d(e,{default:()=>h});var r=a(25714),s=a(72176),i=a(14571),d=a(43565),n=a(18816),c=a(98784),o=a(80812);const h=()=>{const{threatId:t}=(0,i.g)(),e=(0,i.zy)(),a=(0,n.A)(),[h]=(0,s.useState)((()=>{var t;if((0,c.A)())return null===(t=e.state)||void 0===t?void 0:t.idToCopy;return new URLSearchParams(window.location.search).get("idToCopy")})),[{threatPackId:l,threatPackThreatId:u,fieldKey:f,fieldValue:p}]=(0,s.useState)((()=>{var t,a,r,s;if((0,c.A)())return{threatPackId:null===(t=e.state)||void 0===t?void 0:t.threatPackId,threatPackThreatId:null===(a=e.state)||void 0===a?void 0:a.threatPackThreatId,fieldKey:null===(r=e.state)||void 0===r?void 0:r.fieldKey,fieldValue:null===(s=e.state)||void 0===s?void 0:s.fieldValue};const i=new URLSearchParams(window.location.search);return{threatPackId:i.get("threatPackId"),threatPackThreatId:i.get("threatPackThreatId"),fieldKey:i.get("fieldKey"),fieldValue:i.get("fieldValue")}})),{statementList:k,setEditingStatement:T}=(0,r.useThreatsContext)(),{threatPacks:I}=(0,r.useThreatPacksContext)(),[_]=(0,s.useState)((()=>{let e=(0,r.getNewThreatStatement)();if(t===r.DEFAULT_NEW_ENTITY_ID&&h){const t=k.find((t=>t.id===h));if(t){const{id:a,displayOrder:r,tags:s,metadata:i,...d}=t;e={...d,...e}}}else if(t===r.DEFAULT_NEW_ENTITY_ID&&l&&u){const t=I.find((t=>t.id===l));if(t){var a;const s=null===(a=t.threats)||void 0===a?void 0:a.find((t=>t.id===u));s&&(e=(0,r.getThreatFromThreatPacksThreat)(l,s))}}else if(t){const a=k.find((e=>e.id===t));a?e=a:f&&p&&(e={...e,id:t,[f]:"impactedAssets"===f?[p]:p})}return e}));(0,s.useEffect)((()=>{T(_)}),[_]);const[P]=(0,s.useState)((()=>{if(f)switch(f){case"threatSource":return"threat_source";case"prerequisites":return"prerequisites";case"threatImpact":return"threat_impact";case"impactedAssets":return"impacted_assets";case"threatAction":return"threat_action";default:return}}));return(0,o.jsx)(r.ThreatStatementEditor,{onThreatListView:()=>a(d.E9),threatPackId:l,threatPackThreatId:u,initialEditorField:P})}},18816:(t,e,a)=>{a.d(e,{A:()=>c});var r=a(25714),s=a(72176),i=a(14571),d=a(35733),n=a(94849);const c=()=>{const t=(0,i.Zp)(),[e]=(0,d.ok)(),{workspaceId:a=r.DEFAULT_WORKSPACE_ID}=(0,i.g)();return(0,s.useCallback)(((r,s,i,d,c)=>t((0,n.A)(r,e,a,s,i,d),c)),[e,a])}},94849:(t,e,a)=>{a.d(e,{A:()=>d});var r=a(13112),s=a(28613);const i=[s.a,s.J],d=(t,e,a,s,d,n)=>{const c=`${(0,r.tW)(t,{workspaceId:a,threatId:s,...d})}`,o=new URLSearchParams,h=Array.from(e.entries());h.length>0&&h.forEach((t=>{2===t.length&&i.includes(t[0])&&o.append(...t)})),n&&Object.keys(n).forEach((t=>o.append(t,n[t])));const l=o.toString();return l.length>0?`${c}?${l}`:c}}}]);
//# sourceMappingURL=6810.3dbb1abf.chunk.js.map