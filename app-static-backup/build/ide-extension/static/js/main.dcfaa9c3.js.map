{"version":3,"file":"static/js/main.dcfaa9c3.js","mappings":"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WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,YAAYA,GAAW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","sources":["../../threat-composer/src/components/mitigations/MitigationLink/index.tsx","../../threat-composer/src/hooks/useEditMetadata/index.ts","../../threat-composer/src/data/index.ts","../../threat-composer/src/contexts/BrainstormContext/useBrainstorm.ts","../../threat-composer/src/contexts/MitigationPacksContext/context.ts","../../threat-composer/src/components/workspaces/FileImport/index.tsx","../../threat-composer/src/contexts/WorkspaceExamplesContext/index.tsx","../../threat-composer/src/components/generic/Loading/index.tsx","../../threat-composer/src/components/threats/EditorLayout/styles.ts","../../threat-composer/src/components/global/InfoModal/components/Copy/index.tsx","../../threat-composer/src/components/threats/BrainstormList/index.tsx","../../threat-composer/src/components/generic/Table/components/FullDataTable/index.tsx","../../threat-composer/src/styles/svg.ts","../../threat-composer/src/hooks/useMediaQuery/index.ts","../../threat-composer/src/components/generic/TagSelector/index.tsx","../../threat-composer/src/components/brainstorm/BrainstormBoard/components/ItemColumn/columnConfig.ts","../../threat-composer/src/utils/getFieldContentByToken/index.ts","../../threat-composer/src/components/global/InfoModal/components/FullExample/index.tsx","../../threat-composer/src/contexts/AssumptionsContext/components/LocalStateContextProvider/index.tsx","../../threat-composer/src/components/threats/Suggestions/index.tsx","../../threat-composer/src/components/generic/FileUpload/utils/getDisplaySize/index.ts","../../threat-composer/src/customTypes/application.ts","../../threat-composer/src/components/generic/DashboardNumber/index.tsx","../../threat-composer/src/components/assumptions/AssumptionCard/index.tsx","../../threat-composer/src/utils/setLocalStorageKey/index.ts","../../threat-composer/src/utils/parseThreatStatement/index.ts","../../threat-composer/src/contexts/AssumptionsContext/useAssumptions.ts","../../threat-composer/src/components/brainstorm/index.ts","../../threat-composer/src/components/mitigations/MitigationCard/index.tsx","../../threat-composer/src/utils/getMetadata/index.ts","../../threat-composer/src/utils/scrollToTop/index.ts","../../threat-composer/src/utils/matchThreatPackMitigationCandidate/index.ts","../../threat-composer/src/customTypes/dataExchange.ts","../../threat-composer/src/components/workspaces/WorkspaceInsights/components/Overview/index.tsx","../../threat-composer/src/utils/convertToYaml/index.ts","../../threat-composer/src/configs/styles.ts","../../threat-composer/src/components/dataflow/DataflowInfo/index.tsx","../../threat-composer/src/contexts/BrainstormContext/components/LocalStateContextProvider/index.tsx","../../threat-composer/src/utils/convertToMarkdown/utils/getThreats/index.ts","../../threat-composer/src/components/assumptions/AssumptionLinkView/index.tsx","../../threat-composer/src/components/threats/MitigationCandidates/index.tsx","../../threat-composer/src/customTypes/appMode.ts","../../threat-composer/src/contexts/ThreatsContext/components/LocalStorageContextProvider/index.tsx","../../threat-composer/src/contexts/MitigationLinksContext/context.ts","../../threat-composer/src/contexts/AssumptionsContext/context.ts","../../threat-composer/src/utils/getNewThreatStatement/index.tsx","../../threat-composer/src/components/threats/ThreatStatementList/index.tsx","../../threat-composer/src/contexts/BrainstormContext/index.tsx","../../threat-composer/src/hooks/useContentValidation/index.tsx","../../threat-composer/src/components/threats/MetadataEditor/index.tsx","../../threat-composer/src/contexts/CrossWorkspaceContext/index.tsx","../../threat-composer/src/components/mitigations/MitigationThreatLink/index.tsx","../../threat-composer/src/contexts/WorkspaceExamplesContext/context.ts","../../threat-composer/src/utils/cleanupThreatData/index.ts","../../threat-composer/src/utils/entityTag/index.tsx","../../threat-composer/src/utils/filterThreatsByMetadata/index.tsx","../../threat-composer/src/components/generic/STRIDESelector/index.tsx","../../threat-composer/src/components/threats/EditorPrerequisites/index.tsx","../../threat-composer/src/utils/removeLocalStorageKey/index.ts","../../threat-composer/src/utils/convertToMarkdown/utils/getApplicationName/index.tsx","../../threat-composer/src/contexts/DataflowContext/components/LocalStateContextProvider/index.tsx","../../threat-composer/src/components/threats/PreviousInputList/index.tsx","../../threat-composer/src/utils/convertToMarkdown/utils/getApplicationInfo/index.tsx","../../threat-composer/src/components/generic/AssetSelector/index.tsx","../../threat-composer/src/customTypes/threatFieldTypes.ts","../../threat-composer/src/contexts/ThreatsContext/components/LocalStateContextProvider/index.tsx","../../threat-composer/src/components/threats/CustomTemplate/index.tsx","../../threat-composer/src/utils/calculateFieldCombination/index.ts","../../threat-composer/src/components/brainstorm/BrainstormBoard/components/ItemColumn/index.tsx","../../threat-composer/src/utils/convertToMarkdown/index.tsx","../../threat-composer/src/components/brainstorm/BrainstormBoard/components/DiagramModal/index.tsx","../../threat-composer/src/containers/ThreatStatementGenerator/index.tsx","../../threat-composer/src/styles/expandablePanelHeader.ts","../../threat-composer/src/components/assumptions/AssumptionMitigationLink/index.tsx","../../threat-composer/src/components/generic/ThemeProvider/index.tsx","../../threat-composer/src/components/workspaces/MitigationPack/index.tsx","../../threat-composer/src/hooks/useRemoveData/index.ts","../../threat-composer/src/contexts/DataflowContext/index.tsx","../../threat-composer/src/configs/export.ts","../../threat-composer/src/components/generic/Input/index.tsx","../../threat-composer/src/components/generic/GroupableItemCard/index.tsx","../../threat-composer/src/components/threats/EditorImpactedAssets/index.tsx","../../threat-composer/src/contexts/AssumptionLinksContext/components/LocalStorageContextProvider/index.tsx","../../threat-composer/src/hooks/index.ts","../../threat-composer/src/migrations/ThreatsMigration/index.tsx","../../threat-composer/src/utils/renderArrayField/index.ts","../../threat-composer/src/utils/index.ts","../../threat-composer/src/data/threatPacks/threatPacks.ts","../../threat-composer/src/components/workspaces/ThreatPacks/index.tsx","../../threat-composer/src/index.ts","../../threat-composer/src/components/global/InfoModal/components/Features/index.tsx","../../threat-composer/src/utils/convertToMarkdown/utils/getAssets/index.ts","../../threat-composer/src/utils/getBase64/index.ts","../../threat-composer/src/utils/getNewMitigation/index.tsx","../../threat-composer/src/utils/convertToMarkdown/utils/getAssumptions/index.ts","config/searchParams.ts","../../threat-composer/src/contexts/MitigationsContext/components/LocalStorageContextProvider/index.tsx","../../threat-composer/src/contexts/MitigationsContext/index.tsx","../../threat-composer/src/contexts/GlobalSetupContext/index.tsx","../../threat-composer/src/configs/content.ts","../../threat-composer/src/components/global/InfoModal/styles.ts","../../threat-composer/src/contexts/AssumptionsContext/index.tsx","../../threat-composer/src/contexts/MitigationLinksContext/index.tsx","../../threat-composer/src/contexts/ThreatPacksContext/context.ts","../../threat-composer/src/hooks/useWorkspaceStorage/index.ts","../../threat-composer/src/components/global/InfoModal/index.tsx","../../threat-composer/src/components/generic/CopyToClipboard/index.tsx","../../threat-composer/src/contexts/MitigationLinksContext/useMitigationLinks.ts","../../threat-composer/src/contexts/ThreatsContext/context.ts","../../threat-composer/src/components/threats/ThreatStatementCard/index.tsx","../../threat-composer/src/components/brainstorm/BrainstormBoard/components/ColumnVisibilityToggles/index.tsx","../../threat-composer/src/contexts/ContextAggregator/index.tsx","../../threat-composer/src/contexts/ThreatsContext/index.tsx","../../threat-composer/src/components/generic/GenericCard/components/Tags/index.tsx","../../threat-composer/src/customTypes/composerMode.ts","../../threat-composer/src/utils/standardizeNumericId/index.ts","../../threat-composer/src/components/brainstorm/BrainstormBoard/components/EntityCreationCard/index.tsx","../../threat-composer/src/components/threats/Metrics/index.tsx","../../threat-composer/src/contexts/ThreatsContext/hooks/useThreatExamples/index.ts","../../threat-composer/src/components/workspaces/LandingPage/index.tsx","../../threat-composer/src/components/workspaces/WorkspaceInsights/index.tsx","../../threat-composer/src/utils/isWorkspaceExample/index.ts","components/Notifications/index.tsx","hooks/useNotifications/index.tsx","../../threat-composer/src/customTypes/workspaces.ts","../../threat-composer/src/components/threats/PriorityBadge/index.tsx","../../threat-composer/src/components/threats/EditorImpactedGoal/index.tsx","../../threat-composer/src/components/generic/GenericEntityCreationCard/index.tsx","config/routes.ts","../../threat-composer/src/utils/recalculateThreatData/index.ts","../../threat-composer/src/components/generic/ThemeToggle/index.tsx","../../threat-composer/src/components/generic/Table/index.tsx","../../threat-composer/src/components/generic/BaseDiagramInfo/index.tsx","../../threat-composer/src/contexts/MitigationPacksContext/index.tsx","../../threat-composer/src/components/global/InfoModal/components/MoreFeatures/index.tsx","../../threat-composer/src/components/threats/EditorLayout/index.tsx","../../threat-composer/src/configs/status.ts","../../threat-composer/src/contexts/AssumptionsContext/components/LocalStorageContextProvider/index.tsx","../../threat-composer/src/components/index.ts","../../threat-composer/src/components/workspaces/WorkspaceHome/index.tsx","../../threat-composer/src/utils/EventController/index.ts","../../threat-composer/src/contexts/CrossWorkspaceContext/components/LocalStorageContextProvider/index.tsx","../../threat-composer/src/components/threats/FieldSelector/components/Token/index.tsx","../../threat-composer/src/contexts/WorkspacesContext/components/LocalStateContextProvider/index.tsx","../../threat-composer/src/components/architecture/ArchitectureInfo/index.tsx","../../threat-composer/src/utils/convertToMarkdown/utils/getDataFlow/index.ts","../../threat-composer/src/contexts/CrossWorkspaceContext/context.ts","../../threat-composer/src/components/assumptions/AssumptionLink/index.tsx","../../threat-composer/src/components/threats/PriorityEdit/index.tsx","../../threat-composer/src/contexts/WorkspacesContext/components/LocalStorageContextProvider/index.tsx","../../threat-composer/src/components/generic/Modal/index.tsx","../../threat-composer/src/contexts/AssumptionLinksContext/useAssumptionLinks.ts","../../threat-composer/src/data/stride.ts","../../threat-composer/src/utils/downloadContent/index.ts","../../threat-composer/src/contexts/ApplicationContext/context.ts","../../threat-composer/src/contexts/AssumptionLinksContext/index.tsx","../../threat-composer/src/utils/intersectArrays/index.ts","../../threat-composer/src/components/generic/Tooltip/index.tsx","../../threat-composer/src/components/threats/FinalStatement/index.tsx","../../threat-composer/src/components/generic/MarkdownViewer/index.tsx","../../threat-composer/src/components/threats/ThreatLinkView/index.tsx","../../threat-composer/src/components/workspaces/WorkspaceInsights/components/MitigationStatus/index.tsx","../../threat-composer/src/components/workspaces/WorkspaceInsights/components/ThreatStatus/index.tsx","../../threat-composer/src/components/workspaces/MitigationPacks/index.tsx","../../threat-composer/src/components/report/ThreatModel/index.tsx","../../threat-composer/src/components/threats/FullExamples/index.tsx","../../threat-composer/src/customTypes/architecture.ts","../../threat-composer/src/components/generic/FileUpload/components/FileTokenLabel/index.tsx","../../threat-composer/src/components/generic/Textarea/index.tsx","../../threat-composer/src/contexts/MitigationLinksContext/components/LocalStateContextProvider/index.tsx","../../threat-composer/src/components/threats/FieldSelector/components/ExpandableToken/index.tsx","../../threat-composer/src/customTypes/entities.ts","../../threat-composer/src/components/generic/ContentLayout/index.tsx","../../threat-composer/src/components/workspaces/WorkspaceInsights/hooks/useMitigationListLinkClicked/index.tsx","../../threat-composer/src/configs/metadata.ts","../../threat-composer/src/hooks/useExportImport/index.ts","../../threat-composer/src/contexts/AssumptionLinksContext/components/LocalStateContextProvider/index.tsx","../../threat-composer/src/components/assumptions/AssumptionThreatLink/index.tsx","../../threat-composer/src/contexts/index.ts","../../threat-composer/src/components/generic/CommentsEdit/index.tsx","../../threat-composer/src/components/report/ThreatModel/components/ThreatModelView/index.tsx","../../threat-composer/src/contexts/DataflowContext/context.ts","../../threat-composer/src/contexts/WorkspacesContext/useWorkspaces.ts","../../threat-composer/src/components/threats/Header/index.tsx","../../threat-composer/src/components/workspaces/ThreatPack/index.tsx","../../threat-composer/src/components/generic/Autosuggest/index.tsx","../../threat-composer/src/contexts/ArchitectureContext/index.tsx","../../threat-composer/src/components/generic/MarkdownEditor/index.tsx","../../threat-composer/src/components/mitigations/MitigationList/index.tsx","../../threat-composer/src/components/generic/Table/config.ts","../../threat-composer/src/contexts/AssumptionLinksContext/context.ts","../../threat-composer/src/utils/hasContent/index.ts","../../threat-composer/src/components/generic/GenericCard/index.tsx","../../threat-composer/src/contexts/ApplicationContext/components/LocalStateContextProvider/index.tsx","../../threat-composer/src/customTypes/referencePacks.ts","../../threat-composer/src/components/generic/Table/components/Header/index.tsx","../../threat-composer/src/components/global/InfoModal/components/Intro/index.tsx","../../threat-composer/src/styles/image.ts","../../threat-composer/src/utils/parseTableCellContent/index.ts","../../threat-composer/src/components/workspaces/ThreatPack/components/GeneralInfo/index.tsx","../../threat-composer/src/contexts/BrainstormContext/context.ts","../../threat-composer/src/components/workspaces/WorkspaceInsights/components/ThreatPrioritization/index.tsx","../../threat-composer/src/contexts/WorkspaceContextAggregator/index.tsx","../../threat-composer/src/containers/index.ts","../../threat-composer/src/components/threats/EditorThreatSource/index.tsx","../../threat-composer/src/contexts/ArchitectureContext/components/LocalStateContextProvider/index.tsx","../../threat-composer/src/components/brainstorm/BrainstormBoard/index.tsx","../../threat-composer/src/components/threats/Metrics/components/Status/index.tsx","../../threat-composer/src/components/global/InfoModal/components/Selector/index.tsx","../../threat-composer/src/data/threatFieldData.ts","../../threat-composer/src/contexts/MitigationsContext/components/LocalStateContextProvider/index.tsx","../../threat-composer/src/customTypes/dataflow.ts","../../threat-composer/src/components/workspaces/EditWorkspace/index.tsx","../../threat-composer/src/components/generic/LinkedEntityFilter/index.tsx","../../threat-composer/src/styles/print.ts","../../threat-composer/src/components/generic/StatusBadge/index.tsx","../../threat-composer/src/contexts/DataflowContext/components/LocalStorageContextProvider/index.tsx","../../threat-composer/src/utils/getMobileMediaQuery/index.tsx","../../threat-composer/src/contexts/ThreatsContext/hooks/useThreats/index.ts","../../threat-composer/src/customTypes/assumptions.ts","../../threat-composer/src/utils/getExportFileName/index.ts","../../threat-composer/src/utils/validateData/index.ts","../../threat-composer/src/components/generic/FileUpload/index.tsx","../../threat-composer/src/utils/getThreatFromThreatPacksThreat/index.ts","../../threat-composer/src/utils/sanitizeHtml/index.ts","../../threat-composer/src/components/threats/EditorThreatAction/index.tsx","../../threat-composer/src/data/threatStatementFormat.ts","../../threat-composer/src/utils/convertToMarkdown/utils/getMitigations/index.ts","../../threat-composer/src/components/workspaces/WorkspaceInsights/components/STRIDEAllocation/index.tsx","../../threat-composer/src/components/threats/ThreatStatementEditor/index.tsx","../../threat-composer/src/migrations/WorkspacesMigration/index.tsx","../../threat-composer/src/components/generic/EntityMetadataEditor/index.tsx","../../threat-composer/src/configs/localStorageKeys.ts","../../threat-composer/src/customTypes/index.ts","../../threat-composer/src/contexts/ThreatPacksContext/index.tsx","../../threat-composer/src/components/mitigations/MitigationLinkView/index.tsx","../../threat-composer/src/components/generic/LevelSelector/index.tsx","../../threat-composer/src/components/generic/WindowExporter/index.tsx","../../threat-composer/src/components/application/ApplicationInfo/index.tsx","../../threat-composer/src/components/threats/SortBy/index.tsx","../../threat-composer/src/customTypes/mitigations.ts","../../threat-composer/src/components/assumptions/AssumptionCreationCard/index.tsx","../../threat-composer/src/components/global/InfoModal/components/GetStarted/index.tsx","../../threat-composer/src/components/generic/StatusSelector/index.tsx","../../threat-composer/src/components/generic/FileUpload/utils/getDisplayLastModified/index.ts","../../threat-composer/src/components/assumptions/AssumptionList/index.tsx","../../threat-composer/src/contexts/ArchitectureContext/context.ts","../../threat-composer/src/utils/getRecommandedEditor/index.ts","../../threat-composer/src/configs/options.ts","../../threat-composer/src/contexts/BrainstormContext/components/LocalStorageContextProvider/index.tsx","../../threat-composer/src/data/workspaceExamples/workspaceExamples.ts","../../threat-composer/src/hooks/useCloneWorkspace/index.ts","../../threat-composer/src/contexts/GlobalSetupContext/context.ts","../../threat-composer/src/configs/appMode.ts","../../threat-composer/src/components/global/InfoModal/components/InfoModalBase/index.tsx","../../threat-composer/src/components/generic/Table/components/EmptyState/index.tsx","../../threat-composer/src/utils/escapeMarkdown/index.ts","../../threat-composer/src/components/global/InfoModal/components/Editor/index.tsx","../../threat-composer/src/contexts/MitigationsContext/useMitigations.ts","../../threat-composer/src/contexts/MitigationsContext/context.ts","../../threat-composer/src/components/workspaces/WorkspaceInsights/components/ThreatGrammar/index.tsx","../../threat-composer/src/contexts/ApplicationContext/components/LocalStorageContextProvider/index.tsx","../../threat-composer/src/data/mitigationPacks/mitigationPacks.ts","../../threat-composer/src/utils/correctIndefiniteArticle/index.ts","../../threat-composer/src/contexts/WorkspacesContext/index.tsx","routes/initialWorkspaceLoader.tsx","routes/index.tsx","containers/App/components/Full/index.tsx","components/NavHeader/index.tsx","components/StandaloneAppLayout/index.tsx","containers/App/components/Standalone/index.tsx","utils/getComposerMode/index.tsx","containers/App/index.tsx","reportWebVitals.ts","serviceWorkerRegistration.ts","index.tsx","../../threat-composer/src/components/workspaces/WorkspaceSelector/index.tsx","../../threat-composer/src/configs/constants.ts","../../threat-composer/src/components/threats/FieldSelector/index.tsx","../../threat-composer/src/components/workspaces/MitigationPack/components/GeneralInfo/index.tsx","../../threat-composer/src/contexts/ApplicationContext/index.tsx","../../threat-composer/src/components/threats/EditorThreatImpact/index.tsx","../../threat-composer/src/utils/getNewAssumption/index.tsx","../../threat-composer/src/contexts/ArchitectureContext/components/LocalStorageContextProvider/index.tsx","../../threat-composer/src/contexts/WorkspacesContext/context.ts","../../threat-composer/src/contexts/WorkspacesContext/useCurrentWorkspace.ts","../../threat-composer/src/components/mitigations/MitigationCreationCard/index.tsx","../../threat-composer/src/contexts/constants.ts","../../threat-composer/src/customTypes/threats.ts","../../threat-composer/src/utils/convertToMarkdown/utils/getArchitecture/index.ts","../../threat-composer/src/configs/index.ts","../../threat-composer/src/components/generic/ImageEdit/index.tsx","../../threat-composer/src/utils/renderThreatStatement/index.ts","../../threat-composer/src/components/threats/ExampleList/index.tsx","../../threat-composer/src/customTypes/brainstorm.ts","../../threat-composer/src/configs/events.ts","../../threat-composer/src/contexts/ThreatsContext/utils.ts","../../threat-composer/src/components/workspaces/WorkspaceInsights/hooks/useThreatListLinkClicked/index.tsx","utils/isMemoryRouterUsed/index.ts","../../threat-composer/src/utils/shuffle/index.ts","../../threat-composer/src/contexts/MitigationLinksContext/components/LocalStorageContextProvider/index.tsx","../webpack/bootstrap","../webpack/runtime/amd define","../webpack/runtime/chunk loaded","../webpack/runtime/compat get default export","../webpack/runtime/create fake namespace object","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/load script","../webpack/runtime/make namespace object","../webpack/runtime/node module decorator","../webpack/runtime/publicPath","../webpack/runtime/jsonp chunk loading","../webpack/runtime/nonce","../webpack/startup"],"sourcesContent":["/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, useCallback, useEffect, useState } from 'react';\nimport { useMitigationLinksContext } from '../../../contexts/MitigationLinksContext/context';\nimport { useMitigationsContext } from '../../../contexts/MitigationsContext/context';\nimport { MitigationLink } from '../../../customTypes';\nimport getNewMitigation from '../../../utils/getNewMitigation';\nimport MitigationLinkView from '../MitigationLinkView';\n\nexport interface MitigationLinkProps {\n  linkedEntityId: string;\n}\n\nconst MitigationLinkComponent: FC<MitigationLinkProps> = ({\n  linkedEntityId,\n}) => {\n  const { mitigationList, saveMitigation } = useMitigationsContext();\n  const [mitigationLinks, setMitigationLinks] = useState<MitigationLink[]>([]);\n\n  const { getLinkedMitigationLinks } = useMitigationLinksContext();\n\n  useEffect(() => {\n    const _mitigationLinks = getLinkedMitigationLinks(linkedEntityId);\n    setMitigationLinks(_mitigationLinks || []);\n  }, [getLinkedMitigationLinks, linkedEntityId]);\n\n  const {\n    addMitigationLink,\n    removeMitigationLink,\n  } = useMitigationLinksContext();\n\n  const handleAddMitigationLink = useCallback((mitigationIdOrNewMitigation: string) => {\n    if (mitigationList.find(m => m.id === mitigationIdOrNewMitigation)) {\n      addMitigationLink({\n        linkedId: linkedEntityId,\n        mitigationId: mitigationIdOrNewMitigation,\n      });\n    } else {\n      const newMitigation = saveMitigation(getNewMitigation(mitigationIdOrNewMitigation));\n      addMitigationLink({\n        linkedId: linkedEntityId,\n        mitigationId: newMitigation.id,\n      });\n    }\n  }, [linkedEntityId, mitigationList, addMitigationLink, saveMitigation]);\n\n  return (<MitigationLinkView\n    mitigationList={mitigationList}\n    linkedMitigationIds={mitigationLinks.map(ml => ml.mitigationId)}\n    onAddMitigationLink={handleAddMitigationLink}\n    onRemoveMitigationLink={(mitigationId) => removeMitigationLink(mitigationId, linkedEntityId)}\n  />);\n};\n\nexport default MitigationLinkComponent;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useCallback } from 'react';\nimport { EntityBase } from '../../customTypes';\n\nconst useEditMetadata = <T extends EntityBase>(onSaveEntity?: (updated: T) => void) => {\n  return useCallback((entity: T, key: string, value: string | string[] | undefined) => {\n    const updatedEntity = {\n      ...entity,\n      metadata: [...entity.metadata || []],\n    };\n    if (value) {\n      const prevIndex = updatedEntity.metadata.findIndex(x => x.key === key);\n      if (prevIndex >= 0) {\n        updatedEntity.metadata = [\n          ...updatedEntity.metadata.slice(0, prevIndex),\n          ...[{ key, value }],\n          ...updatedEntity.metadata.slice(prevIndex + 1),\n        ];\n      } else {\n        updatedEntity.metadata.push({ key, value });\n      }\n    } else {\n      updatedEntity.metadata = updatedEntity.metadata.filter(m => m.key !== key);\n    }\n\n    onSaveEntity?.(updatedEntity);\n  }, [onSaveEntity]);\n\n};\n\nexport default useEditMetadata;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport { default as threatStatus } from './status/threatStatus.json';\nexport { default as mitigationStatus } from './status/mitigationStatus.json';","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useCallback } from 'react';\nimport { BrainstormData, BrainstormItem } from '../../customTypes/brainstorm';\n\nconst initialState: BrainstormData = {\n  assumptions: [],\n  threatSources: [],\n  threatPrerequisites: [],\n  threatActions: [],\n  threatImpacts: [],\n  assets: [],\n  mitigations: [],\n};\n\nconst useBrainstorm = (\n  brainstormData: BrainstormData,\n  setBrainstormData: React.Dispatch<React.SetStateAction<BrainstormData>>,\n) => {\n  const addItem = useCallback((type: keyof BrainstormData, content: string) => {\n    setBrainstormData(prev => ({\n      ...prev,\n      [type]: [\n        ...(prev[type] || []),\n        {\n          id: crypto.randomUUID(),\n          content,\n          createdAt: new Date().toISOString(),\n          createdBy: undefined, // Will be set by the application when known\n        },\n      ],\n    }));\n  }, [setBrainstormData]);\n\n  const updateItem = useCallback((type: keyof BrainstormData, id: string, content: string) => {\n    setBrainstormData(prev => ({\n      ...prev,\n      [type]: (prev[type] || []).map((item: BrainstormItem) =>\n        item.id === id ? { ...item, content } : item,\n      ),\n    }));\n  }, [setBrainstormData]);\n\n  const removeItem = useCallback((type: keyof BrainstormData, id: string) => {\n    setBrainstormData(prev => ({\n      ...prev,\n      [type]: (prev[type] || []).filter((item: BrainstormItem) => item.id !== id),\n    }));\n  }, [setBrainstormData]);\n\n  const groupItems = useCallback((type: keyof BrainstormData, sourceId: string, targetId: string) => {\n    setBrainstormData(prev => {\n      const items = prev[type] || [];\n      const sourceItem = items.find(item => item.id === sourceId);\n      const targetItem = items.find(item => item.id === targetId);\n\n      if (!sourceItem || !targetItem || sourceId === targetId) {\n        return prev;\n      }\n\n      // Determine the target group ID\n      let targetGroupId: string;\n\n      if (targetItem.groupId) {\n        // Target is part of a group, use its group ID\n        targetGroupId = targetItem.groupId;\n      } else if (sourceItem.groupId) {\n        // Source is part of a group, target is individual - use source's group ID\n        targetGroupId = sourceItem.groupId;\n      } else {\n        // Both are individual items, create new group\n        targetGroupId = crypto.randomUUID();\n      }\n\n      return {\n        ...prev,\n        [type]: items.map((currentItem: BrainstormItem) => {\n          // If source item is part of a group, merge all items from source group into target group\n          if (sourceItem.groupId && currentItem.groupId === sourceItem.groupId) {\n            return {\n              ...currentItem,\n              groupId: targetGroupId,\n            };\n          } else if (currentItem.id === targetId && !currentItem.groupId) {\n            // If target item is individual, add it to the group\n            return {\n              ...currentItem,\n              groupId: targetGroupId,\n            };\n          } else if (currentItem.id === sourceId && !currentItem.groupId) {\n            // If source item is individual, add it to the target group\n            return {\n              ...currentItem,\n              groupId: targetGroupId,\n            };\n          }\n          return currentItem;\n        }),\n      };\n    });\n  }, [setBrainstormData]);\n\n  const ungroupItem = useCallback((type: keyof BrainstormData, id: string) => {\n    setBrainstormData(prev => {\n      const items = prev[type] || [];\n      const targetItem = items.find(item => item.id === id);\n\n      if (!targetItem || !targetItem.groupId) {\n        return prev;\n      }\n\n      const groupId = targetItem.groupId;\n      const itemsInGroup = items.filter(item => item.groupId === groupId);\n\n      return {\n        ...prev,\n        [type]: items.map((currentItem: BrainstormItem) => {\n          if (currentItem.id === id) {\n            // Remove grouping info from this item\n            const { groupId: _, ...ungroupedItem } = currentItem;\n            return ungroupedItem;\n          } else if (currentItem.groupId === groupId && itemsInGroup.length === 2) {\n            // If removing this item leaves only one item in the group, ungroup the remaining item too\n            const { groupId: __, ...ungroupedItem } = currentItem;\n            return ungroupedItem;\n          }\n          return currentItem;\n        }),\n      };\n    });\n  }, [setBrainstormData]);\n\n  const getGroupedItems = useCallback((type: keyof BrainstormData, groupId: string) => {\n    const items = brainstormData[type] || [];\n    return items.filter(item => item.groupId === groupId);\n  }, [brainstormData]);\n\n  // Get display items with proper grouping and ordering\n  const getDisplayItems = useCallback((type: keyof BrainstormData) => {\n    const items = brainstormData[type] || [];\n    const groupMap = new Map<string, BrainstormItem[]>();\n    const individualItems: BrainstormItem[] = [];\n\n    // Group items by groupId\n    items.forEach(item => {\n      if (item.groupId) {\n        if (!groupMap.has(item.groupId)) {\n          groupMap.set(item.groupId, []);\n        }\n        groupMap.get(item.groupId)!.push(item);\n      } else {\n        individualItems.push(item);\n      }\n    });\n\n    // Sort items within each group by creation time\n    groupMap.forEach(itemsInGroup => {\n      itemsInGroup.sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n    });\n\n    // Create display items with proper ordering\n    const result: Array<{ item: BrainstormItem; groupedItems: BrainstormItem[]; earliestCreatedAt: Date }> = [];\n\n    // Add individual items with their creation time\n    individualItems.forEach(item => {\n      result.push({\n        item,\n        groupedItems: [],\n        earliestCreatedAt: new Date(item.createdAt),\n      });\n    });\n\n    // Add groups represented by their earliest item\n    groupMap.forEach(itemsInGroup => {\n      if (itemsInGroup.length > 0) {\n        const earliestItem = itemsInGroup[0]; // Already sorted by creation time\n        result.push({\n          item: earliestItem,\n          groupedItems: itemsInGroup,\n          earliestCreatedAt: new Date(earliestItem.createdAt),\n        });\n      }\n    });\n\n    // Sort all display items by their earliest creation time to maintain original order\n    result.sort((a, b) => a.earliestCreatedAt.getTime() - b.earliestCreatedAt.getTime());\n\n    return result.map(({ item, groupedItems }) => ({ item, groupedItems }));\n  }, [brainstormData]);\n\n  // Alias for backward compatibility\n  const mergeGroups = groupItems;\n\n  return {\n    addItem,\n    updateItem,\n    removeItem,\n    groupItems,\n    ungroupItem,\n    getGroupedItems,\n    getDisplayItems,\n    mergeGroups,\n  };\n};\n\nexport default useBrainstorm;\nexport { initialState };\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useContext, createContext } from 'react';\nimport { Mitigation, MitigationPack, MitigationPackUsage } from '../../customTypes';\n\nexport interface MitigationPacksContextApi {\n  mitigationPacks: MitigationPack[];\n  mitigationPackUsage: MitigationPackUsage;\n  getMitigationPack: (id: string) => Promise<MitigationPack | undefined>;\n  addMitigations: (mitigationPackId: string, mitigations: Mitigation[]) => Promise<void>;\n}\n\nconst initialState: MitigationPacksContextApi = {\n  mitigationPacks: [],\n  mitigationPackUsage: {},\n  getMitigationPack: () => Promise.resolve({\n    id: '0',\n    name: '',\n    description: '',\n    mitigations: [],\n  }),\n  addMitigations: () => Promise.resolve(),\n};\n\nexport const MitigationPacksContext = createContext<MitigationPacksContextApi>(initialState);\n\nexport const useMitigationPacksContext = () => useContext(MitigationPacksContext);","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Alert from '@cloudscape-design/components/alert';\nimport Box from '@cloudscape-design/components/box';\nimport Button from '@cloudscape-design/components/button';\nimport Modal from '@cloudscape-design/components/modal';\nimport ProgressBar from '@cloudscape-design/components/progress-bar';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport React, { FC, useCallback, useEffect, useMemo, useState } from 'react';\nimport { DataExchangeFormat } from '../../../customTypes';\nimport useImportExport from '../../../hooks/useExportImport';\n\nimport FileUpload from '../../generic/FileUpload';\n\nexport interface FileImportProps {\n  composerMode: string;\n  visible: boolean;\n  setVisible: React.Dispatch<React.SetStateAction<boolean>>;\n  onImport: (data: DataExchangeFormat) => void;\n  onExport: () => void;\n  onPreview?: (data: DataExchangeFormat) => void;\n  onPreviewClose?: () => void;\n}\n\nconst FileImport: FC<FileImportProps> = ({\n  composerMode,\n  visible,\n  setVisible,\n  onImport,\n  onExport,\n  onPreview,\n  onPreviewClose,\n}) => {\n  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\n  const [data, setData] = useState<DataExchangeFormat>();\n  const [error, setError] = useState<string>();\n  const [loading, setLoading] = useState(false);\n  const [loadingPercentage, setLoadingPercentage] = useState(0);\n  const { parseImportedData } = useImportExport();\n\n  const handleImport = useCallback((files: File[]) => {\n    setError('');\n    setData(undefined);\n    setLoading(true);\n\n    if (files.length > 0) {\n      const file = files[0];\n      const reader = new FileReader();\n\n      reader.addEventListener('load', (event) => {\n        const result = event.target?.result;\n        setError('');\n        try {\n          const importedData = parseImportedData(JSON.parse(result as string));\n          setData(importedData);\n        } catch (e: any) {\n          setError(e.message);\n        } finally {\n          setLoading(false);\n        }\n      });\n\n      reader.addEventListener('progress', (event) => {\n        if (event.loaded && event.total) {\n          const percent = (event.loaded / event.total) * 100;\n          setLoadingPercentage(percent);\n        }\n      });\n\n      reader.readAsText(file);\n    }\n  }, []);\n\n  const handleConfirmImport = useCallback(() => {\n    data && onImport(data);\n    setSelectedFiles([]);\n    setVisible(false);\n    onPreviewClose?.();\n  }, [onImport, data, onPreviewClose]);\n\n  useEffect(() => {\n    selectedFiles && selectedFiles.length > 0 && handleImport(selectedFiles);\n  }, [selectedFiles]);\n\n  const handlePreview = useCallback(() => {\n    data && onPreview?.(data);\n  }, [data]);\n\n  const footer = useMemo(() => {\n    return (<Box float=\"right\">\n      <SpaceBetween direction=\"horizontal\" size=\"xs\">\n        <Button variant=\"link\" onClick={() => {\n          setVisible(false);\n          onPreviewClose?.();\n        }}>Cancel</Button>\n        {onPreview && <Button onClick={handlePreview} disabled={!data}>\n          Preview\n        </Button>}\n        <Button variant=\"primary\" disabled={!data} onClick={() => handleConfirmImport()}>Import</Button>\n      </SpaceBetween>\n    </Box>);\n  }, [setVisible, handleConfirmImport, onPreview, onPreviewClose]);\n\n  return <Modal\n    visible={visible}\n    footer={footer}\n    onDismiss={() => {\n      setVisible(false);\n      onPreviewClose?.();\n    }}\n  >\n    <SpaceBetween direction=\"vertical\" size=\"m\">\n      <Alert\n        action={\n          <Button\n            onClick={() => onExport()}\n          >\n            Export data\n          </Button>\n        }\n        statusIconAriaLabel=\"Warning\"\n        type=\"warning\"\n        key=\"override-warning\">\n        <TextContent>Importing data will override all the data in current workspace. This action cannot be undone.<br />\n          You can export the data to a json file as backup or create a new <b>workspace</b>.\n        </TextContent>\n      </Alert>\n      <Alert\n        statusIconAriaLabel=\"Warning\"\n        type=\"warning\"\n        key=\"content-warning\">\n        <TextContent>Only import content from trusted sources.</TextContent>\n      </Alert>\n      <FileUpload key='fileUpload' accept='application/json' files={selectedFiles} onChange={setSelectedFiles} />\n      {loading && <ProgressBar\n        key='progress-bar'\n        value={loadingPercentage}\n        label=\"Loading file\"\n      />}\n      {error && <Alert key=\"error\" statusIconAriaLabel=\"Error\" type=\"error\" >\n        {error}\n      </Alert>}\n      {!onPreview && composerMode !== 'Full' && data && data.threats && data.threats.length > 0 && <Alert key=\"info\" statusIconAriaLabel=\"Info\" type=\"info\" >\n        {data.threats.length} threat statement loaded\n      </Alert>}\n    </SpaceBetween>\n  </Modal>;\n};\n\nexport default FileImport;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport { FC, PropsWithChildren, useCallback, useMemo } from 'react';\nimport { WorkspaceExamplesContext, useWorkspaceExamplesContext } from './context';\nimport { EXAMPLES_WORKSPACE_ID_PREFIX, STORAGE_LOCAL_STATE } from '../../configs';\nimport workspaceExamplesData from '../../data/workspaceExamples/workspaceExamples';\n\nconst WorkspaceExamplesContextProvider: FC<PropsWithChildren<{}>> = ({\n  children,\n}) => {\n  const workspaceExamples = useMemo(() => {\n    return workspaceExamplesData.map(x => ({\n      ...x,\n      id: `${EXAMPLES_WORKSPACE_ID_PREFIX}${x.name.replace(/\\s/g, '')}`,\n      storageType: STORAGE_LOCAL_STATE,\n    }));\n  }, [workspaceExamplesData]);\n\n  const handleGetWorkspaceExample = useCallback((workspaceExampleId?: string | null) => {\n    if (workspaceExampleId) {\n      return workspaceExamples.find(x => x.id === workspaceExampleId);\n    }\n\n    return undefined;\n  }, [workspaceExamples]);\n\n  return (<WorkspaceExamplesContext.Provider value={{\n    workspaceExamples,\n    getWorkspaceExample: handleGetWorkspaceExample,\n  }}>\n    {children}\n  </WorkspaceExamplesContext.Provider>);\n};\n\nexport default WorkspaceExamplesContextProvider;\n\nexport {\n  useWorkspaceExamplesContext,\n};\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Spinner from '@cloudscape-design/components/spinner';\nimport { css } from '@emotion/react';\n\nconst styles = {\n  container: css({\n    width: '100%',\n    height: '100px',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  }),\n};\n\nconst Loading = () => {\n  return (<div css={styles.container}>\n    <Spinner size=\"large\"/>\n  </div>);\n};\n\nexport default Loading;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\n\nconst styles = {\n  container: css({\n    marginTop: awsui.spaceScaledL,\n    marginBottom: awsui.spaceScaledXxxl,\n  }),\n  textEditorLayout: css({\n    position: 'relative',\n  }),\n  input: css({\n    display: 'inline-block',\n    width: '100%',\n  }),\n  inputClear: css({\n    position: 'absolute',\n    float: 'right',\n    top: '10px',\n    right: '5px',\n  }),\n  inputClearSmall: css({\n    position: 'absolute',\n    float: 'right',\n    top: '1px',\n    right: '5px',\n  }),\n};\n\nexport default styles;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { FC } from 'react';\nimport threatStatementCopy from '../../../../../assets/threat-statement-copy.png';\nimport styles from '../../styles';\nimport InfoModalBase from '../InfoModalBase';\n\nconst InfoModalCopy: FC = () => {\n  return (<InfoModalBase>\n    <img css={css(styles.image)} src={threatStatementCopy} alt=\"ThreatStatementCopyPaste\"/>\n  </InfoModalBase>);\n};\n\nexport default InfoModalCopy;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport Grid from '@cloudscape-design/components/grid';\nimport Input from '@cloudscape-design/components/input';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport { useMemo, useState } from 'react';\nimport { BrainstormItem } from '../../../customTypes/brainstorm';\n\nexport const DEFAULT_NUM_DISPLAY = 5;\n\nconst styles = {\n  list: css({\n    '& button': {\n      padding: `0px ${awsui.spaceStaticXxs} !important`,\n    },\n  }),\n};\n\nexport interface BrainstormListProps {\n  items: BrainstormItem[];\n  onSelect: (content: string) => void;\n  showSearch?: boolean;\n}\n\nconst BrainstormList: React.FC<BrainstormListProps> = ({\n  items,\n  onSelect,\n  showSearch = true,\n}) => {\n  const [showMoreItems, setShowMoreItems] = useState(false);\n  const [filterText, setFilterText] = useState('');\n\n  const filteredItems = useMemo(() => {\n    if (!filterText) {\n      return items;\n    }\n\n    return items.filter(item =>\n      item.content.toLowerCase().includes(filterText.toLowerCase()),\n    );\n  }, [items, filterText]);\n\n  return (\n    <TextContent>\n      <SpaceBetween direction='vertical' size='m'>\n        <span>From brainstorm</span>\n        {showSearch && (\n          <Grid gridDefinition={[{ colspan: { default: 12, xxs: 6 } }]}>\n            <Input\n              value={filterText}\n              onChange={({ detail }) => setFilterText(detail.value)}\n              placeholder='Search brainstorm items'\n            />\n          </Grid>\n        )}\n        <ul>\n          {filteredItems\n            .slice(0, showMoreItems ? undefined : DEFAULT_NUM_DISPLAY)\n            .map((item, index) => (\n              <li key={index} css={styles.list}>\n                <Button variant='link' onClick={() => onSelect(item.content)}>\n                  {item.content}\n                </Button>\n              </li>\n            ))}\n        </ul>\n        {filteredItems.length > DEFAULT_NUM_DISPLAY && (\n          <Button\n            iconName={showMoreItems ? 'treeview-collapse' : 'treeview-expand'}\n            onClick={() => setShowMoreItems(prev => !prev)}\n            variant='link'\n          >\n            {showMoreItems ? 'Show less items' : 'Show more items'}\n          </Button>\n        )}\n      </SpaceBetween>\n    </TextContent>\n  );\n};\n\nexport default BrainstormList;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useCollection } from '@cloudscape-design/collection-hooks';\nimport Button from '@cloudscape-design/components/button';\nimport { NonCancelableEventHandler } from '@cloudscape-design/components/internal/events';\nimport Pagination from '@cloudscape-design/components/pagination';\nimport TableComponent, { TableProps as CloudscapeTableProps } from '@cloudscape-design/components/table';\nimport TextFilter from '@cloudscape-design/components/text-filter';\nimport { FC, useCallback, useEffect } from 'react';\nimport {\n  DEFAULT_TRACK_BY,\n  DEFAULT_LOADING_TEXT,\n  DEFAULT_PAGINATION_LABELS,\n  DEFAULT_FILTERING_PLACEHOLDER,\n  DEFAULT_FILTERING_ARIA_LABEL,\n  getAriaLabels,\n} from '../../config';\nimport { TableProps, InternalTableProps } from '../../types';\nimport EmptyState from '../EmptyState';\nimport Header from '../Header';\n\nconst FullDataTable: FC<TableProps & InternalTableProps> = ({\n  ariaLabels,\n  columnDefinitions,\n  items: allItems,\n  disablePagination = false,\n  pagination: paginationComponent,\n  disableSettings = false,\n  preferences: collectionPreferenceComponent,\n  disableFilters = false,\n  disableRowSelect = false,\n  selectionType = 'multi',\n  filter: filterComponent,\n  selectedItems,\n  header,\n  trackBy = DEFAULT_TRACK_BY,\n  collectionPreferences,\n  onSelectionChange,\n  defaultPageIndex,\n  ...props\n}) => {\n  const { items, actions, collectionProps, filterProps, paginationProps } = useCollection(allItems, {\n    filtering: {\n      empty: <EmptyState title=\"No items\" subtitle=\"No items to display.\" />,\n      noMatch: (\n        <EmptyState\n          title=\"No matches\"\n          subtitle=\"We cant find a match.\"\n          action={<Button onClick={() => actions.setFiltering('')}>Clear filter</Button>}\n        />\n      ),\n    },\n    pagination: {\n      pageSize: collectionPreferences.pageSize,\n      defaultPage: defaultPageIndex,\n    },\n    sorting: {\n      defaultState: { sortingColumn: columnDefinitions[0] },\n    },\n    selection: {\n      defaultSelectedItems: selectedItems,\n      trackBy,\n    },\n  });\n\n  useEffect(() => {\n    actions.setSelectedItems(selectedItems || []);\n  }, [selectedItems, paginationProps.currentPageIndex, filterProps.filteringText]);\n\n  const collectionPropsOnSelectionChange = collectionProps.onSelectionChange;\n\n  const handleSelectionChange: NonCancelableEventHandler<CloudscapeTableProps.SelectionChangeDetail<any>> =\n        useCallback(\n          (event: any) => {\n            onSelectionChange?.(event);\n            collectionPropsOnSelectionChange?.(event);\n          },\n          [onSelectionChange, collectionPropsOnSelectionChange],\n        );\n\n  return (\n    <TableComponent\n      trackBy={trackBy}\n      loadingText={DEFAULT_LOADING_TEXT}\n      columnDisplay={collectionPreferences.contentDisplay}\n      wrapLines={collectionPreferences.wrapLines}\n      stripedRows={collectionPreferences.stripedRows}\n      {...props}\n      {...collectionProps}\n      onSelectionChange={handleSelectionChange}\n      selectionType={(!disableRowSelect && selectionType) || undefined}\n      ariaLabels={ariaLabels || getAriaLabels()}\n      columnDefinitions={columnDefinitions}\n      items={items || []}\n      pagination={\n        !disablePagination &&\n                (paginationComponent ?? <Pagination {...paginationProps} ariaLabels={DEFAULT_PAGINATION_LABELS} />)\n      }\n      preferences={collectionPreferenceComponent}\n      filter={\n        !disableFilters &&\n                (filterComponent ?? (\n                  <TextFilter\n                    {...filterProps}\n                    filteringPlaceholder={DEFAULT_FILTERING_PLACEHOLDER}\n                    filteringAriaLabel={DEFAULT_FILTERING_ARIA_LABEL}\n                  />\n                ))\n      }\n      header={\n        header && (\n          <Header\n            actions={props.actions}\n            info={props.info}\n            variant={props.headerVariant}\n            description={props.description}\n            allItemsLength={allItems.length}\n            selectedItemsLength={collectionProps?.selectedItems?.length}\n          >\n            {header}\n          </Header>\n        )\n      }\n    />\n  );\n};\n\nexport default FullDataTable;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\n\nconst svg = css({\n  '&>path': {\n    stroke: awsui.colorTextInteractiveDefault,\n    fill: awsui.colorTextInteractiveDefault,\n  },\n});\n\nexport default svg;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useEffect, useState } from 'react';\nimport { MOBILE_BREAKPOINT } from '../../configs';\n\nfunction useMediaQuery(query: string): boolean {\n  const getMatches = (matchQuery: string): boolean => {\n    if (typeof window !== 'undefined') {\n      return window.matchMedia(matchQuery).matches;\n    }\n    return false;\n  };\n\n  const [matches, setMatches] = useState<boolean>(getMatches(query));\n\n  function handleChange() {\n    setMatches(getMatches(query));\n  }\n\n  useEffect(() => {\n    const matchMedia = window.matchMedia(query);\n\n    // Triggered at the first client-side load and if query changes\n    handleChange();\n\n    // Listen matchMedia\n    if (matchMedia.addListener) {\n      matchMedia.addListener(handleChange);\n    } else {\n      matchMedia.addEventListener('change', handleChange);\n    }\n\n    return () => {\n      if (matchMedia.removeListener) {\n        matchMedia.removeListener(handleChange);\n      } else {\n        matchMedia.removeEventListener('change', handleChange);\n      }\n    };\n  }, [query]);\n\n  return matches;\n}\n\nexport const useMobileMediaQuery = () => useMediaQuery(`(max-width: ${MOBILE_BREAKPOINT}px)`);\n\nexport default useMediaQuery;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Multiselect from '@cloudscape-design/components/multiselect';\nimport React, { FC, useMemo } from 'react';\n\nexport interface TagSelectorProps {\n  allTags: string[];\n  selectedTags: string[];\n  setSelectedTags: React.Dispatch<React.SetStateAction<string[]>>;\n}\n\nconst TagSelector: FC<TagSelectorProps> = ({\n  allTags,\n  selectedTags,\n  setSelectedTags,\n}) => {\n  const sortedTags = useMemo(() => {\n    return allTags.sort((a, b) => {\n      return a.toLowerCase().localeCompare(b.toLowerCase());\n    });\n  }, [allTags]);\n\n  return (<Multiselect\n    tokenLimit={0}\n    selectedOptions={selectedTags.map(ia => ({\n      label: ia,\n      value: ia,\n    }))}\n    onChange={({ detail }) =>\n      setSelectedTags(detail.selectedOptions?.map(o => o.value || '') || [])\n    }\n    deselectAriaLabel={e => `Remove ${e.label}`}\n    options={sortedTags.map(g => ({\n      label: g,\n      value: g,\n    }))}\n    filteringType=\"auto\"\n    placeholder=\"Filtered by tags\"\n    selectedAriaLabel=\"Selected\"\n  />);\n};\n\nexport default TagSelector;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { BrainstormData } from '../../../../../customTypes/brainstorm';\n\nexport interface ColumnConfig {\n  id: keyof BrainstormData;\n  title: string;\n  defaultVisible: boolean;\n  description: string;\n  icon: string;\n  isPromotable?: boolean;\n  canCreateThreat?: boolean;\n  isThreatInput?: boolean;\n}\n\nexport const columnConfig: ColumnConfig[] = [\n  {\n    id: 'assumptions',\n    title: 'Assumptions',\n    defaultVisible: true,\n    description: 'Design or security assumptions that may impact threat analysis',\n    icon: 'status-info',\n    isPromotable: true,\n    canCreateThreat: false,\n    isThreatInput: false,\n  },\n  {\n    id: 'threatSources',\n    title: 'Threat Sources',\n    defaultVisible: true,\n    description: 'Actors or entities that could pose security threats',\n    icon: 'user-profile',\n    isPromotable: false,\n    canCreateThreat: true,\n    isThreatInput: true,\n  },\n  {\n    id: 'threatPrerequisites',\n    title: 'Prerequisites',\n    defaultVisible: true,\n    description: 'Conditions required for a threat to be viable',\n    icon: 'settings',\n    isPromotable: false,\n    canCreateThreat: true,\n    isThreatInput: true,\n  },\n  {\n    id: 'threatActions',\n    title: 'Threat Actions',\n    defaultVisible: true,\n    description: 'Activities performed by threat sources to exploit vulnerabilities',\n    icon: 'arrow-right',\n    isPromotable: false,\n    canCreateThreat: true,\n    isThreatInput: true,\n  },\n  {\n    id: 'threatImpacts',\n    title: 'Threat Impacts',\n    defaultVisible: true,\n    description: 'Immediate consequences if threat actions succeed',\n    icon: 'status-negative',\n    isPromotable: false,\n    canCreateThreat: true,\n    isThreatInput: true,\n  },\n  {\n    id: 'assets',\n    title: 'Assets',\n    defaultVisible: true,\n    description: 'Valuable resources that require protection',\n    icon: 'folder',\n    isPromotable: false,\n    canCreateThreat: true,\n    isThreatInput: true,\n  },\n  {\n    id: 'mitigations',\n    title: 'Mitigations',\n    defaultVisible: true,\n    description: 'Measures to reduce threat likelihood or impact',\n    icon: 'status-positive',\n    isPromotable: true,\n    canCreateThreat: false,\n    isThreatInput: false,\n  },\n];\n\n// Helper functions for working with column configuration\nexport const getThreatInputColumns = (): ColumnConfig[] => {\n  return columnConfig.filter(col => col.isThreatInput);\n};\n\nexport const getPromotableColumns = (): ColumnConfig[] => {\n  return columnConfig.filter(col => col.isPromotable);\n};\n\nexport const getThreatCreationColumns = (): ColumnConfig[] => {\n  return columnConfig.filter(col => col.canCreateThreat);\n};\n\nexport const getColumnById = (id: keyof BrainstormData): ColumnConfig | undefined => {\n  return columnConfig.find(col => col.id === id);\n};","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { TemplateThreatStatement } from '../../customTypes';\nimport { threatFieldTypeMapping, ThreatFieldTypes } from '../../customTypes/threatFieldTypes';\nimport threatFieldData from '../../data/threatFieldData';\nimport renderArrayField from '../renderArrayField';\n\nconst getFieldContentByToken = (token: ThreatFieldTypes, statement: TemplateThreatStatement): string => {\n  const fieldKey = threatFieldTypeMapping[token];\n  if (fieldKey) {\n    const value = statement[fieldKey as keyof TemplateThreatStatement];\n    if (value) {\n      if (typeof value === 'string') {\n        return value;\n      }\n\n      if (Array.isArray(value) && value.length > 0) {\n        return renderArrayField(value as string[], token === 'impacted_goal');\n      }\n    }\n  }\n\n  return threatFieldData[token]?.displayField || '';\n};\n\nexport default getFieldContentByToken;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { FC } from 'react';\nimport threatStatementFullExamples from '../../../../../assets/threat-statement-examples.png';\nimport styles from '../../styles';\nimport InfoModalBase from '../InfoModalBase';\n\nconst InfoModalFullExamples: FC = () => {\n  return (<InfoModalBase>\n    <img css={css(styles.image)} src={threatStatementFullExamples} alt=\"ThreatStatementFullExamples\"/>\n  </InfoModalBase>);\n};\n\nexport default InfoModalFullExamples;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback, useState } from 'react';\nimport { Assumption } from '../../../../customTypes';\nimport { LocalStateContextProviderBaseProps } from '../../../types';\nimport { AssumptionsContext } from '../../context';\nimport { AssumptionsContextProviderProps } from '../../types';\nimport useAssumptions from '../../useAssumptions';\n\nconst AssumptionsLocalStateContextProvider: FC<PropsWithChildren<\nAssumptionsContextProviderProps & LocalStateContextProviderBaseProps<Assumption[]>>> = ({\n  children,\n  initialValue,\n}) => {\n  const [assumptionList, setAssumptionList] = useState<Assumption[]>(initialValue || []);\n\n  const {\n    handleSaveAssumption,\n    handlRemoveAssumption,\n  } = useAssumptions(assumptionList, setAssumptionList);\n\n  const handleRemoveAllAssumptions = useCallback(async () => {\n    setAssumptionList([]);\n  }, []);\n\n  const handleDeleteWorkspace = useCallback(async (_workspaceId: string) => {\n    setAssumptionList([]);\n  }, []);\n\n  return (<AssumptionsContext.Provider value={{\n    assumptionList,\n    setAssumptionList,\n    removeAssumption: handlRemoveAssumption,\n    saveAssumption: handleSaveAssumption,\n    removeAllAssumptions: handleRemoveAllAssumptions,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </AssumptionsContext.Provider>);\n};\n\nexport default AssumptionsLocalStateContextProvider;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport ExpandableSection from '@cloudscape-design/components/expandable-section';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport { css } from '@emotion/react';\nimport { FC, useMemo, useCallback, useState } from 'react';\nimport { ThreatFieldTypes } from '../../../customTypes/threatFieldTypes';\nimport threatFieldData from '../../../data/threatFieldData';\nimport getMobileMediaQuery from '../../../utils/getMobileMediaQuery';\n\nconst styles = {\n  suggestionGroups: css({\n    display: 'table',\n  }),\n  suggestionGroup: css({\n    display: 'table-row',\n  }),\n  suggestionButtonWrapper: css({\n    'display': 'table-cell',\n    '& > button > span': {\n      whiteSpace: 'nowrap',\n    },\n    [getMobileMediaQuery()]: {\n      display: 'block',\n    },\n  }),\n  suggestion: css({\n    display: 'table-cell',\n    alignSelf: 'center',\n    [getMobileMediaQuery()]: {\n      display: 'block',\n    },\n  }),\n};\nexport interface SuggestionsProps {\n  suggestions?: string[];\n  setEditor: (type: ThreatFieldTypes) => void;\n}\n\nconst Suggestions: FC<SuggestionsProps> = ({ suggestions, setEditor }) => {\n  const [showMoresuggestions, setShowMoresuggestions] = useState(suggestions && suggestions?.length > 2);\n\n  const suggestionGroups = useMemo(() => {\n    return suggestions?.reduce((group: { [groupName: string]: string[] }, suggestion: string) => {\n      if (suggestion.indexOf('[') === 0) {\n        const endIndex = suggestion.indexOf(']');\n        const token = suggestion.slice(1, endIndex);\n        const content = suggestion.slice(endIndex + 1).trim();\n        return {\n          ...group,\n          [token]: group[token] ? [...group[token], content] : [content],\n        };\n      }\n\n      return {\n        ...group,\n        GENERAL: group.GENERAL ? [...group.GENERAL, suggestion] : [suggestion],\n      };\n    }, {});\n  }, [suggestions]);\n\n  const renderSuggestionGroup = useCallback((groups: { [groupName: string]: string[] }, token: string) => {\n    const group = groups[token];\n    return (<div key={token} css={styles.suggestionGroup}>\n      <div css={styles.suggestionButtonWrapper}>\n        <Button variant='link' onClick={() => setEditor(token as ThreatFieldTypes)}>\n          {token !== 'GENERAL' && group && threatFieldData[token]?.displayTitle}\n        </Button>\n      </div>\n      <div css={styles.suggestion}>\n        <SpaceBetween direction='vertical' size='xxxs'>\n          {group.map((r, index) => <div key={index}>- {r}</div>)}\n        </SpaceBetween>\n      </div>\n    </div>);\n  }, [setEditor]);\n\n  if (suggestions && suggestions.length > 0 && suggestionGroups) {\n    return (<ExpandableSection headerText={`Suggestions (${suggestions.length})`} defaultExpanded={true}>\n      <TextContent>\n        <div css={styles.suggestionGroups}>\n          {Object.keys(suggestionGroups)\n            .slice(0, showMoresuggestions ? Object.keys(suggestionGroups).length : 2)\n            .map((token) => renderSuggestionGroup(suggestionGroups, token))}\n        </div>\n        {Object.keys(suggestionGroups).length > 2 && (\n          <Button\n            iconName={showMoresuggestions ? 'treeview-collapse' : 'treeview-expand'}\n            onClick={() => setShowMoresuggestions(prev => !prev)}\n            variant='link'>\n            {showMoresuggestions ? 'Show less suggestions' : 'Show more suggestions'}\n          </Button>)}\n      </TextContent>\n    </ExpandableSection>);\n  }\n\n  return null;\n};\n\nexport default Suggestions;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nconst getDisplaySize = (size?: number | null) => {\n  if (!size) return undefined;\n\n  const k = 1000;\n  const dm = 2;\n  const sizes = ['bytes', 'KB', 'MB', 'GB'];\n\n  const i = Math.floor(Math.log(size) / Math.log(k));\n\n  return `${parseFloat((size / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n};\n\nexport default getDisplaySize;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { z } from 'zod';\nimport { FREE_TEXT_INPUT_MAX_LENGTH, SINGLE_FIELD_INPUT_MAX_LENGTH } from '../configs';\n\nexport const ApplicationInfoSchema = z.object({\n  /**\n   * The name of the application.\n  */\n  name: z.string().max(SINGLE_FIELD_INPUT_MAX_LENGTH).optional().describe('Application name. Plain-text'),\n  /**\n   * The description of the architecture diagram\n   */\n  description: z.string().max(FREE_TEXT_INPUT_MAX_LENGTH).optional().describe('Markdown detailed description of the application. Start your headers from H3 maximum'),\n}).strict();\n\nexport type ApplicationInfo = z.infer<typeof ApplicationInfoSchema>;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\n\nimport Icon from '@cloudscape-design/components/icon';\nimport Link, { LinkProps } from '@cloudscape-design/components/link';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { css } from '@emotion/react';\nimport { FC } from 'react';\n\nconst styles = {\n  link: css({\n    '& a': {\n      textDecoration: 'none !important',\n    },\n  }),\n};\n\nexport interface DashboardNumberProps {\n  featuredNumber: number;\n  totalNumber?: number;\n  showWarning?: boolean;\n  onLinkClicked?: LinkProps['onFollow'];\n}\n\nconst DashboardNumber: FC<DashboardNumberProps> = ({\n  showWarning, featuredNumber, totalNumber, onLinkClicked,\n}) => {\n  return <div css={styles.link}>\n    {showWarning && (totalNumber ? featuredNumber < totalNumber : featuredNumber > 0) ? (\n      <SpaceBetween direction=\"horizontal\" size=\"xxs\">\n        <Link\n          variant=\"awsui-value-large\"\n          href=\"#\"\n          onFollow={onLinkClicked}>\n          {totalNumber ? `${featuredNumber}/${totalNumber}` : featuredNumber}\n        </Link>\n        <Icon name=\"status-warning\" variant=\"warning\" />\n      </SpaceBetween>\n    ) : (\n      <Link\n        variant=\"awsui-value-large\"\n        href=\"#\"\n        onFollow={onLinkClicked}>\n        {totalNumber ? `${featuredNumber}/${totalNumber}` : featuredNumber}\n      </Link>\n    )}\n  </div>;\n};\n\nexport default DashboardNumber;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Button from '@cloudscape-design/components/button';\nimport ColumnLayout from '@cloudscape-design/components/column-layout';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport { FC, useState, useCallback } from 'react';\nimport { Assumption, AssumptionSchema } from '../../../customTypes';\nimport useEditMetadata from '../../../hooks/useEditMetadata';\nimport CopyToClipbord from '../../generic/CopyToClipboard';\nimport MetadataEditor from '../../generic/EntityMetadataEditor';\nimport GenericCard from '../../generic/GenericCard';\nimport Textarea from '../../generic/Textarea';\nimport AssumptionMitigationLink from '../AssumptionMitigationLink';\nimport AssumptionThreatLink from '../AssumptionThreatLink';\n\nexport interface AssumptionCardProps {\n  assumption: Assumption;\n  onCopy?: (id: string) => void;\n  onRemove?: (id: string) => void;\n  onEdit?: (assumption: Assumption) => void;\n  onAddTagToAssumption?: (assumption: Assumption, tag: string) => void;\n  onRemoveTagFromAssumption?: (assumption: Assumption, tag: string) => void;\n}\n\nconst AssumptionCard: FC<AssumptionCardProps> = ({\n  assumption,\n  onCopy,\n  onRemove,\n  onEdit,\n  onAddTagToAssumption,\n  onRemoveTagFromAssumption,\n}) => {\n  const [editingMode, setEditingMode] = useState(false);\n  const [editingValue, setEditingValue] = useState(assumption.content);\n\n  const handleSave = useCallback(() => {\n    const updated = {\n      ...assumption,\n      content: editingValue,\n    };\n    onEdit?.(updated);\n    setEditingMode(false);\n  }, [editingValue, assumption, onEdit]);\n\n  const handleCancel = useCallback(() => {\n    setEditingValue(assumption.content);\n    setEditingMode(false);\n  }, [assumption]);\n\n  const handleMetadataEdit = useEditMetadata(onEdit);\n\n  return (<GenericCard\n    header={`Assumption ${assumption.numericId}`}\n    entityId={assumption.id}\n    tags={assumption.tags}\n    onCopy={() => onCopy?.(assumption.id)}\n    onRemove={() => onRemove?.(assumption.id)}\n    onEdit={() => setEditingMode(true)}\n    onAddTagToEntity={(_entityId, tag) => onAddTagToAssumption?.(assumption, tag)}\n    onRemoveTagFromEntity={(_entityId, tag) => onRemoveTagFromAssumption?.(assumption, tag)}\n  >\n    <SpaceBetween direction='vertical' size='s'>\n      <ColumnLayout columns={2}>\n        {editingMode ? (\n          <SpaceBetween direction='vertical' size='s'>\n            <Textarea\n              value={editingValue}\n              onChange={({ detail }) => setEditingValue(detail.value)}\n              validateData={AssumptionSchema.shape.content.safeParse}\n              singleLine\n            />\n            <SpaceBetween direction='horizontal' size='s'>\n              <Button onClick={handleCancel}>Cancel</Button>\n              <Button variant='primary' onClick={handleSave}>Save</Button>\n            </SpaceBetween>\n          </SpaceBetween>) : (<TextContent>\n          <CopyToClipbord>\n            {assumption.content || ''}\n          </CopyToClipbord>\n        </TextContent>)}\n        <SpaceBetween direction='vertical' size='s'>\n          <AssumptionThreatLink\n            assumptionId={assumption.id}\n          />\n          <AssumptionMitigationLink\n            assumptionId={assumption.id} />\n        </SpaceBetween>\n      </ColumnLayout>\n      <MetadataEditor\n        variant='default'\n        entity={assumption}\n        onEditEntity={handleMetadataEdit}\n      />\n    </SpaceBetween>\n  </GenericCard>);\n};\n\nexport default AssumptionCard;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nconst setLocalStorageKey = (key: string, value: object) => {\n  window.localStorage.setItem(key, JSON.stringify(value));\n};\n\nexport default setLocalStorageKey;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport a from 'indefinite';\nimport { TemplateThreatStatement, ThreatFieldTypes, threatFieldTypeMapping } from '../../customTypes';\nimport correctIndefiniteArticle from '../correctIndefiniteArticle';\nimport getFieldContentByToken from '../getFieldContentByToken';\n\ninterface ThreatStatementParseArgType<T> {\n  template: string;\n  statement: TemplateThreatStatement;\n  outputProcessor: (token: string, content: string, before: string, filled: boolean) => T[];\n}\n\nconst parseThreatStatement = <T extends any>(args: ThreatStatementParseArgType<T>) => {\n  const output: T[] = [];\n  let template = args.template;\n  while (true) {\n    const startIndex = template.indexOf('[');\n    if (startIndex < 0) {\n      break;\n    }\n    let before = template.slice(0, startIndex);\n\n    const endIndex = template.indexOf(']');\n    if (endIndex < 0) {\n      break;\n    }\n    const token = template.slice(startIndex + 1, endIndex) as ThreatFieldTypes;\n    const content = correctIndefiniteArticle(getFieldContentByToken(token, args.statement));\n\n    // This is to cater for the A for the threat source.\n    if (before === 'A ') {\n      before = before.replace('A', a(content, { capitalize: true, articleOnly: true }));\n    }\n\n    before = correctIndefiniteArticle(before);\n    let value = args.statement[threatFieldTypeMapping[token]];\n\n    const filled = !!(value && (typeof value === 'string' || (Array.isArray(value) && value.length > 0)));\n\n    output.push(...args.outputProcessor(token, content, before, filled));\n\n    template = template.slice(endIndex + 1);\n  }\n\n  return output;\n};\n\nexport default parseThreatStatement;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useCallback } from 'react';\nimport { v4 as uuidV4 } from 'uuid';\nimport { DEFAULT_NEW_ENTITY_ID } from '../../configs';\nimport { Assumption } from '../../customTypes';\n\n\nconst useAssumptions = (\n  _assumptionList: Assumption[],\n  setAssumptionList: React.Dispatch<React.SetStateAction<Assumption[]>>,\n) => {\n  const handlRemoveAssumption = useCallback((id: string) => {\n    setAssumptionList((prevList) => prevList.filter(x => x.id !== id));\n  }, [setAssumptionList]);\n\n  const handleSaveAssumption = useCallback((assumption: Assumption) => {\n    let newEntity = assumption;\n    setAssumptionList((prevList) => {\n      let numericId = assumption.numericId;\n\n      // New Assumption\n      if (numericId === -1) {\n        const maxId = prevList.reduce((max: number, cur: Assumption) => {\n\n          if (cur.numericId > max) {\n            return cur.numericId;\n          }\n\n          return max;\n        }, 0);\n        numericId = maxId + 1;\n      }\n\n      let updated: Assumption = {\n        ...assumption,\n        id: assumption.id === DEFAULT_NEW_ENTITY_ID ? uuidV4() : assumption.id,\n        numericId,\n        displayOrder: numericId,\n      };\n\n      newEntity = { ...updated };\n\n      const foundIndex = prevList.findIndex(st => st.id === updated.id);\n      if (foundIndex >= 0) {\n        return [...prevList.slice(0, foundIndex), updated, ...prevList.slice(foundIndex + 1)];\n      }\n\n      return [...prevList, updated];\n    });\n    return newEntity;\n  }, [setAssumptionList]);\n\n  return {\n    handleSaveAssumption,\n    handlRemoveAssumption,\n  };\n};\n\nexport default useAssumptions;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n\nexport { default as BrainstormBoard } from './BrainstormBoard';\nexport type { NavigateToThreatHandler, BrainstormBoardProps } from './BrainstormBoard';","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Button from '@cloudscape-design/components/button';\nimport ColumnLayout from '@cloudscape-design/components/column-layout';\nimport { OptionDefinition } from '@cloudscape-design/components/internal/components/option/interfaces';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport { FC, useState, useCallback } from 'react';\nimport { MITIGATION_STATUS_COLOR_MAPPING } from '../../../configs/status';\nimport { Mitigation, MitigationSchema } from '../../../customTypes';\nimport mitigationStatus from '../../../data/status/mitigationStatus.json';\nimport useEditMetadata from '../../../hooks/useEditMetadata';\nimport AssumptionLink from '../../assumptions/AssumptionLink';\nimport CopyToClipbord from '../../generic/CopyToClipboard';\nimport MetadataEditor from '../../generic/EntityMetadataEditor';\nimport GenericCard from '../../generic/GenericCard';\nimport StatusBadge from '../../generic/StatusBadge';\nimport Textarea from '../../generic/Textarea';\nimport MitigationThreatLink from '../MitigationThreatLink';\n\nexport interface MitigationCardProps {\n  entity: Mitigation;\n  onCopy?: (id: string) => void;\n  onRemove?: (id: string) => void;\n  onEdit?: (entity: Mitigation) => void;\n  onAddTagToEntity?: (entity: Mitigation, tag: string) => void;\n  onRemoveTagFromEntity?: (entity: Mitigation, tag: string) => void;\n}\n\nconst MitigationCard: FC<MitigationCardProps> = ({\n  entity,\n  onCopy,\n  onRemove,\n  onEdit,\n  onAddTagToEntity,\n  onRemoveTagFromEntity,\n}) => {\n  const [editingMode, setEditingMode] = useState(false);\n  const [editingValue, setEditingValue] = useState(entity.content);\n\n  const handleSave = useCallback(() => {\n    const updated = {\n      ...entity,\n      content: editingValue,\n    };\n    onEdit?.(updated);\n    setEditingMode(false);\n  }, [editingValue, entity, onEdit]);\n\n  const handleCancel = useCallback(() => {\n    setEditingValue(entity.content);\n    setEditingMode(false);\n  }, [entity]);\n\n  const handleMetadataEdit = useEditMetadata(onEdit);\n\n  return (<GenericCard\n    header={`Mitigation ${entity.numericId}`}\n    entityId={entity.id}\n    tags={entity.tags}\n    onCopy={() => onCopy?.(entity.id)}\n    onRemove={() => onRemove?.(entity.id)}\n    onEdit={() => setEditingMode(true)}\n    info={<StatusBadge\n      options={mitigationStatus as OptionDefinition[]}\n      selectedOption={entity.status}\n      setSelectedOption={(option) => onEdit?.({\n        ...entity,\n        status: option,\n      })}\n      statusColorMapping={MITIGATION_STATUS_COLOR_MAPPING}\n    />}\n    onAddTagToEntity={(_entityId, tag) => onAddTagToEntity?.(entity, tag)}\n    onRemoveTagFromEntity={(_entityId, tag) => onRemoveTagFromEntity?.(entity, tag)}\n  >\n    <SpaceBetween direction='vertical' size='s'>\n      <ColumnLayout columns={2}>\n        {editingMode ? (\n          <SpaceBetween direction='vertical' size='s'>\n            <Textarea\n              value={editingValue}\n              onChange={({ detail }) => setEditingValue(detail.value)}\n              validateData={MitigationSchema.shape.content.safeParse}\n              singleLine\n            />\n            <SpaceBetween direction='horizontal' size='s'>\n              <Button onClick={handleCancel}>Cancel</Button>\n              <Button variant='primary' onClick={handleSave}>Save</Button>\n            </SpaceBetween>\n          </SpaceBetween>\n        ) : (<TextContent>\n          <CopyToClipbord>\n            {entity.content || ''}\n          </CopyToClipbord>\n        </TextContent>)}\n        <SpaceBetween direction='vertical' size='s'>\n          <MitigationThreatLink mitigationId={entity.id} />\n          <AssumptionLink\n            linkedEntityId={entity.id}\n            type='Mitigation'\n          />\n        </SpaceBetween>\n      </ColumnLayout>\n      <MetadataEditor\n        variant='default'\n        entity={entity}\n        onEditEntity={handleMetadataEdit}\n      />\n    </SpaceBetween>\n  </GenericCard>);\n};\n\nexport default MitigationCard;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { Metadata } from '../../customTypes';\n\nconst getMetadata= (metadata?: Metadata[]): {\n  [key: string]: Metadata['value'];\n} => {\n  return metadata?.reduce((obj, m) => {\n    return {\n      ...obj,\n      [m.key]: m.value,\n    };\n  }, {}) || {};\n};\n\nexport default getMetadata;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nconst scrollToTop = () => {\n  window.scrollTo({ top: 0, behavior: 'smooth' });\n};\n\nexport default scrollToTop;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { METADATA_KEY_SOURCE, METADATA_KEY_SOURCE_THREAT_PACK, METADATA_KEY_SOURCE_THREAT_PACK_MITIGATION_CANDIDATE } from '../../configs';\nimport { Mitigation } from '../../customTypes';\nimport getMetadata from '../getMetadata';\n\nconst matchThreatPackMitigationCandidate = (mitigation: Mitigation, threatPackId: string, mitigationCandiateId: string) => {\n  const metadata = getMetadata(mitigation.metadata);\n  return (metadata[METADATA_KEY_SOURCE] === METADATA_KEY_SOURCE_THREAT_PACK &&\n        metadata[METADATA_KEY_SOURCE_THREAT_PACK] === threatPackId &&\n        metadata[METADATA_KEY_SOURCE_THREAT_PACK_MITIGATION_CANDIDATE] === mitigationCandiateId\n  );\n};\n\nexport default matchThreatPackMitigationCandidate;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { z } from 'zod';\nimport { ApplicationInfoSchema } from './application';\nimport { ArchitectureInfoSchema } from './architecture';\nimport { AssumptionSchema, AssumptionLinkSchema } from './assumptions';\nimport { BrainstormDataSchema } from './brainstorm';\nimport { DataflowInfoSchema } from './dataflow';\nimport { MitigationSchema, MitigationLinkSchema } from './mitigations';\nimport { TemplateThreatStatementSchema } from './threats';\nimport { WorkspaceSchema, Workspace } from './workspaces';\nimport { EventHandler } from '../utils/EventController';\n\nexport const DataExchangeFormatSchema = z.object({\n  schema: z.number().max(1).describe('Schema version identifier'),\n  workspace: WorkspaceSchema.optional().meta({ internal: true }).describe('Workspace configuration and metadata. Reserved for backwards compatibility.'),\n  applicationInfo: ApplicationInfoSchema.optional().describe('Information about the application being threat modeled'),\n  architecture: ArchitectureInfoSchema.optional().describe('System architecture information about the application being threat modeled'),\n  dataflow: DataflowInfoSchema.optional().describe('Data flow information about the application being threat modeled'),\n  assumptions: AssumptionSchema.array().optional().describe('Assumptions about the design, threats and migations of the application being threat modeled'),\n  mitigations: MitigationSchema.array().optional().describe('Mitigations for the application being threat modeled'),\n  assumptionLinks: AssumptionLinkSchema.array().optional().describe('Links between assumptions and threats/mitigations'),\n  mitigationLinks: MitigationLinkSchema.array().optional().describe('Links between mitigations and threats'),\n  threats: TemplateThreatStatementSchema.array().optional().describe('Threats for the application being threat modeled'),\n  brainstorm: BrainstormDataSchema.optional().describe('Brainstorm data for this threat model. Including: assumptions, mitigitations, threat sources, threat prerequisites, threat actions, threat impacts, impacted goals, and impacted assets'),\n}).strict().describe('Threat Composer data exchange format schema for importing/exporting threat modeling data. This schema defines the complete structure for threat modeling sessions including application info, architecture diagrams, data flows, threats, mitigations, and assumptions. Files conforming to this schema should use the .tc.json file extension and can be imported/exported through the Threat Composer application. When generating or validating threat model data, ensure all optional fields are included when available (and additive) to provide comprehensive threat modeling coverage. For more information about Threat Composer and threat modeling best practices, visit: https://github.com/awslabs/threat-composer');\n\nexport type DataExchangeFormat = z.infer<typeof DataExchangeFormatSchema>;\n\nexport const WorkspaceExampleSchema = z.object({\n  name: z.string(),\n  value: DataExchangeFormatSchema,\n});\n\nexport const WorkspaceExampleWithIdSchema = WorkspaceExampleSchema.extend({\n  id: z.string(),\n});\n\nexport type WorkspaceExample = z.infer<typeof WorkspaceExampleSchema>;\n\nexport type WorkspaceExampleWithId = z.infer<typeof WorkspaceExampleWithIdSchema>;\n\nexport interface HasContentDetails {\n  applicationName: boolean;\n  applicationInfo: boolean;\n  architecture: boolean;\n  dataflow: boolean;\n  assumptions: boolean;\n  mitigations: boolean;\n  threats: boolean;\n}\n\nexport interface ThreatComposerNamespace {\n  getWorkspaceList?: () => Workspace[];\n  getCurrentWorkspaceMetadata?: () => Workspace | null;\n  getCurrentWorkspaceData?: () => DataExchangeFormat;\n  getCurrentWorkspaceDataMarkdown?: () => Promise<string>;\n  stringifyWorkspaceData: (arg0: any) => string;\n  setCurrentWorkspaceData?: (arg0: DataExchangeFormat) => Promise<void>;\n  switchWorkspace?: (id: string | null) => void;\n  createWorkspace?: (workspaceName: string,\n    storageType?: Workspace['storageType'],\n    metadata?: Workspace['metadata']) => Promise<Workspace>;\n  deleteWorkspace?: (id: string) => Promise<void>;\n  renameWorkspace?: (id: string, newWorkspaceName: string) => Promise<void>;\n  dispatchEvent: (event: CustomEvent) => void;\n  addEventListener: (eventName: string, eventHandler: EventHandler) => void;\n  applyDensity?: (density?: string) => void;\n  applyTheme?: (theme?: string) => void;\n}\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Badge from '@cloudscape-design/components/badge';\nimport Box from '@cloudscape-design/components/box';\nimport ColumnLayout from '@cloudscape-design/components/column-layout';\nimport { LinkProps } from '@cloudscape-design/components/link';\nimport { css } from '@emotion/react';\nimport { useMemo, FC, ReactNode } from 'react';\nimport { LEVEL_HIGH, LEVEL_LOW, LEVEL_MEDIUM, LEVEL_NOT_SET, MITIGATION_STATUS_IDENTIFIED, MITIGATION_STATUS_IN_PROGRESS, MITIGATION_STATUS_RESOLVED, MITIGATION_STATUS_RESOLVED_WILLNOTACTION, STATUS_NOT_SET, THREAT_STATUS_IDENTIFIED, THREAT_STATUS_NOT_USEFUL, THREAT_STATUS_RESOLVED } from '../../../../../configs';\nimport { useAssumptionLinksContext, useMitigationsContext } from '../../../../../contexts';\nimport { useMitigationLinksContext } from '../../../../../contexts/MitigationLinksContext';\nimport { useThreatsContext } from '../../../../../contexts/ThreatsContext';\nimport filterThreatsByMetadata from '../../../../../utils/filterThreatsByMetadata';\nimport DashboardNumber from '../../../../generic/DashboardNumber';\nimport useMitigationListLinkClicked from '../../hooks/useMitigationListLinkClicked';\nimport useThreatListLinkClicked from '../../hooks/useThreatListLinkClicked';\nimport { WorkspaceInsightsProps } from '../../types';\n\nconst styles = {\n  container: css({\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  }),\n  contentContainer: css({\n    flex: 1,\n    display: 'flex',\n    alignItems: 'flex-end',\n  }),\n};\n\nconst LabelValuePair: FC<{\n  label: string | ReactNode;\n  value: number;\n  totalValue?: number;\n  onLinkFollow: LinkProps['onFollow'];\n  showWarning?: boolean;\n}> = ({ label, value, totalValue, onLinkFollow, showWarning }) => {\n  return (<div css={styles.container} >\n    <Box variant=\"awsui-key-label\">{label}</Box>\n    <div css={styles.contentContainer}>\n      <DashboardNumber\n        showWarning={showWarning}\n        featuredNumber={value}\n        totalNumber={totalValue}\n        onLinkClicked={onLinkFollow}\n      />\n    </div>\n  </div>);\n};\n\nconst Overview: FC<WorkspaceInsightsProps> = ({\n  onThreatListView,\n  onMitigationListView,\n}) => {\n  const { statementList } = useThreatsContext();\n  const { mitigationList } = useMitigationsContext();\n  const { mitigationLinkList } = useMitigationLinksContext();\n  const { assumptionLinkList } = useAssumptionLinksContext();\n\n  const missingMitigationOrAssumption = useMemo(() => {\n    return statementList.filter(\n      (s) =>\n        !mitigationLinkList.find((ml) => ml.linkedId === s.id) &&\n        !assumptionLinkList.find((al) => al.linkedId === s.id),\n    ).length;\n  }, [statementList, mitigationLinkList, assumptionLinkList]);\n\n  const handleThreatListLinkClicked = useThreatListLinkClicked(onThreatListView);\n\n  const handleMitigationListLinkClicked = useMitigationListLinkClicked(onMitigationListView);\n\n  const missingMitigation = useMemo(() => {\n    return statementList.filter(\n      (s) => !mitigationLinkList.find((ml) => ml.linkedId === s.id),\n    ).length;\n  }, [statementList, mitigationLinkList]);\n\n  const missingPriority = useMemo(() => {\n    return filterThreatsByMetadata(statementList, 'Priority').length;\n  }, [statementList]);\n\n  const [completedMitigations, totalMitigations] = useMemo(() => {\n    return [\n      mitigationList.filter((m) => m.status === MITIGATION_STATUS_RESOLVED\n        || m.status === MITIGATION_STATUS_RESOLVED_WILLNOTACTION).length,\n      mitigationList.length,\n    ];\n  }, [mitigationList]);\n\n  const [completedThreats, totalThreats] = useMemo(() => {\n    return [\n      statementList.filter((st) => st.status === THREAT_STATUS_NOT_USEFUL\n        || st.status === THREAT_STATUS_RESOLVED).length,\n      statementList.length,\n    ];\n  }, [mitigationList]);\n\n  const countHigh = useMemo(() => {\n    return filterThreatsByMetadata(statementList, 'Priority', LEVEL_HIGH)\n      .length;\n  }, [statementList]);\n\n  const countMed = useMemo(() => {\n    return filterThreatsByMetadata(statementList, 'Priority', 'Medium').length;\n  }, [statementList]);\n\n  const countLow = useMemo(() => {\n    return filterThreatsByMetadata(statementList, 'Priority', 'Low').length;\n  }, [statementList]);\n\n  return (\n    <ColumnLayout columns={7} variant=\"text-grid\" minColumnWidth={120}>\n      <LabelValuePair label='Total' value={statementList.length} onLinkFollow={handleThreatListLinkClicked()} />\n      <LabelValuePair label='No mitigation and assumption'\n        showWarning\n        value={missingMitigationOrAssumption}\n        onLinkFollow={handleThreatListLinkClicked({\n          linkedMitigations: false,\n          linkedAssumptions: false,\n        })} />\n      <LabelValuePair label='No mitigation'\n        showWarning\n        value={missingMitigation}\n        onLinkFollow={handleThreatListLinkClicked({\n          linkedMitigations: false,\n        })} />\n      <LabelValuePair label={<Badge color=\"red\">High</Badge>}\n        value={countHigh}\n        onLinkFollow={handleThreatListLinkClicked({\n          priority: LEVEL_HIGH,\n        })} />\n      <LabelValuePair label={<Badge color=\"blue\">Med</Badge>}\n        value={countMed}\n        onLinkFollow={handleThreatListLinkClicked({\n          priority: LEVEL_MEDIUM,\n        })} />\n      <LabelValuePair label={<Badge color=\"green\">Low</Badge>}\n        value={countLow}\n        onLinkFollow={handleThreatListLinkClicked({\n          priority: LEVEL_LOW,\n        })} />\n      <LabelValuePair label='Missing priority'\n        showWarning\n        value={missingPriority}\n        onLinkFollow={handleThreatListLinkClicked({\n          priority: LEVEL_NOT_SET,\n        })} />\n      <LabelValuePair label='Threat progress'\n        showWarning\n        value={completedThreats}\n        totalValue={totalThreats}\n        onLinkFollow={handleThreatListLinkClicked({\n          status: [STATUS_NOT_SET, THREAT_STATUS_IDENTIFIED],\n        })} />\n      <LabelValuePair label='Mitigation progress'\n        showWarning\n        value={completedMitigations}\n        totalValue={totalMitigations}\n        onLinkFollow={handleMitigationListLinkClicked({\n          status: [STATUS_NOT_SET, MITIGATION_STATUS_IN_PROGRESS, MITIGATION_STATUS_IDENTIFIED],\n        })} />\n    </ColumnLayout>\n  );\n};\n\nexport default Overview;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { stringify } from 'yaml';\nimport { DataExchangeFormat } from '../../customTypes';\n\n/**\n * Convert the threat model into Yaml format\n * @param data\n */\nconst convertToYaml = (data: DataExchangeFormat) => {\n  return stringify(data);\n};\n\nexport default convertToYaml;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport const MOBILE_BREAKPOINT = 688;\nexport const SMALL_DEVICE_BREAKPOINT = 465;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC } from 'react';\nimport { useDataflowInfoContext } from '../../../contexts/DataflowContext/context';\nimport { DataflowInfoSchema, EditableComponentBaseProps } from '../../../customTypes';\nimport BaseDiagramInfo from '../../generic/BaseDiagramInfo';\n\nconst DataflowInfo: FC<EditableComponentBaseProps> = (props) => {\n  const { dataflowInfo, setDataflowInfo } = useDataflowInfoContext();\n  return <BaseDiagramInfo\n    {...props}\n    headerTitle='Dataflow'\n    diagramTitle='Dataflow Diagram'\n    entity={dataflowInfo}\n    onConfirm={(diagram) => setDataflowInfo(diagram)}\n    validateData={DataflowInfoSchema.shape.description.safeParse}\n  />;\n};\n\nexport default DataflowInfo;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback, useState } from 'react';\nimport { BrainstormData } from '../../../../customTypes/brainstorm';\nimport { LocalStateContextProviderBaseProps } from '../../../types';\nimport { BrainstormContext } from '../../context';\nimport useBrainstorm, { initialState } from '../../useBrainstorm';\n\nexport interface BrainstormContextProviderProps {\n  workspaceId: string | null;\n}\n\nconst BrainstormLocalStateContextProvider: FC<\nPropsWithChildren<BrainstormContextProviderProps & LocalStateContextProviderBaseProps<BrainstormData>>> = ({\n  children,\n  initialValue,\n}) => {\n  const [brainstormData, setBrainstormData] = useState<BrainstormData>(\n    initialValue || initialState,\n  );\n\n  // Use the custom hook for business logic\n  const {\n    addItem,\n    updateItem,\n    removeItem: removeItemFromHook,\n    groupItems,\n    ungroupItem,\n    getGroupedItems,\n    getDisplayItems,\n    mergeGroups,\n  } = useBrainstorm(brainstormData, setBrainstormData);\n\n  const handleDeleteWorkspace = useCallback(async (_workspaceId: string) => {\n    setBrainstormData(initialState);\n  }, []);\n\n  return (\n    <BrainstormContext.Provider\n      value={{\n        brainstormData,\n        setBrainstormData,\n        addItem,\n        updateItem,\n        removeItem: removeItemFromHook,\n        groupItems,\n        ungroupItem,\n        getGroupedItems,\n        getDisplayItems,\n        mergeGroups,\n        onDeleteWorkspace: handleDeleteWorkspace,\n      }}\n    >\n      {children}\n    </BrainstormContext.Provider>\n  );\n};\n\nexport default BrainstormLocalStateContextProvider;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { STATUS_NOT_SET } from '../../../../configs/status';\nimport { DataExchangeFormat } from '../../../../customTypes';\nimport threatStatus from '../../../../data/status/threatStatus.json';\nimport escapeMarkdown from '../../../../utils/escapeMarkdown';\nimport parseTableCellContent from '../../../../utils/parseTableCellContent';\nimport standardizeNumericId from '../../../../utils/standardizeNumericId';\n\nexport const getThreatsContent = async (\n  data: DataExchangeFormat,\n  threatsOnly = false,\n) => {\n  const rows: string[] = [];\n  rows.push('## Threats');\n\n  rows.push('\\n');\n\n  rows.push(`| Threat Number | Threat | ${threatsOnly ? '' : 'Mitigations | Assumptions |'} Status | Priority | STRIDE | Comments |`);\n  rows.push(`| --- | --- | ${threatsOnly ? '' : '--- | --- |'} --- | --- | --- | --- |`);\n\n  if (data.threats) {\n    const promises = data.threats.map(async (x) => {\n      const mitigationLinks = data.mitigationLinks?.filter(ml => ml.linkedId === x.id) || [];\n      const assumpptionLinks = data.assumptionLinks?.filter(al => al.linkedId === x.id) || [];\n      const threatId = `T-${standardizeNumericId(x.numericId)}`;\n      const assumptionsContent = assumpptionLinks.map(al => {\n        const assumption = data.assumptions?.find(a => a.id === al.assumptionId);\n        if (assumption) {\n          const assumptionId = `A-${standardizeNumericId(assumption.numericId)}`;\n          return `[**${assumptionId}**](#${assumptionId}): ${escapeMarkdown(assumption.content)}`;\n        }\n        return null;\n      }).filter(al => !!al).join('<br/>');\n      const mitigationsContent = mitigationLinks.map(ml => {\n        const mitigation = data.mitigations?.find(m => m.id === ml.mitigationId);\n        if (mitigation) {\n          const mitigationId = `M-${standardizeNumericId(mitigation.numericId)}`;\n          return `[**${mitigationId}**](#${mitigationId}): ${escapeMarkdown(mitigation.content)}`;\n        }\n        return null;\n      }).filter(ml => !!ml).join('<br/>');\n      const status = ( x.status && threatStatus.find(ts => ts.value === x.status)?.label ) || STATUS_NOT_SET;\n      const priority = x.metadata?.find(m => m.key === 'Priority')?.value || '';\n      const STRIDE = ((x.metadata?.find(m => m.key === 'STRIDE')?.value || []) as string[]).join(', ');\n      const comments = await parseTableCellContent((x.metadata?.find(m => m.key === 'Comments')?.value as string) || '');\n      return `| <a name=\"${threatId}\"></a>${threatId} | ${escapeMarkdown(x.statement || '')} | ${threatsOnly ? '' : `${mitigationsContent} | ${assumptionsContent} | `} ${status} | ${priority} | ${STRIDE} | ${comments} |`;\n    });\n\n    rows.push(...(await Promise.all(promises)));\n  }\n\n  rows.push('\\n');\n\n  return rows.join('\\n');\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Autosuggest from '@cloudscape-design/components/autosuggest';\nimport ExpandableSection, { ExpandableSectionProps } from '@cloudscape-design/components/expandable-section';\nimport TokenGroup from '@cloudscape-design/components/token-group';\nimport React, { FC, useMemo } from 'react';\nimport { Assumption } from '../../../customTypes';\n\nexport interface AssumptionLinkProps {\n  variant?: ExpandableSectionProps['variant'];\n  linkedAssumptionIds: string[];\n  assumptionList: Assumption[];\n  onAddAssumptionLink: (assumptionId: string) => void;\n  onRemoveAssumptionLink: (assumptionId: string) => void;\n}\n\nconst AssumptionLinkComponent: FC<AssumptionLinkProps> = ({\n  linkedAssumptionIds,\n  assumptionList,\n  onAddAssumptionLink,\n  onRemoveAssumptionLink,\n  variant,\n}) => {\n  const [searchValue, setSearchValue] = React.useState('');\n\n  const linkedAssumptions = useMemo(() => {\n    return assumptionList.filter(al => linkedAssumptionIds.includes(al.id));\n  }, [linkedAssumptionIds, assumptionList]);\n\n  const filteredAssumptions = useMemo(() => {\n    const assumptions = assumptionList.filter(x => !linkedAssumptionIds.includes(x.id));\n\n    if (!searchValue) {\n      return assumptions;\n    }\n\n    return assumptions.filter(x => (x.content.toLowerCase().indexOf(searchValue.toLowerCase()) >= 0));\n  }, [searchValue, assumptionList, linkedAssumptionIds]);\n\n  return (<ExpandableSection\n    variant={variant}\n    headingTagOverride={variant === 'container' ? 'h3' : undefined}\n    headerText={`Linked assumptions (${linkedAssumptions.length})`}>\n    <Autosuggest\n      onChange={({ detail }) => setSearchValue(detail.value)}\n      value={searchValue}\n      options={filteredAssumptions.map(x => ({\n        value: x.id,\n        label: x.content,\n      }))}\n      onSelect={({ detail }) => {\n        onAddAssumptionLink(detail.value);\n        setSearchValue('');\n      }}\n      filteringType='manual'\n      enteredTextLabel={value => `Add new assumption: \"${value}\"`}\n      placeholder=\"Search assumption\"\n      empty=\"No matches found\"\n    />\n    <TokenGroup\n      items={\n        linkedAssumptions.map(x => ({\n          label: x.content,\n          dismissLabel: `Unlink assumption ${x.numericId}`,\n        }))\n      }\n      onDismiss={({ detail: { itemIndex } }) => {\n        onRemoveAssumptionLink(linkedAssumptions[itemIndex].id);\n      }}\n    />\n  </ExpandableSection>);\n};\n\nexport default AssumptionLinkComponent;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Button from '@cloudscape-design/components/button';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { useMemo, FC, useState, useEffect } from 'react';\nimport { METADATA_KEY_SOURCE_THREAT_PACK, METADATA_KEY_SOURCE_THREAT_PACK_MITIGATION_CANDIDATE } from '../../../configs';\nimport { useThreatPacksContext } from '../../../contexts';\nimport { Mitigation } from '../../../customTypes/mitigations';\nimport getMetadata from '../../../utils/getMetadata';\nimport Table, { ColumnDefinition } from '../../generic/Table';\n\nexport interface MitigationCandidatesProp {\n  threatPackId: string;\n  threatPackThreatId: string;\n  linkedMitigationIds: string[];\n  mitigationList: Mitigation[];\n  onAddMitigationsFromMitigationCandidates: (mitigationCandidates: Mitigation[], threatPackId: string) => void;\n}\n\nconst MitigationCandidates: FC<MitigationCandidatesProp> = ({\n  threatPackId,\n  threatPackThreatId,\n  linkedMitigationIds,\n  mitigationList,\n  onAddMitigationsFromMitigationCandidates,\n}) => {\n  const [selectedItems, setSelectedItems] = useState<Mitigation[]>([]);\n  const { getMitigationCandidates } = useThreatPacksContext();\n  const [mitigations, setMitigations] = useState<Mitigation[]>([]);\n\n  const linkedMitigationsFromThreakpack = useMemo(() => {\n    return mitigationList.map(x => {\n      if (linkedMitigationIds.includes(x.id)) {\n        const metadata = getMetadata(x.metadata);\n        if (metadata[METADATA_KEY_SOURCE_THREAT_PACK] == threatPackId) {\n          return metadata[METADATA_KEY_SOURCE_THREAT_PACK_MITIGATION_CANDIDATE];\n        }\n      }\n\n      return undefined;\n    }).filter(x => !!x);\n  }, [mitigationList, linkedMitigationIds, threatPackId]);\n\n  useEffect(() => {\n    const setupMitigations = async () => {\n      if (threatPackId && threatPackThreatId) {\n        const mitigationCandidates = await getMitigationCandidates(threatPackId, threatPackThreatId);\n        setMitigations(mitigationCandidates);\n      } else {\n        setMitigations([]);\n      }\n    };\n\n    setupMitigations().catch(err => console.log('Error', err));\n  }, [threatPackId, threatPackThreatId, getMitigationCandidates]);\n\n  const items = useMemo(() => {\n    return mitigations.map(x => {\n      const metadata = getMetadata(x.metadata);\n      return {\n        ...x,\n        comments: metadata.Comments || '',\n      };\n    });\n  }, [mitigations]);\n\n  const colDef: ColumnDefinition<{\n    content: string;\n    comments: string;\n  }>[] = useMemo(() => [\n    {\n      id: 'content',\n      header: 'Mitigation',\n      cell: (data) => data.content,\n      minWidth: 400,\n      sortingField: 'content',\n    },\n    {\n      id: 'comments',\n      header: 'Comments',\n      cell: (data) => data.comments,\n      sortingField: 'comments',\n    },\n  ], []);\n\n  if (items.length === 0) {\n    return (<></>);\n  }\n\n  return (<Table\n    columnDefinitions={colDef}\n    actions={<SpaceBetween direction='horizontal' size='s'>\n      <Button\n        variant='primary'\n        disabled={selectedItems.length === 0}\n        onClick={() => onAddMitigationsFromMitigationCandidates(selectedItems, threatPackId)}\n      >\n        Add as mitigations\n      </Button>\n    </SpaceBetween>}\n    header=\"Mitigation Candidates\"\n    headerVariant='h3'\n    variant='embedded'\n    items={items || []}\n    selectedItems={selectedItems}\n    onSelectionChange={({ detail }) => setSelectedItems([...detail.selectedItems.map(x => {\n      const { comments, ...data } = x;\n      return data;\n    })])}\n    isItemDisabled={(item) => linkedMitigationsFromThreakpack.includes(item.id)}\n  />);\n};\n\nexport default MitigationCandidates;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { z } from 'zod';\nimport { APP_MODE_BROWSER_EXTENSION, APP_MODE_IDE_EXTENSION } from '../configs/appMode';\n\nexport const AppModeSchema = z.union([z.literal(APP_MODE_BROWSER_EXTENSION), z.literal(APP_MODE_IDE_EXTENSION)]).optional();\n\nexport type AppMode = z.infer<typeof AppModeSchema>;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback, useEffect, useState } from 'react';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { LOCAL_STORAGE_KEY_STATEMENT_LIST, LOCAL_STORAGE_KEY_EDITING_STATEMENT } from '../../../../configs/localStorageKeys';\nimport { TemplateThreatStatement } from '../../../../customTypes';\nimport removeLocalStorageKey from '../../../../utils/removeLocalStorageKey';\nimport { useGlobalSetupContext } from '../../../GlobalSetupContext/context';\nimport { ThreatsContext } from '../../context';\nimport useThreatExamples from '../../hooks/useThreatExamples';\nimport useThreats from '../../hooks/useThreats';\nimport { ThreatsContextProviderProps } from '../../types';\n\nexport const getLocalStorageKey = (workspaceId: string | null) => {\n  if (workspaceId) {\n    return `${LOCAL_STORAGE_KEY_STATEMENT_LIST}_${workspaceId}`;\n  }\n\n  return LOCAL_STORAGE_KEY_STATEMENT_LIST;\n};\n\ninterface ThreatsContextProviderInnerProps {\n  editingStatement: TemplateThreatStatement | null;\n  setEditingStatement: React.Dispatch<React.SetStateAction<TemplateThreatStatement | null>>;\n  removeEditingStatement: () => void;\n}\n\nconst ThreatsContextProviderInner: FC<PropsWithChildren<ThreatsContextProviderProps & ThreatsContextProviderInnerProps>> = ({\n  children,\n  workspaceId: currentWorkspaceId,\n  editingStatement,\n  setEditingStatement,\n  removeEditingStatement,\n}) => {\n  const [statementList,\n    setStatementList,\n    { removeItem: removeStatementList }] = useLocalStorageState<TemplateThreatStatement[]>(getLocalStorageKey(currentWorkspaceId), {\n    defaultValue: [],\n  });\n\n  const { composerMode, hasVisitBefore } = useGlobalSetupContext();\n\n  const {\n    threatStatementExamples,\n    perFieldExamples,\n    previousInputs,\n  } = useThreatExamples(statementList);\n\n  const {\n    view,\n    setView,\n    handleAddStatement,\n    handlRemoveStatement,\n    handleEditStatement,\n    handleSaveStatement,\n    lenStatementList,\n    editingStatementExist,\n  } = useThreats(\n    composerMode,\n    statementList,\n    setStatementList,\n    editingStatement,\n    setEditingStatement,\n  );\n\n  const handleRemoveAllStatements = useCallback(async () => {\n    removeStatementList();\n    removeEditingStatement();\n  }, [removeEditingStatement, removeStatementList]);\n\n  const handleDeleteWorkspace = useCallback(async (workspaceId: string) => {\n    setEditingStatement(null);\n    window.setTimeout(() => {\n      // to delete after the workspace is switched. Otherwise the default value is set again.\n      removeLocalStorageKey(getLocalStorageKey(workspaceId));\n    }, 1000);\n  }, [removeStatementList, removeEditingStatement]);\n\n  useEffect(() => {\n    if ((composerMode === 'EditorOnly' && !editingStatementExist)\n      || (composerMode === 'ThreatsOnly'\n        && !hasVisitBefore\n        && !editingStatementExist\n        && lenStatementList === 0 && !currentWorkspaceId)) {\n      handleAddStatement();\n    }\n  }, [composerMode, editingStatementExist, hasVisitBefore, lenStatementList, currentWorkspaceId]);\n\n  return (<ThreatsContext.Provider value={{\n    view,\n    editingStatement,\n    statementList,\n    setStatementList,\n    threatStatementExamples: threatStatementExamples as TemplateThreatStatement[],\n    perFieldExamples,\n    previousInputs,\n    setView,\n    setEditingStatement,\n    addStatement: handleAddStatement,\n    removeStatement: handlRemoveStatement,\n    editStatement: handleEditStatement,\n    saveStatement: handleSaveStatement,\n    removeAllStatements: handleRemoveAllStatements,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </ThreatsContext.Provider>);\n};\n\nconst ThreatsContextProviderInnerFullMode: FC<PropsWithChildren<ThreatsContextProviderProps>> = (props) => {\n  const [editingStatement,\n    setEditingStatement] = useState<TemplateThreatStatement | null>(null);\n\n  return <ThreatsContextProviderInner\n    {...props}\n    editingStatement={editingStatement}\n    setEditingStatement={setEditingStatement}\n    removeEditingStatement={() => setEditingStatement(null)}\n  />;\n};\n\nconst ThreatsContextProviderInnerThreatsOnlyMode: FC<PropsWithChildren<ThreatsContextProviderProps>> = (props) => {\n  const [editingStatement,\n    setEditingStatement,\n    { removeItem }] = useLocalStorageState<TemplateThreatStatement | null>(LOCAL_STORAGE_KEY_EDITING_STATEMENT, {\n    defaultValue: null,\n  });\n\n  return <ThreatsContextProviderInner\n    {...props}\n    editingStatement={editingStatement}\n    setEditingStatement={setEditingStatement}\n    removeEditingStatement={removeItem}\n  />;\n};\n\nconst ThreatsContextProvider: FC<PropsWithChildren<ThreatsContextProviderProps>> = (props) => {\n  const { composerMode } = useGlobalSetupContext();\n\n  if (composerMode === 'Full') {\n    return <ThreatsContextProviderInnerFullMode {...props} />;\n  }\n\n  return <ThreatsContextProviderInnerThreatsOnlyMode {...props} />;\n};\n\nexport default ThreatsContextProvider;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useContext, createContext } from 'react';\nimport { MitigationLink } from '../../customTypes';\nexport interface MitigationLinksContextApi {\n  mitigationLinkList: MitigationLink[];\n  setMitigationLinkList: (list: MitigationLink[]) => void;\n  getLinkedMitigationLinks: (linkedEntityId: string) => MitigationLink[];\n  getMitigtaionThreatLinks: (mitigationId: string) => MitigationLink[];\n  removeMitigationLink: (mitigationId: string, linkedEntityId: string) => void;\n  removeMitigationLinksByMitigationId: (mitigationId: string) => Promise<void>;\n  removeMitigationLinksByLinkedEntityId: (linkedEntityId: string) => Promise<void>;\n  removeMitigationLinks: (entity: MitigationLink[]) => void;\n  addMitigationLink: (entity: MitigationLink) => void;\n  addMitigationLinks: (entity: MitigationLink[]) => void;\n  removeAllMitigationLinks: () => Promise<void>;\n  onDeleteWorkspace: (workspaceId: string) => Promise<void>;\n}\n\nconst initialState: MitigationLinksContextApi = {\n  mitigationLinkList: [],\n  setMitigationLinkList: () => { },\n  getLinkedMitigationLinks: () => [],\n  getMitigtaionThreatLinks: () => [],\n  removeMitigationLink: () => { },\n  removeMitigationLinksByMitigationId: () => Promise.resolve(),\n  removeMitigationLinksByLinkedEntityId: () => Promise.resolve(),\n  removeMitigationLinks: () => { },\n  addMitigationLink: () => { },\n  addMitigationLinks: () => { },\n  removeAllMitigationLinks: () => Promise.resolve(),\n  onDeleteWorkspace: () => Promise.resolve(),\n};\n\nexport const MitigationLinksContext = createContext<MitigationLinksContextApi>(initialState);\n\nexport const useMitigationLinksContext = () => useContext(MitigationLinksContext);","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useContext, createContext } from 'react';\nimport { DEFAULT_NEW_ENTITY_ID } from '../../configs';\nimport { Assumption } from '../../customTypes';\nexport type View = 'list' | 'editor';\n\nexport interface AssumptionsContextApi {\n  assumptionList: Assumption[];\n  setAssumptionList: (assumptions: Assumption[]) => void;\n  removeAssumption: (id: string) => void;\n  saveAssumption: (assumption: Assumption) => Assumption;\n  removeAllAssumptions: () => Promise<void>;\n  onDeleteWorkspace: (workspaceId: string) => Promise<void>;\n}\n\nconst initialState: AssumptionsContextApi = {\n  assumptionList: [],\n  setAssumptionList: () => { },\n  removeAssumption: () => { },\n  saveAssumption: () => ({\n    id: DEFAULT_NEW_ENTITY_ID,\n    numericId: -1,\n    content: '',\n  }),\n  removeAllAssumptions: () => Promise.resolve(),\n  onDeleteWorkspace: () => Promise.resolve(),\n};\n\nexport const AssumptionsContext = createContext<AssumptionsContextApi>(initialState);\n\nexport const useAssumptionsContext = () => useContext(AssumptionsContext);","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { v4 as uuidV4 } from 'uuid';\nimport { DEFAULT_THREAT_STATUS } from '../../configs/status';\nimport { TemplateThreatStatement } from '../../customTypes';\n\nconst getNewThreatStatement = (): TemplateThreatStatement => {\n  return {\n    id: uuidV4(),\n    numericId: -1,\n    displayOrder: -1,\n    status: DEFAULT_THREAT_STATUS,\n  };\n};\n\nexport default getNewThreatStatement;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport Container from '@cloudscape-design/components/container';\nimport Grid from '@cloudscape-design/components/grid';\nimport Header from '@cloudscape-design/components/header';\nimport Multiselect from '@cloudscape-design/components/multiselect';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextFilter from '@cloudscape-design/components/text-filter';\nimport { css } from '@emotion/react';\nimport { FC, PropsWithChildren, useCallback, useMemo, useState } from 'react';\nimport { LEVEL_SELECTOR_OPTIONS, DEFAULT_NEW_ENTITY_ID, LEVEL_NOT_SET, STATUS_NOT_SET } from '../../../configs';\nimport { useAssumptionLinksContext, useMitigationLinksContext } from '../../../contexts';\nimport { GlobalSetupContextApi, useGlobalSetupContext } from '../../../contexts/GlobalSetupContext/context';\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\nimport { TemplateThreatStatement, ThreatStatementListFilter, ViewNavigationEvent } from '../../../customTypes';\nimport threatStatus from '../../../data/status/threatStatus.json';\nimport useEditMetadata from '../../../hooks/useEditMetadata';\nimport { addTagToEntity, removeTagFromEntity } from '../../../utils/entityTag';\nimport AssetSelector from '../../generic/AssetSelector';\nimport ContentLayoutComponent, { ContentLayoutProps } from '../../generic/ContentLayout';\nimport LinkedEntityFilter, { ALL, WITHOUT_NO_LINKED_ENTITY, WITH_LINKED_ENTITY } from '../../generic/LinkedEntityFilter';\nimport { OPTIONS as STRIDEOptions } from '../../generic/STRIDESelector';\nimport TagSelector from '../../generic/TagSelector';\nimport WorkspaceSelector from '../../workspaces/WorkspaceSelector';\nimport SortByComponent, { SortByOption, DEFAULT_SORT_BY } from '../SortBy';\nimport ThreatStatementCard from '../ThreatStatementCard';\n\nconst LevelOptionsWithNoValue = [...LEVEL_SELECTOR_OPTIONS, {\n  label: 'Priority Not Set', value: LEVEL_NOT_SET,\n}];\n\nconst STRIDE_OPTION_NO_VALUE = {\n  label: 'STRIDE Not Set', value: LEVEL_NOT_SET,\n};\n\nconst STRIDEOptionsWithNoValue = [...STRIDEOptions, STRIDE_OPTION_NO_VALUE];\n\nconst LELEV_MAPPING: any = {\n  High: 3,\n  Medium: 2,\n  Low: 1,\n};\n\nconst styles = {\n  btnClearFilter: css({\n    height: '100%',\n    display: 'flex',\n    alignItems: 'flex-start',\n  }),\n};\n\nconst ALL_STATUS = [...threatStatus.map(ia => ({\n  label: ia.label,\n  value: ia.value,\n})), {\n  label: 'Not Set',\n  value: STATUS_NOT_SET,\n}];\n\nconst ContentLayout: FC<PropsWithChildren<ContentLayoutProps & {\n  composerMode: GlobalSetupContextApi['composerMode'];\n}>> = ({\n  composerMode,\n  children,\n  ...props\n}) => {\n  if (composerMode !== 'Full') {\n    return <>{children}</>;\n  }\n\n  return (<ContentLayoutComponent\n    {...props}\n  >\n    {children}\n  </ContentLayoutComponent>);\n};\n\nexport interface ThreatStatementListProps {\n  initialFilter?: ThreatStatementListFilter;\n  onThreatEditorView?: ViewNavigationEvent['onThreatEditorView'];\n}\n\nconst ThreatStatementList: FC<ThreatStatementListProps> = ({\n  initialFilter,\n  onThreatEditorView,\n}) => {\n  const {\n    statementList,\n    removeStatement,\n    addStatement,\n    editStatement,\n    saveStatement,\n  } = useThreatsContext();\n\n  const {\n    assumptionLinkList,\n    removeAssumptionLinksByLinkedEntityId,\n  } = useAssumptionLinksContext();\n\n  const {\n    mitigationLinkList,\n    removeMitigationLinksByLinkedEntityId,\n  } = useMitigationLinksContext();\n\n  const {\n    showInfoModal,\n    composerMode,\n  } = useGlobalSetupContext();\n\n  const handleRemove = useCallback(async (statementId: string) => {\n    removeStatement(statementId);\n    await removeAssumptionLinksByLinkedEntityId(statementId);\n    await removeMitigationLinksByLinkedEntityId(statementId);\n  }, [removeStatement, removeAssumptionLinksByLinkedEntityId, removeMitigationLinksByLinkedEntityId]);\n\n  const [filteringText, setFilteringText] = useState('');\n  const [sortBy, setSortBy] = useState<SortByOption>(DEFAULT_SORT_BY);\n\n  const [\n    selectedImpactedGoal,\n    setSelectedImpactedGoal,\n  ] = useState<string[]>([]);\n\n  const [\n    selectedImpactedAssets,\n    setSelectedImpactedAssets,\n  ] = useState<string[]>([]);\n\n  const [\n    selectedTags,\n    setSelectedTags,\n  ] = useState<string[]>([]);\n\n  const [\n    selectedStatus,\n    setSelectedStatus,\n  ] = useState<string[]>(initialFilter?.status || []);\n\n  const [\n    selectedPriorities,\n    setSelectedPriorities,\n  ] = useState<string[]>(initialFilter && initialFilter.priority ? [initialFilter.priority] : []);\n\n  const [\n    selectedSTRIDEs,\n    setSelectedSTRIDEs,\n  ] = useState<string[]>(initialFilter && initialFilter.stride ? [initialFilter.stride] : []);\n\n  const [\n    selectedLinkedAssumptionFilter,\n    setSelectedLinkedAssumptionFilter,\n  ] = useState(initialFilter && typeof initialFilter.linkedAssumptions !== 'undefined' ? (\n    initialFilter.linkedAssumptions ? WITH_LINKED_ENTITY :\n      WITHOUT_NO_LINKED_ENTITY\n  ) : ALL);\n\n  const [\n    selectedLinkedMitigationFilter,\n    setSelectedLinkedMitigationFilter,\n  ] = useState(initialFilter && typeof initialFilter.linkedMitigations !== 'undefined' ? (\n    initialFilter.linkedMitigations ? WITH_LINKED_ENTITY :\n      WITHOUT_NO_LINKED_ENTITY\n  ) : ALL);\n\n  const handleEditMetadata = useEditMetadata(saveStatement);\n\n  const handleAddTagToStatement = useCallback((statement: TemplateThreatStatement, tag: string) => {\n    const updatedStatement = addTagToEntity(statement, tag);\n    saveStatement(updatedStatement);\n  }, [saveStatement]);\n\n  const handleRemoveTagFromStatement = useCallback((statement: TemplateThreatStatement, tag: string) => {\n    const updated = removeTagFromEntity(statement, tag);\n    saveStatement(updated);\n  }, []);\n\n  const handleUpdateStatementStatus = useCallback((statement: TemplateThreatStatement, status: string) => {\n    saveStatement({\n      ...statement,\n      status,\n    });\n  }, [saveStatement]);\n\n  const filteredStatementList = useMemo(() => {\n    let output = statementList;\n\n    if (filteringText) {\n      output = output.filter(st => st.statement && st.statement.toLowerCase().indexOf(filteringText.toLowerCase()) >= 0);\n    }\n\n    if (selectedImpactedAssets && selectedImpactedAssets.length > 0) {\n      output = output.filter(st => {\n        const tst = st as TemplateThreatStatement;\n        return tst.impactedAssets?.some(ia => selectedImpactedAssets.includes(ia));\n      });\n    }\n\n    if (selectedImpactedGoal && selectedImpactedGoal.length > 0) {\n      output = output.filter(st => {\n        const tst = st as TemplateThreatStatement;\n        return tst.impactedGoal?.some(ia => selectedImpactedGoal.includes(ia));\n      });\n    }\n\n    if (selectedTags && selectedTags.length > 0) {\n      output = output.filter(st => {\n        return st.tags?.some(t => selectedTags.includes(t));\n      });\n    }\n\n    if (selectedStatus && selectedStatus.length > 0) {\n      output = output.filter(st => {\n        return st.status ? selectedStatus.includes(st.status) : selectedStatus.includes(STATUS_NOT_SET);\n      });\n    }\n\n    if (selectedPriorities && selectedPriorities.length > 0) {\n      output = output.filter(st => {\n        const priority = st.metadata?.find(m => m.key === 'Priority');\n        const includedNoValue = selectedPriorities.includes(LEVEL_NOT_SET);\n        if (includedNoValue && (!priority || !priority.value || priority.value.length === 0)) {\n          return true;\n        }\n\n        return priority?.value && selectedPriorities.includes(priority.value as string);\n      });\n    }\n\n    if (selectedSTRIDEs && selectedSTRIDEs.length > 0) {\n      output = output.filter(st => {\n        const stride = st.metadata?.find(m => m.key === 'STRIDE');\n        const includedNoValue = selectedSTRIDEs.includes(LEVEL_NOT_SET);\n        if (includedNoValue && (!stride || !stride.value || stride.value.length === 0)) {\n          return true;\n        }\n\n        return stride?.value && (stride.value as string[]).some(t => selectedSTRIDEs.includes(t));\n      });\n    }\n\n    if (selectedLinkedAssumptionFilter !== ALL) {\n      output = output.filter(st => {\n        return assumptionLinkList.some(al => al.linkedId === st.id) ?\n          selectedLinkedAssumptionFilter === WITH_LINKED_ENTITY :\n          selectedLinkedAssumptionFilter === WITHOUT_NO_LINKED_ENTITY;\n      });\n    }\n\n    if (selectedLinkedMitigationFilter !== ALL) {\n      output = output.filter(st => {\n        return mitigationLinkList.some(al => al.linkedId === st.id) ?\n          selectedLinkedMitigationFilter === WITH_LINKED_ENTITY :\n          selectedLinkedMitigationFilter === WITHOUT_NO_LINKED_ENTITY;\n      });\n    }\n\n    if (sortBy.field === 'Priority') {\n      output = output.sort((op1, op2) => {\n        const priority1 = op1.metadata?.find(m => m.key === 'Priority')?.value as string;\n        const priority2 = op2.metadata?.find(m => m.key === 'Priority')?.value as string;\n        const priorityValue1 = (priority1 && LELEV_MAPPING[priority1]) || 0;\n        const priorityValue2 = (priority2 && LELEV_MAPPING[priority2]) || 0;\n        return priorityValue2 - priorityValue1;\n      });\n    } else {\n      output = output.sort((op1, op2) => (op2.numericId || Number.MAX_VALUE) - (op1.numericId || Number.MAX_VALUE));\n    }\n\n    if (sortBy.ascending) {\n      output = output.reverse();\n    }\n\n    return output;\n  }, [filteringText, statementList,\n    assumptionLinkList, mitigationLinkList,\n    selectedImpactedAssets, selectedImpactedGoal,\n    selectedTags, selectedStatus, selectedPriorities, selectedSTRIDEs,\n    selectedLinkedAssumptionFilter, selectedLinkedMitigationFilter,\n    sortBy]);\n\n  const hasNoFilter = useMemo(() => {\n    return (filteringText === ''\n      && selectedImpactedAssets.length === 0\n      && selectedImpactedGoal.length === 0\n      && selectedTags.length === 0\n      && selectedStatus.length === 0\n      && selectedPriorities.length === 0\n      && selectedSTRIDEs.length === 0\n      && selectedLinkedAssumptionFilter === ALL\n      && selectedLinkedMitigationFilter === ALL);\n  }, [filteringText, selectedImpactedAssets, selectedImpactedGoal,\n    selectedTags, selectedStatus, selectedPriorities, selectedSTRIDEs,\n    selectedLinkedAssumptionFilter, selectedLinkedMitigationFilter]);\n\n  const handleAddStatement = useCallback((idToCopy?: string) => {\n    addStatement(idToCopy);\n    onThreatEditorView?.(DEFAULT_NEW_ENTITY_ID, idToCopy);\n  }, [addStatement, onThreatEditorView]);\n\n  const handleEditStatement = useCallback((id: string) => {\n    editStatement(id);\n    onThreatEditorView?.(id);\n  }, [editStatement, onThreatEditorView]);\n\n  const actions = useMemo(() => {\n    return (\n      <>{composerMode !== 'Full' ?\n        (<WorkspaceSelector\n          embededMode={true}\n          enabledExportAll={statementList.length > 0}\n          enabledRemoveAll={statementList.length > 0}\n          enabledExportFiltered={!hasNoFilter}\n          filteredThreats={filteredStatementList}\n        >\n          <Button variant=\"primary\" onClick={() => handleAddStatement()}>\n            Add new threat\n          </Button>\n        </WorkspaceSelector>) :\n        (<SpaceBetween direction='horizontal' size='s'>\n          <Button variant=\"primary\" onClick={() => handleAddStatement()}>\n            Add new threat\n          </Button>\n        </SpaceBetween>)}\n      </>);\n  }, [\n    filteredStatementList,\n    handleAddStatement,\n    statementList,\n    hasNoFilter,\n    composerMode,\n  ]);\n\n  const allImpactedGoal = useMemo(() => {\n    return statementList\n      .reduce((all: string[], cur) => {\n        const statement = cur as TemplateThreatStatement;\n        return [...all, ...statement.impactedGoal?.filter(ig => !all.includes(ig)) || []];\n      }, []);\n  }, [statementList]);\n\n  const allImpactedAssets = useMemo(() => {\n    return statementList\n      .reduce((all: string[], cur) => {\n        const statement = cur as TemplateThreatStatement;\n        return [...all, ...statement.impactedAssets?.filter(ia => !all.includes(ia)) || []];\n      }, []);\n  }, [statementList]);\n\n  const allTags = useMemo(() => {\n    return statementList\n      .reduce((all: string[], cur) => {\n        return [...all, ...cur.tags?.filter(ia => !all.includes(ia)) || []];\n      }, []);\n  }, [statementList]);\n\n  const handleClearFilter = useCallback(() => {\n    setFilteringText('');\n    setSelectedImpactedAssets([]);\n    setSelectedImpactedGoal([]);\n    setSelectedTags([]);\n    setSelectedStatus([]);\n    setSelectedPriorities([]);\n    setSelectedSTRIDEs([]);\n    setSelectedLinkedAssumptionFilter(ALL);\n    setSelectedLinkedMitigationFilter(ALL);\n  }, []);\n\n  const gridDefinition = useMemo(() => {\n    return composerMode === 'Full' ? [{ colspan: { default: 12, xs: 6, s: 3 } },\n      { colspan: { default: 12, xs: 6, s: 3 } },\n      { colspan: { default: 12, xs: 6, s: 3 } },\n      { colspan: { default: 12, xs: 6, s: 3 } },\n      { colspan: { default: 12, xs: 6, s: 5 } },\n      { colspan: { default: 12, xs: 6, s: 5 } },\n      { colspan: { default: 12, xs: 6, s: 4 } },\n      { colspan: { default: 12, xs: 6, s: 4 } },\n      { colspan: { default: 12, xs: 6, s: 4 } }] :\n      [\n        { colspan: { default: 12, xs: 6, s: 3 } },\n        { colspan: { default: 12, xs: 6, s: 3 } },\n        { colspan: { default: 12, xs: 6, s: 3 } },\n        { colspan: { default: 12, xs: 6, s: 3 } },\n        { colspan: { default: 12, xs: 6, s: 5 } },\n        { colspan: { default: 12, xs: 6, s: 5 } },\n        { colspan: { default: 2 } },\n      ];\n  }, [composerMode]);\n\n  return (<ContentLayout\n    composerMode={composerMode}\n    title='Threats'\n    actions={actions}\n    counter={`(${filteredStatementList.length})`}\n  >\n    <SpaceBetween direction='vertical' size='s'>\n      <Container header={\n        composerMode === 'ThreatsOnly' ? <Header\n          actions={actions}\n          counter={`(${filteredStatementList.length})`}\n          info={<Button variant='icon' iconName='status-info' onClick={showInfoModal} />}\n        >Threats</Header> : undefined}\n      >\n        <SpaceBetween direction='vertical' size='s'>\n          <TextFilter\n            filteringText={filteringText}\n            filteringPlaceholder=\"Find threat statements\"\n            filteringAriaLabel=\"Filter threat statements\"\n            onChange={({ detail }) =>\n              setFilteringText(detail.filteringText)\n            }\n          />\n          <Grid\n            gridDefinition={gridDefinition}\n          >\n            <Multiselect\n              tokenLimit={0}\n              selectedOptions={selectedPriorities.map(ia => ({\n                label: ia,\n                value: ia,\n              }))}\n              onChange={({ detail }) =>\n                setSelectedPriorities(detail.selectedOptions?.map(o => o.value || '') || [])\n              }\n              deselectAriaLabel={e => `Remove ${e.label}`}\n              options={LevelOptionsWithNoValue}\n              placeholder=\"Filtered by priority\"\n              selectedAriaLabel=\"Selected\"\n            />\n            <Multiselect\n              tokenLimit={0}\n              selectedOptions={[...STRIDEOptions.filter(x => selectedSTRIDEs.includes(x.value)),\n                ...selectedSTRIDEs.includes(LEVEL_NOT_SET) ? [STRIDE_OPTION_NO_VALUE] : []]}\n              onChange={({ detail }) =>\n                setSelectedSTRIDEs(detail.selectedOptions?.map(o => o.value || '') || [])\n              }\n              deselectAriaLabel={e => `Remove ${e.label}`}\n              options={STRIDEOptionsWithNoValue}\n              placeholder=\"Filtered by STRIDE\"\n              selectedAriaLabel=\"Selected\"\n            />\n            <TagSelector\n              allTags={allTags}\n              selectedTags={selectedTags}\n              setSelectedTags={setSelectedTags}\n            />\n            <Multiselect\n              tokenLimit={0}\n              selectedOptions={ALL_STATUS.filter(x => selectedStatus.includes(x.value))}\n              onChange={({ detail }) =>\n                setSelectedStatus(detail.selectedOptions?.map(o => o.value || '') || [])\n              }\n              deselectAriaLabel={e => `Remove ${e.label}`}\n              options={ALL_STATUS}\n              placeholder=\"Filtered by status\"\n              selectedAriaLabel=\"Selected\"\n            />\n            <AssetSelector\n              allAssets={allImpactedAssets}\n              selectedAssets={selectedImpactedAssets}\n              setSelectedAssets={setSelectedImpactedAssets}\n            />\n            <Multiselect\n              tokenLimit={0}\n              selectedOptions={selectedImpactedGoal.map(ig => ({\n                label: ig,\n                value: ig,\n              }))}\n              onChange={({ detail }) =>\n                setSelectedImpactedGoal(detail.selectedOptions?.map(o => o.value || '') || [])\n              }\n              deselectAriaLabel={e => `Remove ${e.label}`}\n              options={allImpactedGoal.map(g => ({\n                label: g,\n                value: g,\n              }))}\n              placeholder=\"Filtered by impacted goal\"\n              selectedAriaLabel=\"Selected\"\n            />\n            {composerMode === 'Full' && <LinkedEntityFilter\n              label='Linked mitigations'\n              entityDisplayName='mitigations'\n              selected={selectedLinkedMitigationFilter}\n              setSelected={setSelectedLinkedMitigationFilter}\n            />}\n            {composerMode === 'Full' && <LinkedEntityFilter\n              label='Linked assumptions'\n              entityDisplayName='assumptions'\n              selected={selectedLinkedAssumptionFilter}\n              setSelected={setSelectedLinkedAssumptionFilter}\n            />}\n            {<div css={styles.btnClearFilter}>\n              <div><Button onClick={handleClearFilter}\n                disabled={hasNoFilter}\n              >\n                Clear filters\n              </Button></div>\n            </div>}\n          </Grid>\n          <Grid\n            gridDefinition={[{ colspan: { default: 12, xs: 6 } }]}\n          >\n            <SortByComponent value={sortBy} setValue={setSortBy} />\n          </Grid>\n        </SpaceBetween>\n      </Container>\n      {\n        filteredStatementList?.map(st => (<ThreatStatementCard\n          key={st.id}\n          statement={st}\n          onCopy={handleAddStatement}\n          onRemove={handleRemove}\n          onEditInWizard={handleEditStatement}\n          onEditMetadata={handleEditMetadata}\n          onEditStatementStatus={handleUpdateStatementStatus}\n          onAddTagToStatement={handleAddTagToStatement}\n          onRemoveTagFromStatement={handleRemoveTagFromStatement}\n          showLinkedEntities={composerMode === 'Full'}\n        />))\n      }\n    </SpaceBetween >\n  </ContentLayout >);\n};\n\nexport default ThreatStatementList;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren } from 'react';\nimport BrainstormLocalStateContextProvider from './components/LocalStateContextProvider';\nimport BrainstormLocalStorageContextProvider from './components/LocalStorageContextProvider';\nimport { useBrainstormContext } from './context';\nimport { STORAGE_LOCAL_STATE } from '../../configs';\nimport useWorkspaceStorage from '../../hooks/useWorkspaceStorage';\n\nexport * from './context';\nexport * from './types';\nexport { BrainstormItem, BrainstormData } from '../../customTypes/brainstorm';\n\nexport interface BrainstormContextProviderProps {\n  workspaceId: string | null;\n}\n\nconst BrainstormContextProvider: FC<PropsWithChildren<BrainstormContextProviderProps>> = (props) => {\n  const { storageType, value } = useWorkspaceStorage(props.workspaceId);\n\n  return storageType === STORAGE_LOCAL_STATE ?\n    (<BrainstormLocalStateContextProvider\n      key={props.workspaceId}\n      initialValue={value?.brainstorm}\n      {...props} />) :\n    (<BrainstormLocalStorageContextProvider key={props.workspaceId} {...props} />);\n};\n\nexport default BrainstormContextProvider;\n\nexport {\n  useBrainstormContext,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { BaseChangeDetail } from '@cloudscape-design/components/input/interfaces';\nimport { NonCancelableCustomEvent, NonCancelableEventHandler } from '@cloudscape-design/components/internal/events';\nimport { useCallback, useEffect, useState } from 'react';\nimport { z } from 'zod';\nimport sanitizeHtml from '../../utils/sanitizeHtml';\n\nconst useContentValidation = <T extends NonCancelableEventHandler<BaseChangeDetail> | ((newValue: string) => void)>(\n  value: string,\n  onChange?: T,\n  validateData?: (newValue: string) => z.ZodSafeParseResult<string | undefined>,\n) => {\n  const [tempValue, setTempValue] = useState(value);\n  const [errorText, setErrorText] = useState('');\n\n  useEffect(() => {\n    setTempValue(value);\n    if (!value) {\n      setErrorText('');\n    }\n  }, [value]);\n\n  const handleChange = useCallback((\n    eventData: NonCancelableCustomEvent<BaseChangeDetail> | string,\n    initialMarkdownNormalize?: boolean,\n  ) => {\n    // Skip processing if this is an initial markdown normalization\n    if (initialMarkdownNormalize === true) {\n      return;\n    }\n\n    let newValue = typeof eventData === 'string' ? eventData : eventData.detail.value;\n\n    //Work around for https://github.com/mdx-editor/editor/issues/574\n    // and https://github.com/mdx-editor/editor/issues/103 and\n    newValue = newValue.split('\\n').map(line => line.endsWith('&#x20;') ? line.slice(0, -6) : line).join('\\n');\n\n    setTempValue(newValue);\n    const cleanValue = sanitizeHtml(newValue);\n\n    if (cleanValue !== newValue) {\n      setErrorText('Html tags not supported');\n      return;\n    }\n\n    if (validateData) {\n      const validation = validateData(newValue);\n      if (!validation.success) {\n        setErrorText(validation.error.issues.map(i => i.message).join('; '));\n        return;\n      }\n    }\n\n    setErrorText('');\n\n    if (onChange) {\n      if (typeof eventData === 'string') {\n        (onChange as ((newValue: string) => void))?.(newValue);\n      } else {\n        (onChange as NonCancelableEventHandler<BaseChangeDetail>)?.(eventData);\n      }\n    }\n  }, [setTempValue, setErrorText, onChange, validateData]);\n\n  return {\n    tempValue,\n    handleChange,\n    errorText,\n  };\n};\n\nexport default useContentValidation;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport ExpandableSection, { ExpandableSectionProps } from '@cloudscape-design/components/expandable-section';\nimport Grid from '@cloudscape-design/components/grid';\nimport { OptionDefinition } from '@cloudscape-design/components/internal/components/option/interfaces';\nimport { FC, useMemo, useState } from 'react';\nimport { TemplateThreatStatement } from '../../../customTypes';\nimport threatStatus from '../../../data/status/threatStatus.json';\nimport expandablePanelHeaderStyles from '../../../styles/expandablePanelHeader';\nimport CommentsEdit from '../../generic/CommentsEdit';\nimport StatusSelector from '../../generic/StatusSelector';\nimport STRIDESELECTOR from '../../generic/STRIDESelector';\nimport PriorityEdit from '../PriorityEdit';\n\n\nexport interface MetadataEditorProps {\n  variant: ExpandableSectionProps['variant'];\n  editingStatement: TemplateThreatStatement;\n  onEditStatementStatus: (statement: TemplateThreatStatement, status: string) => void;\n  onEditMetadata: (statement: TemplateThreatStatement, key: string, value: string | string[] | undefined) => void;\n}\n\nconst MetadataEditor: FC<MetadataEditorProps> = ({\n  variant,\n  editingStatement,\n  onEditStatementStatus,\n  onEditMetadata,\n}) => {\n  const [expanded, setExpanded] = useState(false);\n  const stride = useMemo(() => {\n    return (editingStatement.metadata?.find(m => m.key === 'STRIDE')?.value as string[]) || undefined;\n  }, [editingStatement.metadata]);\n\n  return (\n    <ExpandableSection\n      headerText={<span css={variant === 'default' ? expandablePanelHeaderStyles : undefined}>Metadata</span>}\n      headingTagOverride='h3'\n      variant={variant}\n      expanded={expanded}\n      onChange={({ detail }) => setExpanded(detail.expanded)}\n    >\n      <Grid\n        gridDefinition={[\n          { colspan: { default: 12, xs: 3 } },\n          { colspan: { default: 12, xs: 3 } },\n          { colspan: { default: 12, xs: 6 } },\n          ...expanded ? [{ colspan: { default: 12, xs: 12 } }] : [],\n        ]}\n      >\n        <StatusSelector\n          selectedOption={editingStatement.status}\n          setSelectedOption={(option) => onEditStatementStatus(editingStatement, option)}\n          options={threatStatus as OptionDefinition[]}\n        />\n        <PriorityEdit\n          editingStatement={editingStatement}\n          onEditMetadata={onEditMetadata}\n        />\n        <STRIDESELECTOR\n          label='STRIDE'\n          selected={stride}\n          setSelected={(selected) => onEditMetadata(editingStatement, 'STRIDE', selected)}\n        />\n        {expanded && <CommentsEdit\n          entity={editingStatement}\n          onEditEntity={onEditMetadata}\n        />}\n      </Grid>\n    </ExpandableSection>\n  );\n};\n\nexport default MetadataEditor;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren } from 'react';\nimport CrossWorkspaceLocalStorageContextProvider from './components/LocalStorageContextProvider';\nimport { useCrossWorkspaceContext } from './context';\n\nconst CrossWorkspaceContextProvider: FC<PropsWithChildren<{}>> = (props) => {\n  return (<CrossWorkspaceLocalStorageContextProvider {...props} />);\n};\n\nexport default CrossWorkspaceContextProvider;\n\nexport {\n  useCrossWorkspaceContext,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, useEffect, useState } from 'react';\nimport { useMitigationLinksContext } from '../../../contexts/MitigationLinksContext/context';\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\nimport { MitigationLink } from '../../../customTypes';\nimport ThreatLinkView from '../../threats/ThreatLinkView';\n\nexport interface MitigationThreatLinkProps {\n  mitigationId: string;\n}\n\nconst MitigationThreatLinkComponent: FC<MitigationThreatLinkProps> = ({\n  mitigationId,\n}) => {\n  const { statementList } = useThreatsContext();\n  const [mitigationLinks, setMitigationLinks] = useState<MitigationLink[]>([]);\n\n  const { getMitigtaionThreatLinks } = useMitigationLinksContext();\n\n  useEffect(() => {\n    const _mitigationLinks = getMitigtaionThreatLinks(mitigationId);\n    setMitigationLinks(_mitigationLinks || []);\n  }, [getMitigtaionThreatLinks, mitigationId]);\n\n  const {\n    addMitigationLink,\n    removeMitigationLink,\n  } = useMitigationLinksContext();\n\n  return (<ThreatLinkView\n    threatList={statementList}\n    linkedThreatIds={mitigationLinks.map(ml => ml.linkedId)}\n    onAddThreatLink={(threatId) => addMitigationLink({\n      linkedId: threatId,\n      mitigationId,\n    })}\n    onRemoveThreatLink={(threatId) => removeMitigationLink(mitigationId, threatId)}\n  />);\n};\n\nexport default MitigationThreatLinkComponent;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useContext, createContext } from 'react';\nimport { WorkspaceExampleWithId } from '../../customTypes';\n\nexport interface WorkspaceExamplesContextApi {\n  workspaceExamples: WorkspaceExampleWithId[];\n  getWorkspaceExample: (workspaceExampleId?: string | null) => WorkspaceExampleWithId | undefined;\n}\n\nconst initialState: WorkspaceExamplesContextApi = {\n  workspaceExamples: [],\n  getWorkspaceExample: () => undefined,\n};\n\nexport const WorkspaceExamplesContext = createContext<WorkspaceExamplesContextApi>(initialState);\n\nexport const useWorkspaceExamplesContext = () => useContext(WorkspaceExamplesContext);","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { TemplateThreatStatement } from '../../customTypes';\n\nconst cleanupThreatData = (threats: TemplateThreatStatement[]) => {\n  return threats.map(t => {\n    const nt = { ...t };\n    delete nt.displayedStatement;\n\n    return nt;\n  });\n};\n\nexport default cleanupThreatData;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { EntityBase } from '../../customTypes';\n\nexport const addTagToEntity = (entity: EntityBase, tag: string) => {\n  const updated: EntityBase = {\n    ...entity,\n    tags: entity.tags ?\n      (!entity.tags.includes(tag) ?\n        [...entity.tags, tag] : entity.tags) :\n      [tag],\n  };\n\n  return updated;\n};\n\nexport const removeTagFromEntity = (entity: EntityBase, tag: string) => {\n  const updated: EntityBase = {\n    ...entity,\n    tags: entity.tags?.filter(t => t !== tag),\n  };\n\n  return updated;\n};","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { ALL_LEVELS } from '../../configs';\nimport { TemplateThreatStatement } from '../../customTypes';\n\nconst filterThreatsByMetadata = (threatList: TemplateThreatStatement[], metadataKey: string, metadataValue?: string) => {\n  if (metadataValue === ALL_LEVELS) {\n    return threatList;\n  }\n\n  if (!metadataValue) {\n    return threatList.filter((s) => {\n      if (!s.metadata) {\n        return true;\n      }\n\n      const metadata = s.metadata.find(m => m.key === metadataKey);\n\n      if (!metadata || !metadata.value) {\n        return true;\n      }\n\n      if (Array.isArray(metadata.value) && metadata.value.length === 0) {\n        return true;\n      }\n\n      return false;\n    });\n  }\n\n  return threatList.filter((s) => {\n    if (!s.metadata) {\n      return false;\n    }\n\n    const metadata = s.metadata.find(m => m.key === metadataKey);\n\n    if (!metadata || !metadata.value) {\n      return false;\n    }\n\n    if (Array.isArray(metadata.value)) {\n      return metadata.value.includes(metadataValue);\n    }\n\n    return metadata.value === metadataValue;\n  });\n};\n\nexport default filterThreatsByMetadata;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport FormField from '@cloudscape-design/components/form-field';\nimport Multiselect from '@cloudscape-design/components/multiselect';\nimport { FC } from 'react';\n\nexport const OPTIONS = [\n  { label: 'Spoofing', value: 'S' },\n  { label: 'Tampering', value: 'T' },\n  { label: 'Repudiation', value: 'R' },\n  { label: 'Information disclosure', value: 'I' },\n  { label: 'Denial of service', value: 'D' },\n  { label: 'Elevation of privilege', value: 'E' },\n];\n\nexport interface STRIDESelectorProps {\n  label: string;\n  selected?: string[];\n  setSelected: (value: string[]) => void;\n}\n\nconst STRIDESelector: FC<STRIDESelectorProps> = ({\n  label,\n  selected,\n  setSelected,\n}) => {\n  return (\n    <FormField\n      label={label}\n    >\n      <Multiselect\n        selectedOptions={selected ? OPTIONS.filter(x => selected.includes(x.value)) : []}\n        onChange={({ detail }) =>\n          setSelected(detail.selectedOptions.map(x => x.value || ''))\n        }\n        options={OPTIONS}\n        selectedAriaLabel=\"Selected\"\n      />\n    </FormField>\n  );\n};\n\nexport default STRIDESelector;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport ColumnLayout from '@cloudscape-design/components/column-layout';\nimport { TextareaProps } from '@cloudscape-design/components/textarea';\nimport { FC, useCallback, forwardRef, useRef, RefObject, useImperativeHandle } from 'react';\nimport { useBrainstormContext } from '../../../contexts/BrainstormContext/context';\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\nimport { TemplateThreatStatementSchema } from '../../../customTypes';\nimport Textarea from '../../generic/Textarea';\nimport BrainstormList from '../BrainstormList';\nimport EditorLayout from '../EditorLayout';\nimport styles from '../EditorLayout/styles';\nimport ExampleList from '../ExampleList';\nimport PreviousInputList from '../PreviousInputList';\nimport { EditorProps } from '../ThreatStatementEditor/types';\n\nconst EditorPrerequisites: FC<EditorProps> = forwardRef<TextareaProps.Ref, EditorProps>(({\n  statement, setStatement, fieldData,\n}, ref) => {\n  const inputRef = useRef<TextareaProps.Ref>();\n  const { perFieldExamples, previousInputs } = useThreatsContext();\n  const { brainstormData } = useBrainstormContext();\n\n  useImperativeHandle(ref, () => {\n    return {\n      focus() {\n        inputRef.current?.focus();\n      },\n    };\n  }, []);\n\n  const handleChange = useCallback((prerequisites: string) => {\n    setStatement(prevStatement => prevStatement && ({\n      ...prevStatement,\n      prerequisites: prerequisites,\n    }));\n  }, [setStatement]);\n\n  const handleSelect = useCallback((prerequisites: string) => {\n    handleChange(prerequisites);\n    inputRef.current?.focus();\n  }, [handleChange]);\n\n\n  return (<EditorLayout\n    title={fieldData.displayTitle}\n    description={fieldData.description}\n  >\n    <div css={styles.textEditorLayout}>\n      <div css={styles.input}>\n        <Textarea\n          ref={inputRef as RefObject<TextareaProps.Ref>}\n          onChange={({ detail }) => handleChange(detail.value)}\n          value={statement.prerequisites || ''}\n          placeholder=\"Enter prerequisites\"\n          spellcheck\n          singleLine\n          validateData={TemplateThreatStatementSchema.shape.prerequisites.safeParse}\n          rows={2}\n          stretch\n        />\n      </div>\n      {statement.prerequisites && <div css={styles.inputClear}>\n        <Button variant='icon' iconName='close' onClick={() => handleChange('')} />\n      </div>}\n    </div>\n    <ColumnLayout columns={\n      (perFieldExamples.prerequisites.length > 0 ? 1 : 0) +\n      (previousInputs.prerequisites.length > 0 ? 1 : 0) +\n      ((brainstormData.threatPrerequisites?.length || 0) > 0 ? 1 : 0)\n    }>\n      {perFieldExamples.prerequisites.length > 0 &&\n        <ExampleList examples={perFieldExamples.prerequisites} onSelect={handleSelect}></ExampleList>}\n      {previousInputs.prerequisites.length > 0 &&\n        <PreviousInputList\n          items={previousInputs.prerequisites}\n          onSelect={(content) => handleSelect(content)}\n        />\n      }\n      {(brainstormData.threatPrerequisites?.length || 0) > 0 &&\n        <BrainstormList\n          items={brainstormData.threatPrerequisites || []}\n          onSelect={handleSelect}\n        />\n      }\n    </ColumnLayout>\n  </EditorLayout>);\n});\n\nexport default EditorPrerequisites;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nconst removeLocalStorageKey = (key: string) => {\n  window.localStorage.removeItem(key);\n};\n\nexport default removeLocalStorageKey;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { DataExchangeFormat } from '../../../../customTypes';\nimport escapeMarkdown from '../../../../utils/escapeMarkdown';\n\nexport const getApplicationName = async (\n  data: DataExchangeFormat,\n) => {\n  return data.applicationInfo?.name ? `# ${escapeMarkdown(data.applicationInfo?.name)}` : '';\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback, useState } from 'react';\nimport { DataflowInfo } from '../../../../customTypes';\nimport { INFO_DEFAULT_VALUE } from '../../../constants';\nimport { LocalStateContextProviderBaseProps } from '../../../types';\nimport { DataflowInfoContext } from '../../context';\nimport { DataflowContextProviderProps } from '../../types';\n\nconst ApplicationLocalStateContextProvider: FC<PropsWithChildren<\nDataflowContextProviderProps & LocalStateContextProviderBaseProps<DataflowInfo>>> = ({\n  children,\n  initialValue,\n}) => {\n  const [dataflowInfo, setDataflowInfo] = useState<DataflowInfo>(initialValue || INFO_DEFAULT_VALUE);\n\n  const handleRemoveDataflowInfo = useCallback(async () => {\n    setDataflowInfo(INFO_DEFAULT_VALUE);\n  }, []);\n\n  const handleDeleteWorkspace = useCallback(async (_workspaceId: string) => {\n    setDataflowInfo(INFO_DEFAULT_VALUE);\n  }, []);\n\n  return (<DataflowInfoContext.Provider value={{\n    dataflowInfo,\n    setDataflowInfo,\n    removeDataflowInfo: handleRemoveDataflowInfo,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </DataflowInfoContext.Provider>);\n};\n\nexport default ApplicationLocalStateContextProvider;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport Grid from '@cloudscape-design/components/grid';\nimport Input from '@cloudscape-design/components/input';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport { useCallback, useMemo, useState } from 'react';\nimport { PerFieldExample } from '../../../customTypes';\n\nexport const DEFAULT_NUM_DISPLAY = 5;\n\nconst styles = {\n  list: css({\n    '& button': {\n      padding: `0px ${awsui.spaceStaticXxs} !important`,\n    },\n  }),\n};\n\nexport interface PreviousInputListProps<T> {\n  items: T[];\n  onSelect: (item: string) => void;\n  showSearch?: boolean;\n}\n\nconst PreviousInputList = <T extends string | PerFieldExample>({\n  items,\n  onSelect,\n  showSearch = true,\n}: PreviousInputListProps<T>) => {\n  const [showMoreItems, setShowMoreItems] = useState(false);\n  const [filterText, setFilterText] = useState('');\n\n  const filteredItems = useMemo(() => {\n    if (!filterText) {\n      return items;\n    }\n\n    return items.filter(item => {\n      if (typeof item === 'string') {\n        return item.toLowerCase().includes(filterText.toLowerCase());\n      }\n\n      return (item as PerFieldExample).example.toLowerCase().includes(filterText.toLowerCase());\n    });\n  }, [items, filterText]);\n\n  const renderItem = useCallback((item: T) => {\n    if (typeof item === 'string') {\n      return (\n        <Button variant='link' onClick={() => onSelect(item)}>\n          {item}\n        </Button>\n      );\n    }\n\n    const perFieldExample = item as PerFieldExample;\n    return (\n      <Button variant='link' onClick={() => onSelect(perFieldExample.example)}>\n        {perFieldExample.example}\n      </Button>\n    );\n  }, [onSelect]);\n\n  return (\n    <TextContent>\n      <SpaceBetween direction='vertical' size='m'>\n        <span>From previous input</span>\n        {showSearch && (\n          <Grid gridDefinition={[{ colspan: { default: 12, xxs: 6 } }]}>\n            <Input\n              value={filterText}\n              onChange={({ detail }) => setFilterText(detail.value)}\n              placeholder='Search previous inputs'\n            />\n          </Grid>\n        )}\n        <ul>\n          {filteredItems\n            .slice(0, showMoreItems ? undefined : DEFAULT_NUM_DISPLAY)\n            .map((item, index) => (\n              <li key={index} css={styles.list}>\n                {renderItem(item)}\n              </li>\n            ))}\n        </ul>\n        {filteredItems.length > DEFAULT_NUM_DISPLAY && (\n          <Button\n            iconName={showMoreItems ? 'treeview-collapse' : 'treeview-expand'}\n            onClick={() => setShowMoreItems(prev => !prev)}\n            variant='link'\n          >\n            {showMoreItems ? 'Show less items' : 'Show more items'}\n          </Button>\n        )}\n      </SpaceBetween>\n    </TextContent>\n  );\n};\n\nexport default PreviousInputList;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { DataExchangeFormat } from '../../../../customTypes';\n\nexport const getApplicationInfoContent = async (\n  data: DataExchangeFormat,\n) => {\n  const rows: string[] = [];\n  rows.push('## Application Info');\n  if (data.applicationInfo?.description) {\n    rows.push(data.applicationInfo.description);\n  }\n\n  rows.push('\\n');\n\n  return rows.join('\\n');\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Multiselect from '@cloudscape-design/components/multiselect';\nimport React, { FC, useMemo } from 'react';\n\nexport interface AssetSelectorProps {\n  allAssets: string[];\n  selectedAssets: string[];\n  setSelectedAssets: React.Dispatch<React.SetStateAction<string[]>>;\n}\n\nconst AssetSelector: FC<AssetSelectorProps> = ({\n  allAssets,\n  selectedAssets,\n  setSelectedAssets,\n}) => {\n  const sortedAssets = useMemo(() => {\n    return allAssets.sort((a, b) => {\n      return a.toLowerCase().localeCompare(b.toLowerCase());\n    });\n  }, [allAssets]);\n\n  return (<Multiselect\n    tokenLimit={0}\n    selectedOptions={selectedAssets.map(ia => ({\n      label: ia,\n      value: ia,\n    }))}\n    onChange={({ detail }) =>\n      setSelectedAssets(detail.selectedOptions?.map(o => o.value || '') || [])\n    }\n    deselectAriaLabel={e => `Remove ${e.label}`}\n    options={sortedAssets.map(g => ({\n      label: g,\n      value: g,\n    }))}\n    filteringType=\"auto\"\n    placeholder=\"Filtered by Assets\"\n    selectedAriaLabel=\"Selected\"\n  />);\n};\n\nexport default AssetSelector;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { TemplateThreatStatement } from './threats';\n\nexport type ThreatFieldTypes = 'threat_source' | 'prerequisites' | 'threat_action' | 'threat_impact' | 'impacted_goal' | 'impacted_assets';\n\nexport const threatFieldTypeMapping: {\n  [key in ThreatFieldTypes]: keyof TemplateThreatStatement;\n} = {\n  threat_source: 'threatSource',\n  prerequisites: 'prerequisites',\n  threat_action: 'threatAction',\n  threat_impact: 'threatImpact',\n  impacted_goal: 'impactedGoal',\n  impacted_assets: 'impactedAssets',\n};\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback, useState } from 'react';\nimport { TemplateThreatStatement } from '../../../../customTypes';\nimport { useGlobalSetupContext } from '../../../GlobalSetupContext/context';\nimport { LocalStateContextProviderBaseProps } from '../../../types';\nimport { ThreatsContext } from '../../context';\nimport useThreatExamples from '../../hooks/useThreatExamples';\nimport useThreats from '../../hooks/useThreats';\nimport { ThreatsContextProviderProps } from '../../types';\n\nconst ThreatsContextProvider: FC<PropsWithChildren<ThreatsContextProviderProps & LocalStateContextProviderBaseProps<TemplateThreatStatement[]>>> = ({\n  children,\n  initialValue,\n}) => {\n  const [editingStatement,\n    setEditingStatement] = useState<TemplateThreatStatement | null>(null);\n\n  const [statementList,\n    setStatementList] = useState<TemplateThreatStatement[]>(initialValue || []);\n\n  const { composerMode } = useGlobalSetupContext();\n\n  const {\n    threatStatementExamples,\n    perFieldExamples,\n    previousInputs,\n  } = useThreatExamples(statementList);\n\n  const {\n    view,\n    setView,\n    handleAddStatement,\n    handlRemoveStatement,\n    handleEditStatement,\n    handleSaveStatement,\n  } = useThreats(\n    composerMode,\n    statementList,\n    setStatementList,\n    editingStatement,\n    setEditingStatement,\n  );\n\n  const handleRemoveAllStatements = useCallback(async () => {\n    setStatementList([]);\n    setEditingStatement(null);\n  }, []);\n\n  const handleDeleteWorkspace = useCallback(async (_workspaceId: string) => {\n    setStatementList([]);\n    setEditingStatement(null);\n  }, []);\n\n  return (<ThreatsContext.Provider value={{\n    view,\n    editingStatement,\n    statementList,\n    setStatementList,\n    threatStatementExamples: threatStatementExamples as TemplateThreatStatement[],\n    perFieldExamples,\n    previousInputs,\n    setView,\n    setEditingStatement,\n    addStatement: handleAddStatement,\n    removeStatement: handlRemoveStatement,\n    editStatement: handleEditStatement,\n    saveStatement: handleSaveStatement,\n    removeAllStatements: handleRemoveAllStatements,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </ThreatsContext.Provider>);\n};\n\nexport default ThreatsContextProvider;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Alert from '@cloudscape-design/components/alert';\nimport Box from '@cloudscape-design/components/box';\nimport Button from '@cloudscape-design/components/button';\nimport Header from '@cloudscape-design/components/header';\nimport Modal from '@cloudscape-design/components/modal';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport React, { FC, useMemo, useState } from 'react';\nimport { TemplateThreatStatement, TemplateThreatStatementSchema } from '../../../customTypes';\nimport renderThreatStatement from '../../../utils/renderThreatStatement';\nimport Textarea from '../../generic/Textarea';\n\nexport interface CustomTemplateProps {\n  visible: boolean;\n  setVisible: React.Dispatch<React.SetStateAction<boolean>>;\n  onConfirm: (template: string) => void;\n  statement: TemplateThreatStatement;\n  defaultTemplate: string;\n}\n\nconst CustomTemplate: FC<CustomTemplateProps> = ({ visible, setVisible, statement, defaultTemplate, onConfirm }) => {\n  const [value, setValue] = useState(statement?.customTemplate || defaultTemplate);\n\n  const renderedStatement = useMemo(() => {\n    const { statement: updatedStatement } = renderThreatStatement({\n      ...statement,\n      customTemplate: value === defaultTemplate ? undefined : value,\n    });\n    return updatedStatement;\n  }, [statement, value, defaultTemplate]);\n\n  const footer = useMemo(() => {\n    return (<Box float=\"right\">\n      <SpaceBetween direction=\"horizontal\" size=\"xs\">\n        <Button variant=\"link\" onClick={() => setVisible(false)}>Cancel</Button>\n        <Button onClick={() => setValue(defaultTemplate)}>Reset to default</Button>\n        <Button variant=\"primary\" disabled={value.length < 3} onClick={() => onConfirm(value)}>\n          Confirm\n        </Button>\n      </SpaceBetween>\n    </Box>);\n  }, [setVisible, onConfirm, value, defaultTemplate]);\n\n  const isUsingDefaultTemplate = value === defaultTemplate;\n\n  return (<Modal\n    header={<Header>Custom Template</Header>}\n    visible={visible}\n    footer={footer}\n    onDismiss={() => setVisible(false)}\n  >\n    <SpaceBetween direction=\"vertical\" size=\"l\">\n      <Alert type='info' header={isUsingDefaultTemplate ? 'Default template is used' : 'Custom template is used'}>\n        {isUsingDefaultTemplate ?\n          'You can create a custom template to control how your statement is renderer. It is only applicable to the currently editing statement.'\n          : 'You can edit the custom template or reset it to the default template. It is only applicable to the currently editing statement. '}\n      </Alert>\n      <Box>\n        <p><b>Renderer Statement:</b></p>\n        <p>{renderedStatement}</p>\n      </Box>\n      <Textarea\n        value={value}\n        onChange={({ detail }) => setValue(detail.value)}\n        label=\"Template\"\n        validateData={TemplateThreatStatementSchema.shape.customTemplate.safeParse}\n        constraintText=\"Tokens like [threat_source], [prerequisites], [threat_action], [threat_impact], [impacted_goal] or [impacted_assets] will be replaced by actual content. \"\n      />\n    </SpaceBetween>\n  </Modal>);\n};\n\nexport default CustomTemplate;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { TemplateThreatStatement } from '../../customTypes';\nimport { threatFieldTypeMapping, ThreatFieldTypes } from '../../customTypes/threatFieldTypes';\nimport threatFieldData from '../../data/threatFieldData';\n\nconst calculateFieldCombination = (statement: TemplateThreatStatement) => {\n  let fieldCombination = 0;\n  const filledField: string[] = [];\n  Object.keys(threatFieldTypeMapping).forEach((key) => {\n    const value = statement[threatFieldTypeMapping[key as ThreatFieldTypes]];\n    if (value) {\n      if (typeof value === 'string') {\n        fieldCombination += threatFieldData[key].fieldId;\n        filledField.push(key);\n      } else if (Array.isArray(value) && value.length > 0) {\n        fieldCombination += threatFieldData[key].fieldId;\n        filledField.push(key);\n      }\n    }\n  });\n\n  return {\n    fieldCombination,\n    filledField,\n  };\n};\n\nexport default calculateFieldCombination;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { FC, useCallback, useState, useMemo } from 'react';\nimport { useBrainstormContext } from '../../../../../contexts/BrainstormContext';\nimport { PromotionHandlers, ThreatCreationHandlers } from '../../../../../contexts/BrainstormContext/types';\nimport { BrainstormItem, BrainstormData } from '../../../../../customTypes/brainstorm';\nimport GroupableItemCard from '../../../../generic/GroupableItemCard';\nimport EntityCreationCard from '../EntityCreationCard';\n\n// Export column configuration for use by parent components\nexport { columnConfig, ColumnConfig, getThreatInputColumns, getPromotableColumns, getThreatCreationColumns, getColumnById } from './columnConfig';\n\nexport interface ItemColumnProps {\n  title: string;\n  itemType: keyof BrainstormData;\n  placeholder: string;\n  description: string;\n  icon: string;\n  isPromotable?: boolean;\n  onPromote?: PromotionHandlers;\n  canCreateThreat?: boolean;\n  onCreateThreat?: ThreatCreationHandlers;\n}\n\nconst ItemColumn: FC<ItemColumnProps> = ({\n  itemType,\n  placeholder,\n  isPromotable = false,\n  onPromote,\n  canCreateThreat = false,\n  onCreateThreat,\n}) => {\n  const { brainstormData, addItem, updateItem, removeItem, ungroupItem, mergeGroups } = useBrainstormContext();\n  const [content, setContent] = useState('');\n\n  const handleContentChange = useCallback((newContent: string) => {\n    setContent(newContent);\n  }, []);\n\n  const handleSave = useCallback(() => {\n    if (content.trim()) {\n      addItem(itemType, content.trim());\n      setContent('');\n    }\n  }, [content, itemType, addItem]);\n\n  const handleUpdate = useCallback((updatedItem: BrainstormItem) => {\n    updateItem(itemType, updatedItem.id, updatedItem.content);\n  }, [itemType, updateItem]);\n\n  const handleGroup = useCallback((sourceId: string, targetId: string) => {\n    mergeGroups(itemType, sourceId, targetId);\n  }, [mergeGroups, itemType]);\n\n  const handleUngroup = useCallback((id: string) => {\n    ungroupItem(itemType, id);\n  }, [ungroupItem, itemType]);\n\n  // Create display items logic - group items by groupId and sort by creation time\n  const displayItems = useMemo(() => {\n    const items = brainstormData[itemType] || [];\n    const groupMap = new Map<string, BrainstormItem[]>();\n    const individualItems: BrainstormItem[] = [];\n\n    // Group items by groupId\n    items.forEach(item => {\n      if (item.groupId) {\n        if (!groupMap.has(item.groupId)) {\n          groupMap.set(item.groupId, []);\n        }\n        groupMap.get(item.groupId)!.push(item);\n      } else {\n        individualItems.push(item);\n      }\n    });\n\n    // Sort items within each group by creation time\n    groupMap.forEach(itemsInGroup => {\n      itemsInGroup.sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n    });\n\n    // Create display items\n    const result: Array<{ item: BrainstormItem; groupedItems: BrainstormItem[] }> = [];\n\n    // Add individual items\n    individualItems.forEach(item => {\n      result.push({ item, groupedItems: [] });\n    });\n\n    // Add groups represented by their earliest item\n    groupMap.forEach(itemsInGroup => {\n      if (itemsInGroup.length > 0) {\n        result.push({ item: itemsInGroup[0], groupedItems: itemsInGroup });\n      }\n    });\n\n    // Sort by creation time\n    result.sort((a, b) => new Date(a.item.createdAt).getTime() - new Date(b.item.createdAt).getTime());\n\n    return result;\n  }, [brainstormData, itemType]);\n\n  return (\n    <SpaceBetween direction=\"vertical\" size=\"s\">\n      <EntityCreationCard\n        header=\"\"\n        content={content}\n        onContentChange={handleContentChange}\n        onSave={handleSave}\n        placeholder={placeholder}\n        disabled={!content.trim()}\n      />\n      {displayItems.map(({ item, groupedItems }) => (\n        <GroupableItemCard\n          key={item.id}\n          item={item}\n          itemType={itemType}\n          onDelete={(id: string) => removeItem(itemType, id)}\n          onUpdate={handleUpdate}\n          isPromotable={isPromotable}\n          onPromote={onPromote}\n          canCreateThreat={canCreateThreat}\n          onCreateThreat={onCreateThreat}\n          groupedItems={groupedItems}\n          onGroup={handleGroup}\n          onUngroup={handleUngroup}\n        />\n      ))}\n    </SpaceBetween>\n  );\n};\n\nexport default ItemColumn;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n\nimport { getApplicationInfoContent } from './utils/getApplicationInfo';\nimport { getApplicationName } from './utils/getApplicationName';\nimport { getArchitectureContent } from './utils/getArchitecture';\nimport { getAssetsContent } from './utils/getAssets';\nimport { getAssumptionsContent } from './utils/getAssumptions';\nimport { getDataflowContent } from './utils/getDataFlow';\nimport { getMitigationsContent } from './utils/getMitigations';\nimport { getThreatsContent } from './utils/getThreats';\nimport { DataExchangeFormat } from '../../customTypes';\nimport hasContent from '../hasContent';\nimport sanitizeHtml from '../sanitizeHtml';\n\nconst convertToMarkdown = async (data: DataExchangeFormat, composerMode = 'Full') => {\n  const sanitizedData = sanitizeHtml(data);\n  const [_, hasContentDetails] = hasContent(data);\n\n  const processedContent = (composerMode === 'Full' ? [\n    (!hasContentDetails || hasContentDetails.applicationName) && await getApplicationName(sanitizedData),\n    (!hasContentDetails || hasContentDetails.applicationInfo) && await getApplicationInfoContent(sanitizedData),\n    (!hasContentDetails || hasContentDetails.architecture) && await getArchitectureContent(sanitizedData),\n    (!hasContentDetails || hasContentDetails.dataflow) && await getDataflowContent(sanitizedData),\n    (!hasContentDetails || hasContentDetails.assumptions) && await getAssumptionsContent(sanitizedData),\n    (!hasContentDetails || hasContentDetails.threats) && await getThreatsContent(sanitizedData),\n    (!hasContentDetails || hasContentDetails.mitigations) && await getMitigationsContent(sanitizedData),\n    (!hasContentDetails || hasContentDetails.threats) && await getAssetsContent(sanitizedData),\n  ] : [await getThreatsContent(sanitizedData, true)]).filter(x => !!x).join('\\n');\n\n  return processedContent;\n};\n\nexport default convertToMarkdown;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport {\n  Button,\n  Modal,\n  SpaceBetween,\n  Box,\n  StatusIndicator,\n  Grid,\n  SegmentedControl,\n} from '@cloudscape-design/components';\nimport { FC, useState, useEffect, useCallback, CSSProperties } from 'react';\n\n/**\n * Props interface for DiagramModal component\n */\nexport interface DiagramModalProps {\n  /** Whether the modal is visible */\n  visible: boolean;\n  /** Callback function called when modal should be dismissed */\n  onDismiss: () => void;\n  /** Title to display in the modal header */\n  title: string;\n  /** Optional image URL to display in the modal */\n  image?: string;\n}\n\n/**\n * DiagramModal component for displaying architecture and dataflow diagrams\n * with enhanced zoom and pan functionality using Cloudscape components\n */\nexport const DiagramModal: FC<DiagramModalProps> = ({\n  visible,\n  onDismiss,\n  title,\n  image,\n}) => {\n  // State management\n  const [zoomLevel, setZoomLevel] = useState(100);\n  const [panPosition, setPanPosition] = useState({ x: 0, y: 0 });\n  const [viewMode, setViewMode] = useState<'fit' | 'custom'>('fit');\n  const [imageDimensions, setImageDimensions] = useState({ width: 0, height: 0 });\n  const [containerDimensions, setContainerDimensions] = useState({ width: 800, height: 600 });\n  const [isPanning, setIsPanning] = useState(false);\n  const [panStart, setPanStart] = useState({ x: 0, y: 0 });\n\n\n  // Load image and calculate dimensions\n  useEffect(() => {\n    if (image) {\n      const img = new Image();\n      img.onload = () => {\n        const aspectRatio = img.naturalWidth / img.naturalHeight;\n        setImageDimensions({ width: img.naturalWidth, height: img.naturalHeight });\n\n        // Calculate optimal container size based on viewport\n        const maxWidth = Math.min(window.innerWidth * 0.85, 1200);\n        const maxHeight = Math.min(window.innerHeight * 0.75, 800);\n\n        let containerWidth = maxWidth;\n        let containerHeight = containerWidth / aspectRatio;\n\n        if (containerHeight > maxHeight) {\n          containerHeight = maxHeight;\n          containerWidth = containerHeight * aspectRatio;\n        }\n\n        setContainerDimensions({ width: containerWidth, height: containerHeight });\n\n        // Calculate initial fit-to-window zoom level\n        const scaleX = containerWidth / img.naturalWidth;\n        const scaleY = containerHeight / img.naturalHeight;\n        const fitZoom = Math.min(scaleX, scaleY) * 100;\n\n        setZoomLevel(fitZoom);\n        setPanPosition({ x: 0, y: 0 });\n        setViewMode('fit');\n      };\n      img.src = image;\n    }\n  }, [image]);\n\n  // Handle fit to window - calculate proper zoom to fit image in container\n  const handleFitToWindow = useCallback(() => {\n    if (imageDimensions.width && imageDimensions.height) {\n      const scaleX = containerDimensions.width / imageDimensions.width;\n      const scaleY = containerDimensions.height / imageDimensions.height;\n      const fitZoom = Math.min(scaleX, scaleY) * 100;\n\n      setZoomLevel(fitZoom);\n      setPanPosition({ x: 0, y: 0 });\n      setViewMode('fit');\n    }\n  }, [imageDimensions, containerDimensions]);\n\n  // Handle mouse wheel zoom\n  const handleWheel = useCallback((e: React.WheelEvent) => {\n    e.preventDefault();\n    const delta = e.deltaY > 0 ? -10 : 10;\n    const newZoom = Math.max(25, Math.min(400, zoomLevel + delta));\n    setZoomLevel(newZoom);\n    setViewMode('custom');\n  }, [zoomLevel]);\n\n  // Handle drag panning (when zoomed in)\n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\n    if (e.button === 0 && zoomLevel > 100) {\n      setIsPanning(true);\n      setPanStart({ x: e.clientX, y: e.clientY });\n      e.preventDefault();\n    }\n  }, [zoomLevel]);\n\n  const handleMouseMove = useCallback((e: React.MouseEvent) => {\n    if (isPanning) {\n      const deltaX = e.clientX - panStart.x;\n      const deltaY = e.clientY - panStart.y;\n      setPanPosition(prev => ({\n        x: prev.x + deltaX / (zoomLevel / 100),\n        y: prev.y + deltaY / (zoomLevel / 100),\n      }));\n      setPanStart({ x: e.clientX, y: e.clientY });\n    }\n  }, [isPanning, panStart, zoomLevel]);\n\n  const handleMouseUp = useCallback(() => {\n    setIsPanning(false);\n  }, []);\n\n  // Handle zoom preset selection from segmented control\n  const handleZoomPresetChange = useCallback((event: any) => {\n    const zoomValue = parseInt(event.detail.selectedId);\n    setZoomLevel(zoomValue);\n    setViewMode('custom');\n    if (zoomValue === 100) {\n      setPanPosition({ x: 0, y: 0 });\n    }\n  }, []);\n\n  // Get selected zoom preset for segmented control\n  const getSelectedZoomPreset = useCallback(() => {\n    if (viewMode === 'custom') {\n      const presetValues = [25, 50, 100, 150, 200];\n      if (presetValues.includes(zoomLevel)) {\n        return zoomLevel.toString();\n      }\n    }\n    return null;\n  }, [viewMode, zoomLevel]);\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if (!visible) return;\n\n      switch (e.key) {\n        case '=':\n        case '+':\n          setZoomLevel(prev => Math.min(400, prev + 25));\n          setViewMode('custom');\n          break;\n        case '-':\n          setZoomLevel(prev => Math.max(25, prev - 25));\n          setViewMode('custom');\n          break;\n        case '0':\n          handleFitToWindow();\n          break;\n        case '1':\n          // Set to 100% zoom (actual size)\n          setZoomLevel(100);\n          setPanPosition({ x: 0, y: 0 });\n          setViewMode('custom');\n          break;\n        case 'ArrowUp':\n          setPanPosition(prev => ({ ...prev, y: prev.y + 50 }));\n          break;\n        case 'ArrowDown':\n          setPanPosition(prev => ({ ...prev, y: prev.y - 50 }));\n          break;\n        case 'ArrowLeft':\n          setPanPosition(prev => ({ ...prev, x: prev.x + 50 }));\n          break;\n        case 'ArrowRight':\n          setPanPosition(prev => ({ ...prev, x: prev.x - 50 }));\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [visible, handleFitToWindow]);\n\n  // Styles\n  const imageContainerStyles: CSSProperties = {\n    width: `${containerDimensions.width}px`,\n    height: `${containerDimensions.height}px`,\n    margin: '0 auto',\n    overflow: 'hidden',\n    position: 'relative',\n    border: '1px solid #d5dbdb',\n    borderRadius: '4px',\n    cursor: isPanning ? 'move' : (zoomLevel > 100 ? 'grab' : 'default'),\n  };\n\n  const imageStyles: CSSProperties = {\n    maxWidth: 'none',\n    maxHeight: 'none',\n    width: `${imageDimensions.width}px`,\n    height: `${imageDimensions.height}px`,\n    transform: `scale(${zoomLevel / 100}) translate(${panPosition.x}px, ${panPosition.y}px)`,\n    transformOrigin: 'center center',\n    transition: isPanning ? 'none' : 'transform 0.2s ease',\n    userSelect: 'none',\n    pointerEvents: 'none',\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    marginTop: `${-imageDimensions.height / 2}px`,\n    marginLeft: `${-imageDimensions.width / 2}px`,\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      onDismiss={onDismiss}\n      size=\"max\"\n      header={title}\n      footer={\n        <SpaceBetween direction=\"horizontal\" size=\"xs\">\n          <span style={{ fontSize: '12px', color: '#5f6b7a' }}>\n            Use mouse wheel to zoom, arrow keys or pan controls to navigate\n          </span>\n        </SpaceBetween>\n      }\n    >\n      {image ? (\n        <SpaceBetween size='s'>\n          <Box>\n            {/* Main Toolbar */}\n            <Grid gridDefinition={[{ colspan: 8 }, { colspan: 4 }]}>\n              <SpaceBetween direction=\"horizontal\" size=\"s\" alignItems=\"center\">\n                <SegmentedControl\n                  selectedId={getSelectedZoomPreset()}\n                  onChange={handleZoomPresetChange}\n                  options={[\n                    { text: '25%', id: '25' },\n                    { text: '50%', id: '50' },\n                    { text: '100%', id: '100' },\n                    { text: '150%', id: '150' },\n                    { text: '200%', id: '200' },\n                  ]}\n                />\n                <Button onClick={handleFitToWindow} variant={viewMode === 'fit' ? 'primary' : 'normal'}>\n                  Fit Window\n                </Button>\n                <StatusIndicator type=\"info\">\n                  {Math.round(zoomLevel)}%\n                </StatusIndicator>\n              </SpaceBetween>\n\n              <SpaceBetween direction=\"horizontal\" size=\"xs\" alignItems=\"center\">\n                <span style={{ fontSize: '12px', fontWeight: 'bold' }}>Pan:</span>\n                <SpaceBetween direction=\"horizontal\" size=\"xs\">\n                  <Button\n                    variant=\"icon\"\n                    iconName=\"caret-up-filled\"\n                    onClick={() => { setPanPosition(prev => ({ ...prev, y: prev.y + 50 })); setViewMode('custom'); }}\n                    ariaLabel=\"Pan up\"\n                  />\n                  <Button\n                    variant=\"icon\"\n                    iconName=\"caret-down-filled\"\n                    onClick={() => { setPanPosition(prev => ({ ...prev, y: prev.y - 50 })); setViewMode('custom'); }}\n                    ariaLabel=\"Pan down\"\n                  />\n                  <Button\n                    variant=\"icon\"\n                    iconName=\"caret-left-filled\"\n                    onClick={() => { setPanPosition(prev => ({ ...prev, x: prev.x + 50 })); setViewMode('custom'); }}\n                    ariaLabel=\"Pan left\"\n                  />\n                  <Button\n                    variant=\"icon\"\n                    iconName=\"caret-right-filled\"\n                    onClick={() => { setPanPosition(prev => ({ ...prev, x: prev.x - 50 })); setViewMode('custom'); }}\n                    ariaLabel=\"Pan right\"\n                  />\n                </SpaceBetween>\n              </SpaceBetween>\n            </Grid>\n          </Box>\n          <Box>\n            <div\n              style={imageContainerStyles}\n              onWheel={handleWheel}\n              onMouseDown={handleMouseDown}\n              onMouseMove={handleMouseMove}\n              onMouseUp={handleMouseUp}\n              onMouseLeave={handleMouseUp}\n            >\n              <img\n                src={image}\n                alt={title}\n                style={imageStyles}\n                draggable={false}\n              />\n            </div>\n          </Box>\n        </SpaceBetween>\n      ) : (\n        <Box textAlign=\"center\" padding=\"xxl\">\n          <StatusIndicator type=\"info\">No diagram available</StatusIndicator>\n        </Box>\n      )}\n    </Modal>\n  );\n};\n\nexport default DiagramModal;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC } from 'react';\nimport ThreatStatementEditor from '../../components/threats/ThreatStatementEditor';\nimport ThreatStatementList from '../../components/threats/ThreatStatementList';\nimport ContextAggregator from '../../contexts/ContextAggregator';\nimport { useGlobalSetupContext } from '../../contexts/GlobalSetupContext/context';\nimport { useThreatsContext } from '../../contexts/ThreatsContext/context';\nimport { ComposerMode, DataExchangeFormat } from '../../customTypes';\n\nconst ThreatStatementGeneratorInner: FC = () => {\n  const { view } = useThreatsContext();\n  const { composerMode } = useGlobalSetupContext();\n  return view === 'list' && composerMode !== 'EditorOnly' ? <ThreatStatementList /> : <ThreatStatementEditor />;\n};\n\nexport interface ThreatStatementGeneratorInnerProps {\n  composerMode?: ComposerMode;\n  onPreview?: (content: DataExchangeFormat) => void;\n  onPreviewClose?: () => void;\n  onImported?: () => void;\n}\n\n/**\n * Main component for Threat Statement Generator.\n * This component can be imported and used in other react app.\n */\nconst ThreatStatementGenerator: FC<ThreatStatementGeneratorInnerProps> = ({\n  composerMode,\n  onPreview,\n  onPreviewClose,\n  onImported,\n}) => {\n  return (\n    <ContextAggregator\n      onPreview={onPreview}\n      onPreviewClose={onPreviewClose}\n      onImported={onImported}\n      composerMode={composerMode} >\n      <ThreatStatementGeneratorInner />\n    </ContextAggregator>\n  );\n};\n\nexport default ThreatStatementGenerator;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { css } from '@emotion/react';\n\nconst styles = css({\n  fontSize: '16px',\n});\n\nexport default styles;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, useCallback, useEffect, useState } from 'react';\nimport { useAssumptionLinksContext } from '../../../contexts/AssumptionLinksContext/context';\nimport { useMitigationsContext } from '../../../contexts/MitigationsContext/context';\nimport { AssumptionLink } from '../../../customTypes';\nimport getNewMitigation from '../../../utils/getNewMitigation';\nimport MitigationLinkView from '../../mitigations/MitigationLinkView';\n\nexport interface AssumptionThreatLinkProps {\n  assumptionId: string;\n}\n\nconst AssumptionThreatLinkComponent: FC<AssumptionThreatLinkProps> = ({\n  assumptionId,\n}) => {\n  const { mitigationList, saveMitigation } = useMitigationsContext();\n  const [assumptionLinks, setAssumptionLinks] = useState<AssumptionLink[]>([]);\n\n  const { getAssumptionEntityLinks } = useAssumptionLinksContext();\n\n  useEffect(() => {\n    const _assumptionLinks = getAssumptionEntityLinks(assumptionId, 'Mitigation');\n    setAssumptionLinks(_assumptionLinks || []);\n  }, [getAssumptionEntityLinks, assumptionId]);\n\n  const {\n    addAssumptionLink,\n    removeAssumptionLink,\n  } = useAssumptionLinksContext();\n\n  const handleAddMitigationLink = useCallback((mitigationIdOrNewMitigation: string) => {\n    if (mitigationList.find(m => m.id === mitigationIdOrNewMitigation)) {\n      addAssumptionLink({\n        linkedId: mitigationIdOrNewMitigation,\n        assumptionId,\n        type: 'Mitigation',\n      });\n    } else {\n      const newMitigation = saveMitigation(getNewMitigation(mitigationIdOrNewMitigation));\n      addAssumptionLink({\n        type: 'Mitigation',\n        linkedId: newMitigation.id,\n        assumptionId,\n      });\n    }\n  }, [assumptionId, mitigationList, addAssumptionLink, saveMitigation]);\n\n  return (<MitigationLinkView\n    mitigationList={mitigationList}\n    linkedMitigationIds={assumptionLinks.map(ml => ml.linkedId)}\n    onAddMitigationLink={handleAddMitigationLink}\n    onRemoveMitigationLink={(mitigationId) => removeAssumptionLink(assumptionId, mitigationId)}\n  />);\n};\n\nexport default AssumptionThreatLinkComponent;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { applyDensity, applyMode, Density, Mode } from '@cloudscape-design/global-styles';\nimport { FC, createContext, useState, useEffect, useContext, PropsWithChildren } from 'react';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { LOCAL_STORAGE_KEY_THEME_MODE, LOCAL_STORAGE_KEY_THEME_DENSITY } from '../../../configs';\n\nimport '@cloudscape-design/global-styles/index.css';\n\nexport interface ThemeProviderProps {\n  appMode?: string;\n  theme?: Mode;\n  densitiy?: Density;\n}\n\nexport interface ThemeContextApi {\n  theme: Mode;\n  density: Density;\n  setTheme: React.Dispatch<React.SetStateAction<Mode>>;\n  setDensity: React.Dispatch<React.SetStateAction<Density>>;\n}\n\nconst useTheme = (props: ThemeProviderProps, { theme, setTheme, density, setDensity }: ThemeContextApi) => {\n  useEffect(() => {\n    typeof props.theme !== 'undefined' && setTheme(props.theme);\n  }, [props.theme]);\n\n  useEffect(() => {\n    typeof props.densitiy !== 'undefined' && setDensity(props.densitiy);\n  }, [props.densitiy]);\n\n  useEffect(() => {\n    applyMode(theme);\n  }, [theme]);\n\n  useEffect(() => {\n    applyDensity(density);\n  }, [density]);\n};\n\nconst ThemeLocalStateProvider: FC<PropsWithChildren<ThemeProviderProps>> = ({\n  children,\n  ...props\n}) => {\n  const [theme, setTheme] = useState<Mode>(props.theme || Mode.Light);\n\n  const [density, setDensity] = useState<Density>(() => {\n    if (props.densitiy === Density.Compact) {\n      return Density.Compact;\n    }\n\n    return Density.Comfortable;\n  });\n\n  useTheme(props, {\n    theme,\n    setTheme,\n    density,\n    setDensity,\n  });\n\n  return (\n    <ThemeContext.Provider\n      value={{\n        theme,\n        density,\n        setTheme,\n        setDensity,\n      }}\n    >\n      {children}\n    </ThemeContext.Provider>\n  );\n};\n\nconst ThemeLocalStorageProvider: FC<PropsWithChildren<ThemeProviderProps>> = ({\n  children,\n  ...props\n}) => {\n  const [theme, setTheme] = useLocalStorageState<Mode>(LOCAL_STORAGE_KEY_THEME_MODE, {\n    defaultValue: props.theme || Mode.Light,\n  });\n\n  const [density, setDensity] = useLocalStorageState<Density>(LOCAL_STORAGE_KEY_THEME_DENSITY, {\n    defaultValue: props.densitiy === Density.Compact ? Density.Compact : Density.Comfortable,\n  });\n\n  useTheme(props, {\n    theme,\n    setTheme,\n    density,\n    setDensity,\n  });\n\n  return (\n    <ThemeContext.Provider\n      value={{\n        theme,\n        density,\n        setTheme,\n        setDensity,\n      }}\n    >\n      {children}\n    </ThemeContext.Provider>\n  );\n};\n\nconst initialState: ThemeContextApi = {\n  theme: Mode.Light,\n  density: Density.Comfortable,\n  setTheme: () => { },\n  setDensity: () => { },\n};\n\nconst ThemeContext = createContext<ThemeContextApi>(initialState);\n\n\nconst ThemeProvider: FC<PropsWithChildren<ThemeProviderProps>> = ({\n  appMode,\n  ...props\n}) => {\n  return appMode === 'ide-extension' ? <ThemeLocalStateProvider {...props} /> : <ThemeLocalStorageProvider {...props} />;\n};\n\nexport {\n  Mode,\n  Density,\n};\n\nexport const useThemeContext = () => useContext(ThemeContext);\n\nexport default ThemeProvider;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Button from '@cloudscape-design/components/button';\nimport ContentLayout from '@cloudscape-design/components/content-layout';\nimport Header from '@cloudscape-design/components/header';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { useMemo, FC, useCallback, useState } from 'react';\nimport GeneralInfo from './components/GeneralInfo';\nimport { useMitigationPacksContext } from '../../../contexts/MitigationPacksContext';\nimport { Mitigation } from '../../../customTypes/mitigations';\nimport getMetadata from '../../../utils/getMetadata';\nimport Table, { ColumnDefinition } from '../../generic/Table';\n\nexport interface MitigationPackProp {\n  mitigationPackId: string;\n}\n\nconst MitigationPack: FC<MitigationPackProp> = ({\n  mitigationPackId,\n}) => {\n  const { mitigationPacks, mitigationPackUsage, addMitigations } = useMitigationPacksContext();\n\n  const mitigationPack = useMemo(() => {\n    return mitigationPacks.find(x => x.id === mitigationPackId);\n  }, []);\n\n  const [selectedItems, setSelectedItems] = useState<(Mitigation & {\n    comments?: string;\n  })[]>([]);\n\n  const handleAddToWorkspace = useCallback(async () => {\n    await addMitigations(mitigationPackId, selectedItems.map(x => {\n      const { comments, ...data } = x;\n      return data;\n    }));\n    setSelectedItems([]);\n  }, [mitigationPackId, selectedItems]);\n\n  const items = useMemo(() => {\n    return mitigationPack?.mitigations?.map(x => {\n      const metadata = getMetadata(x.metadata);\n      return {\n        ...x,\n        comments: metadata.Comments || '',\n      };\n    }) || [];\n  }, [mitigationPack?.mitigations]);\n\n  const colDef: ColumnDefinition<{\n    content: string;\n    comments: string;\n  }>[] = useMemo(() => [\n    {\n      id: 'content',\n      header: 'Mitigation',\n      cell: (data) => data.content,\n      minWidth: 400,\n      sortingField: 'content',\n    },\n    {\n      id: 'comments',\n      header: 'Comments',\n      cell: (data) => data.comments,\n      sortingField: 'comments',\n    },\n  ], []);\n\n  const actions = useMemo(() => {\n    return (<SpaceBetween direction='horizontal' size='s'>\n      <Button variant='primary'\n        onClick={handleAddToWorkspace}\n        disabled={selectedItems.length === 0\n          || selectedItems.every(i => !!mitigationPackUsage[i.id])\n        }>\n        Add to workspace\n      </Button>\n    </SpaceBetween>);\n  }, [handleAddToWorkspace, selectedItems, mitigationPackUsage]);\n\n  const isItemDisabled = useCallback((item: Mitigation) => {\n    return !!mitigationPackUsage?.[mitigationPackId]?.[item.id];\n  }, [mitigationPackId, mitigationPackUsage]);\n\n  const totalSelectedItems = useMemo(() => {\n    if (mitigationPack) {\n      const usedMitigationPackMitigationIds = mitigationPackId && mitigationPackUsage[mitigationPackId]\n        ? Object.keys(mitigationPackUsage[mitigationPackId])\n        : [];\n      const currentSelectedItems = (mitigationPack.mitigations || []).filter(t => usedMitigationPackMitigationIds.includes(t.id)) || [];\n      return [...currentSelectedItems, ...selectedItems.filter(si => !currentSelectedItems.some(csi => csi.id === si.id))];\n    }\n\n    return [];\n  }, [mitigationPack, mitigationPackUsage, selectedItems]);\n\n  if (!mitigationPack) {\n    return null;\n  }\n\n  return (<ContentLayout\n    headerVariant=\"high-contrast\"\n    header={\n      <Header\n        variant=\"h2\"\n      >\n      Mitigation Pack - {mitigationPack.name}\n      </Header>\n    }><SpaceBetween direction='vertical' size='s'>\n      <GeneralInfo mitigationPack={mitigationPack} />\n      <Table\n        columnDefinitions={colDef}\n        actions={actions}\n        header=\"Mitigations\"\n        items={items}\n        isItemDisabled={isItemDisabled}\n        selectedItems={totalSelectedItems}\n        onSelectionChange={({ detail }) => setSelectedItems([...detail.selectedItems])}\n      /></SpaceBetween></ContentLayout>);\n};\n\nexport default MitigationPack;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useCallback } from 'react';\nimport { useWorkspacesContext } from '../../contexts';\nimport { useApplicationInfoContext } from '../../contexts/ApplicationContext';\nimport { useArchitectureInfoContext } from '../../contexts/ArchitectureContext';\nimport { useAssumptionLinksContext } from '../../contexts/AssumptionLinksContext';\nimport { useAssumptionsContext } from '../../contexts/AssumptionsContext';\nimport { useBrainstormContext } from '../../contexts/BrainstormContext';\nimport { useDataflowInfoContext } from '../../contexts/DataflowContext';\nimport { useGlobalSetupContext } from '../../contexts/GlobalSetupContext';\nimport { useMitigationLinksContext } from '../../contexts/MitigationLinksContext';\nimport { useMitigationsContext } from '../../contexts/MitigationsContext';\nimport { useThreatsContext } from '../../contexts/ThreatsContext';\n\nconst useRemoveData = () => {\n  const { composerMode } = useGlobalSetupContext();\n  const { removeWorkspace, switchWorkspace } = useWorkspacesContext();\n  const { removeApplicationInfo, onDeleteWorkspace: applicationInfoDeleteWorkspace } = useApplicationInfoContext();\n  const { removeArchitectureInfo, onDeleteWorkspace: architectureInfoDeleteWorkspace } = useArchitectureInfoContext();\n  const { removeDataflowInfo, onDeleteWorkspace: dataflowInfoDeleteWorkspace } = useDataflowInfoContext();\n  const { removeAllAssumptions, onDeleteWorkspace: assumptionsDeleteWorkspace } = useAssumptionsContext();\n  const { removeAllMitigations, onDeleteWorkspace: mitigationsDeleteWorkspace } = useMitigationsContext();\n  const { removeAllStatements, onDeleteWorkspace: threatsDeleteWorkspace } = useThreatsContext();\n  const { removeAllAssumptionLinks, onDeleteWorkspace: assumptionLinksDeleteWorkspace } = useAssumptionLinksContext();\n  const { removeAllMitigationLinks, onDeleteWorkspace: mitigationLinksDeleteWorkspace } = useMitigationLinksContext();\n  const { onDeleteWorkspace: brainstormDeleteWorkspace } = useBrainstormContext();\n\n  const removeData = useCallback(async () => {\n    if (composerMode === 'Full') {\n      return Promise.all([\n        removeApplicationInfo(),\n        removeArchitectureInfo(),\n        removeDataflowInfo(),\n        removeAllAssumptions(),\n        removeAllMitigations(),\n        removeAllStatements(),\n        removeAllAssumptionLinks(),\n        removeAllMitigationLinks(),\n      ]);\n    }\n\n    return removeAllStatements();\n  }, [composerMode,\n    removeApplicationInfo, removeArchitectureInfo, removeDataflowInfo,\n    removeAllAssumptions, removeAllMitigations,\n    removeAllStatements, removeAllAssumptionLinks,\n    removeAllMitigationLinks]);\n\n  const deleteWorkspace = useCallback(async (toDeleteWorkspaceId: string) => {\n    if (toDeleteWorkspaceId) {\n      await Promise.all([\n        removeWorkspace(toDeleteWorkspaceId),\n        applicationInfoDeleteWorkspace(toDeleteWorkspaceId),\n        architectureInfoDeleteWorkspace(toDeleteWorkspaceId),\n        threatsDeleteWorkspace(toDeleteWorkspaceId),\n        dataflowInfoDeleteWorkspace(toDeleteWorkspaceId),\n        assumptionsDeleteWorkspace(toDeleteWorkspaceId),\n        mitigationsDeleteWorkspace(toDeleteWorkspaceId),\n        assumptionLinksDeleteWorkspace(toDeleteWorkspaceId),\n        mitigationLinksDeleteWorkspace(toDeleteWorkspaceId),\n        brainstormDeleteWorkspace(toDeleteWorkspaceId),\n      ]);\n\n      switchWorkspace(null);\n    }\n  }, [\n    composerMode,\n    switchWorkspace,\n    applicationInfoDeleteWorkspace,\n    architectureInfoDeleteWorkspace,\n    dataflowInfoDeleteWorkspace,\n    threatsDeleteWorkspace,\n    assumptionsDeleteWorkspace,\n    mitigationsDeleteWorkspace,\n    assumptionLinksDeleteWorkspace,\n    mitigationLinksDeleteWorkspace,\n    brainstormDeleteWorkspace,\n  ]);\n\n  return {\n    removeData,\n    deleteWorkspace,\n  };\n};\n\nexport default useRemoveData;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren } from 'react';\nimport DataflowLocalStateContextProvider from './components/LocalStateContextProvider';\nimport DataflowLocalStorageContextProvider from './components/LocalStorageContextProvider';\nimport { useDataflowInfoContext } from './context';\nimport { DataflowContextProviderProps } from './types';\nimport { STORAGE_LOCAL_STATE } from '../../configs';\nimport useWorkspaceStorage from '../../hooks/useWorkspaceStorage';\n\nconst DataflowContextProvider: FC<PropsWithChildren<DataflowContextProviderProps>> = (props) => {\n  const { storageType, value } = useWorkspaceStorage(props.workspaceId);\n\n  return storageType === STORAGE_LOCAL_STATE ?\n    (<DataflowLocalStateContextProvider\n      key={props.workspaceId}\n      initialValue={value?.dataflow}\n      {...props} />) :\n    (<DataflowLocalStorageContextProvider key={props.workspaceId} {...props} />);\n};\n\nexport default DataflowContextProvider;\n\nexport {\n  useDataflowInfoContext,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport const EXPORT_FILE_NAME = 'ThreatComposer';","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport FormField, { FormFieldProps } from '@cloudscape-design/components/form-field';\nimport InputComponent, { InputProps as InputComponentProps } from '@cloudscape-design/components/input';\nimport React, { FC } from 'react';\nimport { z } from 'zod';\nimport useContentValidation from '../../../hooks/useContentValidation';\n\nexport interface InputProps extends FormFieldProps, InputComponentProps {\n  ref?: React.LegacyRef<any>;\n  validateData?: (newValue: string) => z.ZodSafeParseResult<string | undefined>;\n}\n\nconst Input: FC<InputProps> = React.forwardRef<InputComponentProps.Ref, InputProps>(({\n  value,\n  onChange,\n  validateData,\n  ...props\n}, ref) => {\n  const { tempValue, errorText, handleChange } = useContentValidation(value, onChange, validateData);\n  return (\n    <FormField\n      {...props}\n      errorText={errorText}\n    >\n      <InputComponent\n        {...props}\n        ref={ref}\n        value={tempValue}\n        onChange={event =>\n          handleChange(event)\n        }\n      />\n    </FormField>);\n});\n\nexport default Input;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Button from '@cloudscape-design/components/button';\nimport Container from '@cloudscape-design/components/container';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport Textarea from '@cloudscape-design/components/textarea';\nimport { colorBorderDividerDefault, colorBackgroundButtonPrimaryActive } from '@cloudscape-design/design-tokens';\nimport { FC, useCallback, useState, useRef, useEffect, DragEvent } from 'react';\nimport { PromotionHandlers, ThreatCreationHandlers } from '../../../contexts/BrainstormContext/types';\nimport { BrainstormItem, BrainstormData } from '../../../customTypes/brainstorm';\n\n// Item Card Component\ninterface GroupableItemCardProps {\n  item: BrainstormItem;\n  itemType: keyof BrainstormData;\n  onDelete: (id: string) => void;\n  onUpdate: (item: BrainstormItem) => void;\n  onPromote?: PromotionHandlers;\n  isPromotable?: boolean;\n  onCreateThreat?: ThreatCreationHandlers;\n  canCreateThreat?: boolean;\n  groupedItems?: BrainstormItem[];\n  onGroup?: (sourceId: string, targetId: string) => void;\n  onUngroup?: (id: string) => void;\n  isSelected?: boolean;\n  onSelect?: (item: BrainstormItem) => void;\n}\n\n// Module-level variable to store current drag data\nlet currentDragData: { itemId: string; itemType: keyof BrainstormData } | null = null;\n\n// ItemContent Component Props\ninterface ItemContentProps {\n  brainstormItem: BrainstormItem;\n  showUngroupButton?: boolean;\n  editingItemId: string | null;\n  setEditingItemId: (id: string | null) => void;\n  onUpdate: (item: BrainstormItem) => void;\n  onDelete: (id: string) => void;\n  onPromote?: PromotionHandlers;\n  isPromotable?: boolean;\n  onCreateThreat?: ThreatCreationHandlers;\n  canCreateThreat?: boolean;\n  handleUngroupItem: (id: string) => void;\n}\n\n// Individual item component with its own state\nconst ItemContent: FC<ItemContentProps> = ({\n  brainstormItem,\n  showUngroupButton = false,\n  editingItemId,\n  setEditingItemId,\n  onUpdate,\n  onDelete,\n  onPromote,\n  isPromotable = false,\n  onCreateThreat,\n  canCreateThreat = false,\n  handleUngroupItem,\n}) => {\n  const [itemShowButtons, setItemShowButtons] = useState(false);\n  const [localEditContent, setLocalEditContent] = useState('');\n\n  const handleItemMouseEnter = useCallback(() => {\n    setItemShowButtons(true);\n  }, []);\n\n  const handleItemMouseLeave = useCallback(() => {\n    setItemShowButtons(false);\n  }, []);\n\n  // Check if this specific item is being edited\n  const isThisItemBeingEdited = editingItemId === brainstormItem.id;\n\n  // Initialize content when editing starts\n  useEffect(() => {\n    if (isThisItemBeingEdited) {\n      setLocalEditContent(brainstormItem.content || '');\n    }\n  }, [isThisItemBeingEdited, brainstormItem.content]);\n\n  const handleStartEdit = useCallback(() => {\n    setEditingItemId(brainstormItem.id);\n    setLocalEditContent(brainstormItem.content || '');\n  }, [brainstormItem.id, brainstormItem.content, setEditingItemId]);\n\n  const handleSaveEdit = useCallback(() => {\n    if (localEditContent.trim()) {\n      onUpdate({\n        ...brainstormItem,\n        content: localEditContent.trim(),\n      });\n    }\n    setEditingItemId(null);\n    setLocalEditContent('');\n  }, [brainstormItem, localEditContent, onUpdate, setEditingItemId]);\n\n  const handleCancelEdit = useCallback(() => {\n    setEditingItemId(null);\n    setLocalEditContent('');\n  }, [setEditingItemId]);\n\n  // If this item is being edited, show the edit UI\n  if (isThisItemBeingEdited) {\n    return (\n      <SpaceBetween direction=\"vertical\" size=\"s\">\n        <Textarea\n          placeholder=\"Edit content...\"\n          value={localEditContent}\n          onChange={({ detail }) => setLocalEditContent(detail.value)}\n          rows={3}\n          autoFocus\n        />\n        <SpaceBetween direction=\"horizontal\" size=\"s\">\n          <Button onClick={handleCancelEdit}>Cancel</Button>\n          <Button\n            variant=\"primary\"\n            disabled={!localEditContent.trim()}\n            onClick={handleSaveEdit}\n          >\n            Save\n          </Button>\n        </SpaceBetween>\n      </SpaceBetween>\n    );\n  }\n\n  // Otherwise, show the normal item view\n  return (\n    <div\n      onMouseEnter={handleItemMouseEnter}\n      onMouseLeave={handleItemMouseLeave}\n    >\n      <SpaceBetween direction=\"vertical\" size=\"s\">\n        <TextContent>{brainstormItem.content}</TextContent>\n        {itemShowButtons && (\n          <div style={{ marginTop: '8px' }}>\n            <SpaceBetween direction=\"horizontal\" size=\"xs\">\n              {isPromotable && (\n                <Button\n                  iconName={onPromote && onPromote.isPromoted?.(brainstormItem) ? 'check' : 'add-plus'}\n                  variant=\"icon\"\n                  onClick={() => onPromote && onPromote.promote?.(brainstormItem)}\n                  disabled={onPromote && onPromote.isPromoted?.(brainstormItem)}\n                  ariaLabel={onPromote && onPromote.isPromoted?.(brainstormItem) ? 'Item promoted' : 'Promote item'}\n                />\n              )}\n              {canCreateThreat && (\n                <Button\n                  iconName=\"external\"\n                  variant=\"icon\"\n                  onClick={() => onCreateThreat && onCreateThreat.createThreat?.(brainstormItem)}\n                  ariaLabel={`Create threat with ${onCreateThreat?.fieldName}`}\n                />\n              )}\n              {showUngroupButton && (\n                <Button\n                  iconName=\"undo\"\n                  variant=\"icon\"\n                  onClick={() => handleUngroupItem(brainstormItem.id)}\n                  ariaLabel=\"Remove from group\"\n                />\n              )}\n              <Button\n                iconName=\"edit\"\n                variant=\"icon\"\n                onClick={handleStartEdit}\n                disabled={isPromotable && onPromote && onPromote.isPromoted?.(brainstormItem)}\n                ariaLabel=\"Edit item\"\n              />\n              <Button\n                iconName=\"remove\"\n                variant=\"icon\"\n                onClick={() => onDelete(brainstormItem.id)}\n                ariaLabel=\"Delete item\"\n              />\n            </SpaceBetween>\n          </div>\n        )}\n      </SpaceBetween>\n    </div>\n  );\n};\n\nconst GroupableItemCard: FC<GroupableItemCardProps> = ({\n  item,\n  itemType,\n  onDelete,\n  onUpdate,\n  onPromote,\n  isPromotable = false,\n  onCreateThreat,\n  canCreateThreat = false,\n  groupedItems = [],\n  onGroup,\n  onUngroup,\n}) => {\n  const [isDragging, setIsDragging] = useState(false);\n  const [isDropTarget, setIsDropTarget] = useState(false);\n  const [editingItemId, setEditingItemId] = useState<string | null>(null);\n  const hoverTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const cardRef = useRef<HTMLDivElement>(null);\n\n  const isGrouped = groupedItems.length > 1;\n\n  // Check if any item in this card is being edited\n  const isAnyItemBeingEdited = editingItemId !== null;\n\n  const handleMouseEnter = useCallback(() => {\n    // Mouse enter handling for drag/drop container\n    // Individual items handle their own button visibility\n  }, []);\n\n  const handleMouseLeave = useCallback(() => {\n    // Mouse leave handling for drag/drop container\n    // Individual items handle their own button visibility\n  }, []);\n\n  const handleDragStart = useCallback((e: DragEvent<HTMLDivElement>) => {\n    setIsDragging(true);\n    const dragData = {\n      itemId: item.id,\n      itemType,\n    };\n    currentDragData = dragData;\n    e.dataTransfer.setData('text/plain', JSON.stringify(dragData));\n    e.dataTransfer.effectAllowed = 'move';\n  }, [item.id, itemType]);\n\n  const handleDragEnd = useCallback(() => {\n    setIsDragging(false);\n    setIsDropTarget(false);\n    currentDragData = null;\n  }, []);\n\n  const handleDragOver = useCallback((e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }, []);\n\n  const handleDragEnter = useCallback((e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n\n    // Only show drop target feedback if the dragged item type matches this item's type\n    if (currentDragData && currentDragData.itemType === itemType && currentDragData.itemId !== item.id) {\n      setIsDropTarget(true);\n    }\n  }, [itemType, item.id]);\n\n  const handleDragLeave = useCallback((e: DragEvent<HTMLDivElement>) => {\n    // Only hide drop target if we're actually leaving the card\n    if (cardRef.current && !cardRef.current.contains(e.relatedTarget as Node)) {\n      setIsDropTarget(false);\n    }\n  }, []);\n\n  const handleDrop = useCallback((e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    setIsDropTarget(false);\n\n    try {\n      const dragData = JSON.parse(e.dataTransfer.getData('text/plain'));\n      if (dragData.itemType === itemType && dragData.itemId !== item.id && onGroup) {\n        onGroup(dragData.itemId, item.id);\n      }\n    } catch {\n      // Invalid drag data\n    }\n  }, [item.id, itemType, onGroup]);\n\n  const handleUngroupItem = useCallback((ungroupItemId: string) => {\n    if (onUngroup) {\n      onUngroup(ungroupItemId);\n    }\n  }, [onUngroup]);\n\n  // Cleanup timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (hoverTimeoutRef.current) {\n        clearTimeout(hoverTimeoutRef.current);\n      }\n    };\n  }, []);\n\n\n  const containerStyle = {\n    opacity: isDragging ? 0.6 : 1,\n    transform: isDragging ? 'rotate(2deg)' : (isDropTarget ? 'rotate(2deg)' : 'none'),\n    transition: 'all 0.2s ease',\n  };\n\n  if (isGrouped) {\n    // Render as stacked container with multiple items\n    return (\n      <div\n        ref={cardRef}\n        draggable={!isAnyItemBeingEdited}\n        onDragStart={!isAnyItemBeingEdited ? handleDragStart : undefined}\n        onDragEnd={!isAnyItemBeingEdited ? handleDragEnd : undefined}\n        onDragOver={!isAnyItemBeingEdited ? handleDragOver : undefined}\n        onDragEnter={!isAnyItemBeingEdited ? handleDragEnter : undefined}\n        onDragLeave={!isAnyItemBeingEdited ? handleDragLeave : undefined}\n        onDrop={!isAnyItemBeingEdited ? handleDrop : undefined}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        style={containerStyle}\n      >\n        <Container variant=\"stacked\">\n          {groupedItems.map((groupedItem, index) => (\n            <div key={groupedItem.id}>\n              {index > 0 && (\n                <div style={{\n                  height: '1px',\n                  backgroundColor: colorBorderDividerDefault,\n                  margin: '12px 0',\n                  width: '100%',\n                }} />\n              )}\n              <ItemContent\n                brainstormItem={groupedItem}\n                showUngroupButton={true} // Show ungroup button on all items in a group\n                editingItemId={editingItemId}\n                setEditingItemId={setEditingItemId}\n                onUpdate={onUpdate}\n                onDelete={onDelete}\n                onPromote={onPromote}\n                isPromotable={isPromotable}\n                onCreateThreat={onCreateThreat}\n                canCreateThreat={canCreateThreat}\n                handleUngroupItem={handleUngroupItem}\n              />\n            </div>\n          ))}\n        </Container>\n\n        {isDropTarget && (\n          <div style={{\n            position: 'absolute',\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n            backgroundColor: colorBackgroundButtonPrimaryActive,\n            color: 'white',\n            padding: '6px 12px',\n            borderRadius: '6px',\n            fontSize: '12px',\n            fontWeight: 500,\n            zIndex: 10,\n            textAlign: 'center',\n            whiteSpace: 'nowrap',\n            boxShadow: '0 2px 8px rgba(0, 0, 0, 0.15)',\n          }}>\n            Drop to group with {groupedItems.length} item{groupedItems.length !== 1 ? 's' : ''}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  // Render as individual container\n  return (\n    <div\n      ref={cardRef}\n      draggable={!isAnyItemBeingEdited}\n      onDragStart={!isAnyItemBeingEdited ? handleDragStart : undefined}\n      onDragEnd={!isAnyItemBeingEdited ? handleDragEnd : undefined}\n      onDragOver={!isAnyItemBeingEdited ? handleDragOver : undefined}\n      onDragEnter={!isAnyItemBeingEdited ? handleDragEnter : undefined}\n      onDragLeave={!isAnyItemBeingEdited ? handleDragLeave : undefined}\n      onDrop={!isAnyItemBeingEdited ? handleDrop : undefined}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n      style={containerStyle}\n    >\n      <Container>\n        <ItemContent\n          brainstormItem={item}\n          showUngroupButton={false}\n          editingItemId={editingItemId}\n          setEditingItemId={setEditingItemId}\n          onUpdate={onUpdate}\n          onDelete={onDelete}\n          onPromote={onPromote}\n          isPromotable={isPromotable}\n          onCreateThreat={onCreateThreat}\n          canCreateThreat={canCreateThreat}\n          handleUngroupItem={handleUngroupItem}\n        />\n      </Container>\n\n      {isDropTarget && (\n        <div style={{\n          position: 'absolute',\n          top: '50%',\n          left: '50%',\n          transform: 'translate(-50%, -50%)',\n          backgroundColor: colorBackgroundButtonPrimaryActive,\n          color: 'white',\n          padding: '4px 8px',\n          borderRadius: '4px',\n          fontSize: '11px',\n          fontWeight: 500,\n          zIndex: 10,\n        }}>\n          Drop here to group\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GroupableItemCard;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport { AutosuggestProps } from '@cloudscape-design/components/autosuggest';\nimport ColumnLayout from '@cloudscape-design/components/column-layout';\nimport { BaseKeyDetail, CancelableEventHandler, NonCancelableEventHandler } from '@cloudscape-design/components/internal/events';\nimport TokenGroup, { TokenGroupProps } from '@cloudscape-design/components/token-group';\nimport { FC, useCallback, useState, forwardRef } from 'react';\nimport { useBrainstormContext } from '../../../contexts/BrainstormContext/context';\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\nimport { ThreatStatementImpactedAssetItem } from '../../../customTypes';\nimport Autosuggest from '../../generic/Autosuggest';\nimport BrainstormList from '../BrainstormList';\nimport EditorLayout from '../EditorLayout';\nimport ExampleList from '../ExampleList';\nimport { EditorProps } from '../ThreatStatementEditor/types';\n\nconst EditorImpactedAssets: FC<EditorProps> = forwardRef<AutosuggestProps.Ref, EditorProps>(({\n  statement, setStatement, fieldData,\n}, _ref) => {\n  const { perFieldExamples, previousInputs } = useThreatsContext();\n  const { brainstormData } = useBrainstormContext();\n  const [value, setValue] = useState<string>('');\n  const handleAddAsset = useCallback((asset: string) => {\n    setStatement(prevStatement => prevStatement && ({\n      ...prevStatement,\n      impactedAssets: prevStatement.impactedAssets ?\n        (!prevStatement.impactedAssets.includes(asset) ?\n          [...prevStatement.impactedAssets, asset] :\n          [...prevStatement.impactedAssets])\n        : [asset],\n    }));\n    setValue('');\n  }, [setStatement]);\n\n  const handleSelect: NonCancelableEventHandler<AutosuggestProps.SelectDetail> = useCallback(({ detail }) => {\n    handleAddAsset(detail.value.trim());\n  }, [handleAddAsset]);\n\n  const handleRemoveAsset: NonCancelableEventHandler<TokenGroupProps.DismissDetail> = useCallback(({ detail: { itemIndex } }) => {\n    setStatement(prevStatement => prevStatement && ({\n      ...prevStatement,\n      impactedAssets: prevStatement.impactedAssets ?\n        [...prevStatement.impactedAssets?.slice(0, itemIndex),\n          ...prevStatement.impactedAssets?.slice(itemIndex + 1)] : [],\n    }));\n  }, [setStatement]);\n\n  const handleKeyDown: CancelableEventHandler<BaseKeyDetail> = useCallback(({ detail }) => {\n    if (detail.keyCode === 13) {\n      handleAddAsset?.(value);\n      setValue('');\n    }\n  }, [handleAddAsset, value]);\n\n  return (<EditorLayout\n    title={fieldData.displayTitle}\n    description={fieldData.description}\n  >\n    <Autosuggest\n      onChange={({ detail }) => setValue(detail.value)}\n      onSelect={handleSelect}\n      value={value}\n      options={Array.from(new Set([\n        ...previousInputs.impacted_assets,\n        ...(brainstormData.assets || []).map(asset => asset.content),\n      ])).map(assetValue => ({\n        value: assetValue,\n      }))}\n      enteredTextLabel={enteredValue => `Use: \"${enteredValue}\"`}\n      ariaLabel=\"Autosuggest for impacted assets\"\n      placeholder=\"Select an existing asset or enter new asset\"\n      empty=\"No matches found\"\n      onKeyDown={handleKeyDown}\n      validateData={ThreatStatementImpactedAssetItem.safeParse}\n    />\n    <TokenGroup\n      onDismiss={handleRemoveAsset}\n      items={statement.impactedAssets?.map(asset => ({\n        label: asset,\n        dismissLabel: `Remove ${asset}`,\n      }))}\n    />\n    <ColumnLayout columns={\n      (perFieldExamples.impacted_assets.length > 0 ? 1 : 0) +\n      ((brainstormData.assets?.length || 0) > 0 ? 1 : 0)\n    }>\n      {perFieldExamples.impacted_assets.length > 0 &&\n        <ExampleList examples={perFieldExamples.impacted_assets} onSelect={handleAddAsset} showSearch={false}></ExampleList>}\n      {(brainstormData.assets?.length || 0) > 0 &&\n        <BrainstormList\n          items={brainstormData.assets || []}\n          onSelect={handleAddAsset}\n        />\n      }\n    </ColumnLayout>\n  </EditorLayout>);\n});\n\nexport default EditorImpactedAssets;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback } from 'react';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { LOCAL_STORAGE_KEY_ASSUMPTION_LINK_LIST } from '../../../../configs/localStorageKeys';\nimport { AssumptionLink } from '../../../../customTypes';\nimport removeLocalStorageKey from '../../../../utils/removeLocalStorageKey';\nimport { AssumptionLinksContext } from '../../context';\nimport { AssumptionLinksContextProviderProps } from '../../types';\nimport useAssumptionLinks from '../../useAssumptionLinks';\n\nexport const getLocalStorageKey = (workspaceId: string | null) => {\n  if (workspaceId) {\n    return `${LOCAL_STORAGE_KEY_ASSUMPTION_LINK_LIST}_${workspaceId}`;\n  }\n\n  return LOCAL_STORAGE_KEY_ASSUMPTION_LINK_LIST;\n};\n\nconst AssumptionLinksLocalStorageContextProvider: FC<PropsWithChildren<AssumptionLinksContextProviderProps>> = ({\n  children,\n  workspaceId: currentWorkspaceId,\n}) => {\n  const [assumptionLinkList, setAssumptionLinkList, { removeItem }] = useLocalStorageState<AssumptionLink[]>(getLocalStorageKey(currentWorkspaceId), {\n    defaultValue: [],\n  });\n\n  const {\n    handlRemoveAssumptionLink,\n    handleRemoveAssumptionLinks,\n    handlRemoveAssumptionLinksByAssumptionId,\n    handlRemoveAssumptionLinksByLinkedEntityId,\n    handleAddAssumptionLink,\n    handleAddAssumptionLinks,\n    handleGetLinkedAssumptionLinks,\n    handleGetAssumptionEntityLinks,\n  } = useAssumptionLinks(assumptionLinkList, setAssumptionLinkList);\n\n  const handleRemoveAllAssumptionLinks = useCallback(async () => {\n    removeItem();\n  }, [removeItem]);\n\n  const handleDeleteWorkspace = useCallback(async (workspaceId: string) => {\n    window.setTimeout(() => {\n      // to delete after the workspace is switched. Otherwise the default value is set again.\n      removeLocalStorageKey(getLocalStorageKey(workspaceId));\n    }, 1000);\n  }, []);\n\n  return (<AssumptionLinksContext.Provider value={{\n    assumptionLinkList,\n    setAssumptionLinkList,\n    getLinkedAssumptionLinks: handleGetLinkedAssumptionLinks,\n    getAssumptionEntityLinks: handleGetAssumptionEntityLinks,\n    removeAssumptionLink: handlRemoveAssumptionLink,\n    removeAssumptionLinksByAssumptionId: handlRemoveAssumptionLinksByAssumptionId,\n    removeAssumptionLinksByLinkedEntityId: handlRemoveAssumptionLinksByLinkedEntityId,\n    removeAssumptionLinks: handleRemoveAssumptionLinks,\n    addAssumptionLink: handleAddAssumptionLink,\n    addAssumptionLinks: handleAddAssumptionLinks,\n    removeAllAssumptionLinks: handleRemoveAllAssumptionLinks,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </AssumptionLinksContext.Provider>);\n};\n\nexport default AssumptionLinksLocalStorageContextProvider;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport { default as useMediaQuery } from './useMediaQuery';\nexport { default as useContentValidation } from './useContentValidation';\nexport * from './useMediaQuery';\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { ReactNode, FC, useEffect } from 'react';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { v4 as uuidv4 } from 'uuid';\nimport { LOCAL_STORAGE_KEY_THREATS_LIST_MIGRATION } from '../../configs/localStorageKeys';\nimport { useThreatsContext } from '../../contexts/ThreatsContext/context';\n\nexport interface WorkspacesMigrationProps {\n  children: ReactNode;\n}\n\n/**\n * Migrates the old workspaces list to the new format\n */\nconst ThreatsMigration: FC<WorkspacesMigrationProps> = ({ children }) => {\n  const { statementList, setStatementList, editingStatement, setEditingStatement } = useThreatsContext();\n\n  const [migrated, setMigrated] = useLocalStorageState<boolean>(LOCAL_STORAGE_KEY_THREATS_LIST_MIGRATION, {\n    defaultValue: false,\n  });\n\n  // Temporarily tracking Workspace data structure migration\n  useEffect(() => {\n    if (!migrated) {\n      // @ts-ignore\n      if (statementList.length > 0 && !isNaN(statementList[0].id)) {\n        // @ts-ignore\n        setStatementList((prev: any) => {\n          // @ts-ignore\n          const newList = prev.map((p: any) => ({\n            ...p,\n            numericId: p.id,\n            id: uuidv4(),\n          }));\n          // @ts-ignore\n          editingStatement && !isNaN(editingStatement.id) && setEditingStatement(prevT => newList.find(x => x.numericId === prevT.id));\n          return newList;\n        });\n      }\n\n      setMigrated(true);\n    }\n  }, [statementList, migrated]);\n\n  return migrated && children ? <>{children}</> : null;\n};\n\nexport default ThreatsMigration;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nconst renderArrayField = (input?: string[], includesOr?: boolean): string => {\n  const inputLen = input?.length;\n  if (!input || inputLen === 0) {\n    return '';\n  }\n\n  if (inputLen === 1) {\n    return input[0];\n  }\n\n  return input.slice(0, input.length - 1).join(', ') + (includesOr ? ' and/or ' : ' and ') + input[input.length-1];\n};\n\nexport default renderArrayField;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport { default as getThreatFromThreatPacksThreat } from './getThreatFromThreatPacksThreat';\nexport { default as getNewThreatStatement } from './getNewThreatStatement';\nexport { default as escapeMarkdown } from './escapeMarkdown';\nexport { default as standardizeNumericId } from './standardizeNumericId';\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport GenAIChatbot from './generated/GenAIChatbot.json';\nimport { ThreatPack } from '../../customTypes';\n// {IMPORT_PLACEHOLDER}\n\nconst threatPacks = [\n  GenAIChatbot,\n  // {ENTRY_PLACEHOLDER}\n] as ThreatPack[];\n\n\nexport default threatPacks;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Box from '@cloudscape-design/components/box';\nimport Button from '@cloudscape-design/components/button';\nimport ContentLayout from '@cloudscape-design/components/content-layout';\nimport Header from '@cloudscape-design/components/header';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { FC, useMemo } from 'react';\nimport { useThreatPacksContext } from '../../../contexts/ThreatPacksContext';\nimport { ThreatPack } from '../../../customTypes/referencePacks';\nimport Table, { ColumnDefinition } from '../../generic/Table';\n\nexport interface ThreatPacksProps {\n  onThreatPackLinkClicked?: (id: string) => void;\n}\n\nconst ThreatPacks: FC<ThreatPacksProps> = ({\n  onThreatPackLinkClicked,\n}) => {\n  const { threatPackUsage, threatPacks } = useThreatPacksContext();\n\n  const colDef: ColumnDefinition<ThreatPack>[] = useMemo(() => [\n    {\n      id: 'id',\n      minWidth: 150,\n      header: 'Id',\n      cell: (data) => <Button variant=\"inline-link\" onClick={() => onThreatPackLinkClicked?.(data.id)}>{data.id}</Button>,\n      sortingField: 'id',\n      isRowHeader: true,\n    },\n    {\n      id: 'name',\n      minWidth: 120,\n      header: 'Name',\n      cell: (data) => data.name,\n      sortingField: 'name',\n    },\n    {\n      id: 'description',\n      minWidth: 200,\n      header: 'Description',\n      cell: (data) => <Box>{data.description}</Box>,\n      sortingField: 'description',\n    },\n    {\n      id: 'countThreats',\n      header: 'Total threats',\n      cell: (data) => data.threats?.length,\n    },\n    {\n      id: 'countReferencedThreats',\n      header: 'Referenced threats',\n      cell: (data) => (threatPackUsage[data.id] && Object.keys(threatPackUsage[data.id]).length) || 0,\n    },\n  ], [threatPackUsage, onThreatPackLinkClicked]);\n\n  return (<ContentLayout\n    headerVariant=\"high-contrast\"\n    header={<Header\n      variant=\"h2\"\n      description=\"Allow you to quickly find and add bulk or selected threat statements to your current workspace\"\n      counter={`(${threatPacks.length})`}\n    >\n      Threat Packs\n    </Header>\n    }>\n    <SpaceBetween direction='vertical' size='s'>\n      <Table\n        columnDefinitions={colDef}\n        items={threatPacks}\n        disableRowSelect={true}\n      /></SpaceBetween>\n  </ContentLayout>);\n};\n\nexport default ThreatPacks;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport * from './components';\nexport * from './containers';\nexport * from './contexts';\nexport * from './customTypes';\nexport * from './hooks';\nexport * from './configs';\nexport * from './utils';\nexport * from './data';","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Grid from '@cloudscape-design/components/grid';\nimport { css } from '@emotion/react';\nimport { FC } from 'react';\nimport styles from '../../styles';\nimport InfoModalBase from '../InfoModalBase';\n\nconst InfoModalFeatures: FC = () => {\n  return (<InfoModalBase title={<>Features</>}>\n    <div css={css(styles.featureSets)}>\n      <Grid gridDefinition={[\n        { colspan: { default: 12, xxs: 6 } },\n        { colspan: { default: 12, xxs: 6 } },\n        { colspan: { default: 12, xxs: 6 } },\n        { colspan: { default: 12, xxs: 6 } },\n      ]}>\n        <div css={[css(styles.featureSet), css(styles.contentBaseText)]}>\n          <div><svg focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"FoundationIcon\" fill='#d1d5db'>\n            <path d=\"M19 12h3L12 3 2 12h3v3H3v2h2v3h2v-3h4v3h2v-3h4v3h2v-3h2v-2h-2v-3zM7 15v-4.81l4-3.6V15H7zm6 0V6.59l4 3.6V15h-4z\"></path>\n          </svg></div>\n          <div>Renders <span css={css(styles.contentHighlight)}>structured threat statements</span> based on user input</div>\n        </div>\n        <div css={[css(styles.featureSet), css(styles.contentBaseText)]}>\n          <div><svg focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"DisplaySettingsIcon\" fill='#d1d5db'>\n            <path d=\"M20 3H4c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h4v2h8v-2h4c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2zm0 14H4V5h16v12z\"></path>\n            <path d=\"M6 8.25h8v1.5H6zm10.5 1.5H18v-1.5h-1.5V7H15v4h1.5zm-6.5 2.5h8v1.5h-8zM7.5 15H9v-4H7.5v1.25H6v1.5h1.5z\"></path>\n          </svg></div>\n          <div>\n            <span css={css(styles.contentHighlight)}>\n              Adaptive threat statement structure\n            </span> to support progressively more complete user input\n          </div>\n        </div>\n        <div css={[css(styles.featureSet), css(styles.contentBaseText)]}>\n          <div><svg focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"AssistantIcon\" fill='#d1d5db'>\n            <path d=\"M19 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h4l3 3 3-3h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5.12 10.88L12 17l-1.88-4.12L6 11l4.12-1.88L12 5l1.88 4.12L18 11l-4.12 1.88z\"></path>\n          </svg></div>\n          <div><span css={css(styles.contentHighlight)}>Dynamic suggestions</span> based on supplied and missing user input</div>\n        </div>\n        <div css={[css(styles.featureSet), css(styles.contentBaseText)]}>\n          <div><svg focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"PsychologyIcon\" fill='#d1d5db'>\n            <path d=\"M13 8.57c-.79 0-1.43.64-1.43 1.43s.64 1.43 1.43 1.43 1.43-.64 1.43-1.43-.64-1.43-1.43-1.43z\"></path>\n            <path d=\"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2c-.25.33-.01.8.4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68c2.36-1.12 4-3.53 4-6.32 0-3.87-3.13-7-7-7zm3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39c-.05-.08-.03-.19.05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38c.05.09.03.2-.05.26l-.85.66c.03.12.04.25.04.39z\"></path>\n          </svg></div>\n          <div>Complete threat statement <span css={css(styles.contentHighlight)}>examples to aid contextual brainstorming</span> and re-use</div>\n        </div>\n      </Grid>\n    </div>\n  </InfoModalBase>);\n};\n\nexport default InfoModalFeatures;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { DataExchangeFormat, TemplateThreatStatement } from '../../../../customTypes';\nimport escapeMarkdown from '../../../../utils/escapeMarkdown';\nimport standardizeNumericId from '../../../../utils/standardizeNumericId';\n\nexport const getAssetsContent = async (\n  data: DataExchangeFormat,\n) => {\n  const rows: string[] = [];\n  rows.push('## Impacted Assets');\n\n  rows.push('\\n');\n\n  rows.push('| Assets Number | Asset | Related Threats |');\n  rows.push('| --- | --- | --- |');\n\n  if (data.threats) {\n    const assetThreatMap: {\n      [assetName: string]: TemplateThreatStatement[];\n    } = {};\n\n    data.threats.forEach(t => t.impactedAssets?.forEach(ia => {\n      if (!assetThreatMap[ia]) {\n        assetThreatMap[ia] = [];\n      }\n\n      assetThreatMap[ia].push(t);\n    }));\n\n    const promises = Object.keys(assetThreatMap).map(async (at, index) => {\n      const atId = `AS-${standardizeNumericId(index + 1)}`;\n\n      const threatsContent = assetThreatMap[at].map(t => {\n        const threatId = `T-${standardizeNumericId(t.numericId)}`;\n        return `[**${threatId}**](#${threatId}): ${escapeMarkdown((t.statement || ''))}`;\n      }).join('<br/>');\n\n      return `| ${atId} | ${escapeMarkdown(at)} | ${threatsContent} |`;\n    });\n\n    rows.push(...(await Promise.all(promises)));\n  }\n\n  rows.push('\\n');\n\n  return rows.join('\\n');\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nconst getBase64 = (file: File): Promise<string> => {\n  return new Promise((resolve, reject) => {\n    var reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = function () {\n      resolve(reader.result as string);\n    };\n    reader.onerror = function (error) {\n      reject(error);\n    };\n  });\n};\n\nexport default getBase64;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { DEFAULT_NEW_ENTITY_ID } from '../../configs';\nimport { DEFAULT_MITIGATION_STATUS } from '../../configs/status';\nimport { Mitigation } from '../../customTypes';\n\nconst getNewMitigation = (content: string = ''): Mitigation => {\n  return {\n    id: DEFAULT_NEW_ENTITY_ID,\n    numericId: -1,\n    status: DEFAULT_MITIGATION_STATUS,\n    content: content,\n  };\n};\n\nexport default getNewMitigation;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { DataExchangeFormat } from '../../../../customTypes';\nimport escapeMarkdown from '../../../../utils/escapeMarkdown';\nimport parseTableCellContent from '../../../../utils/parseTableCellContent';\nimport standardizeNumericId from '../../../../utils/standardizeNumericId';\n\nexport const getAssumptionsContent = async (\n  data: DataExchangeFormat,\n) => {\n  const rows: string[] = [];\n  rows.push('## Assumptions');\n\n  rows.push('\\n');\n\n  rows.push('| Assumption Number | Assumption | Linked Threats | Linked Mitigations | Comments |');\n  rows.push('| --- | --- | --- | --- | --- |');\n\n  if (data.assumptions) {\n    const promises = data.assumptions?.map(async (x) => {\n      const threatLinks = data.assumptionLinks?.filter(al => al.assumptionId === x.id && al.type === 'Threat') || [];\n      const mitigationLinks = data.assumptionLinks?.filter(al => al.assumptionId === x.id && al.type === 'Mitigation') || [];\n\n      const threatsContent = threatLinks.map(tl => {\n        const threat = data.threats?.find(s => s.id === tl.linkedId);\n        if (threat) {\n          const threatId = `T-${standardizeNumericId(threat.numericId)}`;\n          return `[**${threatId}**](#${threatId}): ${escapeMarkdown(threat.statement || '')}`;\n        }\n        return null;\n      }).filter(t => !!t).join('<br/>');\n\n      const mitigationsContent = mitigationLinks.map(tl => {\n        const mitigation = data.mitigations?.find(m => m.id === tl.linkedId);\n        if (mitigation) {\n          const mitigationId = `M-${standardizeNumericId(mitigation.numericId)}`;\n          return `[**${mitigationId}**](#${mitigationId}): ${escapeMarkdown(mitigation.content)}`;\n        }\n        return null;\n      }).filter(t => !!t).join('<br/>');\n\n      const assumptionId = `A-${standardizeNumericId(x.numericId)}`;\n      const comments = await parseTableCellContent((x.metadata?.find(m => m.key === 'Comments')?.value as string) || '');\n      return `| <a name=\"${assumptionId}\"></a>${assumptionId} | ${escapeMarkdown(x.content)} | ${threatsContent} | ${mitigationsContent} | ${comments} |`;\n    });\n\n    rows.push(...(await Promise.all(promises)));\n  }\n\n  rows.push('\\n');\n\n  return rows.join('\\n');\n};\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport const SEARCH_PARAM_MODE = 'mode';\nexport const SEARCH_PARAM_FEATURES = 'features';\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback } from 'react';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { LOCAL_STORAGE_KEY_MITIGATION_LIST } from '../../../../configs/localStorageKeys';\nimport { Mitigation } from '../../../../customTypes';\nimport removeLocalStorageKey from '../../../../utils/removeLocalStorageKey';\nimport { MitigationsContext } from '../../context';\nimport { MitigationsContextProviderProps } from '../../types';\nimport useMitigations from '../../useMitigations';\n\nexport const getLocalStorageKey = (workspaceId: string | null) => {\n  if (workspaceId) {\n    return `${LOCAL_STORAGE_KEY_MITIGATION_LIST}_${workspaceId}`;\n  }\n\n  return LOCAL_STORAGE_KEY_MITIGATION_LIST;\n};\n\nconst MitigationsLocalStorageContextProvider: FC<PropsWithChildren<MitigationsContextProviderProps>> = ({\n  children,\n  workspaceId: currentWorkspaceId,\n}) => {\n  const [mitigationList, setMitigationList, { removeItem }] = useLocalStorageState<Mitigation[]>(getLocalStorageKey(currentWorkspaceId), {\n    defaultValue: [],\n  });\n\n  const {\n    handlRemoveMitigation,\n    handleSaveMitigation,\n  } = useMitigations(mitigationList, setMitigationList);\n\n  const handleRemoveAllMitigations = useCallback(async () => {\n    removeItem();\n  }, [removeItem]);\n\n  const handleDeleteWorkspace = useCallback(async (workspaceId: string) => {\n    window.setTimeout(() => {\n      // to delete after the workspace is switched. Otherwise the default value is set again.\n      removeLocalStorageKey(getLocalStorageKey(workspaceId));\n    }, 1000);\n  }, []);\n\n  return (<MitigationsContext.Provider value={{\n    mitigationList,\n    setMitigationList,\n    removeMitigation: handlRemoveMitigation,\n    saveMitigation: handleSaveMitigation,\n    removeAllMitigations: handleRemoveAllMitigations,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </MitigationsContext.Provider>);\n};\n\nexport default MitigationsLocalStorageContextProvider;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren } from 'react';\nimport MitigationsLocalStateContextProvider from './components/LocalStateContextProvider';\nimport MitigationsLocalStorageContextProvider from './components/LocalStorageContextProvider';\nimport { useMitigationsContext } from './context';\nimport { MitigationsContextProviderProps } from './types';\nimport { STORAGE_LOCAL_STATE } from '../../configs';\nimport useWorkspaceStorage from '../../hooks/useWorkspaceStorage';\n\nconst MitigationsContextProvider: FC<PropsWithChildren<MitigationsContextProviderProps>> = (props) => {\n  const { storageType, value } = useWorkspaceStorage(props.workspaceId);\n\n  return storageType === STORAGE_LOCAL_STATE ?\n    (<MitigationsLocalStateContextProvider\n      key={props.workspaceId}\n      initialValue={value?.mitigations} {...props} />) :\n    (<MitigationsLocalStorageContextProvider key={props.workspaceId} {...props} />);\n};\n\nexport default MitigationsContextProvider;\n\nexport {\n  useMitigationsContext,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport { Mode, Density } from '@cloudscape-design/global-styles';\nimport { FC, PropsWithChildren, useState, useEffect } from 'react';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { GlobalSetupContext, useGlobalSetupContext } from './context';\nimport { useThemeContext } from '../../components/generic/ThemeProvider';\nimport InfoModal from '../../components/global/InfoModal';\nimport { LOCAL_STORAGE_KEY_NEW_VISIT_FLAG } from '../../configs/localStorageKeys';\nimport { ComposerMode, AppMode } from '../../customTypes';\nimport EventController from '../../utils/EventController';\n\nexport interface GlobalSetupContextProviderProps {\n  composerMode?: ComposerMode;\n  appMode?: AppMode;\n  features?: string[];\n}\n\nconst stringifyWorkspaceData = (data: any) => {\n  return JSON.stringify(data, null, 2);\n};\n\nconst eventController = new EventController();\n\nwindow.threatcomposer = {\n  stringifyWorkspaceData,\n  addEventListener: (eventName, eventHandler) =>\n    eventController.addEventListener(eventName, eventHandler),\n  dispatchEvent: (event) => eventController.dispatchEvent(event),\n};\n\nconst GlobalSetupContextProvider: FC<PropsWithChildren<GlobalSetupContextProviderProps>> = ({\n  children,\n  composerMode = 'Full',\n  appMode,\n  features,\n}) => {\n  const [fileImportModalVisible, setFileImportModalVisible] = useState(false);\n  const { setTheme, setDensity } = useThemeContext();\n\n  useEffect(() => {\n    window.threatcomposer.applyDensity = (density?: string) => {\n      setDensity(density === 'compact' ? Density.Compact : Density.Comfortable);\n    };\n\n    window.threatcomposer.applyTheme = (newTheme?: string) => {\n      setTheme(newTheme === 'dark' ? Mode.Dark : Mode.Light);\n    };\n  }, [setDensity, setTheme]);\n\n  const [hasVisitBefore, setHasVisitBefore] = useLocalStorageState<boolean>(LOCAL_STORAGE_KEY_NEW_VISIT_FLAG, {\n    defaultValue: false,\n  });\n\n  const [infoModalVisible, setInfoModalVisible] = useState(false);\n\n  useEffect(() => {\n    if (!hasVisitBefore) {\n      composerMode !== 'Full' && setInfoModalVisible(true);\n      window.setTimeout(() => setHasVisitBefore(true), 1000);\n    }\n  }, [hasVisitBefore, composerMode]);\n\n  return (<div>\n    <GlobalSetupContext.Provider value={{\n      hasVisitBefore,\n      composerMode,\n      appMode,\n      features: features || [],\n      showInfoModal: () => setInfoModalVisible(true),\n      fileImportModalVisible,\n      setFileImportModalVisible,\n    }}>\n      {children}\n      {infoModalVisible && <InfoModal\n        visible={infoModalVisible}\n        setVisible={setInfoModalVisible}\n      />}\n    </GlobalSetupContext.Provider></div>);\n};\n\nexport default GlobalSetupContextProvider;\n\nexport {\n  useGlobalSetupContext,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport const REGEX_CONTENT_NOT_HTML_TAG = /(<.*?>)/i;\nexport const REGEX_CONTENT_IMAGE_URL = /^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&\\/\\/=]*)/i;\nexport const REGEX_CONTENT_IMAGE_BASE64 = /^(?:data:image\\/[a-z+]{3,};base64,)(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+\\/]{3}=)?$/gi;\nexport const REGEX_WORKSPACE_NAME = /^[A-Za-z0-9-_# ]*$/;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport getMobileMediaQuery from '../../../utils/getMobileMediaQuery';\n\nconst styles: any = {\n  contentRoot: {\n    width: '100%',\n    height: '100%',\n    maxHeight: 'calc(100vh - 60px)',\n    position: 'relative',\n    [`${getMobileMediaQuery()}, screen and (max-height: 640px)`]: {\n      paddingBottom: awsui.spaceScaledL,\n    },\n  },\n  container: {\n    width: '100%',\n    height: '100%',\n    justifyContent: 'space-between',\n    userSelect: 'none',\n  },\n  slide: {\n    width: 'var(--slide-width)',\n    maxWidth: 'calc(100vw - 40px)',\n    textAlign: 'center',\n    padding: '20px',\n    paddingBottom: '50px',\n    boxSizing: 'border-box',\n    lineHeight: '240px',\n  },\n  navBtn: {\n    width: '30px',\n    height: '30px',\n    alignSelf: 'center',\n    bottom: '20px',\n    zIndex: '100',\n    position: 'absolute',\n    backgroundColor: '#414d5c',\n    color: '#d1d5db',\n    border: 'none',\n  },\n  nextBtn: {\n    float: 'right',\n    right: '20px',\n  },\n  prevBtn: {\n    float: 'left',\n    left: '20px',\n  },\n  navBtnDotContainer: {\n    position: 'absolute',\n    bottom: '20px',\n  },\n  navBtnDot: {\n    height: '16px',\n    width: '16px',\n    borderRadius: '50%',\n    border: '0',\n    marginRight: '10px',\n    marginLeft: '10px',\n    backgroundColor: '#5f6b7a',\n  },\n  navBtnDotActive: {\n    backgroundColor: '#d1d5db',\n  },\n  contentBase: {\n    color: '#fbfbfb',\n    width: '100%',\n    height: '100%',\n    textAlign: 'start',\n  },\n  contentBaseHeader: {\n    textAlign: 'center',\n    fontSize: '32px',\n    lineHeight: '48px',\n    marginBottom: '20px',\n    [`${getMobileMediaQuery()}, screen and (max-height: 640px)`]: {\n      fontSize: '24px',\n      lineHeight: '32px',\n    },\n  },\n  contentBaseMain: {\n    maxHeight: 'calc(100vh - 150px)',\n    [`${getMobileMediaQuery()}, screen and (max-height: 640px)`]: {\n      overflow: 'auto',\n    },\n  },\n  contentBaseText: {\n    fontSize: '20px',\n    lineHeight: '32px',\n    color: '#fbfbfb',\n    [`${getMobileMediaQuery()}, screen and (max-height: 640px)`]: {\n      fontSize: '16px',\n      lineHeight: '20px',\n    },\n  },\n  contentHighlight: {\n    color: 'rgb(9, 114, 211)',\n    fontWeight: 'bold',\n  },\n  contentList: {\n    '& ol': {\n      counterReset: 'LIST-ITEMS 0',\n      marginLeft: '0',\n      paddingLeft: '0',\n    },\n    '& li': {\n      position: 'relative',\n      margin: '0 0 6px 2em',\n      padding: '4px 8px',\n      listStyle: 'none',\n      [`${getMobileMediaQuery()}, screen and (max-height: 640px)`]: {\n        padding: '3px 8px',\n        margin: 0,\n        lineHeight: '24px',\n      },\n    },\n    '& li:before': {\n      content: 'counter( LIST-ITEMS )',\n      counterIncrement: 'LIST-ITEMS',\n      padding: '3px 10px',\n      marginRight: '20px',\n      background: 'rgb(9, 114, 211)',\n      borderRadius: '16px',\n      width: '20px',\n      [`${getMobileMediaQuery()}, screen and (max-height: 640px)`]: {\n        padding: '3px 8px',\n      },\n    },\n  },\n  featureSets: {\n    marginTop: '50px',\n    marginLeft: '20px',\n    marginRight: '20px',\n    [`${getMobileMediaQuery()}, screen and (max-height: 640px)`]: {\n      marginTop: '20px',\n    },\n  },\n  featureSet: {\n    'textAlign': 'center',\n    'boxSizing': 'border-box',\n    'overflow': 'hidden',\n    '& svg': {\n      width: '60px',\n      height: '60px',\n    },\n    [`${getMobileMediaQuery()}, screen and (max-height: 640px)`]: {\n      '& svg': {\n        width: '40px',\n        height: '40px',\n      },\n    },\n  },\n  image: {\n    width: '100%',\n    height: '100%',\n    maxWidth: '740px',\n    marginTop: '40px',\n    [`${getMobileMediaQuery()}, screen and (max-height: 640px)`]: {\n      marginTop: '20px',\n    },\n  },\n  getStartedBtnContainer: {\n    textAlign: 'center',\n    marginTop: '100px',\n    [`${getMobileMediaQuery()}, screen and (max-height: 640px)`]: {\n      marginTop: '20px',\n    },\n  },\n};\n\nexport default styles;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren } from 'react';\nimport AssumptionsLocalStateContextProvider from './components/LocalStateContextProvider';\nimport AssumptionsLocalStorageContextProvider from './components/LocalStorageContextProvider';\nimport { useAssumptionsContext } from './context';\nimport { AssumptionsContextProviderProps } from './types';\nimport { STORAGE_LOCAL_STATE } from '../../configs';\nimport useWorkspaceStorage from '../../hooks/useWorkspaceStorage';\n\nconst AssumptionsContextProvider: FC<PropsWithChildren<AssumptionsContextProviderProps>> = (props) => {\n  const { storageType, value } = useWorkspaceStorage(props.workspaceId);\n\n  return storageType === STORAGE_LOCAL_STATE ?\n    (<AssumptionsLocalStateContextProvider\n      key={props.workspaceId}\n      initialValue={value?.assumptions}\n      {...props} />) :\n    (<AssumptionsLocalStorageContextProvider key={props.workspaceId} {...props} />);\n};\n\nexport default AssumptionsContextProvider;\n\nexport {\n  useAssumptionsContext,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren } from 'react';\nimport MitigationLinksLocalStateContextProvider from './components/LocalStateContextProvider';\nimport MitigationLinksLocalStorageContextProvider from './components/LocalStorageContextProvider';\nimport { useMitigationLinksContext } from './context';\nimport { MitigationLinksContextProviderProps } from './types';\nimport { STORAGE_LOCAL_STATE } from '../../configs';\nimport useWorkspaceStorage from '../../hooks/useWorkspaceStorage';\n\nconst MitigationLinksContextProvider: FC<PropsWithChildren<MitigationLinksContextProviderProps>> = (props) => {\n  const { storageType, value } = useWorkspaceStorage(props.workspaceId);\n\n  return storageType === STORAGE_LOCAL_STATE ?\n    (<MitigationLinksLocalStateContextProvider\n      key={props.workspaceId}\n      initialValue={value?.mitigationLinks}\n      {...props} />) :\n    (<MitigationLinksLocalStorageContextProvider key={props.workspaceId} {...props} />);\n};\n\nexport default MitigationLinksContextProvider;\n\nexport {\n  useMitigationLinksContext,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useContext, createContext } from 'react';\nimport { Mitigation, TemplateThreatStatement, ThreatPack, ThreatPackUsage } from '../../customTypes';\n\nexport interface ThreatPacksContextApi {\n  threatPacks: ThreatPack[];\n  threatPackUsage: ThreatPackUsage;\n  getThreatPack: (id: string) => Promise<ThreatPack | undefined>;\n  addThreats: (threatPackId: string, threats: TemplateThreatStatement[]) => Promise<void>;\n  getMitigationCandidates: (ThreatPackId: string, threatPackThreatID: string) => Promise<Mitigation[]>;\n}\n\nconst initialState: ThreatPacksContextApi = {\n  threatPacks: [],\n  threatPackUsage: {},\n  getThreatPack: () => Promise.resolve({\n    id: '0',\n    name: '',\n    description: '',\n    threats: [],\n  }),\n  addThreats: () => Promise.resolve(),\n  getMitigationCandidates: () => Promise.resolve([]),\n};\n\nexport const ThreatPacksContext = createContext<ThreatPacksContextApi>(initialState);\n\nexport const useThreatPacksContext = () => useContext(ThreatPacksContext);","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useMemo } from 'react';\nimport { APP_MODE_IDE_EXTENSION, STORAGE_LOCAL_STATE, STORAGE_LOCAL_STORAGE } from '../../configs';\nimport { useGlobalSetupContext } from '../../contexts';\nimport { useWorkspaceExamplesContext } from '../../contexts/WorkspaceExamplesContext';\nimport { useWorkspacesContext } from '../../contexts/WorkspacesContext';\nimport { DataExchangeFormat } from '../../customTypes';\nimport isWorkspaceExample from '../../utils/isWorkspaceExample';\n\ntype StorageType = typeof STORAGE_LOCAL_STATE | typeof STORAGE_LOCAL_STORAGE;\n\nconst useWorkspaceStorage = (workspaceId: string | null): {\n  storageType: StorageType;\n  value?: DataExchangeFormat;\n} => {\n  const { workspaceList } = useWorkspacesContext();\n  const { getWorkspaceExample } = useWorkspaceExamplesContext();\n  const { appMode } = useGlobalSetupContext();\n\n  return useMemo(() => {\n    if (appMode === APP_MODE_IDE_EXTENSION) {\n      return {\n        storageType: STORAGE_LOCAL_STATE,\n      };\n    }\n\n    if (workspaceId && isWorkspaceExample(workspaceId)) {\n      return {\n        storageType: STORAGE_LOCAL_STATE,\n        value: getWorkspaceExample(workspaceId)?.value,\n      };\n    }\n\n    if (workspaceId) {\n      const workspace = workspaceList.find(x => x.id === workspaceId);\n      if (workspace && workspace.storageType === STORAGE_LOCAL_STATE) {\n        return {\n          storageType: STORAGE_LOCAL_STATE,\n          value: undefined,\n        };\n      }\n    }\n\n    return {\n      storageType: STORAGE_LOCAL_STORAGE,\n      value: undefined,\n    };\n  }, [workspaceId, workspaceList]);\n};\n\nexport default useWorkspaceStorage;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport { ClassNames } from '@emotion/react';\nimport React, { FC, useState, useEffect, useRef, useMemo } from 'react';\nimport Carousel from 'react-simply-carousel';\nimport InfoModalCopy from './components/Copy';\nimport InfoModalEditor from './components/Editor';\nimport InfoModalFeatures from './components/Features';\nimport InfoModalFullExamples from './components/FullExample';\nimport InfoModalGetStarted from './components/GetStarted';\nimport InfoModalIntro from './components/Intro';\nimport InfoModalMoreFeatures from './components/MoreFeatures';\nimport InfoModalSelector from './components/Selector';\nimport styles from './styles';\nimport { useMobileMediaQuery } from '../../../hooks/useMediaQuery';\nimport Modal from '../../generic/Modal';\n\nconst TOTAL_SLIDES = 8;\n\nconst MARGIN_SLIDE_H = 0;\n\nconst DEFAULT_SLIDE_WIDTH = 760;\n\nexport interface InfoModalProps {\n  visible: boolean;\n  setVisible: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nconst InfoModal: FC<InfoModalProps> = ({\n  visible,\n  setVisible,\n}) => {\n  const contentRef = useRef<HTMLDivElement>(null);\n  const [activeSlide, setActiveSlide] = useState(0);\n  const isMobileView = useMobileMediaQuery();\n\n  useEffect(() => {\n    const handleKeyDown = (event: any) => {\n      if (event.key === 'ArrowRight') {\n        setActiveSlide(cur => cur + 1);\n      } else if (event.key === 'ArrowLeft') {\n        setActiveSlide(cur => cur === 0 ? cur : cur - 1);\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown, false);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown, false);\n    };\n  }, [setActiveSlide]);\n\n  useEffect(() => {\n    activeSlide >= TOTAL_SLIDES && setVisible(false);\n  }, [activeSlide]);\n\n  const contentRefDimention = useMemo(() => {\n    const clientWidth = contentRef.current?.clientWidth;\n\n    return {\n      width: clientWidth ? `${clientWidth - MARGIN_SLIDE_H}px` : `${DEFAULT_SLIDE_WIDTH}px`,\n    };\n  }, [contentRef.current?.clientHeight, contentRef.current?.clientWidth, window?.innerHeight]);\n\n  return (<ClassNames>\n    {({ css, cx }) => (\n      <Modal\n        visible={visible}\n        onDismiss={() => setVisible(false)}\n      >\n        <div css={css(styles.contentRoot)} ref={contentRef as React.MutableRefObject<HTMLDivElement>}>\n          <Carousel\n            containerProps={{\n              className: css(styles.container),\n            }}\n            preventScrollOnSwipe\n            swipeTreshold={60}\n            activeSlideIndex={activeSlide}\n            activeSlideProps={{}}\n            onRequestChange={setActiveSlide}\n            forwardBtnProps={{\n              children: '>',\n              className: cx(css(styles.navBtn), css(styles.nextBtn)),\n              hidden: activeSlide === TOTAL_SLIDES - 1,\n            }}\n            backwardBtnProps={{\n              children: '<',\n              className: cx(css(styles.navBtn), css(styles.prevBtn)),\n              hidden: activeSlide === 0,\n            }}\n            dotsNav={{\n              show: true,\n              containerProps: {\n                className: css(styles.navBtnDotContainer),\n              },\n              itemBtnProps: {\n                className: css(styles.navBtnDot),\n              },\n              activeItemBtnProps: {\n                className: cx(css(styles.navBtnDot), css(styles.navBtnDotActive)),\n              },\n            }}\n            itemsToShow={isMobileView ? 1 : 2}\n            speed={400}\n          >\n            <div\n              className={css(styles.slide)}\n              style={{\n                ['--slide-width' as any]: contentRefDimention.width,\n              }}\n              key='intro'\n            >\n              <InfoModalIntro />\n            </div>\n            <div\n              className={css(styles.slide)}\n              style={{\n                ['--slide-width' as any]: contentRefDimention.width,\n              }}\n              key='tenets'\n            >\n              <InfoModalFeatures />\n            </div>\n            <div\n              className={css(styles.slide)}\n              style={{\n                ['--slide-width' as any]: contentRefDimention.width,\n              }}\n              key='features'\n            >\n              <InfoModalMoreFeatures />\n            </div>\n            {!isMobileView && <div\n              className={css(styles.slide)}\n              style={{\n                ['--slide-width' as any]: contentRefDimention.width,\n              }}\n              key='selector'\n            >\n              <InfoModalSelector/>\n            </div>}\n            {!isMobileView && <div\n              className={css(styles.slide)}\n              style={{\n                ['--slide-width' as any]: contentRefDimention.width,\n              }}\n              key='editor'\n            >\n              <InfoModalEditor />\n            </div>}\n            {!isMobileView && <div\n              className={css(styles.slide)}\n              style={{\n                ['--slide-width' as any]: contentRefDimention.width,\n              }}\n              key='fullexamples'\n            >\n              <InfoModalFullExamples />\n            </div>}\n            {!isMobileView && <div\n              className={css(styles.slide)}\n              style={{\n                ['--slide-width' as any]: contentRefDimention.width,\n              }}\n              key='copy'\n            >\n              <InfoModalCopy />\n            </div>}\n            <div\n              className={css(styles.slide)}\n              style={{\n                ['--slide-width' as any]: contentRefDimention.width,\n              }}\n              key='getstarted'\n            >\n              <InfoModalGetStarted onClick={() => setVisible(false)} />\n            </div>\n          </Carousel>\n        </div>\n      </Modal>)}\n  </ClassNames>);\n};\n\nexport default InfoModal;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Button from '@cloudscape-design/components/button';\nimport { FC, PropsWithChildren, useCallback } from 'react';\n\nexport interface CopyToClipbordProps {\n  /**\n   * Specifies the text content to be copied instead of what is inside the children.\n   */\n  content?: string;\n}\n\nconst CopyToClipbord: FC<PropsWithChildren<CopyToClipbordProps>> = ({ children, content }) => {\n  const handleClick = useCallback(async () => {\n    if (content) {\n      await navigator.clipboard.writeText(content);\n    } else if (typeof children === 'string') {\n      await navigator.clipboard.writeText(children);\n    }\n  }, [children, content]);\n\n  return <><Button iconName=\"copy\" onClick={handleClick} variant=\"inline-icon\" />{children}</>;\n};\n\nexport default CopyToClipbord;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useCallback } from 'react';\nimport { MitigationLink } from '../../customTypes';\n\nexport const isSameMitigationLink = (entity1: MitigationLink, entity2: MitigationLink) => {\n  return entity1.mitigationId === entity2.mitigationId\n      && entity1.linkedId === entity2.linkedId;\n};\n\nconst useMitigationLinks = (\n  mitigationLinkList: MitigationLink[],\n  setMitigationLinkList: React.Dispatch<React.SetStateAction<MitigationLink[]>>,\n) => {\n  const handlRemoveMitigationLink = useCallback((mitigationId: string, linkedEntityId: string) => {\n    setMitigationLinkList((prevList) => prevList.filter(x => !(\n      x.mitigationId === mitigationId && x.linkedId === linkedEntityId\n    )));\n  }, [setMitigationLinkList]);\n\n  const handleRemoveMitigationLinks = useCallback((mitigationLinks: MitigationLink[]) => {\n    setMitigationLinkList((prevList) => {\n      return prevList.filter(pl =>\n        mitigationLinks.findIndex(ml => isSameMitigationLink(ml, pl)) < 0);\n    });\n  }, [setMitigationLinkList]);\n\n  const handlRemoveMitigationLinksByMitigationId = useCallback(async (mitigationId: string) => {\n    setMitigationLinkList((prevList) => prevList.filter(x => !(\n      x.mitigationId === mitigationId\n    )));\n  }, [setMitigationLinkList]);\n\n  const handlRemoveMitigationLinksByLinkedEntityId = useCallback(async (linkedEntityId: string) => {\n    setMitigationLinkList((prevList) => prevList.filter(x => !(\n      x.linkedId === linkedEntityId\n    )));\n  }, [setMitigationLinkList]);\n\n  const handleAddMitigationLink = useCallback((mitigationLink: MitigationLink) => {\n    setMitigationLinkList((prevList) => {\n      const foundIndex = prevList.findIndex(st =>\n        st.mitigationId === mitigationLink.mitigationId &&\n            st.linkedId === mitigationLink.linkedId,\n      );\n      if (foundIndex < 0) {\n        return [...prevList, mitigationLink];\n      };\n\n      return [...prevList];\n    });\n  }, [setMitigationLinkList]);\n\n  const handleAddMitigationLinks = useCallback((mitigationLinks: MitigationLink[]) => {\n    setMitigationLinkList((prevList) => {\n      const filteredLinks = mitigationLinks.filter(al =>\n        prevList.findIndex(pl => pl.mitigationId === al.mitigationId && pl.linkedId === al.mitigationId) < 0);\n      return [...prevList, ...filteredLinks];\n    });\n  }, [setMitigationLinkList]);\n\n  const handleGetLinkedMitigationLinks = useCallback((linkedEntityId: string) => {\n    return mitigationLinkList.filter(x => x.linkedId === linkedEntityId);\n  }, [mitigationLinkList]);\n\n  const handleGetMitigationThreatLinks = useCallback((mitigationId: string) => {\n    return mitigationLinkList.filter(x => x.mitigationId === mitigationId);\n  }, [mitigationLinkList]);\n\n  return {\n    handlRemoveMitigationLink,\n    handleRemoveMitigationLinks,\n    handlRemoveMitigationLinksByMitigationId,\n    handlRemoveMitigationLinksByLinkedEntityId,\n    handleAddMitigationLink,\n    handleAddMitigationLinks,\n    handleGetLinkedMitigationLinks,\n    handleGetMitigationThreatLinks,\n  };\n};\n\nexport default useMitigationLinks;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useContext, createContext } from 'react';\nimport { PerFieldExample, TemplateThreatStatement } from '../../customTypes';\nimport threatStatementExamplesData from '../../data/threatStatementExamples.json';\nexport type View = 'list' | 'editor';\n\nexport type PerFieldExamplesType = {\n  threat_source: string[];\n  prerequisites: PerFieldExample[];\n  threat_action: PerFieldExample[];\n  threat_impact: PerFieldExample[];\n  impacted_goal: string[][];\n  impacted_assets: string[];\n}\n\nexport const DEFAULT_PER_FIELD_EXAMPLES = {\n  threat_source: [],\n  prerequisites: [],\n  threat_action: [],\n  threat_impact: [],\n  impacted_goal: [],\n  impacted_assets: [],\n};\n\nexport interface ThreatsContextApi {\n  view: View;\n  editingStatement: TemplateThreatStatement | null;\n  statementList: TemplateThreatStatement[];\n  setStatementList: (statements: TemplateThreatStatement[]) => void;\n  threatStatementExamples: TemplateThreatStatement[];\n  perFieldExamples: PerFieldExamplesType;\n  previousInputs: PerFieldExamplesType;\n  setView: React.Dispatch<React.SetStateAction<View>>;\n  setEditingStatement: React.Dispatch<React.SetStateAction<TemplateThreatStatement | null>>;\n  addStatement: (idToCopy?: string) => void;\n  removeStatement: (id: string) => void;\n  editStatement: (id: string) => void;\n  saveStatement: (statement: TemplateThreatStatement) => void;\n  removeAllStatements: () => Promise<void>;\n  onDeleteWorkspace: (workspaceId: string) => Promise<void>;\n}\n\nconst initialState: ThreatsContextApi = {\n  view: 'list',\n  editingStatement: null,\n  statementList: [],\n  setStatementList: () => { },\n  threatStatementExamples: threatStatementExamplesData,\n  perFieldExamples: DEFAULT_PER_FIELD_EXAMPLES,\n  previousInputs: DEFAULT_PER_FIELD_EXAMPLES,\n  setView: () => { },\n  setEditingStatement: () => { },\n  addStatement: () => { },\n  removeStatement: () => { },\n  saveStatement: () => { },\n  editStatement: () => { },\n  removeAllStatements: () => Promise.resolve(),\n  onDeleteWorkspace: () => Promise.resolve(),\n};\n\nexport const ThreatsContext = createContext<ThreatsContextApi>(initialState);\n\nexport const useThreatsContext = () => useContext(ThreatsContext);","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport { SpaceBetween } from '@cloudscape-design/components';\nimport ButtonDropdown, { ButtonDropdownProps } from '@cloudscape-design/components/button-dropdown';\nimport ColumnLayout from '@cloudscape-design/components/column-layout';\nimport { OptionDefinition } from '@cloudscape-design/components/internal/components/option/interfaces';\nimport { CancelableEventHandler } from '@cloudscape-design/components/internal/events';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport { FC, useCallback, useMemo } from 'react';\nimport { THREAT_STATUS_COLOR_MAPPING } from '../../../configs/status';\nimport { TemplateThreatStatement } from '../../../customTypes';\nimport threatStatus from '../../../data/status/threatStatus.json';\nimport AssumptionLink from '../../assumptions/AssumptionLink';\nimport CopyToClipbord from '../../generic/CopyToClipboard';\nimport GenericCard from '../../generic/GenericCard';\nimport StatusBadge from '../../generic/StatusBadge';\nimport MitigationLink from '../../mitigations/MitigationLink';\nimport MetadataEditor from '../MetadataEditor';\nimport PriorityBadge from '../PriorityBadge';\n\nexport interface ThreatStatementCardProps {\n  showLinkedEntities?: boolean;\n  statement: TemplateThreatStatement;\n  onCopy?: (id: string) => void;\n  onRemove?: (id: string) => void;\n  onEditInWizard?: (id: string) => void;\n  onEditStatementStatus: (statement: TemplateThreatStatement, status: string) => void;\n  onEditMetadata: (statement: TemplateThreatStatement, key: string, value: string | string[] | undefined) => void;\n  onAddTagToStatement?: (statement: TemplateThreatStatement, tag: string) => void;\n  onRemoveTagFromStatement?: (statement: TemplateThreatStatement, tag: string) => void;\n}\n\nconst ThreatStatementCard: FC<ThreatStatementCardProps> = ({\n  showLinkedEntities,\n  statement,\n  onCopy,\n  onRemove,\n  onEditInWizard,\n  onAddTagToStatement,\n  onRemoveTagFromStatement,\n  onEditStatementStatus,\n  onEditMetadata,\n}) => {\n  const handleMoreActions: CancelableEventHandler<ButtonDropdownProps.ItemClickDetails> = useCallback(({ detail }) => {\n    switch (detail.id) {\n      case 'copyToCurrentWorkspace':\n        onCopy?.(statement.id);\n        break;\n      default:\n        console.log('Unknown action', detail.id);\n    }\n  }, [onCopy, statement.id]);\n\n  const moreActions = useMemo(() => {\n    return (\n      <ButtonDropdown\n        items={[\n          { id: 'copyToCurrentWorkspace', text: 'Duplicate' },\n        ]}\n        ariaLabel=\"More actions\"\n        variant=\"icon\"\n        onItemClick={handleMoreActions}\n      />);\n  }, []);\n\n  const displayStatement = useMemo(() => {\n    if (statement.displayedStatement) {\n      return statement.displayedStatement.map((s, index) => typeof s === 'string' ?\n        s : s.type === 'b' ?\n          <b key={index}>{s.content}</b> :\n          s.content);\n    }\n\n    return statement.statement || '';\n  }, [statement]);\n\n  return (<GenericCard\n    header={`Threat ${statement.numericId}`}\n    entityId={statement.id}\n    info={<SpaceBetween direction='horizontal' size='s'>\n      <StatusBadge\n        options={threatStatus as OptionDefinition[]}\n        setSelectedOption={(option) => onEditStatementStatus(statement, option)}\n        selectedOption={statement.status}\n        statusColorMapping={THREAT_STATUS_COLOR_MAPPING}\n      />\n      <PriorityBadge editingStatement={statement} onEditMetadata={onEditMetadata} />\n    </SpaceBetween>}\n    tags={statement.tags}\n    moreActions={moreActions}\n    onRemove={onRemove}\n    onEdit={onEditInWizard}\n    onAddTagToEntity={(_entityId, tag) => onAddTagToStatement?.(statement, tag)}\n    onRemoveTagFromEntity={(_entityId, tag) => onRemoveTagFromStatement?.(statement, tag)}\n  >\n    <SpaceBetween direction='vertical' size='s'>\n      <ColumnLayout columns={showLinkedEntities ? 2 : 1}>\n        <TextContent>\n          <CopyToClipbord content={statement.statement}>\n            {displayStatement}\n          </CopyToClipbord>\n        </TextContent>\n        {showLinkedEntities && <SpaceBetween direction='vertical' size='s'>\n          <MitigationLink\n            linkedEntityId={statement.id}\n          />\n          <AssumptionLink\n            linkedEntityId={statement.id}\n            type='Threat'\n          />\n        </SpaceBetween>}\n      </ColumnLayout>\n      <MetadataEditor\n        variant='default'\n        editingStatement={statement}\n        onEditStatementStatus={onEditStatementStatus}\n        onEditMetadata={onEditMetadata}\n      />\n    </SpaceBetween>\n  </GenericCard>);\n};\n\nexport default ThreatStatementCard;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { Container, SpaceBetween, Toggle } from '@cloudscape-design/components';\nimport { FC } from 'react';\n\n/**\n * Props interface for ColumnVisibilityToggles component\n */\nexport interface ColumnVisibilityTogglesProps {\n  /** Record of column visibility states by column ID */\n  visibleColumns: Record<string, boolean>;\n  /** Callback when individual column visibility changes */\n  onColumnVisibilityChange: (columnId: string, visible: boolean) => void;\n  /** Whether threat inputs are visible as a group */\n  threatInputsVisible: boolean;\n  /** Callback when threat inputs group visibility changes */\n  onThreatInputsVisibilityChange: (visible: boolean) => void;\n}\n\n/**\n * ColumnVisibilityToggles component for managing column visibility\n *\n * Provides toggles for individual columns and a master toggle for threat inputs\n */\nexport const ColumnVisibilityToggles: FC<ColumnVisibilityTogglesProps> = ({\n  visibleColumns,\n  onColumnVisibilityChange,\n  threatInputsVisible,\n  onThreatInputsVisibilityChange,\n}) => {\n  return (\n    <Container>\n      <SpaceBetween direction=\"horizontal\" size=\"xs\">\n        <Toggle\n          checked={visibleColumns.assumptions}\n          onChange={({ detail }) =>\n            onColumnVisibilityChange('assumptions', detail.checked)\n          }\n        >\n          Assumptions\n        </Toggle>\n        <Toggle\n          checked={threatInputsVisible}\n          onChange={({ detail }) => onThreatInputsVisibilityChange(detail.checked)}\n        >\n          Threat Inputs\n        </Toggle>\n        <Toggle\n          checked={visibleColumns.mitigations}\n          onChange={({ detail }) =>\n            onColumnVisibilityChange('mitigations', detail.checked)\n          }\n        >\n          Mitigations\n        </Toggle>\n      </SpaceBetween>\n    </Container>\n  );\n};\n\nexport default ColumnVisibilityToggles;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren } from 'react';\nimport { AppMode, ComposerMode, DataExchangeFormat } from '../../customTypes';\nimport GlobalSetupContextProvider from '../GlobalSetupContext';\nimport WorkspaceContextAggregator from '../WorkspaceContextAggregator';\nimport WorkspaceExamplesContext from '../WorkspaceExamplesContext';\nimport WorkspacesContextProvider, { WorkspacesContextProviderProps } from '../WorkspacesContext';\n\nexport interface ContextAggregatorProps {\n  composerMode?: ComposerMode;\n  appMode?: AppMode;\n  features?: string[];\n  onWorkspaceChanged?: WorkspacesContextProviderProps['onWorkspaceChanged'];\n  onPreview?: (content: DataExchangeFormat) => void;\n  onPreviewClose?: () => void;\n  onImported?: () => void;\n  onDefineWorkload?: () => void;\n}\n\nconst ContextAggregator: FC<PropsWithChildren<ContextAggregatorProps>> = ({\n  children,\n  onWorkspaceChanged,\n  appMode,\n  composerMode = 'Full',\n  features,\n  ...props\n}) => {\n  return (\n    <GlobalSetupContextProvider\n      features={features}\n      appMode={appMode}\n      composerMode={composerMode}>\n      <WorkspaceExamplesContext>\n        <WorkspacesContextProvider\n          onWorkspaceChanged={onWorkspaceChanged}\n          {...props}\n        >\n          {(workspaceId) => (<WorkspaceContextAggregator\n            workspaceId={workspaceId}\n            requiredGlobalSetupContext={false}\n          >\n            {children}\n          </WorkspaceContextAggregator>)}\n        </WorkspacesContextProvider>\n      </WorkspaceExamplesContext>\n    </GlobalSetupContextProvider>);\n};\n\nexport default ContextAggregator;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren } from 'react';\nimport ThreatsLocalStateContextProvider from './components/LocalStateContextProvider';\nimport ThreatsLocalStorageContextProvider from './components/LocalStorageContextProvider';\nimport { useThreatsContext } from './context';\nimport { ThreatsContextProviderProps } from './types';\nimport { STORAGE_LOCAL_STATE } from '../../configs';\nimport useWorkspaceStorage from '../../hooks/useWorkspaceStorage';\nimport ThreatsMigration from '../../migrations/ThreatsMigration';\n\nconst ThreatsContextProvider: FC<PropsWithChildren<ThreatsContextProviderProps>> = ({ children, ...props }) => {\n  const { storageType, value } = useWorkspaceStorage(props.workspaceId);\n\n  return storageType === STORAGE_LOCAL_STATE ?\n    (<ThreatsLocalStateContextProvider\n      key={props.workspaceId}\n      initialValue={value?.threats}\n      {...props} >\n      {children}\n    </ThreatsLocalStateContextProvider>) :\n    (<ThreatsLocalStorageContextProvider key={props.workspaceId} {...props} >\n      <ThreatsMigration>\n        {children}\n      </ThreatsMigration>\n    </ThreatsLocalStorageContextProvider>);\n};\n\nexport default ThreatsContextProvider;\n\nexport {\n  useThreatsContext,\n};","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport { CancelableEventHandler, BaseKeyDetail } from '@cloudscape-design/components/internal/events';\nimport TokenGroup from '@cloudscape-design/components/token-group';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport { FC, useCallback, useState } from 'react';\nimport { TagSchema } from '../../../../../customTypes';\nimport { useMobileMediaQuery } from '../../../../../hooks/useMediaQuery';\nimport getMobileMediaQuery from '../../../../../utils/getMobileMediaQuery';\nimport Input from '../../../../generic/Input';\n\nexport interface TagsProps {\n  tags?: string[];\n  entityId: string;\n  onAddTagToEntity?: (entityId: string, tag: string) => void;\n  onRemoveTagFromEntity?: (entityId: string, tag: string) => void;\n}\n\nconst styles = {\n  tags: css({\n    '&>div': {\n      display: 'inline-block',\n    },\n  }),\n  input: css({\n    marginLeft: awsui.spaceScaledS,\n    [getMobileMediaQuery()]: {\n      display: 'block !important',\n      marginLeft: '0px',\n      marginTop: awsui.spaceScaledS,\n    },\n  }),\n};\n\nconst Tags: FC<TagsProps> = ({\n  tags,\n  entityId,\n  onAddTagToEntity,\n  onRemoveTagFromEntity,\n}) => {\n  const [value, setValue] = useState('');\n  const isMoblieView = useMobileMediaQuery();\n\n  const handleKeyDown: CancelableEventHandler<BaseKeyDetail> = useCallback(({ detail }) => {\n    if (detail.keyCode === 13 && value) {\n      onAddTagToEntity?.(entityId, value);\n      setValue('');\n    }\n  }, [onAddTagToEntity, entityId, value]);\n\n  const handleAddTag = useCallback(() => {\n    onAddTagToEntity?.(entityId, value);\n    setValue('');\n  }, [onAddTagToEntity, entityId, value]);\n\n  return (<div css={styles.tags}>\n    {tags && tags.length > 0 && <TokenGroup\n      onDismiss={({ detail: { itemIndex } }) => {\n        tags && onRemoveTagFromEntity?.(entityId, tags?.[itemIndex]);\n      }}\n      items={tags.map(t => ({\n        label: t,\n        dismissLabel: `Remove ${t}`,\n      }))}\n    />}\n    <div css={styles.input}>\n      <Input value={value}\n        onKeyDown={handleKeyDown}\n        onChange={({ detail }) => setValue(detail.value)}\n        validateData={TagSchema.safeParse}\n        secondaryControl={isMoblieView ? <Button onClick={handleAddTag}>Add Tag</Button> : undefined}\n        placeholder='Add tag' />\n    </div>\n  </div>);\n};\n\nexport default Tags;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { z } from 'zod';\n\nexport const ComposerModeSchema = z.union([z.literal('ThreatsOnly'), z.literal('EditorOnly'), z.literal('Full')]);\n\nexport type ComposerMode = z.infer<typeof ComposerModeSchema>;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nconst standardizeNumericId = (numericId?: number) => {\n  return String(numericId).padStart(4, '0');\n};\n\nexport default standardizeNumericId;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { Container, Header, SpaceBetween, TextContent, Input } from '@cloudscape-design/components';\nimport { BaseKeyDetail } from '@cloudscape-design/components/internal/events';\nimport { FC, useCallback } from 'react';\n\n/**\n * Props interface for EntityCreationCard component\n */\nexport interface EntityCreationCardProps {\n  /** Header text for create mode (not shown in edit mode) */\n  header?: string;\n  /** Current content value */\n  content: string;\n  /** Callback when content changes */\n  onContentChange: (content: string) => void;\n  /** Callback when save/add is triggered */\n  onSave: () => void;\n  /** Placeholder text for input */\n  placeholder?: string;\n  /** Whether the component is disabled */\n  disabled?: boolean;\n}\n\n/**\n * EntityCreationCard component for creating and editing brainstorm items\n *\n * Supports two modes:\n * - create: Shows header, input field with enter-to-add functionality\n * - edit: Shows textarea with cancel/save buttons\n */\nexport const EntityCreationCard: FC<EntityCreationCardProps> = ({\n  header,\n  content,\n  onContentChange,\n  onSave,\n  placeholder,\n  disabled,\n}) => {\n  /**\n   * Handle keyboard events for create mode\n   * Triggers save when Enter is pressed and content is valid\n   */\n  const handleKeyDown = useCallback((event: CustomEvent<BaseKeyDetail>) => {\n    if (event.detail.key === 'Enter' && content.trim() && !disabled) {\n      event.preventDefault();\n      onSave();\n    }\n  }, [content, onSave, disabled]);\n\n  // Create mode: Show input with header and enter-to-add helper text\n  return (\n    <Container header={header ? <Header>{header}</Header> : undefined}>\n      <SpaceBetween direction=\"vertical\" size=\"s\">\n        <Input\n          placeholder={placeholder || 'Enter content...'}\n          value={content}\n          onChange={({ detail }) => onContentChange(detail.value)}\n          onKeyDown={handleKeyDown}\n        />\n        <TextContent>\n          <small><i>Press enter to add...</i></small>\n        </TextContent>\n      </SpaceBetween>\n    </Container>\n  );\n};\n\nexport default EntityCreationCard;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { TextContent } from '@cloudscape-design/components';\nimport Container from '@cloudscape-design/components/container';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { FC } from 'react';\nimport Status from './components/Status';\nimport { TemplateThreatStatement } from '../../../customTypes';\nimport threatFieldData from '../../../data/threatFieldData';\n\nexport interface MetricsProps {\n  statement: TemplateThreatStatement;\n  onClick: (token: string) => void;\n}\n\nconst Metrics: FC<MetricsProps> = ({ statement, onClick }) => {\n  return (<Container>\n    <SpaceBetween direction='vertical' size='s'>\n      <TextContent><h5>Inputs for mitigation</h5></TextContent>\n      <Status label={threatFieldData.threat_source.displayTitle} onClick={() => onClick('threat_source')} completed={!!statement.threatSource}/>\n      <Status label={threatFieldData.prerequisites.displayTitle} onClick={() => onClick('prerequisites')} completed={!!statement.prerequisites}/>\n      <Status label={threatFieldData.threat_action.displayTitle} onClick={() => onClick('threat_action')} completed={!!statement.threatAction}/>\n      <TextContent>\n        <hr/><h5>Inputs for prioritization</h5></TextContent>\n      <Status label={threatFieldData.threat_impact.displayTitle} onClick={() => onClick('threat_impact')} completed={!!statement.threatImpact}/>\n      <Status label={threatFieldData.impacted_goal.displayTitle} onClick={() => onClick('impacted_goal')} completed={!!statement.impactedGoal && statement.impactedGoal.length > 0}/>\n      <Status label={threatFieldData.impacted_assets.displayTitle} onClick={() => onClick('impacted_assets')} completed={!!statement.impactedAssets && statement.impactedAssets.length > 0}/>\n    </SpaceBetween>\n  </Container>);\n};\n\nexport default Metrics;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useMemo } from 'react';\nimport { TemplateThreatStatement } from '../../../../customTypes';\nimport threatStatementExamplesData from '../../../../data/threatStatementExamples.json';\nimport renderThreatStatement from '../../../../utils/renderThreatStatement';\nimport { PerFieldExamplesType, DEFAULT_PER_FIELD_EXAMPLES } from '../../context';\nimport {\n  addNewValueToStringArray,\n  addNewValueArrayToStringArray,\n  addNewValueArrayToStringArrayArray,\n  addNewValueToPerFieldExampleArray,\n} from '../../utils';\n\nconst useThreatExamples = (\n  statementList: TemplateThreatStatement[],\n) => {\n  const threatStatementExamples = useMemo(() => {\n    return threatStatementExamplesData.map(e => {\n      const { statement, displayedStatement } = renderThreatStatement(e);\n      return {\n        ...e,\n        statement,\n        displayedStatement,\n      };\n    });\n  }, []);\n\n  const perFieldExamples: PerFieldExamplesType = useMemo(() => {\n    return (threatStatementExamples as TemplateThreatStatement[]).reduce((agg: PerFieldExamplesType, st: TemplateThreatStatement, index: number) => {\n      return {\n        threat_source: addNewValueToStringArray(agg.threat_source, st.threatSource),\n        prerequisites: addNewValueToPerFieldExampleArray(agg.prerequisites, 'prerequisites', st, index),\n        threat_action: addNewValueToPerFieldExampleArray(agg.threat_action, 'threatAction', st, index),\n        threat_impact: addNewValueToPerFieldExampleArray(agg.threat_impact, 'threatImpact', st, index),\n        impacted_goal: addNewValueArrayToStringArrayArray(agg.impacted_goal, st.impactedGoal),\n        impacted_assets: addNewValueArrayToStringArray(agg.impacted_assets, st.impactedAssets),\n      };\n    }, DEFAULT_PER_FIELD_EXAMPLES);\n  }, [threatStatementExamples]);\n\n  const previousInputs: PerFieldExamplesType = useMemo(() => {\n    return statementList\n      .map(ts => ts as TemplateThreatStatement)\n      .reduce((agg: PerFieldExamplesType, st: TemplateThreatStatement, index: number) => {\n        return {\n          threat_source: addNewValueToStringArray(agg.threat_source, st.threatSource),\n          prerequisites: addNewValueToPerFieldExampleArray(agg.prerequisites, 'prerequisites', st, index),\n          threat_action: addNewValueToPerFieldExampleArray(agg.threat_action, 'threatAction', st, index),\n          threat_impact: addNewValueToPerFieldExampleArray(agg.threat_impact, 'threatImpact', st, index),\n          impacted_goal: addNewValueArrayToStringArrayArray(agg.impacted_goal, st.impactedGoal),\n          impacted_assets: addNewValueArrayToStringArray(agg.impacted_assets, st.impactedAssets),\n        };\n      }, DEFAULT_PER_FIELD_EXAMPLES);\n  }, [statementList]);\n\n  return {\n    threatStatementExamples,\n    perFieldExamples,\n    previousInputs,\n  };\n};\n\nexport default useThreatExamples;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Box from '@cloudscape-design/components/box';\nimport Button from '@cloudscape-design/components/button';\nimport ColumnLayout from '@cloudscape-design/components/column-layout';\nimport Container from '@cloudscape-design/components/container';\nimport ContentLayout from '@cloudscape-design/components/content-layout';\nimport Header from '@cloudscape-design/components/header';\nimport Link from '@cloudscape-design/components/link';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport { FC } from 'react';\nimport HowItWorks from '../../../assets/how-it-works.png';\nimport SwitchToExample from '../../../assets/switch-to-example-workspace.gif';\nimport { useGlobalSetupContext } from '../../../contexts';\n\nexport interface LandingPageProps {\n  onDefineWorkload?: () => void;\n}\n\nconst LandingPage: FC<LandingPageProps> = ({\n  onDefineWorkload,\n}) => {\n  const { setFileImportModalVisible } = useGlobalSetupContext();\n  return (\n    <ContentLayout\n      headerVariant=\"high-contrast\"\n      header={\n        <Header\n          variant=\"h1\"\n          description=\"A threat modeling tool to help humans to reduce time-to-value when threat modeling\"\n          actions={\n            <SpaceBetween direction=\"horizontal\" size=\"s\">\n              <Button onClick={() => setFileImportModalVisible(true)}>Import existing</Button>\n              <Button variant=\"primary\" onClick={onDefineWorkload}>\n                Define workload or feature\n              </Button>\n            </SpaceBetween>\n          }\n        >\n          Threat Composer\n        </Header>\n      }\n    >\n      <SpaceBetween direction=\"vertical\" size=\"s\">\n        <Container header={<Header variant=\"h2\">How it works</Header>}>\n          <Box padding=\"xxl\">\n            <img\n              style={{\n                display: 'block',\n                marginLeft: 'auto',\n                marginRight: 'auto',\n                width: '80%',\n              }}\n              src={HowItWorks}\n            />\n          </Box>\n        </Container>\n        <Container\n          header={<Header variant=\"h2\">View an example threat model</Header>}\n        >\n          <ColumnLayout columns={2}>\n            <TextContent>\n              <p>\n                We've included a base threat model of the Threat Composer tool\n                itself as an example. The aim is to provide a common reference\n                point for people who are starting off with Threat Composer. You\n                may want to use this as the base threat model as a starting\n                point to generate a contextualised threat model for your own\n                specific needs and deployment of Threat Composer.\n              </p>\n              <ul>\n                <li>\n                  To view the example threat model simply switch to the\n                  system-defined <b>Example</b> Workspace.\n                </li>\n                <li>\n                  No changes you make within Example workspace will be saved. If\n                  you wish to modify it or use is a base, it's recommended you\n                  Export it, create a new Workspace and Import it.\n                </li>\n              </ul>\n            </TextContent>\n            <img\n              style={{\n                display: 'block',\n              }}\n              src={SwitchToExample}\n            />\n          </ColumnLayout>\n        </Container>\n        <Container header={<Header variant=\"h2\">Benefits and features</Header>}>\n          <ColumnLayout columns={2} variant=\"text-grid\">\n            <TextContent>\n              <h3>Reduce time-to-value when performing threat modeling</h3>\n              <p>\n                Helps you focus on brainstorming and collaboration. Guides you\n                through the threat model process. Inspires you with examples.\n              </p>\n            </TextContent>\n            <TextContent>\n              <h3>Threat models-as-code</h3>\n              <p>\n                Produces threat models that can be exported and shared as\n                structured JSON, making it easy to version control your threat\n                models. Additionally supports Markdown and PDF (browser\n                dependant)\n              </p>\n            </TextContent>\n            <TextContent>\n              <h3>Opinionated threat statement structure</h3>\n              <p>\n                Helps you create useful threat statements that help you devise\n                mitigations and to prioritize.\n              </p>\n            </TextContent>\n            <TextContent>\n              <h3>Client-side storage and workspace separation</h3>\n              <p>\n                Data persisted only client-side with the browser, with workspace\n                separation to allow you to work across multiple threat models.\n              </p>\n            </TextContent>\n            <TextContent>\n              <h3>Self hosted</h3>\n              <p>\n                AWS CDK project with optional continuous deployment and\n                continuous integration pipeline to self host in your AWS\n                account.\n              </p>\n            </TextContent>\n            <TextContent>\n              <h3>Open source</h3>\n              <p>\n                Source code is available for your inspection, forking and\n                modifications to suit your specific organizational needs.\n              </p>\n            </TextContent>\n          </ColumnLayout>\n        </Container>\n        <Container header={<Header variant=\"h2\">Related resources</Header>}>\n          <ColumnLayout columns={2} variant=\"text-grid\">\n            <TextContent>\n              <Link external href=\"https://github.com/awslabs/threat-composer\">\n                Threat Composer - GitHub Repository\n              </Link>\n              <p>\n                Get access to the latest source code, raise bugs, and make\n                feature requests.\n              </p>\n            </TextContent>\n            <TextContent>\n              <Link\n                external\n                href=\"https://explore.skillbuilder.aws/learn/course/external/view/elearning/13274/threat-modeling-the-right-way-for-builders-workshop\"\n              >\n                Threat modeling for builders - AWS Skills Builder eLearning\n              </Link>\n              <p>\n                Learn how to threat model using this eLearning training course.\n              </p>\n            </TextContent>\n            <TextContent>\n              <Link\n                external\n                href=\"https://aws.amazon.com/blogs/security/how-to-approach-threat-modeling\"\n              >\n                How to approach threat modeling - AWS Security Blog\n              </Link>\n              <p>\n                Learn about approaches to integrate threat modeling into your\n                organization.\n              </p>\n            </TextContent>\n          </ColumnLayout>\n        </Container>\n      </SpaceBetween>\n    </ContentLayout>\n  );\n};\n\nexport default LandingPage;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Board, { BoardProps } from '@cloudscape-design/board-components/board';\nimport BoardItem from '@cloudscape-design/board-components/board-item';\nimport Header from '@cloudscape-design/components/header';\nimport { useState, ReactNode, useCallback, FC } from 'react';\nimport MitigationStatus from './components/MitigationStatus';\nimport Overview from './components/Overview';\nimport STRIDEAllocation from './components/STRIDEAllocation';\nimport ThreatGrammar from './components/ThreatGrammar';\nimport ThreatPrioritization from './components/ThreatPrioritization';\nimport ThreatStatus from './components/ThreatStatus';\nimport { WorkspaceInsightsProps } from './types';\nimport ContentLayout from '../../generic/ContentLayout';\n\nexport * from './types';\n\nexport interface ItemType {\n  title: string;\n  content: ReactNode;\n}\n\nconst WorkspaceInsights: FC<WorkspaceInsightsProps> = (props) => {\n  const [items, setItems] = useState<BoardProps.Item<ItemType>[]>([\n    {\n      id: 'overview',\n      rowSpan: 3,\n      columnSpan: 6,\n      data: { title: 'Threat summary', content: <Overview {...props}/> },\n    },\n    {\n      id: 'threat-prioritization',\n      rowSpan: 5,\n      columnSpan: 2,\n      data: { title: 'Threat prioritization', content: <ThreatPrioritization {...props}/> },\n    },\n    {\n      id: 'threat-status',\n      rowSpan: 5,\n      columnSpan: 2,\n      data: { title: 'Threat status', content: <ThreatStatus {...props}/> },\n    },\n    {\n      id: 'stride-allocation',\n      rowSpan: 5,\n      columnSpan: 2,\n      data: { title: 'Threat category distribution', content: <STRIDEAllocation {...props}/> },\n    },\n    {\n      id: 'threat-grammer',\n      rowSpan: 5,\n      columnSpan: 2,\n      data: { title: 'Threat grammar distribution', content: <ThreatGrammar {...props}/> },\n    },\n    {\n      id: 'mitigation-status',\n      rowSpan: 5,\n      columnSpan: 2,\n      data: { title: 'Mitigation status', content: <MitigationStatus {...props}/> },\n    },\n  ]);\n\n  const handleRenderItem = useCallback((item: BoardProps.Item<ItemType>, _actions: any) => {\n    return (<BoardItem\n      header={<Header>{item.data.title}</Header>}\n      i18nStrings={{\n        dragHandleAriaLabel: 'Drag handle',\n        dragHandleAriaDescription:\n          'Use Space or Enter to activate drag, arrow keys to move, Space or Enter to submit, or Escape to discard.',\n        resizeHandleAriaLabel: 'Resize handle',\n        resizeHandleAriaDescription:\n          'Use Space or Enter to activate resize, arrow keys to move, Space or Enter to submit, or Escape to discard.',\n      }}\n    >\n      {item.data.content}\n    </BoardItem>);\n  }, []);\n\n  return (<ContentLayout title='Insights dashboard'>\n    <Board\n      renderItem={handleRenderItem as (item: BoardProps.Item<unknown>) => JSX.Element}\n      onItemsChange={event => {\n        setItems(event.detail.items as BoardProps.Item<ItemType>[]);\n      }}\n      empty={<></>}\n      items={items}\n      i18nStrings={(() => {\n        function createAnnouncement(\n          operationAnnouncement: any,\n          conflicts: any,\n          disturbed: any,\n        ) {\n          const conflictsAnnouncement =\n            conflicts.length > 0\n              ? `Conflicts with ${conflicts\n                .map((c: BoardProps.Item<ItemType>) => c.data.title)\n                .join(', ')}.`\n              : '';\n          const disturbedAnnouncement =\n            disturbed.length > 0\n              ? `Disturbed ${disturbed.length} items.`\n              : '';\n          return [\n            operationAnnouncement,\n            conflictsAnnouncement,\n            disturbedAnnouncement,\n          ]\n            .filter(Boolean)\n            .join(' ');\n        }\n        return {\n          liveAnnouncementDndStarted: (operationType: BoardProps.DndOperationType) =>\n            operationType === 'resize'\n              ? 'Resizing'\n              : 'Dragging',\n          liveAnnouncementDndItemReordered: (operation: BoardProps.DndReorderState<unknown>) => {\n            const columns = `column ${operation.placement\n              .x + 1}`;\n            const rows = `row ${operation.placement.y +\n              1}`;\n            return createAnnouncement(\n              `Item moved to ${operation.direction === 'horizontal'\n                ? columns\n                : rows\n              }.`,\n              operation.conflicts,\n              operation.disturbed,\n            );\n          },\n          liveAnnouncementDndItemResized: (operation: BoardProps.DndResizeState<unknown>) => {\n            const columnsConstraint = operation.isMinimalColumnsReached\n              ? ' (minimal)'\n              : '';\n            const rowsConstraint = operation.isMinimalRowsReached\n              ? ' (minimal)'\n              : '';\n            const sizeAnnouncement =\n              operation.direction === 'horizontal'\n                ? `columns ${operation.placement.width}${columnsConstraint}`\n                : `rows ${operation.placement.height}${rowsConstraint}`;\n            return createAnnouncement(\n              `Item resized to ${sizeAnnouncement}.`,\n              operation.conflicts,\n              operation.disturbed,\n            );\n          },\n          liveAnnouncementDndItemInserted: (operation: BoardProps.DndInsertState<unknown>) => {\n            const columns = `column ${operation.placement\n              .x + 1}`;\n            const rows = `row ${operation.placement.y +\n              1}`;\n            return createAnnouncement(\n              `Item inserted to ${columns}, ${rows}.`,\n              operation.conflicts,\n              operation.disturbed,\n            );\n          },\n          liveAnnouncementDndCommitted: (operationType: BoardProps.DndOperationType) =>\n            `${operationType} committed`,\n          liveAnnouncementDndDiscarded: (operationType: BoardProps.DndOperationType) =>\n            `${operationType} discarded`,\n          liveAnnouncementItemRemoved: (op: BoardProps.ItemRemovedState<ItemType>) =>\n            createAnnouncement(\n              `Removed item ${op.item.data.title}.`,\n              [],\n              op.disturbed,\n            ),\n          navigationAriaLabel: 'Board navigation',\n          navigationAriaDescription:\n            'Click on non-empty item to move focus over',\n          navigationItemAriaLabel: (item: BoardProps.Item<ItemType> | null) =>\n            item ? item.data.title : 'Empty',\n        };\n      })()}\n    /></ContentLayout>);\n};\n\nexport default WorkspaceInsights;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { EXAMPLES_WORKSPACE_ID_PREFIX } from '../../configs';\n\nconst isWorkspaceExample = (workspaceId?: string | null): boolean => {\n  return (workspaceId && workspaceId.startsWith(EXAMPLES_WORKSPACE_ID_PREFIX)) || false;\n};\n\nexport default isWorkspaceExample;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Flashbar, {\n  FlashbarProps,\n} from '@cloudscape-design/components/flashbar';\nimport Link from '@cloudscape-design/components/link';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { FC, useEffect, useState } from 'react';\n\nexport interface NotificationsProps {\n  addPadding?: boolean;\n}\n\nconst NOTIFICATIONS_VERSION = 1;\n\nconst LOCAL_STORAGE_KEY = 'ThreatComposer.GithubNotificationsVersion';\n\nconst Notifications: FC<NotificationsProps> = ({ addPadding }) => {\n  const [items, setItems] = useState<FlashbarProps.MessageDefinition[]>([]);\n\n  useEffect(() => {\n    const key = window.sessionStorage.getItem(LOCAL_STORAGE_KEY);\n    if (key !== NOTIFICATIONS_VERSION.toString()) {\n      setItems([\n        {\n          type: 'success',\n          dismissible: true,\n          dismissLabel: 'Dismiss message',\n          onDismiss: () =>\n            setItems((prevItems) =>\n              prevItems.filter((x) => x.id !== 'message_1'),\n            ),\n          content: (\n            <>\n              You can now create, view and edit Threat Composer files directly\n              within Visual Studio Code using the{' '}\n              <Link\n                color=\"inverted\"\n                href=\"https://marketplace.visualstudio.com/items?itemName=AmazonWebServices.aws-toolkit-vscode\"\n                external={true}\n              >\n                AWS Toolkit extension\n              </Link>\n              . See{' '}\n              <Link\n                color=\"inverted\"\n                href=\"https://docs.aws.amazon.com/toolkit-for-vscode/latest/userguide/threatcomposer-overview.html\"\n                external={true}\n              >\n                user guide\n              </Link>\n            </>\n          ),\n          id: 'message_1',\n        },\n        {\n          type: 'info',\n          dismissible: true,\n          dismissLabel: 'Dismiss message',\n          onDismiss: () =>\n            setItems((prevItems) =>\n              prevItems.filter((x) => x.id !== 'message_2'),\n            ),\n          content: (\n            <>\n              This GitHub Page is provided for demonstration purposes only.\n              Refer to{' '}\n              <Link\n                color=\"inverted\"\n                href=\"https://github.com/awslabs/threat-composer\"\n                external={true}\n              >\n                threat-composer GitHub Repo\n              </Link>{' '}\n              for self-hosting deployment instructions.\n            </>\n          ),\n          id: 'message_2',\n        },\n      ]);\n    }\n\n    window.sessionStorage.setItem(\n      LOCAL_STORAGE_KEY,\n      NOTIFICATIONS_VERSION.toString(),\n    );\n  }, []);\n\n  return items && items.length > 0 ? (\n    <div\n      style={\n        addPadding\n          ? {\n            padding: awsui.spaceScaledL,\n            backgroundColor: awsui.colorBackgroundHomeHeader,\n          }\n          : undefined\n      }\n    >\n      <Flashbar items={items} />\n    </div>\n  ) : (\n    <></>\n  );\n};\n\nexport default Notifications;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useMemo } from 'react';\nimport Notifications from '../../components/Notifications';\n\nconst toDisplayNotification = (process.env.REACT_APP_GITHUB_PAGES === 'true');\n\nconst useNotifications = (addPadding?: boolean) => {\n  return useMemo(() => toDisplayNotification ? <Notifications addPadding={addPadding}/> : undefined, []);\n};\n\nexport default useNotifications;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { z } from 'zod';\nimport { MetadataNodeSchema } from './entities';\nimport {\n  REGEX_WORKSPACE_NAME,\n  SINGLE_FIELD_INPUT_SMALL_MAX_LENGTH,\n  STORAGE_LOCAL_STATE,\n  STORAGE_LOCAL_STORAGE,\n} from '../configs';\n\nexport const WorkspaceSchema = z.object({\n  id: z.string().length(36).describe('UUID v4 identifier for the workspace'),\n  name: z.string().max(SINGLE_FIELD_INPUT_SMALL_MAX_LENGTH).regex(REGEX_WORKSPACE_NAME, `Invalid. Workspace name pattern ${REGEX_WORKSPACE_NAME}`).describe('Human-readable workspace name'),\n  storageType: z.enum([STORAGE_LOCAL_STATE, STORAGE_LOCAL_STORAGE]).optional().describe('Storage mechanism for the workspace'),\n  metadata: MetadataNodeSchema.optional().describe('Additional workspace metadata'),\n});\n\nexport type Workspace = z.infer<typeof WorkspaceSchema>;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Badge from '@cloudscape-design/components/badge';\nimport { SelectProps } from '@cloudscape-design/components/select';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport { FC, useMemo, useState, useRef } from 'react';\nimport PriorityEdit from '..//PriorityEdit';\nimport { TemplateThreatStatement } from '../../../customTypes';\n\nexport interface PriorityBadgeProps {\n  editingStatement: TemplateThreatStatement;\n  onEditMetadata: (statement: TemplateThreatStatement, key: string, value: string | string[] | undefined) => void;\n}\n\nconst PRIORITY_COLOR_MAPPING: any = {\n  High: 'red',\n  Medium: 'blue',\n  Low: 'green',\n  NoSet: 'grey',\n};\n\nconst PriorityBadge: FC<PriorityBadgeProps> = ({\n  editingStatement,\n  onEditMetadata,\n}) => {\n  const ref = useRef<SelectProps.Ref>();\n  const priority = useMemo(() => {\n    return (editingStatement.metadata?.find(m => m.key === 'Priority')?.value as string) || undefined;\n  }, [editingStatement.metadata]);\n\n  const [editMode, setEditMode] = useState(false);\n\n  const editor = useMemo(() => {\n    return <PriorityEdit\n      ref={ref}\n      showLabel={false}\n      editingStatement={editingStatement}\n      onEditMetadata={onEditMetadata}\n      onBlur={() => setEditMode(false)}\n    />;\n  }, [editingStatement, onEditMetadata]);\n\n  return <div>{editMode ? (editor) :\n    (<button\n      onClick={() => {\n        setEditMode(true);\n        setTimeout(() => ref.current?.focus(), 200);\n      }}\n      css={css`\n        background: none;\n        color: inherit;\n        border: none;\n        padding: 0;\n        paddingBottom: ${awsui.spaceScaledXxs};\n        font: inherit;\n        cursor: pointer;\n        outline: inherit;\n        verticalAlign: middle;\n      `}>\n      <Badge color={PRIORITY_COLOR_MAPPING[priority || 'NoSet'] || 'grey'}>{priority || 'Priority Not Set'}</Badge>\n    </button>)}</div>;\n};\n\nexport default PriorityBadge;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport { AutosuggestProps } from '@cloudscape-design/components/autosuggest';\nimport { BaseKeyDetail, CancelableEventHandler, NonCancelableEventHandler } from '@cloudscape-design/components/internal/events';\nimport TokenGroup, { TokenGroupProps } from '@cloudscape-design/components/token-group';\nimport { FC, useCallback, useState, forwardRef } from 'react';\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\nimport { ThreatStatementImpactedGoalItem } from '../../../customTypes';\nimport Autosuggest from '../../generic/Autosuggest';\nimport EditorLayout from '../EditorLayout';\nimport ExampleList from '../ExampleList';\nimport { EditorProps } from '../ThreatStatementEditor/types';\n\nconst EditorImpactedGoal: FC<EditorProps> = forwardRef<AutosuggestProps.Ref, EditorProps>(({\n  statement,\n  setStatement,\n  fieldData,\n}, _ref) => {\n  const [value, setValue] = useState<string>('');\n  const { perFieldExamples } = useThreatsContext();\n\n  const handleAddImpactedGoal = useCallback((impactedGoal: string) => {\n    setStatement(prevStatement => prevStatement && ({\n      ...prevStatement,\n      impactedGoal: prevStatement.impactedGoal ?\n        (!prevStatement.impactedGoal.includes(impactedGoal) ?\n          [...prevStatement.impactedGoal, impactedGoal] :\n          [...prevStatement.impactedGoal])\n        : [impactedGoal],\n    }));\n    setValue('');\n  }, [setStatement]);\n\n  const handleSelect: NonCancelableEventHandler<AutosuggestProps.SelectDetail> = useCallback(({ detail }) => {\n    handleAddImpactedGoal(detail.value.trim());\n  }, [handleAddImpactedGoal]);\n\n  const handleRemoveImpactedGoal: NonCancelableEventHandler<TokenGroupProps.DismissDetail> = useCallback(({ detail: { itemIndex } }) => {\n    setStatement(prevStatement => prevStatement && ({\n      ...prevStatement,\n      impactedGoal: prevStatement.impactedGoal ?\n        [...prevStatement.impactedGoal?.slice(0, itemIndex),\n          ...prevStatement.impactedGoal?.slice(itemIndex + 1)] : [],\n    }));\n  }, [setStatement]);\n\n  const handleExampleClicked = useCallback((example: string) => {\n    const tokens = example.replace('and/or', '').replace('and', '').replace('or', '').split(/[\\s,]+/);\n    tokens.forEach(token => handleAddImpactedGoal(token));\n  }, [handleAddImpactedGoal]);\n\n  const handleKeyDown: CancelableEventHandler<BaseKeyDetail> = useCallback(({ detail }) => {\n    if (detail.keyCode === 13) {\n      handleAddImpactedGoal?.(value);\n      setValue('');\n    }\n  }, [handleAddImpactedGoal, value]);\n\n  return (<EditorLayout\n    title={fieldData.displayTitle}\n    description={fieldData.description}\n  >\n    <Autosuggest\n      onChange={({ detail }) => setValue(detail.value)}\n      onSelect={handleSelect}\n      value={value}\n      options={fieldData.tokens?.map(token => ({\n        value: token,\n      }))}\n      enteredTextLabel={enteredValue => `Use: \"${enteredValue}\"`}\n      ariaLabel=\"Autosuggest for impacted goals\"\n      placeholder=\"Select an impacted goal or enter new one\"\n      empty=\"No matches found\"\n      onKeyDown={handleKeyDown}\n      validateData={ThreatStatementImpactedGoalItem.safeParse}\n    />\n    <TokenGroup\n      onDismiss={handleRemoveImpactedGoal}\n      items={statement.impactedGoal?.map(goal => ({\n        label: goal,\n        dismissLabel: `Remove ${goal}`,\n      }))}\n    />\n    {perFieldExamples.impacted_goal.length > 0 &&\n      <ExampleList examples={perFieldExamples.impacted_goal} onSelect={handleExampleClicked} showSearch={false}></ExampleList>}\n  </EditorLayout>);\n});\n\nexport default EditorImpactedGoal;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Button from '@cloudscape-design/components/button';\nimport ColumnLayout from '@cloudscape-design/components/column-layout';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { ReactNode, useCallback, forwardRef, useRef, useImperativeHandle } from 'react';\nimport { DEFAULT_NEW_ENTITY_ID } from '../../../configs';\nimport { ContentEntityBase, EntityBase } from '../../../customTypes';\nimport useEditMetadata from '../../../hooks/useEditMetadata';\nimport { addTagToEntity, removeTagFromEntity } from '../../../utils/entityTag';\nimport Textarea, { TextAreaProps } from '../../generic/Textarea';\nimport MetadataEditor from '../EntityMetadataEditor';\nimport GenericCard from '../GenericCard';\n\nexport interface GenericEntityCreationCardRefProps {\n  scrollIntoView: () => void;\n  focusTextarea: () => void;\n}\n\nexport interface GenericEntityCreationCardProps {\n  editingEntity: ContentEntityBase;\n  setEditingEntity: React.Dispatch<React.SetStateAction<ContentEntityBase>>;\n  header: string;\n  onSave?: () => void;\n  onReset?: () => void;\n  customEditors?: ReactNode;\n  validateData?: TextAreaProps['validateData'];\n}\n\nconst GenericEntityCreationCard = forwardRef<GenericEntityCreationCardRefProps, GenericEntityCreationCardProps>(({\n  editingEntity,\n  setEditingEntity,\n  header,\n  onSave,\n  onReset,\n  customEditors,\n  validateData,\n}, ref) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  useImperativeHandle(ref, () => ({\n    scrollIntoView: () => {\n      containerRef.current?.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    },\n    focusTextarea: () => {\n      setTimeout(() => {\n        textareaRef.current?.focus();\n      }, 300); // Small delay to ensure scroll completes first\n    },\n  }));\n\n  const handleAddTagToEntity = useCallback((tag: string) => {\n    const updated = addTagToEntity(editingEntity, tag);\n    setEditingEntity(updated as ContentEntityBase);\n  }, [editingEntity, setEditingEntity]);\n\n  const handleRemoveTagFromEntity = useCallback((tag: string) => {\n    const updated = removeTagFromEntity(editingEntity, tag);\n    setEditingEntity(updated as ContentEntityBase);\n  }, [editingEntity, setEditingEntity]);\n\n  const handleEditMetadata = useEditMetadata(setEditingEntity as (updated: EntityBase) => void);\n\n  return (\n    <div ref={containerRef}>\n      <GenericCard\n        header={header}\n        tags={editingEntity?.tags}\n        entityId={DEFAULT_NEW_ENTITY_ID}\n        onAddTagToEntity={(_entityId, tag) => handleAddTagToEntity?.(tag)}\n        onRemoveTagFromEntity={(_entityId, tag) => handleRemoveTagFromEntity?.(tag)}\n      >\n        <SpaceBetween direction='vertical' size='s'>\n          <SpaceBetween direction='horizontal' size='s'>\n            <Button onClick={onReset}>Reset</Button>\n            <Button variant='primary' disabled={!editingEntity.content} onClick={onSave}>Save</Button>\n          </SpaceBetween>\n          <ColumnLayout columns={customEditors ? 2 : 1}>\n            <Textarea\n              value={editingEntity.content}\n              onChange={({ detail }) => setEditingEntity({\n                ...editingEntity,\n                content: detail.value,\n              })}\n              validateData={validateData}\n              singleLine\n              ref={textareaRef}\n            />\n            {customEditors}\n          </ColumnLayout>\n          <MetadataEditor\n            variant='default'\n            entity={editingEntity}\n            onEditEntity={handleEditMetadata}\n            defaultExpanded={true}\n          />\n        </SpaceBetween>\n      </GenericCard>\n    </div>\n  );\n});\n\nexport default GenericEntityCreationCard;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport const ROUTE_WORKSPACE_PATH = 'workspaces/:workspaceId';\nexport const ROUTE_WORKSPACE_HOME_PATH = 'dashboard';\nexport const ROUTE_WORKSPACE_HOME = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_WORKSPACE_HOME_PATH}`;\nexport const ROUTE_THREAT_LIST_PATH = 'threats';\nexport const ROUTE_THREAT_LIST = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_THREAT_LIST_PATH}`;\nexport const ROUTE_THREAT_EDITOR_PATH = 'threats/:threatId';\nexport const ROUTE_THREAT_EDITOR = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_THREAT_EDITOR_PATH}`;\nexport const ROUTE_MITIGATION_LIST_PATH = 'mitigations';\nexport const ROUTE_MITIGATION_LIST = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_MITIGATION_LIST_PATH}`;\nexport const ROUTE_ASSUMPTION_LIST_PATH = 'assumptions';\nexport const ROUTE_ASSUMPTION_LIST = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_ASSUMPTION_LIST_PATH}`;\nexport const ROUTE_APPLICATION_INFO_PATH = 'application';\nexport const ROUTE_APPLICATION_INFO = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_APPLICATION_INFO_PATH}`;\nexport const ROUTE_ARCHITECTURE_INFO_PATH = 'architecture';\nexport const ROUTE_ARCHITECTURE_INFO = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_ARCHITECTURE_INFO_PATH}`;\nexport const ROUTE_DATAFLOW_INFO_PATH = 'dataflow';\nexport const ROUTE_DATAFLOW_INFO = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_DATAFLOW_INFO_PATH}`;\nexport const ROUTE_VIEW_THREAT_MODEL_PATH = 'threatModel';\nexport const ROUTE_VIEW_THREAT_MODEL = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_VIEW_THREAT_MODEL_PATH}`;\nexport const ROUTE_THREAT_PACKS_PATH = 'threatPacks';\nexport const ROUTE_THREAT_PACKS = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_THREAT_PACKS_PATH}`;\nexport const ROUTE_THREAT_PACK_PATH = 'threatPacks/:threatPackId';\nexport const ROUTE_THREAT_PACK = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_THREAT_PACK_PATH}`;\nexport const ROUTE_THREAT_PACK_THREAT_PATH = 'threatPacks/:threatPackId/:threatId';\nexport const ROUTE_THREAT_PACK_THREAT = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_THREAT_PACK_THREAT_PATH}`;\nexport const ROUTE_MITIGATION_PACKS_PATH = 'mitigationPacks';\nexport const ROUTE_MITIGATION_PACKS = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_MITIGATION_PACKS_PATH}`;\nexport const ROUTE_MITIGATION_PACK_PATH = 'mitigationPacks/:mitigationPackId';\nexport const ROUTE_MITIGATION_PACK = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_MITIGATION_PACK_PATH}`;\nexport const ROUTE_PREVIEW_PATH = 'preview/:dataKey';\nexport const ROUTE_PREVIEW = `/${ROUTE_PREVIEW_PATH}`;\nexport const ROUTE_WORKSPACE_DEFAULT = 'workspaces/default';\nexport const ROUTE_BRAINSTORM_PATH = 'brainstorm';\nexport const ROUTE_BRAINSTORM = `/${ROUTE_WORKSPACE_PATH}/${ROUTE_BRAINSTORM_PATH}`;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { TemplateThreatStatement } from '../../customTypes';\nimport renderThreatStatement from '../renderThreatStatement';\n\nconst recalculateThreatData = (threats: TemplateThreatStatement[]) => {\n  return threats.map(t => {\n    const { displayedStatement } = renderThreatStatement(t);\n    const nt: TemplateThreatStatement = {\n      ...t,\n      displayedStatement,\n    };\n\n    return nt;\n  });\n};\n\nexport default recalculateThreatData;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Icon from '@cloudscape-design/components/icon';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport Toggle from '@cloudscape-design/components/toggle';\nimport { Mode } from '@cloudscape-design/global-styles';\nimport { css } from '@emotion/react';\nimport { useThemeContext } from '../ThemeProvider';\n\nconst styles = {\n  svg: css({\n    color: 'grey !important',\n    fill: 'grey !important',\n  }),\n};\n\nconst ThemeToggle = () => {\n  const { theme, setTheme } = useThemeContext();\n  return (<div>\n    <SpaceBetween direction=\"horizontal\" size=\"xs\">\n      <Toggle\n        onChange={({ detail }) =>\n          setTheme(detail.checked ? Mode.Dark : Mode.Light)\n        }\n        checked={theme === Mode.Dark}\n      />\n      <Icon svg={<svg focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" css={styles.svg}>\n        <path d=\"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1\"></path>\n      </svg>} />\n    </SpaceBetween>\n  </div>);\n};\n\nexport default ThemeToggle;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport CollectionPreferences, {\n  CollectionPreferencesProps,\n} from '@cloudscape-design/components/collection-preferences';\nimport { NonCancelableEventHandler } from '@cloudscape-design/components/internal/events';\nimport { FC, useMemo, useState, useCallback } from 'react';\n\nimport FullDataTable from './components/FullDataTable';\nimport {\n  DEFAULT_COLLECTION_PREFERENCES_TITLE,\n  DEFAULT_COLLECTION_PREFERENCES_CONFRIM_LABEL,\n  DEFAULT_COLLECTION_PREFERENCES_CANCEL_LABEL,\n  DEFAULT_PAGE_SIZE_OPTIONS,\n} from './config';\nimport { TableProps } from './types';\n\n/**\n * A table presents data in a two-dimensional format, arranged in columns and rows in a rectangular form.\n * */\nconst Table: FC<TableProps> = ({ disableSettings, preferences: collectionPreferenceComponent, ...props }) => {\n  const [preferences, setPreferences] = useState<CollectionPreferencesProps.Preferences>({\n    pageSize: props.defaultPageSize,\n    visibleContent: props.columnDefinitions.map((cd) => cd.id || ''),\n    wrapLines: true,\n    stripedRows: true,\n  });\n\n  const visibleContentOptions = useMemo(() => {\n    return [\n      {\n        label: 'Main properties',\n        options: props.columnDefinitions.map((cd) => ({\n          id: cd.id || '',\n          label: (typeof cd.header === 'string' ? cd.header : cd.id) || '',\n        })),\n      },\n    ];\n  }, [props.columnDefinitions]);\n\n  const handlePreferenceChange: NonCancelableEventHandler<CollectionPreferencesProps.Preferences<any>> = useCallback(\n    ({ detail }) => {\n      setPreferences(detail);\n    },\n    [],\n  );\n\n  const preferenceComponent = useMemo(() => {\n    if (disableSettings) {\n      return undefined;\n    }\n\n    if (collectionPreferenceComponent) {\n      return collectionPreferenceComponent;\n    }\n\n    return (\n      <CollectionPreferences\n        title={DEFAULT_COLLECTION_PREFERENCES_TITLE}\n        confirmLabel={DEFAULT_COLLECTION_PREFERENCES_CONFRIM_LABEL}\n        cancelLabel={DEFAULT_COLLECTION_PREFERENCES_CANCEL_LABEL}\n        pageSizePreference={{\n          title: 'Page size',\n          options: DEFAULT_PAGE_SIZE_OPTIONS,\n        }}\n        wrapLinesPreference={{\n          label: 'Wrap lines',\n          description: 'Check to see all the text and wrap the lines',\n        }}\n        stripedRowsPreference={{\n          label: 'Striped rows',\n          description: 'Check to add alternating shaded rows',\n        }}\n        visibleContentPreference={{\n          title: 'Select visible columns',\n          options: visibleContentOptions,\n        }}\n        preferences={preferences}\n        onConfirm={handlePreferenceChange}\n        {...props.collectionPreferencesProps}\n      />\n    );\n  }, [\n    disableSettings,\n    preferences,\n    props.collectionPreferencesProps,\n    collectionPreferenceComponent,\n    visibleContentOptions,\n    handlePreferenceChange,\n  ]);\n\n  return <FullDataTable {...props} collectionPreferences={preferences} preferences={preferenceComponent} />;\n};\n\nexport default Table;\nexport * from './types';\nexport * from './config';\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport Container from '@cloudscape-design/components/container';\nimport Header from '@cloudscape-design/components/header';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { FC, useCallback, useState, useMemo, useEffect } from 'react';\nimport { BaseImageInfo, EditableComponentBaseProps } from '../../../customTypes';\nimport imageStyles from '../../../styles/image';\nimport ContentLayout from '../../generic/ContentLayout';\nimport ImageEdit from '../ImageEdit';\nimport MarkdownEditor, { MarkdownEditorProps } from '../MarkdownEditor';\nimport MarkdownViewer from '../MarkdownViewer';\n\nexport interface BaseDiagramInfoProps extends EditableComponentBaseProps {\n  entity: BaseImageInfo;\n  headerTitle: string;\n  diagramTitle: string;\n  onConfirm: (info: BaseImageInfo) => void;\n  validateData?: MarkdownEditorProps['validateData'];\n}\n\nconst BaseDiagramInfo: FC<BaseDiagramInfoProps> = ({\n  headerTitle,\n  diagramTitle,\n  entity,\n  onConfirm,\n  validateData,\n  onEditModeChange,\n  MarkdownEditorComponentType = MarkdownEditor,\n}) => {\n  const [editMode, setEditMode] = useState(!entity.description && !entity.image);\n  const [image, setImage] = useState<string>('');\n  const [content, setContent] = useState('');\n\n  useEffect(() => {\n    onEditModeChange?.(editMode);\n  }, [editMode]);\n\n  const handleSaveDiagramInfo = useCallback(() => {\n    onConfirm({\n      image,\n      description: content,\n    });\n    setEditMode(false);\n  }, [image, content, onConfirm]);\n\n  const handleEdit = useCallback(() => {\n    setContent(entity.description || '');\n    setImage(entity.image || '');\n    setEditMode(true);\n  }, [entity, setContent, setEditMode, setImage]);\n\n  const actions = useMemo(() => {\n    return editMode ? (<SpaceBetween direction='horizontal' size='s'>\n      <Button key='cancelBtn' onClick={() => setEditMode(false)}>Cancel</Button>\n      <Button key='confirmBtn' variant='primary' onClick={handleSaveDiagramInfo}>Confirm</Button>\n    </SpaceBetween>) : (<Button onClick={handleEdit}>Edit</Button>);\n  }, [editMode, handleSaveDiagramInfo, handleEdit, setEditMode]);\n\n  return (<ContentLayout\n    title={headerTitle}\n    actions={actions}\n  >\n    <Container>\n      {editMode ? (<SpaceBetween direction='vertical' size='s'>\n        <MarkdownEditorComponentType\n          label='Introduction'\n          value={content}\n          onChange={setContent}\n          validateData={validateData}\n          focus={true}\n        />\n        <Header variant='h3'>{headerTitle} Diagram</Header>\n        <ImageEdit value={image} onChange={setImage} />\n      </SpaceBetween>) :\n        (<SpaceBetween direction='vertical' size='s'>\n          <Header variant='h3' key='diagramInfo'>Introduction</Header>\n          <MarkdownViewer>\n            {entity.description || ''}\n          </MarkdownViewer>\n          <Header variant='h3' key='diagram'>{diagramTitle}</Header>\n          {entity.image && <img css={imageStyles} src={entity.image} alt={diagramTitle} />}\n        </SpaceBetween>)}\n    </Container>\n  </ContentLayout>\n  );\n};\n\nexport default BaseDiagramInfo;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback, useMemo } from 'react';\nimport { MitigationPacksContext, useMitigationPacksContext } from './context';\nimport { MitigationPacksContextProviderProps } from './types';\nimport { METADATA_KEY_SOURCE, METADATA_KEY_SOURCE_MITIGATION_PACK, METADATA_KEY_SOURCE_MITIGATION_PACK_MITIGATION, METADATA_SOURCE_MITIGATION_PACK } from '../../configs';\nimport { MitigationPack, MitigationPackUsage, Mitigation } from '../../customTypes';\nimport mitigationPacks from '../../data/mitigationPacks/mitigationPacks';\nimport getMetadata from '../../utils/getMetadata';\nimport getNewMitigation from '../../utils/getNewMitigation';\nimport { useMitigationsContext } from '../MitigationsContext';\n\nconst MitigationPacksContextProvider: FC<PropsWithChildren<MitigationPacksContextProviderProps>> = ({\n  children,\n}) => {\n  const getMitigationPack = useCallback(async (id: string) => {\n    return mitigationPacks.find(x => x.id === id) as MitigationPack;\n  }, []);\n\n  const { mitigationList, saveMitigation } = useMitigationsContext();\n\n  const mitigationPackUsage: MitigationPackUsage = useMemo(() => {\n    const usage: MitigationPackUsage = {};\n\n    mitigationList.forEach(s => {\n      const metadata = getMetadata(s.metadata);\n      if (metadata[METADATA_KEY_SOURCE] === METADATA_SOURCE_MITIGATION_PACK\n        && metadata[METADATA_KEY_SOURCE_MITIGATION_PACK]\n        && metadata[METADATA_KEY_SOURCE_MITIGATION_PACK_MITIGATION]) {\n\n        const mitigationPackId = metadata[METADATA_KEY_SOURCE_MITIGATION_PACK] as string;\n\n        if (!usage[mitigationPackId]) {\n          usage[mitigationPackId] = {};\n        }\n\n        const mitigationPackMitigationId = metadata[METADATA_KEY_SOURCE_MITIGATION_PACK_MITIGATION] as string;\n\n        if (!usage[mitigationPackId][mitigationPackMitigationId]) {\n          usage[mitigationPackId][mitigationPackMitigationId] = [];\n        }\n\n        usage[mitigationPackId][mitigationPackMitigationId].push(s.id);\n      }\n    });\n\n    return usage;\n  }, [mitigationList]);\n\n  const addMitigations = useCallback(async (mitigationPackId: string, mitigations: Mitigation[]) => {\n    const usage = mitigationPackUsage[mitigationPackId] || {};\n\n    mitigations.forEach(m => {\n      if (!usage[m.id]) {\n        saveMitigation({\n          ...getNewMitigation(m.content),\n          ...m,\n          metadata: [\n            ...(m.metadata || []),\n            {\n              key: METADATA_KEY_SOURCE,\n              value: METADATA_SOURCE_MITIGATION_PACK,\n            },\n            {\n              key: METADATA_KEY_SOURCE_MITIGATION_PACK,\n              value: mitigationPackId,\n            },\n            {\n              key: METADATA_KEY_SOURCE_MITIGATION_PACK_MITIGATION,\n              value: m.id,\n            },\n          ],\n        });\n      }\n    });\n\n  }, [mitigationPackUsage, saveMitigation]);\n\n  return (<MitigationPacksContext.Provider\n    value={{\n      mitigationPacks,\n      mitigationPackUsage,\n      getMitigationPack,\n      addMitigations,\n    }}\n  >\n    {children}\n  </MitigationPacksContext.Provider>);\n};\n\nexport default MitigationPacksContextProvider;\n\nexport {\n  useMitigationPacksContext,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Grid from '@cloudscape-design/components/grid';\nimport { css } from '@emotion/react';\nimport { FC } from 'react';\nimport styles from '../../styles';\nimport InfoModalBase from '../InfoModalBase';\n\nconst InfoModalMoreFeatures: FC = () => {\n  return (<InfoModalBase title={<>More Features</>}>\n    <div css={css(styles.featureSets)} >\n      <Grid gridDefinition={[\n        { colspan: { default: 12, xxs: 4 } },\n        { colspan: { default: 12, xxs: 4 } },\n        { colspan: { default: 12, xxs: 4 } },\n      ]}>\n        <div css={[css(styles.featureSet), css(styles.contentBaseText)]}>\n          <div><svg focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"LaptopIcon\" fill='#d1d5db'>\n            <path d=\"M20 18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z\"></path>\n          </svg></div>\n          <div><span css={css(styles.contentHighlight)}>Data persisted only client-side</span> within the browser</div>\n        </div>\n        <div css={[css(styles.featureSet), css(styles.contentBaseText)]}>\n          <div><svg focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"CloudDownloadIcon\" fill='#d1d5db'>\n            <path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z\"></path>\n          </svg></div>\n          <div><span css={css(styles.contentHighlight)}>Import/export capabilities</span> to enable persistent storage and sharing</div>\n        </div>\n        <div css={[css(styles.featureSet), css(styles.contentBaseText)]}>\n          <div><svg focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"AppsIcon\" fill='#d1d5db'>\n            <path d=\"M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z\"></path>\n          </svg></div>\n          <div><span css={css(styles.contentHighlight)}>Workspace separation</span> to cater for multiple solution requirements</div>\n        </div>\n      </Grid>\n    </div>\n  </InfoModalBase >);\n};\n\nexport default InfoModalMoreFeatures;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Container from '@cloudscape-design/components/container';\nimport Header from '@cloudscape-design/components/header';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport React, { FC, PropsWithChildren } from 'react';\nimport styles from './styles';\n\nexport interface EditorLayoutProps {\n  title: string;\n  description: string;\n  secondaryControl?: React.ReactNode;\n}\n\nconst EditorLayout: FC<PropsWithChildren<EditorLayoutProps>> = ({\n  title,\n  description,\n  children,\n  secondaryControl,\n}) => {\n  return (<Container\n    header={<Header description={description}>{title}</Header>}\n    footer={secondaryControl}\n  >\n    <div css={styles.container}>\n      <SpaceBetween direction='vertical' size='m'>\n        {children}\n      </SpaceBetween>\n    </div>\n  </Container>);\n};\n\nexport default EditorLayout;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport const THREAT_STATUS_IDENTIFIED = 'threatIdentified';\nexport const THREAT_STATUS_RESOLVED = 'threatResolved';\nexport const THREAT_STATUS_NOT_USEFUL = 'threatResolvedNotUseful';\nexport const DEFAULT_THREAT_STATUS = THREAT_STATUS_IDENTIFIED;\n\nexport const MITIGATION_STATUS_IDENTIFIED = 'mitigationIdentified';\nexport const MITIGATION_STATUS_IN_PROGRESS = 'mitigationInProgress';\nexport const MITIGATION_STATUS_RESOLVED = 'mitigationResolved';\nexport const MITIGATION_STATUS_RESOLVED_WILLNOTACTION = 'mitigationResolvedWillNotAction';\nexport const DEFAULT_MITIGATION_STATUS = MITIGATION_STATUS_IDENTIFIED;\n\nexport const STATUS_NOT_SET = 'NoSet';\n\nexport const MITIGATION_STATUS_COLOR_MAPPING: any = {\n  mitigationIdentified: 'grey',\n  mitigationInProgress: 'blue',\n  mitigationResolved: 'green',\n  mitigationResolvedWillNotAction: 'red',\n  NotSet: 'grey',\n};\n\nexport const THREAT_STATUS_COLOR_MAPPING: any = {\n  threatIdentified: 'grey',\n  threatResolvedNotUseful: 'blue',\n  threatResolved: 'green',\n  NotSet: 'grey',\n};\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback } from 'react';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { LOCAL_STORAGE_KEY_ASSUMPTION_LIST } from '../../../../configs/localStorageKeys';\nimport { Assumption } from '../../../../customTypes';\nimport removeLocalStorageKey from '../../../../utils/removeLocalStorageKey';\nimport { AssumptionsContext } from '../../context';\nimport { AssumptionsContextProviderProps } from '../../types';\nimport useAssumptions from '../../useAssumptions';\n\nexport const getLocalStorageKey = (workspaceId: string | null) => {\n  if (workspaceId) {\n    return `${LOCAL_STORAGE_KEY_ASSUMPTION_LIST}_${workspaceId}`;\n  }\n\n  return LOCAL_STORAGE_KEY_ASSUMPTION_LIST;\n};\n\nconst AssumptionsLocalStorageContextProvider: FC<PropsWithChildren<AssumptionsContextProviderProps>> = ({\n  children,\n  workspaceId: currentWorkspaceId,\n}) => {\n  const [assumptionList, setAssumptionList, { removeItem }] = useLocalStorageState<Assumption[]>(getLocalStorageKey(currentWorkspaceId), {\n    defaultValue: [],\n  });\n\n  const {\n    handleSaveAssumption,\n    handlRemoveAssumption,\n  } = useAssumptions(assumptionList, setAssumptionList);\n\n  const handleRemoveAllAssumptions = useCallback(async () => {\n    removeItem();\n  }, [removeItem]);\n\n  const handleDeleteWorkspace = useCallback(async (workspaceId: string) => {\n    window.setTimeout(() => {\n      // to delete after the workspace is switched. Otherwise the default value is set again.\n      removeLocalStorageKey(getLocalStorageKey(workspaceId));\n    }, 1000);\n  }, []);\n\n  return (<AssumptionsContext.Provider value={{\n    assumptionList,\n    setAssumptionList,\n    removeAssumption: handlRemoveAssumption,\n    saveAssumption: handleSaveAssumption,\n    removeAllAssumptions: handleRemoveAllAssumptions,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </AssumptionsContext.Provider>);\n};\n\nexport default AssumptionsLocalStorageContextProvider;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport { default as ThreatStatementEditor } from './threats/ThreatStatementEditor';\nexport { default as ThreatStatementList } from './threats/ThreatStatementList';\nexport { default as ApplicationInfoComponent } from './application/ApplicationInfo';\nexport { default as ArchitectureInfoComponent } from './architecture/ArchitectureInfo';\nexport { default as DataflowInfoComponent } from './dataflow/DataflowInfo';\nexport { default as AssumptionList } from './assumptions/AssumptionList';\nexport { default as MitigationList } from './mitigations/MitigationList';\nexport { default as WorkspaceSelector } from './workspaces/WorkspaceSelector';\nexport { default as ThreatModel } from './report/ThreatModel';\nexport { default as ThreatModelView } from './report/ThreatModel/components/ThreatModelView';\nexport { default as WorkspaceHome } from './workspaces/WorkspaceHome';\nexport { default as ThreatPacksComponent } from './workspaces/ThreatPacks';\nexport { default as ThreatPackComponent } from './workspaces/ThreatPack';\nexport { default as MitigationPacksComponent } from './workspaces/MitigationPacks';\nexport { default as MitigationPackComponent } from './workspaces/MitigationPack';\nexport { default as ThemeProvider } from './generic/ThemeProvider';\nexport { default as MarkdownEditor, MarkdownEditorProps } from './generic/MarkdownEditor';\nexport { default as Loading } from './generic/Loading';\nexport { default as GroupableItemCard } from './generic/GroupableItemCard';\nexport { default as Modal } from './generic/Modal';\nexport * from './generic/ThemeProvider';\nexport * from './brainstorm';\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC } from 'react';\nimport useImportExport from '../../../hooks/useExportImport';\nimport hasContent from '../../../utils/hasContent';\nimport LandingPage, { LandingPageProps } from '../LandingPage';\nimport WorkspaceInsight, { WorkspaceInsightsProps } from '../WorkspaceInsights';\n\nconst WorkspaceHome: FC<WorkspaceInsightsProps & LandingPageProps> = (props) => {\n  const { getWorkspaceData } = useImportExport();\n  const [hasContentSum] = hasContent(getWorkspaceData());\n  return hasContentSum ? <WorkspaceInsight {...props} /> : <LandingPage {...props} />;\n};\n\nexport default WorkspaceHome;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport type EventHandler = (e: CustomEvent) => void;\n\nclass EventController {\n  private readonly eventStore: {\n    [key: string]: EventHandler[];\n  };\n\n  constructor() {\n    this.eventStore = {};\n  }\n\n  addEventListener(eventName: string, eventHandler: EventHandler) {\n    if (!this.eventStore[eventName]) {\n      this.eventStore[eventName] = [];\n    }\n\n    this.eventStore[eventName].push(eventHandler);\n  }\n\n  dispatchEvent(event: CustomEvent) {\n    if (this.eventStore[event.type]) {\n      this.eventStore[event.type].forEach(x => {\n        x(event);\n      });\n    }\n  }\n}\n\nexport default EventController;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback } from 'react';\nimport { DataExchangeFormat } from '../../../../customTypes';\nimport setLocalStorageKey from '../../../../utils/setLocalStorageKey';\nimport { getLocalStorageKey as getApplicationInfoLocalStorageKey } from '../../../ApplicationContext/components/LocalStorageContextProvider';\nimport { getLocalStorageKey as getArchitectureInfoLocalStorageKey } from '../../../ArchitectureContext/components/LocalStorageContextProvider';\nimport { getLocalStorageKey as getAssumptionLinksLocalStorageKey } from '../../../AssumptionLinksContext/components/LocalStorageContextProvider';\nimport { getLocalStorageKey as getAssumptionsListLocalStorageKey } from '../../../AssumptionsContext/components/LocalStorageContextProvider';\nimport { getLocalStorageKey as getDataflowInfoLocalStorageKey } from '../../../DataflowContext/components/LocalStorageContextProvider';\nimport { getLocalStorageKey as getMitigationLinksLocalStorageKey } from '../../../MitigationLinksContext/components/LocalStorageContextProvider';\nimport { getLocalStorageKey as getMitigationsLocalStorageKey } from '../../../MitigationsContext/components/LocalStorageContextProvider';\nimport { getLocalStorageKey as getThreatsLocalStorageKey } from '../../../ThreatsContext/components/LocalStorageContextProvider';\nimport { CrossWorkspaceContext } from '../../context';\n\n\nconst CrossWorkspaceLocalStorageContextProvider: FC<PropsWithChildren<{}>> = ({\n  children,\n}) => {\n  const handleCloneWorkspaceData = useCallback(async (targetWorkspaceId: string, data: DataExchangeFormat) => {\n    data.applicationInfo && setLocalStorageKey(getApplicationInfoLocalStorageKey(targetWorkspaceId), data.applicationInfo);\n    data.architecture && setLocalStorageKey(getArchitectureInfoLocalStorageKey(targetWorkspaceId), data.architecture);\n    data.dataflow && setLocalStorageKey(getDataflowInfoLocalStorageKey(targetWorkspaceId), data.dataflow);\n    data.assumptions && setLocalStorageKey(getAssumptionsListLocalStorageKey(targetWorkspaceId), data.assumptions);\n    data.threats && setLocalStorageKey(getThreatsLocalStorageKey(targetWorkspaceId), data.threats);\n    data.mitigations && setLocalStorageKey(getMitigationsLocalStorageKey(targetWorkspaceId), data.mitigations);\n    data.assumptionLinks && setLocalStorageKey(getAssumptionLinksLocalStorageKey(targetWorkspaceId), data.assumptionLinks);\n    data.mitigationLinks && setLocalStorageKey(getMitigationLinksLocalStorageKey(targetWorkspaceId), data.mitigationLinks);\n  }, []);\n\n  return (<CrossWorkspaceContext.Provider value={{\n    cloneWorkspaceData: handleCloneWorkspaceData,\n  }}>\n    {children}\n  </CrossWorkspaceContext.Provider>);\n};\n\nexport default CrossWorkspaceLocalStorageContextProvider;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport { FC, PropsWithChildren } from 'react';\nimport Tooltip from '../../../../generic/Tooltip';\n\nexport interface TokenProps {\n  onClick: () => void;\n  highlighted?: boolean;\n  filled?: boolean;\n  tooltip?: string;\n}\n\nconst Token: FC<PropsWithChildren<TokenProps>> = ({\n  children,\n  onClick,\n  highlighted,\n  filled,\n  tooltip,\n}) => {\n  const bgColor = highlighted ?\n    awsui.colorBackgroundToggleCheckedDisabled :\n    (filled ? awsui.colorBackgroundItemSelected : awsui.colorBackgroundButtonPrimaryDisabled);\n\n  return (<Tooltip tooltip={tooltip}>\n    <button\n      css={css`\n        text-align: left;\n        text-decoration: none;\n        border-spacing: 0;\n        border-collapse: separate;\n        border: 1px solid;\n        border-radius: ${awsui.borderRadiusBadge};\n        height: fit-content !important;\n        padding: ${awsui.spaceScaledXxs};\n        color: ${awsui.colorTextBodyDefault};\n        background-color: ${bgColor};\n      `} onClick={onClick}>\n      <span>{children}</span>\n    </button>\n  </Tooltip>\n  );\n};\n\nexport default Token;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, useState } from 'react';\nimport { Workspace } from '../../../../customTypes';\nimport { useWorkspaceExamplesContext } from '../../../WorkspaceExamplesContext';\nimport { WorkspacesContext } from '../../context';\nimport { WorkspacesContextProviderProps } from '../../types';\nimport useCurrentWorkspace from '../../useCurrentWorkspace';\nimport useWorkspaces from '../../useWorkspaces';\n\nconst WorkspacesLocalStateContextProvider: FC<WorkspacesContextProviderProps> = ({\n  children,\n  workspaceName,\n  onWorkspaceChanged,\n  ...props\n}) => {\n  const { workspaceExamples } = useWorkspaceExamplesContext();\n\n  const [workspaceList, setWorkspaceList] = useState<Workspace[]>([]);\n\n  const [lastWorkspace, setCurrentWorkspace] = useState<Workspace | null>(null);\n\n  const currentWorkspace = useCurrentWorkspace(lastWorkspace, workspaceName, workspaceList, workspaceExamples, onWorkspaceChanged);\n\n  const {\n    handleSwitchWorkspace,\n    handleAddWorkspace,\n    handleRemoveWorkspace,\n    handleRenameWorkspace,\n  } = useWorkspaces(workspaceList, setWorkspaceList, currentWorkspace, setCurrentWorkspace, onWorkspaceChanged);\n\n  return (<WorkspacesContext.Provider value={{\n    workspaceList,\n    setWorkspaceList,\n    currentWorkspace,\n    switchWorkspace: handleSwitchWorkspace,\n    addWorkspace: handleAddWorkspace,\n    removeWorkspace: handleRemoveWorkspace,\n    renameWorkspace: handleRenameWorkspace,\n    ...props,\n  }}>\n    {children(currentWorkspace?.id || null)}\n  </WorkspacesContext.Provider>);\n};\n\nexport default WorkspacesLocalStateContextProvider;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC } from 'react';\nimport { useArchitectureInfoContext } from '../../../contexts/ArchitectureContext/context';\nimport { ArchitectureInfoSchema, EditableComponentBaseProps } from '../../../customTypes';\nimport BaseDiagramInfo from '../../generic/BaseDiagramInfo';\n\nconst ArchitectureInfo: FC<EditableComponentBaseProps> = (props) => {\n  const { architectureInfo, setArchitectureInfo } = useArchitectureInfoContext();\n  return (\n    <BaseDiagramInfo\n      {...props}\n      headerTitle='Architecture'\n      diagramTitle='Architecture Diagram'\n      entity={architectureInfo}\n      onConfirm={(diagram) => setArchitectureInfo(diagram)}\n      validateData={ArchitectureInfoSchema.shape.description.safeParse}\n    />);\n};\n\nexport default ArchitectureInfo;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { DataExchangeFormat } from '../../../../customTypes';\n\nexport const getDataflowContent = async (\n  data: DataExchangeFormat,\n) => {\n  const rows: string[] = [];\n  rows.push('## Dataflow');\n  if (data.dataflow) {\n    if (data.dataflow.description) {\n      rows.push('### Introduction');\n      rows.push(data.dataflow.description);\n    }\n\n    if (data.dataflow.image) {\n      rows.push('### Dataflow Diagram');\n      rows.push(`![Dataflow Diagram](${data.dataflow.image})`);\n    }\n  }\n\n  rows.push('\\n');\n\n  return rows.join('\\n');\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useContext, createContext } from 'react';\nimport { DataExchangeFormat } from '../../customTypes';\n\nexport interface CrossWorkspaceContextApi {\n  cloneWorkspaceData: (targetWorkspaceId: string, data: DataExchangeFormat) => Promise<void>;\n}\n\nconst initialState: CrossWorkspaceContextApi = {\n  cloneWorkspaceData: () => Promise.resolve(),\n};\n\nexport const CrossWorkspaceContext = createContext<CrossWorkspaceContextApi>(initialState);\n\nexport const useCrossWorkspaceContext = () => useContext(CrossWorkspaceContext);","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, useEffect, useState, useCallback } from 'react';\nimport { DEFAULT_NEW_ENTITY_ID } from '../../../configs';\nimport { useAssumptionLinksContext } from '../../../contexts/AssumptionLinksContext/context';\nimport { useAssumptionsContext } from '../../../contexts/AssumptionsContext/context';\nimport { AssumptionLink } from '../../../customTypes';\nimport AssumptionLinkView from '../AssumptionLinkView';\n\nexport interface AssumptionLinkProps {\n  linkedEntityId: string;\n  type: AssumptionLink['type'];\n}\n\nconst AssumptionLinkComponent: FC<AssumptionLinkProps> = ({\n  linkedEntityId,\n  type,\n}) => {\n  const { assumptionList, saveAssumption } = useAssumptionsContext();\n  const [assumptionLinks, setAssumptionLinks] = useState<AssumptionLink[]>([]);\n\n  const { getLinkedAssumptionLinks } = useAssumptionLinksContext();\n\n  useEffect(() => {\n    const _assumptionLinks = getLinkedAssumptionLinks(linkedEntityId);\n    setAssumptionLinks(_assumptionLinks || []);\n  }, [getLinkedAssumptionLinks, linkedEntityId]);\n\n  const {\n    addAssumptionLink,\n    removeAssumptionLink,\n  } = useAssumptionLinksContext();\n\n  const handleAddAssumptionLink = useCallback((assumptionIdOrNewAssumption: string) => {\n    if (assumptionList.find(a => a.id === assumptionIdOrNewAssumption)) {\n      addAssumptionLink({\n        type,\n        linkedId: linkedEntityId,\n        assumptionId: assumptionIdOrNewAssumption,\n      });\n    } else {\n      const newAssumption = saveAssumption({\n        numericId: -1,\n        content: assumptionIdOrNewAssumption,\n        id: DEFAULT_NEW_ENTITY_ID,\n      });\n      addAssumptionLink({\n        type,\n        linkedId: linkedEntityId,\n        assumptionId: newAssumption.id,\n      });\n    }\n  }, [assumptionList, linkedEntityId, addAssumptionLink, saveAssumption]);\n\n  return (<AssumptionLinkView\n    assumptionList={assumptionList}\n    linkedAssumptionIds={assumptionLinks.map(al => al.assumptionId) || []}\n    onAddAssumptionLink={handleAddAssumptionLink}\n    onRemoveAssumptionLink={(assumptionId) => removeAssumptionLink(assumptionId, linkedEntityId)}\n  />);\n};\n\nexport default AssumptionLinkComponent;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { SelectProps } from '@cloudscape-design/components/select';\nimport React, { FC, useMemo } from 'react';\nimport { TemplateThreatStatement } from '../../../customTypes';\nimport LevelSelector from '../../generic/LevelSelector';\n\nexport interface PriorityEditProps {\n  showLabel?: boolean;\n  editingStatement: TemplateThreatStatement;\n  onEditMetadata: (statement: TemplateThreatStatement, key: string, value: string | string[] | undefined) => void;\n  onFocus?: () => void;\n  onBlur?: () => void;\n  ref?: React.LegacyRef<any>;\n}\n\nconst PriorityEdit: FC<PriorityEditProps> = React.forwardRef<SelectProps.Ref, PriorityEditProps>(({\n  editingStatement,\n  onEditMetadata,\n  showLabel = true,\n  ...props\n}, ref) => {\n  const priority = useMemo(() => {\n    return (editingStatement.metadata?.find(m => m.key === 'Priority')?.value as string) || undefined;\n  }, [editingStatement.metadata]);\n\n  return (\n    <LevelSelector\n      ref={ref}\n      {...props}\n      allowNoValue\n      placeholder='Select Priority'\n      label={showLabel ? 'Priority' : undefined}\n      selectedLevel={priority}\n      setSelectedLevel={(selectedLevel) => onEditMetadata(editingStatement, 'Priority', selectedLevel)}\n    />\n  );\n});;\n\nexport default PriorityEdit;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC } from 'react';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { LOCAL_STORAGE_KEY_CURRENT_WORKSPACE, LOCAL_STORAGE_KEY_WORKSPACE_LIST } from '../../../../configs/localStorageKeys';\nimport { Workspace } from '../../../../customTypes';\nimport WorkspacesMigration from '../../../../migrations/WorkspacesMigration';\nimport { useWorkspaceExamplesContext } from '../../../WorkspaceExamplesContext';\nimport { WorkspacesContext } from '../../context';\nimport { WorkspacesContextProviderProps } from '../../types';\nimport useCurrentWorkspace from '../../useCurrentWorkspace';\nimport useWorkspaces from '../../useWorkspaces';\n\nconst WorkspacesLocalStorageContextProvider: FC<WorkspacesContextProviderProps> = ({\n  children,\n  workspaceName,\n  onWorkspaceChanged,\n  ...props\n}) => {\n  const [workspaceList, setWorkspaceList] = useLocalStorageState<Workspace[]>(LOCAL_STORAGE_KEY_WORKSPACE_LIST, {\n    defaultValue: [],\n  });\n\n  const [lastWorkspace, setCurrentWorkspace] = useLocalStorageState<Workspace | null>(LOCAL_STORAGE_KEY_CURRENT_WORKSPACE, {\n    defaultValue: null,\n  });\n\n  const { workspaceExamples } = useWorkspaceExamplesContext();\n\n  const currentWorkspace = useCurrentWorkspace(lastWorkspace, workspaceName, workspaceList, workspaceExamples, onWorkspaceChanged);\n\n  const {\n    handleSwitchWorkspace,\n    handleAddWorkspace,\n    handleRemoveWorkspace,\n    handleRenameWorkspace,\n  } = useWorkspaces(workspaceList, setWorkspaceList, currentWorkspace, setCurrentWorkspace, onWorkspaceChanged);\n\n  return (<WorkspacesContext.Provider value={{\n    workspaceList,\n    setWorkspaceList,\n    currentWorkspace,\n    switchWorkspace: handleSwitchWorkspace,\n    addWorkspace: handleAddWorkspace,\n    removeWorkspace: handleRemoveWorkspace,\n    renameWorkspace: handleRenameWorkspace,\n    ...props,\n  }}>\n    <WorkspacesMigration>\n      {children(currentWorkspace?.id || null)}\n    </WorkspacesMigration>\n  </WorkspacesContext.Provider>);\n};\n\nexport default WorkspacesLocalStorageContextProvider;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport { FC, PropsWithChildren, useEffect } from 'react';\n\nconst styles = {\n  main: css({\n    position: 'fixed',\n    top: '0',\n    left: '0',\n    width: '100vw !important',\n    height: '100vh',\n    background: 'rgba(0, 0, 0, 0.6)',\n    display: 'flex',\n    transition: 'opacity 0.2s linear',\n  }),\n  mainInactive: css({\n    opacity: '0',\n    zIndex: '-9999',\n  }),\n  mainActive: css({\n    opacity: '1',\n    zIndex: '1299',\n  }),\n  contentContainer: css({\n    'maxWidth': '800px',\n    'width': '100%',\n    'margin': 'auto',\n    'position': 'relative',\n    'borderRadius': '10px',\n    'background': 'rgba(0, 0, 0, 0.75)',\n    '@media screen and (max-width: 800px), screen and (max-height: 640px)': {\n      borderRadius: '0px',\n      width: '100%',\n      height: '100%',\n    },\n  }),\n  contentMain: css({\n    position: 'relative',\n    margin: awsui.spaceScaledL,\n    height: '100%',\n    maxHeight: 'calc(100vh - 40px)',\n  }),\n  closeButton: css({\n    'position': 'absolute',\n    'top': awsui.spaceScaledM,\n    'right': awsui.spaceScaledM,\n    'color': '#5f6b7a !important',\n    'zIndex': '1299',\n    '&:hover': {\n      color: '#9ba7b6 !important',\n    },\n  }),\n};\n\nexport interface ModalProps {\n  visible?: boolean;\n  onDismiss?: () => void;\n}\n\n/** A modal is a pop-up dialog that can be used to prompt a user for confirmation. */\nconst Modal: FC<PropsWithChildren<ModalProps>> = ({\n  visible = false,\n  children,\n  onDismiss,\n}) => {\n  useEffect(() => {\n    const handleKeyDown = (event: any) => {\n      event.key === 'Escape' && onDismiss?.();\n    };\n\n    document.addEventListener('keydown', handleKeyDown, false);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown, false);\n    };\n  }, [onDismiss]);\n\n  return (\n    <div css={visible ? [styles.main, styles.mainActive] : [styles.main, styles.mainInactive]}>\n      <div css={styles.contentContainer}>\n        <div css={styles.closeButton}>\n          <Button variant='icon' iconName='close' onClick={onDismiss} />\n        </div>\n        <div css={styles.contentMain}>\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Modal;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useCallback } from 'react';\nimport { AssumptionLink } from '../../customTypes';\n\nexport const isSameAssumptionLink = (entity1: AssumptionLink, entity2: AssumptionLink) => {\n  return entity1.assumptionId === entity2.assumptionId\n    && entity1.linkedId === entity2.linkedId\n    && entity1.type === entity2.type;\n};\n\nconst useAssumptionLinks = (\n  assumptionLinkList: AssumptionLink[],\n  setAssumptionLinkList: React.Dispatch<React.SetStateAction<AssumptionLink[]>>,\n) => {\n  const handlRemoveAssumptionLink = useCallback((assumptionId: string, linkedEntityId: string) => {\n    setAssumptionLinkList((prevList) => prevList.filter(x =>\n      !(x.linkedId === linkedEntityId && x.assumptionId === assumptionId),\n    ));\n  }, [setAssumptionLinkList]);\n\n  const handleRemoveAssumptionLinks = useCallback((assumptionLinks: AssumptionLink[]) => {\n    setAssumptionLinkList((prevList) => {\n      return prevList.filter(pl =>\n        assumptionLinks.findIndex(al => isSameAssumptionLink(al, pl)) < 0);\n    });\n  }, [setAssumptionLinkList]);\n\n  const handlRemoveAssumptionLinksByAssumptionId = useCallback(async (assumptionId: string) => {\n    setAssumptionLinkList((prevList) => prevList.filter(x =>\n      !(x.assumptionId === assumptionId),\n    ));\n  }, [setAssumptionLinkList]);\n\n  const handlRemoveAssumptionLinksByLinkedEntityId = useCallback(async (linkedEntityId: string) => {\n    setAssumptionLinkList((prevList) => prevList.filter(x =>\n      !(x.linkedId === linkedEntityId),\n    ));\n  }, [setAssumptionLinkList]);\n\n  const handleAddAssumptionLink = useCallback((assumptionLink: AssumptionLink) => {\n    setAssumptionLinkList((prevList) => {\n      const foundIndex = prevList.findIndex(st =>\n        st.assumptionId === assumptionLink.assumptionId &&\n        st.linkedId === assumptionLink.linkedId &&\n        st.type === assumptionLink.type,\n      );\n      if (foundIndex < 0) {\n        return [...prevList, assumptionLink];\n      };\n\n      return [...prevList];\n    });\n  }, [setAssumptionLinkList]);\n\n  const handleAddAssumptionLinks = useCallback((assumptionLinks: AssumptionLink[]) => {\n    setAssumptionLinkList((prevList) => {\n      const filteredLinks = assumptionLinks.filter(al =>\n        prevList.findIndex(pl => isSameAssumptionLink(al, pl)) < 0);\n      return [...prevList, ...filteredLinks];\n    });\n  }, [setAssumptionLinkList]);\n\n  const handleGetLinkedAssumptionLinks = useCallback((linkedEntityId: string) => {\n    return assumptionLinkList.filter(x => x.linkedId === linkedEntityId);\n  }, [assumptionLinkList]);\n\n  const handleGetAssumptionEntityLinks = useCallback((assumptionId: string, type: AssumptionLink['type']) => {\n    return assumptionLinkList.filter(x => x.assumptionId === assumptionId && x.type === type);\n  }, [assumptionLinkList]);\n\n  return {\n    handlRemoveAssumptionLink,\n    handleRemoveAssumptionLinks,\n    handlRemoveAssumptionLinksByAssumptionId,\n    handlRemoveAssumptionLinksByLinkedEntityId,\n    handleAddAssumptionLink,\n    handleAddAssumptionLinks,\n    handleGetLinkedAssumptionLinks,\n    handleGetAssumptionEntityLinks,\n  };\n};\n\nexport default useAssumptionLinks;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nconst STRIDE = [{\n  label: 'Spoofing',\n  value: 'S',\n  violates: 'Authenticity',\n  description: 'Pretending to be something or somebody other than who you are',\n},\n{\n  label: 'Tampering',\n  value: 'T',\n  violates: 'Integrity',\n  description: 'Changing data on disk, in memory, on the network, or elsewhere',\n},\n{\n  label: 'Repudiation',\n  value: 'R',\n  violates: 'Non-repudiation',\n  description: 'Claiming that you were not responsible for an action',\n},\n{\n  label: 'Information Disclosure',\n  value: 'I',\n  violates: 'Confidentiality',\n  description: 'Obtaining information that was not intended for you (such as side-channel timing attacks, verbose error messages, or internal developer comments in public code)',\n},\n{\n  label: 'Denial of Service',\n  value: 'D',\n  violates: 'Availability',\n  description: 'Destruction or excessive consumption of finite resources (such as expensive regular expressions or lack of request throttling leading to service quotas being reached)',\n},\n{\n  label: 'Elevation of Privilege',\n  value: 'E',\n  violates: 'Authorization',\n  description: 'Performing actions on protected resources that you should not be allowed to perform',\n}];\n\nexport default STRIDE;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { DataExchangeFormat } from '../../customTypes';\n\n/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport const downloadObjectURL = (ObjectURL: any, exportName: string, fileExtension: string) => {\n  var downloadAnchorNode = document.createElement('a');\n  downloadAnchorNode.setAttribute('href', ObjectURL);\n  downloadAnchorNode.setAttribute('download', exportName + fileExtension);\n  document.body.appendChild(downloadAnchorNode);\n  downloadAnchorNode.click();\n  downloadAnchorNode.remove();\n};\n\nexport const downloadContent = (content: any, mime: string, exportName: string, fileExtension: string) => {\n  var dataStr = `data:${mime};charset=utf-8,` + encodeURIComponent(content);\n  return downloadObjectURL(dataStr, exportName, fileExtension);\n};\n\nexport const downloadObjectAsJson = (exportObj: DataExchangeFormat, exportName: string) => {\n  const content = JSON.stringify(exportObj, null, 2);\n  downloadContent(content, 'text/json', exportName, '.tc.json');\n};\n\nexport const downloadContentAsMarkdown = (content: string, exportName: string) => {\n  downloadContent(content, 'text/markdown', exportName, '.md');\n};\n\nexport const downloadContentAsWordDocx = (blob: Blob, exportName: string) => {\n  downloadObjectURL(window.URL.createObjectURL(blob), exportName, '.docx');\n};\n\nexport const downloadContentAsYaml = (content: string, exportName: string) => {\n  downloadContent(content, 'text/yaml', exportName, '.yml');\n};\n\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useContext, createContext } from 'react';\nimport { ApplicationInfo } from '../../customTypes';\n\nexport interface ApplicationInfoContextApi {\n  applicationInfo: ApplicationInfo;\n  setApplicationInfo: React.Dispatch<React.SetStateAction<ApplicationInfo>>;\n  removeApplicationInfo: () => Promise<void>;\n  onDeleteWorkspace: (workspaceId: string) => Promise<void>;\n}\n\nconst initialState: ApplicationInfoContextApi = {\n  applicationInfo: {\n    description: '',\n  },\n  setApplicationInfo: () => { },\n  removeApplicationInfo: () => Promise.resolve(),\n  onDeleteWorkspace: () => Promise.resolve(),\n};\n\nexport const ApplicationInfoContext = createContext<ApplicationInfoContextApi>(initialState);\n\nexport const useApplicationInfoContext = () => useContext(ApplicationInfoContext);","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren } from 'react';\nimport AssumptionLinksLocalStateContextProvider from './components/LocalStateContextProvider';\nimport AssumptionLinksLocalStorageContextProvider from './components/LocalStorageContextProvider';\nimport { useAssumptionLinksContext } from './context';\nimport { AssumptionLinksContextProviderProps } from './types';\nimport { STORAGE_LOCAL_STATE } from '../../configs';\nimport useWorkspaceStorage from '../../hooks/useWorkspaceStorage';\n\nconst AssumptionLinksContextProvider: FC<PropsWithChildren<AssumptionLinksContextProviderProps>> = (props) => {\n  const { storageType, value } = useWorkspaceStorage(props.workspaceId);\n\n  return storageType === STORAGE_LOCAL_STATE ?\n    (<AssumptionLinksLocalStateContextProvider\n      key={props.workspaceId}\n      initialValue={value?.assumptionLinks}\n      {...props} />)\n    : (<AssumptionLinksLocalStorageContextProvider key={props.workspaceId} {...props} />);\n};\n\nexport default AssumptionLinksContextProvider;\n\nexport {\n  useAssumptionLinksContext,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nconst intersection = (arr1: number[], arr2: number[]) => {\n  const res = [];\n  for (let i = 0; i < arr1.length; i++) {\n    if (!arr2.includes(arr1[i])) {\n      continue;\n    };\n    res.push(arr1[i]);\n  };\n  return res;\n};\n\nconst intersectArrays = (...arrs: number[][]) => {\n  let res = arrs[0].slice();\n  for (let i = 1; i < arrs.length; i++) {\n    res = intersection(res, arrs[i]);\n  };\n  return res;\n};\n\nexport default intersectArrays;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport React, { FC, PropsWithChildren } from 'react';\nimport { useMobileMediaQuery } from '../../../hooks/useMediaQuery';\n\nconst styles = {\n  tooltip: css({\n    'position': 'relative',\n    ['&:hover .tooltipText']: {\n      visibility: 'visible',\n    },\n    '& .tooltipText': {\n      visibility: 'hidden',\n      backgroundColor: 'black',\n      color: '#fff',\n      textAlign: 'center',\n      borderRadius: awsui.borderRadiusBadge,\n      padding: awsui.spaceScaledXxs,\n      position: 'absolute',\n      zIndex: '100',\n      lineHeight: '20px',\n      fontSize: '14px !important',\n      fontWeight: '500 !important',\n    },\n  }),\n  tooltipAnchor: css({\n    'width': '110px',\n    'left': '50%',\n    'marginLeft': '-56px',\n    '&.tooltipText::after': {\n      content: '\" \"',\n      position: 'absolute',\n      left: '50%',\n      marginLeft: '-5px',\n      borderWidth: '5px',\n      borderStyle: 'solid',\n      borderColor: 'black transparent transparent transparent',\n    },\n  }),\n  tooltipTop: css({\n    'bottom': '125%',\n    '&.tooltipText::after': {\n      top: '100%',\n    },\n  }),\n  tooltipBottom: css({\n    'top': '110%',\n    '&.tooltipText::after': {\n      bottom: '100%',\n    },\n  }),\n};\n\nexport interface TooltipProps {\n  tooltip: React.ReactNode;\n  anchor?: 'top' | 'bottom';\n}\n\nconst Tooltip: FC<PropsWithChildren<TooltipProps>> = ({\n  tooltip,\n  children,\n  anchor = 'top',\n}) => {\n  const isMobileView = useMobileMediaQuery();\n  return isMobileView ? <>{children}</> : (<span css={styles.tooltip}>\n    {children}\n    <span css={[styles.tooltipAnchor, anchor === 'top' ? styles.tooltipTop : styles.tooltipBottom]} className='tooltipText'>{tooltip}</span>\n  </span>);\n};\n\nexport default Tooltip;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport TextContent from '@cloudscape-design/components/text-content';\nimport { css } from '@emotion/react';\nimport { FC, ReactNode } from 'react';\nimport { TemplateThreatStatement } from '../../../customTypes';\nimport CopyToClipbord from '../../generic/CopyToClipboard';\n\nexport interface FinalStatementProps {\n  statement: TemplateThreatStatement;\n  displayStatement?: ReactNode[];\n}\n\nconst FinalStatement: FC<FinalStatementProps> = ({ statement, displayStatement }) => {\n  return (\n    <TextContent>\n      <p css={css`\n        font-size: 20px !important;\n        line-height: 1.5 !important;\n      `}\n      >\n        {(statement.statement || (displayStatement && displayStatement.length > 0)) && <CopyToClipbord content={statement.statement}>\n          {displayStatement ? displayStatement : statement.statement}\n        </CopyToClipbord>}\n      </p>\n    </TextContent>\n  );\n};\n\nexport default FinalStatement;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Icon from '@cloudscape-design/components/icon';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport { FC } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport rehypeRaw from 'rehype-raw';\nimport frontmatter from 'remark-frontmatter';\nimport gfm from 'remark-gfm';\n\nconst externalPattern = /^((https?):\\/\\/)/;\n\nexport interface MarkdownViewerProps {\n  children: string;\n  allowHtml?: boolean;\n}\n\nconst styles = css({\n  '@media print': {\n    color: 'black !important',\n  },\n\n  '& img': {\n    maxWidth: '1024px',\n    width: '100%',\n  },\n\n  '& h1': {\n    marginTop: `${awsui.spaceScaledS} !important`,\n    marginBottom: `${awsui.spaceScaledS} !important`,\n  },\n\n  '& h2': {\n    marginTop: `${awsui.spaceScaledL} !important`,\n    marginBottom: `${awsui.spaceScaledS} !important`,\n  },\n\n  '& h3': {\n    marginTop: `${awsui.spaceScaledS} !important`,\n    marginBottom: `${awsui.spaceScaledS} !important`,\n  },\n\n  '& h4': {\n    marginTop: `${awsui.spaceScaledS} !important`,\n    marginBottom: `${awsui.spaceScaledS} !important`,\n  },\n\n  '& table': {\n    borderCollapse: 'collapse',\n  },\n\n  '& tr': {\n    borderTop: `1px solid ${awsui.colorChartsLineGrid}`,\n  },\n\n  '& th': {\n    padding: '6px 13px',\n    border: `1px solid ${awsui.colorChartsLineGrid}`,\n  },\n\n  '& td': {\n    padding: '6px 13px',\n    border: `1px solid ${awsui.colorChartsLineGrid}`,\n  },\n\n  'table tr:nth-of-type(2n)': {\n    background: awsui.colorBackgroundCellShaded,\n  },\n});\n\nconst components = {\n  a: (props: any) => {\n    if (props.href) {\n      const isExternal = externalPattern.test(props.href);\n\n      if (isExternal) {\n        return <a href={props.href} target='_blank' rel=\"noreferrer noopener\">{props.children}{' '}<Icon name=\"external\"/></a>;\n      }\n\n      return <a href={props.href}>{props.children}</a>;\n    }\n\n    if (props.name) {\n      // @ts-ignore\n      return <a name={props.name}>{props.children}</a>;\n    }\n\n    return <>{props.children}</>;\n  },\n};\n\n/**\n * MarkdownViewer renders content with Markdown format.\n */\nconst MarkdownViewer: FC<MarkdownViewerProps> = ({\n  allowHtml = false,\n  children,\n  ...props\n}) => {\n  return (\n    <div css={styles}>\n      <TextContent {...props}>\n        <ReactMarkdown remarkPlugins={[gfm, frontmatter]} rehypePlugins={allowHtml ? [rehypeRaw] : []} components={components} children={children} />\n      </TextContent>\n    </div>\n  );\n};\n\nexport default MarkdownViewer;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Autosuggest from '@cloudscape-design/components/autosuggest';\nimport ExpandableSection from '@cloudscape-design/components/expandable-section';\nimport TokenGroup from '@cloudscape-design/components/token-group';\nimport React, { FC, useMemo } from 'react';\nimport { TemplateThreatStatement } from '../../../customTypes';\n\nexport interface ThreatLinkProps {\n  linkedThreatIds: string[];\n  threatList: TemplateThreatStatement[];\n  onAddThreatLink: (threatId: string) => void;\n  onRemoveThreatLink: (threatId: string) => void;\n}\n\nconst ThreatLinkComponent: FC<ThreatLinkProps> = ({\n  linkedThreatIds,\n  threatList,\n  onAddThreatLink,\n  onRemoveThreatLink,\n}) => {\n  const [searchValue, setSearchValue] = React.useState('');\n\n  const linkedThreats = useMemo(() => {\n    return threatList.filter(al => linkedThreatIds.includes(al.id));\n  }, [linkedThreatIds, threatList]);\n\n  const filteredThreats = useMemo(() => {\n    const threats = threatList.filter(x => !linkedThreatIds.includes(x.id));\n    if (!searchValue) {\n      return threats;\n    }\n\n    return threats.filter(x => x.statement && x.statement.toLowerCase().indexOf(searchValue.toLowerCase()) >= 0);\n  }, [searchValue, threatList, linkedThreatIds]);\n\n  return (<ExpandableSection headerText={`Linked threats (${linkedThreats.length})`}>\n    <Autosuggest\n      onChange={({ detail }) => setSearchValue(detail.value)}\n      value={searchValue}\n      options={filteredThreats.map(x => ({\n        value: x.id,\n        label: x.statement,\n      }))}\n      onSelect={({ detail }) => {\n        onAddThreatLink(detail.value);\n        setSearchValue('');\n      }}\n      filteringType='manual'\n      enteredTextLabel={value => `Use: \"${value}\"`}\n      placeholder=\"Search threat\"\n      empty=\"No matches found\"\n    />\n    <div\n      style={{\n        display: 'flex',\n      }}\n    >\n      <TokenGroup\n        items={\n          linkedThreats.map(x => ({\n            label: x.statement,\n            dismissLabel: `Unlink threat ${x.numericId}`,\n          }))\n        }\n        onDismiss={({ detail: { itemIndex } }) => {\n          onRemoveThreatLink(linkedThreats[itemIndex].id);\n        }}\n      />\n    </div>\n  </ExpandableSection>);\n};\n\nexport default ThreatLinkComponent;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport {\n  Button,\n  Box,\n  ColumnLayout,\n} from '@cloudscape-design/components';\nimport PieChart from '@cloudscape-design/components/pie-chart';\nimport {\n  colorChartsStatusInfo,\n  colorChartsStatusPositive,\n  colorChartsStatusHigh,\n  colorChartsStatusNeutral,\n  colorChartsStatusLow,\n} from '@cloudscape-design/design-tokens';\nimport { useMemo, useCallback, FC } from 'react';\nimport {\n  MITIGATION_STATUS_IDENTIFIED,\n  MITIGATION_STATUS_IN_PROGRESS,\n  MITIGATION_STATUS_RESOLVED,\n  MITIGATION_STATUS_RESOLVED_WILLNOTACTION,\n  STATUS_NOT_SET,\n} from '../../../../../configs';\nimport { useMitigationsContext } from '../../../../../contexts/MitigationsContext';\nimport { mitigationStatus } from '../../../../../data';\nimport DashboardNumber from '../../../../generic/DashboardNumber';\nimport useMitigationListLinkClicked from '../../hooks/useMitigationListLinkClicked';\nimport { WorkspaceInsightsProps } from '../../types';\n\nconst MitigationStatus: FC<WorkspaceInsightsProps> = ({\n  onMitigationListView,\n}) => {\n  const { mitigationList } = useMitigationsContext();\n\n  const handleLinkClicked = useMitigationListLinkClicked(onMitigationListView);\n\n  const countNotSet = useMemo(() => mitigationList.filter(x => !x.status).length,\n    [mitigationList],\n  );\n\n  const countIdentified = useMemo(\n    () => mitigationList.filter(x => x.status === MITIGATION_STATUS_IDENTIFIED).length,\n    [mitigationList],\n  );\n\n  const countResolved = useMemo(\n    () => mitigationList.filter(x => x.status === MITIGATION_STATUS_RESOLVED).length,\n    [mitigationList],\n  );\n\n  const countInProgress = useMemo(\n    () => mitigationList.filter(x => x.status === MITIGATION_STATUS_IN_PROGRESS).length,\n    [mitigationList],\n  );\n\n  const countWillNotAction = useMemo(\n    () => mitigationList.filter(x => x.status === MITIGATION_STATUS_RESOLVED_WILLNOTACTION).length,\n    [mitigationList],\n  );\n\n  const handleAddMitigation = useCallback(() => {\n    onMitigationListView?.();\n  }, [mitigationList, onMitigationListView]);\n\n  return (\n    <ColumnLayout columns={1} borders=\"horizontal\">\n      {!mitigationList.length ? (\n        <Box\n          margin=\"xxl\"\n          padding=\"xxl\"\n          color=\"text-body-secondary\"\n          textAlign=\"center\"\n        >\n          <b>No mitigations available</b>\n          <Box variant=\"p\" color=\"text-body-secondary\">\n            Start by adding a mitigation to this workspace\n          </Box>\n          <Button variant=\"primary\" onClick={() => handleAddMitigation()}>Add a mitigation</Button>\n        </Box>\n      ) : (\n        <Box padding=\"s\">\n          <PieChart\n            data={[\n              {\n                title: mitigationStatus.find(x => x.value === MITIGATION_STATUS_RESOLVED)?.label || 'Resolved',\n                value: countResolved,\n                color: colorChartsStatusPositive,\n              },\n              {\n                title: mitigationStatus.find(x => x.value === MITIGATION_STATUS_RESOLVED_WILLNOTACTION)?.label || 'Will not action',\n                value: countWillNotAction,\n                color: colorChartsStatusLow,\n              },\n              {\n                title: mitigationStatus.find(x => x.value === MITIGATION_STATUS_IN_PROGRESS)?.label || 'In-progress',\n                value: countInProgress,\n                color: colorChartsStatusInfo,\n              },\n              {\n                title: mitigationStatus.find(x => x.value === MITIGATION_STATUS_IDENTIFIED)?.label || 'Identified',\n                value: countIdentified,\n                color: colorChartsStatusNeutral,\n              },\n              {\n                title: 'Not Set',\n                value: countNotSet,\n                color: colorChartsStatusHigh,\n              },\n            ]}\n            detailPopoverContent={(datum, sum) => [\n              { key: 'Mitigation count', value: datum.value },\n              {\n                key: 'Percentage',\n                value: `${((datum.value / sum) * 100).toFixed(0)}%`,\n              },\n            ]}\n            segmentDescription={(datum, sum) =>\n              `${datum.value} mitigations, ${((datum.value / sum) * 100).toFixed(0)}%`\n            }\n            ariaDescription=\"Pie chart showing the status of mitigations.\"\n            ariaLabel=\"Pie chart\"\n            hideFilter\n            innerMetricDescription=\"Mitigations\"\n            innerMetricValue={mitigationList.length.toString()}\n            variant=\"donut\"\n            size=\"medium\"\n            noMatch={\n              <Box textAlign=\"center\" color=\"inherit\">\n                <b>No matching data</b>\n                <Box variant=\"p\" color=\"inherit\">\n                  There is no matching data to display\n                </Box>\n                <Button>Clear filter</Button>\n              </Box>\n            }\n          />\n        </Box>\n      )}\n      {countNotSet > 0 ? (\n        <div>\n          <Box variant=\"awsui-key-label\">Missing status</Box>\n          <DashboardNumber\n            showWarning\n            featuredNumber={countNotSet}\n            onLinkClicked={handleLinkClicked({\n              status: [STATUS_NOT_SET],\n            })}\n          />\n        </div>\n      ) : null}\n    </ColumnLayout>\n  );\n};\nexport default MitigationStatus;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport {\n  Button,\n  Box,\n  ColumnLayout,\n} from '@cloudscape-design/components';\nimport PieChart from '@cloudscape-design/components/pie-chart';\nimport {\n  colorChartsStatusInfo,\n  colorChartsStatusPositive,\n  colorChartsStatusHigh,\n  colorChartsStatusNeutral,\n} from '@cloudscape-design/design-tokens';\nimport { useMemo, useCallback, FC } from 'react';\nimport {\n  DEFAULT_NEW_ENTITY_ID,\n  STATUS_NOT_SET,\n  THREAT_STATUS_IDENTIFIED,\n  THREAT_STATUS_NOT_USEFUL,\n  THREAT_STATUS_RESOLVED,\n} from '../../../../../configs';\nimport { useThreatsContext } from '../../../../../contexts/ThreatsContext';\nimport { threatStatus } from '../../../../../data';\nimport DashboardNumber from '../../../../generic/DashboardNumber';\nimport useThreatListLinkClicked from '../../hooks/useThreatListLinkClicked';\nimport { WorkspaceInsightsProps } from '../../types';\n\nconst ThreatStatus: FC<WorkspaceInsightsProps> = ({\n  onThreatEditorView,\n  onThreatListView,\n}) => {\n  const { statementList, addStatement } = useThreatsContext();\n\n  const handleLinkClicked = useThreatListLinkClicked(onThreatListView);\n\n  const countNotSet = useMemo(() => statementList.filter(x => !x.status).length,\n    [statementList],\n  );\n\n  const countIdentified = useMemo(\n    () => statementList.filter(x => x.status === THREAT_STATUS_IDENTIFIED).length,\n    [statementList],\n  );\n\n  const countResolved = useMemo(\n    () => statementList.filter(x => x.status === THREAT_STATUS_RESOLVED).length,\n    [statementList],\n  );\n\n  const countNotUseful = useMemo(\n    () => statementList.filter(x => x.status === THREAT_STATUS_NOT_USEFUL).length,\n    [statementList],\n  );\n\n  const handleAddStatement = useCallback(() => {\n    addStatement();\n    onThreatEditorView?.(DEFAULT_NEW_ENTITY_ID);\n  }, [addStatement, onThreatEditorView]);\n\n  return (\n    <ColumnLayout columns={1} borders=\"horizontal\">\n      {!statementList.length ? (\n        <Box\n          margin=\"xxl\"\n          padding=\"xxl\"\n          color=\"text-body-secondary\"\n          textAlign=\"center\"\n        >\n          <b>No threats available</b>\n          <Box variant=\"p\" color=\"text-body-secondary\">\n            Start by adding a threat to this workspace\n          </Box>\n          <Button variant=\"primary\" onClick={() => handleAddStatement()}>Add a threat</Button>\n        </Box>\n      ) : (\n        <Box padding=\"s\">\n          <PieChart\n            data={[\n              {\n                title: threatStatus.find(x => x.value === THREAT_STATUS_RESOLVED)?.label || 'Resolved',\n                value: countResolved,\n                color: colorChartsStatusPositive,\n              },\n              {\n                title: threatStatus.find(x => x.value === THREAT_STATUS_NOT_USEFUL)?.label || 'Not useful',\n                value: countNotUseful,\n                color: colorChartsStatusInfo,\n              },\n              {\n                title: threatStatus.find(x => x.value === THREAT_STATUS_IDENTIFIED)?.label || 'Identified',\n                value: countIdentified,\n                color: colorChartsStatusNeutral,\n              },\n              {\n                title: 'Not Set',\n                value: countNotSet,\n                color: colorChartsStatusHigh,\n              },\n            ]}\n            detailPopoverContent={(datum, sum) => [\n              { key: 'Threat count', value: datum.value },\n              {\n                key: 'Percentage',\n                value: `${((datum.value / sum) * 100).toFixed(0)}%`,\n              },\n            ]}\n            segmentDescription={(datum, sum) =>\n              `${datum.value} threats, ${((datum.value / sum) * 100).toFixed(0)}%`\n            }\n            ariaDescription=\"Pie chart showing the status of threats.\"\n            ariaLabel=\"Pie chart\"\n            hideFilter\n            innerMetricDescription=\"Threats\"\n            innerMetricValue={statementList.length.toString()}\n            variant=\"donut\"\n            size=\"medium\"\n            noMatch={\n              <Box textAlign=\"center\" color=\"inherit\">\n                <b>No matching data</b>\n                <Box variant=\"p\" color=\"inherit\">\n                  There is no matching data to display\n                </Box>\n                <Button>Clear filter</Button>\n              </Box>\n            }\n          />\n        </Box>\n      )}\n      {countNotSet > 0 ? (\n        <div>\n          <Box variant=\"awsui-key-label\">Missing status</Box>\n          <DashboardNumber\n            showWarning\n            featuredNumber={countNotSet}\n            onLinkClicked={handleLinkClicked({\n              status: [STATUS_NOT_SET],\n            })}\n          />\n        </div>\n      ) : null}\n    </ColumnLayout>\n  );\n};\nexport default ThreatStatus;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Box from '@cloudscape-design/components/box';\nimport Button from '@cloudscape-design/components/button';\nimport ContentLayout from '@cloudscape-design/components/content-layout';\nimport Header from '@cloudscape-design/components/header';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { FC, useMemo } from 'react';\nimport { useMitigationPacksContext } from '../../../contexts/MitigationPacksContext';\nimport { MitigationPack } from '../../../customTypes/referencePacks';\nimport Table, { ColumnDefinition } from '../../generic/Table';\n\n\nexport interface MitigationPacksProps {\n  onMitigationPackLinkClicked?: (id: string) => void;\n}\n\nconst MitigationPacks: FC<MitigationPacksProps> = ({\n  onMitigationPackLinkClicked,\n}) => {\n  const { mitigationPackUsage, mitigationPacks } = useMitigationPacksContext();\n\n  const colDef: ColumnDefinition<MitigationPack>[] = useMemo(() => [\n    {\n      id: 'id',\n      minWidth: 150,\n      header: 'Id',\n      cell: (data) => (<Button variant=\"inline-link\" onClick={() => onMitigationPackLinkClicked?.(data.id)}>\n        {data.id}\n      </Button>),\n      sortingField: 'id',\n      isRowHeader: true,\n    },\n    {\n      id: 'name',\n      minWidth: 120,\n      header: 'Name',\n      cell: (data) => data.name,\n      sortingField: 'name',\n    },\n    {\n      id: 'description',\n      minWidth: 200,\n      header: 'Description',\n      cell: (data) => <Box>{data.description}</Box>,\n      sortingField: 'description',\n    },\n    {\n      id: 'countMitigations',\n      header: 'Total mitigations',\n      cell: (data) => data.mitigations?.length,\n    },\n    {\n      id: 'countReferencedMitigations',\n      header: 'Referenced mitigations',\n      cell: (data) => (mitigationPackUsage[data.id] && Object.keys(mitigationPackUsage[data.id]).length) || 0,\n    },\n  ], [mitigationPackUsage, onMitigationPackLinkClicked]);\n\n  return (<ContentLayout\n    headerVariant=\"high-contrast\"\n    header={<Header\n      variant=\"h2\"\n      description=\"Allow you to quickly find and add bulk or selected mitigation candidates to your current workspace\"\n      counter={`(${mitigationPacks.length})`}\n    >\n    Mitigation Packs\n    </Header>}>\n    <SpaceBetween direction='vertical' size='s'>\n      <Table\n        columnDefinitions={colDef}\n        items={mitigationPacks}\n        disableRowSelect={true}\n      /></SpaceBetween>\n  </ContentLayout>);\n};\n\nexport default MitigationPacks;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, useMemo } from 'react';\nimport ThreatModelView, { ThreatModelViewProps } from './components/ThreatModelView';\nimport { APP_MODE_IDE_EXTENSION, APP_MODE_BROWSER_EXTENSION } from '../../../configs/appMode';\nimport { useGlobalSetupContext, useWorkspacesContext } from '../../../contexts';\nimport { DataExchangeFormat, ViewNavigationEvent } from '../../../customTypes';\nimport useImportExport from '../../../hooks/useExportImport';\nimport getExportFileName from '../../../utils/getExportFileName';\nimport hasContent from '../../../utils/hasContent';\n\nexport interface ThreatModelProps extends ViewNavigationEvent {\n  onPrintButtonClick?: (data: DataExchangeFormat) => void;\n  isPreview?: boolean;\n  convertToDocx?: ThreatModelViewProps['convertToDocx'];\n}\n\nconst ThreatModel: FC<ThreatModelProps> = ({\n  onPrintButtonClick,\n  ...props\n}) => {\n  const { getWorkspaceData } = useImportExport();\n  const { composerMode, appMode } = useGlobalSetupContext();\n  const { currentWorkspace } = useWorkspacesContext();\n\n  const downloadFileName = useMemo(() => {\n    return getExportFileName(composerMode, false, currentWorkspace);\n  }, [composerMode, currentWorkspace]);\n\n  const hasContentDetails = useMemo(() => {\n    const [, details] = hasContent(getWorkspaceData());\n    return details;\n  }, [getWorkspaceData]);\n\n  return (\n    <ThreatModelView\n      {...props}\n      onPrintButtonClick={() => onPrintButtonClick?.(getWorkspaceData())}\n      showPrintDownloadButtons={appMode !== APP_MODE_IDE_EXTENSION && appMode !== APP_MODE_BROWSER_EXTENSION }\n      composerMode={composerMode}\n      data={getWorkspaceData()}\n      downloadFileName={downloadFileName}\n      hasContentDetails={hasContentDetails}\n      onApplicationInfoView={props.onApplicationInfoView}\n      onArchitectureView={props.onArchitectureView}\n      onDataflowView={props.onDataflowView}\n      onAssumptionListView={props.onAssumptionListView}\n      onThreatListView={props.onThreatListView}\n      onMitigationListView={props.onMitigationListView}\n    />);\n};\n\nexport default ThreatModel;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Box from '@cloudscape-design/components/box';\nimport Button from '@cloudscape-design/components/button';\nimport ExpandableSection from '@cloudscape-design/components/expandable-section';\nimport PropertyFilter, { PropertyFilterProps } from '@cloudscape-design/components/property-filter';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport { FC, useState, useMemo, useCallback, useImperativeHandle, forwardRef } from 'react';\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\nimport { TemplateThreatStatement } from '../../../customTypes';\nimport STRIDE from '../../../data/stride';\nimport intersectArrays from '../../../utils/intersectArrays';\nimport shuffle from '../../../utils/shuffle';\n\nexport interface FullExamplesProps {\n  onClick: (example: TemplateThreatStatement) => void;\n}\n\nconst parseToken = (statements: TemplateThreatStatement[], token: PropertyFilterProps.Token) => {\n  const targetValue = token.value?.slice(0, 1).toUpperCase();\n  const result: number[] = [];\n  statements.forEach((st, index) => {\n    if (token.propertyKey === 'STRIDE') {\n      const value = st.metadata?.find(m => m.key === 'STRIDE')?.value as string[];\n      if (!value && token.operator === '!=') {\n        result.push(index);\n      }\n\n      if (value && token.operator === '=' && value.includes(targetValue)) {\n        result.push(index);\n      }\n\n      if (token.operator !== '=' && (!value || !value.includes(targetValue))) {\n        result.push(index);\n      }\n    } else if (!token.propertyKey && token.operator === ':') {\n      if (st.statement && st.statement.toLocaleLowerCase().indexOf(token.value) >= 0) {\n        result.push(index);\n      }\n    } else {\n      result.push(index);\n    }\n  });\n\n  return result;\n};\n\nconst FullExamples: FC<FullExamplesProps & { ref?: React.LegacyRef<any> }> = forwardRef(({\n  onClick,\n}, ref) => {\n  const { threatStatementExamples } = useThreatsContext();\n  const [expanded, setExpanded] = useState(false);\n  const [query, setQuery] = useState<PropertyFilterProps.Query>({\n    tokens: [],\n    operation: 'and',\n  });\n\n  useImperativeHandle(ref, () => {\n    return {\n      collapse() {\n        setExpanded(false);\n      },\n    };\n  }, []);\n\n  const handleClick = useCallback((example: TemplateThreatStatement) => {\n    setExpanded(false);\n    onClick?.(example);\n  }, [onClick]);\n\n  const filteredThreatStatementList = useMemo(() => {\n    let resultExamples = [...threatStatementExamples];\n    if (query.tokens.length > 0) {\n      const queryResult = query.tokens.map(t => parseToken(threatStatementExamples, t));\n      let mergeResult: number[] = [];\n      if (queryResult.length === 1) {\n        mergeResult = queryResult[0];\n      } else {\n        if (query.operation === 'or') {\n          mergeResult = queryResult.reduce((arr: number[], cur: number[]) => {\n            const result = [...arr];\n            cur.forEach(n => {\n              if (!result.includes(n)) {\n                result.push(n);\n              }\n            });\n            return result;\n          }, []);\n        } else {\n          mergeResult = intersectArrays(...queryResult);\n        }\n      }\n\n      resultExamples = resultExamples.filter((_r, index) => {\n        return mergeResult.includes(index);\n      });\n    }\n\n    return shuffle(resultExamples);\n  }, [threatStatementExamples, query]);\n\n  const filteringOptions = useMemo(() => {\n    const options: PropertyFilterProps.FilteringOption[] = [];\n    options.push(...STRIDE.map(v => ({\n      propertyKey: 'STRIDE',\n      value: v.label,\n    })));\n\n    return options;\n  }, []);\n\n  const filteringProperties: PropertyFilterProps.FilteringProperty[] = useMemo(() => {\n    return [\n      {\n        key: 'STRIDE',\n        operators: ['=', '!='],\n        propertyLabel: 'STRIDE',\n        groupValuesLabel: 'STRIDE values',\n      },\n    ];\n  }, []);\n\n  return (\n    <ExpandableSection\n      headerText=\"Full examples\"\n      expanded={expanded}\n      onChange={({ detail }) => setExpanded(detail.expanded)}\n    >\n      <Box padding='m'>\n        <SpaceBetween direction='vertical' size='m'>\n          <PropertyFilter\n            onChange={({ detail }) => setQuery(detail)}\n            query={query}\n            i18nStrings={{\n              filteringAriaLabel: 'your choice',\n              dismissAriaLabel: 'Dismiss',\n              filteringPlaceholder:\n                'Filter examples by metadata or content',\n              groupValuesText: 'Values',\n              groupPropertiesText: 'Properties',\n              operatorsText: 'Operators',\n              operationAndText: 'and',\n              operationOrText: 'or',\n              operatorLessText: 'Less than',\n              operatorLessOrEqualText: 'Less than or equal',\n              operatorGreaterText: 'Greater than',\n              operatorGreaterOrEqualText:\n                'Greater than or equal',\n              operatorContainsText: 'Contains',\n              operatorDoesNotContainText: 'Does not contain',\n              operatorEqualsText: 'Equals',\n              operatorDoesNotEqualText: 'Does not equal',\n              editTokenHeader: 'Edit filter',\n              propertyText: 'Property',\n              operatorText: 'Operator',\n              valueText: 'Value',\n              cancelActionText: 'Cancel',\n              applyActionText: 'Apply',\n              allPropertiesLabel: 'All properties',\n              tokenLimitShowMore: 'Show more',\n              tokenLimitShowFewer: 'Show fewer',\n              clearFiltersText: 'Clear filters',\n              removeTokenButtonAriaLabel: token =>\n                `Remove token ${token.propertyKey} ${token.operator} ${token.value}`,\n              enteredTextLabel: text => `Use: \"${text}\"`,\n            }}\n            countText={`${filteredThreatStatementList.length} matches`}\n            expandToViewport\n            filteringOptions={filteringOptions}\n            filteringProperties={filteringProperties}\n          />\n          <TextContent>\n            <ul>\n              {filteredThreatStatementList.map((example, index) => (\n                <li key={index}>\n                  <Button onClick={() => handleClick(example)} variant='link'>\n                    {example.statement}\n                  </Button>\n                </li>))}\n            </ul>\n          </TextContent>\n        </SpaceBetween>\n      </Box>\n    </ExpandableSection>\n  );\n});\n\nexport default FullExamples;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { z } from 'zod';\nimport { BaseImageInfoSchema } from './entities';\n\nexport const ArchitectureInfoSchema = z.object({\n  description: BaseImageInfoSchema.shape.description.describe('Markdown detailed description of the application architecture. Start your headers from H3 maximum'),\n  image: BaseImageInfoSchema.shape.image.describe('Architecture diagram image. ' + BaseImageInfoSchema.shape.image.description),\n}).strict();\n\nexport type ArchitectureInfo = z.infer<typeof ArchitectureInfoSchema>;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Spacebetween from '@cloudscape-design/components/space-between';\nimport StatusIndicator from '@cloudscape-design/components/status-indicator';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport { FC } from 'react';\nimport getDisplayLastModified from '../../utils/getDisplayLastModified';\nimport getDisplaySize from '../../utils/getDisplaySize';\n\nexport interface FileTokenLabelProps {\n  name?: string;\n  size?: number;\n  lastModified?: number;\n}\n\nconst FileTokenLabel: FC<FileTokenLabelProps> = ({ name, size, lastModified }) => {\n  return (\n    <Spacebetween direction=\"horizontal\" size=\"xs\">\n      <StatusIndicator type=\"success\" />\n      <TextContent>\n        <Spacebetween direction=\"vertical\" size=\"xxxs\">\n          <span key='name'><b>{name}</b></span>\n          <span key='size'>Size: {getDisplaySize(size)}</span>\n          {lastModified && <span key='lastModified'>{getDisplayLastModified(lastModified)}</span>}\n        </Spacebetween>\n      </TextContent>\n    </Spacebetween>\n  );\n};\n\nexport default FileTokenLabel;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport FormField, { FormFieldProps } from '@cloudscape-design/components/form-field';\nimport { BaseChangeDetail } from '@cloudscape-design/components/input/interfaces';\nimport { NonCancelableEventHandler } from '@cloudscape-design/components/internal/events';\nimport TextareaComponent, { TextareaProps as TextareaComponetProps } from '@cloudscape-design/components/textarea';\nimport React, { FC, useCallback } from 'react';\nimport { z } from 'zod';\nimport useContentValidation from '../../../hooks/useContentValidation';\n\nexport interface TextAreaProps extends FormFieldProps, TextareaComponetProps {\n  ref?: React.LegacyRef<any>;\n  validateData?: (newValue: string) => z.ZodSafeParseResult<string | undefined>;\n  singleLine?: boolean;\n}\n\nconst Textarea: FC<TextAreaProps> = React.forwardRef<TextareaComponetProps.Ref, TextAreaProps>(({\n  value,\n  onChange,\n  validateData,\n  singleLine,\n  ...props\n}, ref) => {\n  const { tempValue, errorText, handleChange } = useContentValidation(value, onChange, validateData);\n\n  const handleValueChange: NonCancelableEventHandler<BaseChangeDetail> = useCallback(event =>\n    singleLine ? handleChange({\n      ...event,\n      detail: {\n        ...event.detail,\n        value: event.detail.value.replace(/\\n|\\r/i, ' '),\n      },\n    }) : handleChange(event), [singleLine, handleChange]);\n\n  return (\n    <FormField\n      {...props}\n      errorText={errorText}\n    >\n      <TextareaComponent\n        {...props}\n        ref={ref}\n        value={tempValue}\n        onChange={handleValueChange}\n      />\n    </FormField>);\n});\n\nexport default Textarea;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback, useState } from 'react';\nimport { MitigationLink } from '../../../../customTypes';\nimport { LocalStateContextProviderBaseProps } from '../../../types';\nimport { MitigationLinksContext } from '../../context';\nimport { MitigationLinksContextProviderProps } from '../../types';\nimport useMitigationLinks from '../../useMitigationLinks';\n\nconst MitigationLinksLocalStateContextProvider: FC<PropsWithChildren<\nMitigationLinksContextProviderProps & LocalStateContextProviderBaseProps<MitigationLink[]>>> = ({\n  children,\n  initialValue,\n}) => {\n  const [mitigationLinkList, setMitigationLinkList] = useState<MitigationLink[]>(initialValue || []);\n\n  const {\n    handlRemoveMitigationLink,\n    handleRemoveMitigationLinks,\n    handlRemoveMitigationLinksByMitigationId,\n    handlRemoveMitigationLinksByLinkedEntityId,\n    handleAddMitigationLink,\n    handleAddMitigationLinks,\n    handleGetLinkedMitigationLinks,\n    handleGetMitigationThreatLinks,\n  } = useMitigationLinks(mitigationLinkList, setMitigationLinkList);\n\n  const handleRemoveAllMitigationLinks = useCallback(async () => {\n    setMitigationLinkList([]);\n  }, []);\n\n  const handleDeleteWorkspace = useCallback(async (_workspaceId: string) => {\n    setMitigationLinkList([]);\n  }, []);\n\n  return (<MitigationLinksContext.Provider value={{\n    mitigationLinkList,\n    setMitigationLinkList,\n    getLinkedMitigationLinks: handleGetLinkedMitigationLinks,\n    getMitigtaionThreatLinks: handleGetMitigationThreatLinks,\n    removeMitigationLink: handlRemoveMitigationLink,\n    removeMitigationLinksByMitigationId: handlRemoveMitigationLinksByMitigationId,\n    removeMitigationLinksByLinkedEntityId: handlRemoveMitigationLinksByLinkedEntityId,\n    removeMitigationLinks: handleRemoveMitigationLinks,\n    addMitigationLink: handleAddMitigationLink,\n    addMitigationLinks: handleAddMitigationLinks,\n    removeAllMitigationLinks: handleRemoveAllMitigationLinks,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </MitigationLinksContext.Provider>);\n};\n\nexport default MitigationLinksLocalStateContextProvider;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Button from '@cloudscape-design/components/button';\nimport { FC, ReactNode } from 'react';\nimport Tooltip from '../../../../generic/Tooltip';\n\nexport interface ExpandableTokenProps {\n  onClick?: () => void;\n  expanded: boolean;\n  tooltip: ReactNode;\n}\n\nconst ExpandableToken: FC<ExpandableTokenProps> = ({\n  expanded,\n  onClick,\n  tooltip,\n}) => {\n  return (<Tooltip tooltip={tooltip}>\n    <Button iconName={expanded ? 'treeview-collapse' : 'treeview-expand'} variant=\"icon\" onClick={onClick}/>\n  </Tooltip>);\n};\n\nexport default ExpandableToken;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { z } from 'zod';\nimport {\n  FREE_TEXT_INPUT_MAX_LENGTH,\n  SINGLE_FIELD_INPUT_SMALL_MAX_LENGTH,\n  SINGLE_FIELD_INPUT_TAG_MAX_LENGTH,\n  FREE_TEXT_INPUT_SMALL_MAX_LENGTH,\n  LEVEL_SELECTOR_OPTIONS,\n  REGEX_CONTENT_IMAGE_URL,\n  REGEX_CONTENT_IMAGE_BASE64,\n  IMAGE_BASE64_MAX_LENGTH,\n  IMAGE_URL_MAX_LENGTH,\n  METADATA_KEY_COMMENTS,\n  METADATA_KEY_STRIDE,\n  METADATA_KEY_PRIORITY,\n  METADATA_KEY_PREFIX_CUSTOM,\n  METADATA_KEY_SOURCE,\n  METADATA_KEY_SOURCE_THREAT_PACK,\n  METADATA_KEY_SOURCE_THREAT_PACK_THREAT,\n  METADATA_KEY_SOURCE_THREAT_PACK_MITIGATION_CANDIDATE,\n  METADATA_KEY_SOURCE_MITIGATION_PACK,\n  METADATA_KEY_SOURCE_MITIGATION_PACK_MITIGATION,\n  METADATA_SOURCE_THREAT_PACK,\n  METADATA_SOURCE_MITIGATION_PACK,\n} from '../configs';\nimport STRIDE from '../data/stride';\n\nexport const TagSchema = z.string().nonempty().max(SINGLE_FIELD_INPUT_TAG_MAX_LENGTH).describe('Tag value');\n\nexport const MetadataCommentSchema = z.string().max(FREE_TEXT_INPUT_SMALL_MAX_LENGTH).describe('Comment value');\n\nexport const MetadataSchemaMinimal = z.union([\n  // Comments: string value\n  z.object({\n    key: z.literal(METADATA_KEY_COMMENTS),\n    value: MetadataCommentSchema,\n  }).strict(),\n\n  // Custom keys: any key starting with \"custom:\" with flexible value\n  z.object({\n    key: z.string().startsWith(METADATA_KEY_PREFIX_CUSTOM).max(SINGLE_FIELD_INPUT_SMALL_MAX_LENGTH),\n    value: z.union([z.string(), z.array(z.string())]),\n  }).strict(),\n]);\n\nexport type MetadataMinimal = z.infer<typeof MetadataSchemaMinimal>;\n\nexport const MetadataSchemaMitigation = z.union([\n  ...MetadataSchemaMinimal.options, // Comments + custom keys\n\n  // Source metadata\n  z.object({\n    key: z.literal(METADATA_KEY_SOURCE),\n    value: z.enum([METADATA_SOURCE_MITIGATION_PACK]).describe('Source type indicating type of pack'),\n  }).strict(),\n\n  // Mitigation pack ID\n  z.object({\n    key: z.literal(METADATA_KEY_SOURCE_MITIGATION_PACK),\n    value: z.string().min(1).max(SINGLE_FIELD_INPUT_TAG_MAX_LENGTH).describe('Identifier for the mitigation pack'),\n  }).strict(),\n\n  // Mitigation pack mitigation ID\n  z.object({\n    key: z.literal(METADATA_KEY_SOURCE_MITIGATION_PACK_MITIGATION),\n    value: z.string().max(36).describe('UUID v4 identifier for the specific mitigation within the pack'),\n  }).strict(),\n]);\n\nexport type MetadataMitigation = z.infer<typeof MetadataSchemaMitigation>;\n\nexport const MetadataSchemaThreats = z.union([\n  ...MetadataSchemaMinimal.options, // Comments + custom keys\n\n  // Source metadata\n  z.object({\n    key: z.literal(METADATA_KEY_SOURCE),\n    value: z.enum([METADATA_SOURCE_THREAT_PACK]).describe('Source type indicating type of pack'),\n  }).strict(),\n\n  // Stride: array of valid STRIDE values\n  z.object({\n    key: z.literal(METADATA_KEY_STRIDE),\n    value: z.array(z.enum(STRIDE.map(s => s.value) as [string, ...string[]])),\n  }).strict(),\n\n  // Priority: single value from level options\n  z.object({\n    key: z.literal(METADATA_KEY_PRIORITY),\n    value: z.enum(LEVEL_SELECTOR_OPTIONS.map(o => o.value) as [string, ...string[]]),\n  }).strict(),\n\n  // Threat pack ID\n  z.object({\n    key: z.literal(METADATA_KEY_SOURCE_THREAT_PACK),\n    value: z.string().min(1).max(SINGLE_FIELD_INPUT_TAG_MAX_LENGTH).describe('Identifier for the threat pack'),\n  }).strict(),\n\n  // Threat pack threat ID\n  z.object({\n    key: z.literal(METADATA_KEY_SOURCE_THREAT_PACK_THREAT),\n    value: z.string().max(36).describe('UUID v4 identifier for the specific threat within the pack'),\n  }).strict(),\n\n  // Threat pack mitigation candidate ID\n  z.object({\n    key: z.literal(METADATA_KEY_SOURCE_THREAT_PACK_MITIGATION_CANDIDATE),\n    value: z.string().max(36).describe('UUID v4 identifier for the mitigation candidate from the threat pack'),\n  }).strict(),\n]);\n\nexport type MetadataThreats = z.infer<typeof MetadataSchemaThreats>;\n\nexport type Metadata = z.infer<typeof MetadataSchemaThreats>;\n\nexport const MetadataNodeSchema = z.object({});\n\nexport type MetadataNode = z.infer<typeof MetadataNodeSchema>;\n\nexport const EntityBaseSchema = z.object({\n  /**\n   * The unique Id of the entity.\n   */\n  id: z.string().max(36).describe('UUID v4 identifier'),\n  /**\n   * The numeric id of the entity.\n   * The numericId will be displayed for users to easy identify the entity.\n   */\n  numericId: z.number().describe('Numeric identifier for display purposes'),\n  /**\n   * The display order of the entity in the list.\n   */\n  displayOrder: z.optional(z.number()).describe('Order for displaying threats'),\n  /**\n   * The metadata.\n   */\n  metadata: MetadataSchemaMinimal.array().optional().describe('Additional metadata as key-value pairs'),\n  /**\n   * The tags.\n   */\n  tags: TagSchema.array().optional().describe('Categorization tags'),\n});\n\nexport type EntityBase = z.infer<typeof EntityBaseSchema>;\n\nexport const StatusSchema = z.string().optional();\n\nexport const ContentEntityBaseSchema = EntityBaseSchema.extend({\n  /**\n   * The text content of the Assumption.\n   */\n  content: z.string().max(FREE_TEXT_INPUT_SMALL_MAX_LENGTH),\n});\n\nexport type ContentEntityBase = z.infer<typeof ContentEntityBaseSchema>;\n\nexport const EntityLinkBaseSchema = z.object({\n});\n\nexport type EntityLinkBase = z.infer<typeof EntityLinkBaseSchema>;\n\nexport const ImageUrlSchema = z.string().max(IMAGE_URL_MAX_LENGTH).regex(REGEX_CONTENT_IMAGE_URL).optional();\nexport const ImageBase64Schema = z.string().max(IMAGE_BASE64_MAX_LENGTH).regex(REGEX_CONTENT_IMAGE_BASE64).optional();\n\nexport const BaseImageInfoSchema = z.object({\n  /**\n   * The base64 encoded image or src of the image\n   */\n  image: z.string().optional().refine((data) => {\n    return !data || ImageUrlSchema.safeParse(data).success || ImageBase64Schema.safeParse(data).success;\n  }, {\n    message: 'Invalid image format',\n    path: [],\n  }).describe(`Image URL or base64 encoded image data. Supports image/* MIME types, though browser rendering compatibility varies by format. For URLs: maximum ${IMAGE_URL_MAX_LENGTH} characters. For base64: maximum ${IMAGE_BASE64_MAX_LENGTH} characters (approximately 750KB for typical images due to base64 encoding overhead). Common formats (PNG/JPG/GIF) are automatically compressed, making original file size limits difficult to specify precisely. The constraint applies to the resulting base64 string length rather than the original file size.`),\n  /**\n   * The description of the architecture diagram\n   */\n  description: z.string().max(FREE_TEXT_INPUT_MAX_LENGTH).optional(),\n}).strict();\n\nexport type BaseImageInfo = z.infer<typeof BaseImageInfoSchema>;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n\nimport ContentLayoutComponent from '@cloudscape-design/components/content-layout';\nimport Header, { HeaderProps } from '@cloudscape-design/components/header';\nimport { FC, PropsWithChildren } from 'react';\nimport { useApplicationInfoContext } from '../../../contexts/ApplicationContext';\n\nexport interface ContentLayoutProps extends Omit<HeaderProps, 'info'> {\n  /**\n   * The title of the header.\n   */\n  title?: string;\n}\n\nconst ContentLayout: FC<PropsWithChildren<ContentLayoutProps>> = ({\n  title,\n  children,\n  ...props\n}) => {\n  const { applicationInfo } = useApplicationInfoContext();\n\n  return (<ContentLayoutComponent\n    headerVariant=\"high-contrast\"\n    header={<Header\n      variant=\"h1\"\n      {...props}\n      info={applicationInfo.name ? `| ${applicationInfo.name}` : undefined}\n    >\n      {title}\n    </Header>}\n  >\n    {children}\n  </ContentLayoutComponent>);\n};\n\nexport default ContentLayout;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { CancelableEventHandler, BaseNavigationDetail } from '@cloudscape-design/components/internal/events';\nimport { useCallback } from 'react';\nimport { MitigationListFilter, ViewNavigationEvent } from '../../../../../customTypes';\n\nconst useMitigationListLinkClicked = (onMitigationListView: ViewNavigationEvent['onMitigationListView']) => {\n  return useCallback((filter?: MitigationListFilter): CancelableEventHandler<BaseNavigationDetail> => (event) => {\n    event?.preventDefault?.();\n    onMitigationListView?.(filter);\n  }, [onMitigationListView]);\n};\n\nexport default useMitigationListLinkClicked;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport const METADATA_KEY_SOURCE = 'source';\n\nexport const METADATA_SOURCE_THREAT_PACK = 'threatPack';\nexport const METADATA_KEY_SOURCE_THREAT_PACK = 'threatPackId';\nexport const METADATA_KEY_SOURCE_THREAT_PACK_THREAT = 'threatPackThreatId';\nexport const METADATA_KEY_SOURCE_THREAT_PACK_MITIGATION_CANDIDATE = 'threatPackMitigationCandidateId';\n\nexport const METADATA_SOURCE_MITIGATION_PACK = 'mitigationPack';\nexport const METADATA_KEY_SOURCE_MITIGATION_PACK = 'mitigationPackId';\nexport const METADATA_KEY_SOURCE_MITIGATION_PACK_MITIGATION = 'mitigationPackMitigationId';\n\nexport const METADATA_KEY_DESCRIPTION = 'Description';\n\nexport const METADATA_KEY_COMMENTS = 'Comments';\nexport const METADATA_KEY_STRIDE = 'STRIDE';\nexport const METADATA_KEY_PRIORITY = 'Priority';\n\nexport const METADATA_KEY_PREFIX_CUSTOM = 'custom:';\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useCallback } from 'react';\nimport { useWorkspacesContext } from '../../contexts';\nimport { useApplicationInfoContext } from '../../contexts/ApplicationContext/context';\nimport { useArchitectureInfoContext } from '../../contexts/ArchitectureContext/context';\nimport { useAssumptionLinksContext } from '../../contexts/AssumptionLinksContext/context';\nimport { useAssumptionsContext } from '../../contexts/AssumptionsContext/context';\nimport { useBrainstormContext } from '../../contexts/BrainstormContext/context';\nimport { useDataflowInfoContext } from '../../contexts/DataflowContext/context';\nimport { useGlobalSetupContext } from '../../contexts/GlobalSetupContext/context';\nimport { useMitigationLinksContext } from '../../contexts/MitigationLinksContext/context';\nimport { useMitigationsContext } from '../../contexts/MitigationsContext/context';\nimport { useThreatsContext } from '../../contexts/ThreatsContext/context';\nimport { DataExchangeFormat, TemplateThreatStatement } from '../../customTypes';\nimport cleanupThreatData from '../../utils/cleanupThreatData';\nimport { downloadObjectAsJson } from '../../utils/downloadContent';\nimport getExportFileName from '../../utils/getExportFileName';\nimport recalculateThreatData from '../../utils/recalculateThreatData';\nimport sanitizeHtml from '../../utils/sanitizeHtml';\nimport validateData from '../../utils/validateData';\n\nconst SCHEMA_VERSION = 1.0;\n\nexport const PLACEHOLDER_EXCHANGE_DATA = {\n  schema: SCHEMA_VERSION,\n};\n\nexport const PLACEHOLDER_EXCHANGE_DATA_FOR_WORKSPACE = {\n  id: '',\n  name: '',\n};\n\nconst useImportExport = () => {\n  const { composerMode } = useGlobalSetupContext();\n  const { currentWorkspace } = useWorkspacesContext();\n  const { applicationInfo, setApplicationInfo } = useApplicationInfoContext();\n  const { architectureInfo, setArchitectureInfo } = useArchitectureInfoContext();\n  const { dataflowInfo, setDataflowInfo } = useDataflowInfoContext();\n  const { assumptionList, setAssumptionList } = useAssumptionsContext();\n  const { mitigationList, setMitigationList } = useMitigationsContext();\n  const { statementList, setStatementList } = useThreatsContext();\n  const { assumptionLinkList, setAssumptionLinkList } = useAssumptionLinksContext();\n  const { mitigationLinkList, setMitigationLinkList } = useMitigationLinksContext();\n  const { brainstormData, setBrainstormData } = useBrainstormContext();\n\n  // Helper function to check if brainstorm data is empty\n  const isBrainstormDataEmpty = useCallback((data: typeof brainstormData) => {\n    return (\n      (data.assumptions?.length || 0) === 0 &&\n      (data.threatSources?.length || 0) === 0 &&\n      (data.threatPrerequisites?.length || 0) === 0 &&\n      (data.threatActions?.length || 0) === 0 &&\n      (data.threatImpacts?.length || 0) === 0 &&\n      (data.assets?.length || 0) === 0 &&\n      (data.mitigations?.length || 0) === 0\n    );\n  }, []);\n\n  const getWorkspaceData = useCallback((): DataExchangeFormat => {\n\n    const cleanedThreats = cleanupThreatData(statementList);\n    if (composerMode === 'Full') {\n      const baseData = {\n        schema: SCHEMA_VERSION,\n        applicationInfo,\n        architecture: architectureInfo,\n        dataflow: dataflowInfo,\n        assumptions: assumptionList,\n        mitigations: mitigationList,\n        assumptionLinks: assumptionLinkList,\n        mitigationLinks: mitigationLinkList,\n        threats: cleanedThreats,\n      };\n\n      // Only include brainstormData if it's not empty\n      if (!isBrainstormDataEmpty(brainstormData)) {\n        return {\n          ...baseData,\n          brainstorm: brainstormData,\n        };\n      }\n\n      return baseData;\n    }\n\n    return {\n      schema: SCHEMA_VERSION,\n      threats: cleanedThreats,\n    };\n  }, [composerMode, currentWorkspace, applicationInfo,\n    architectureInfo, dataflowInfo,\n    assumptionList, mitigationList,\n    assumptionLinkList, mitigationLinkList,\n    statementList, brainstormData, isBrainstormDataEmpty]);\n\n  const exportAll = useCallback(() => {\n    const exportFileName = getExportFileName(composerMode, false, currentWorkspace);\n    const exportObject = getWorkspaceData();\n    downloadObjectAsJson(exportObject, exportFileName);\n  }, [getWorkspaceData, currentWorkspace, composerMode]);\n\n  const exportSelectedThreats = useCallback((selectedStatementList: TemplateThreatStatement[]) => {\n    const exportFileName = getExportFileName(composerMode, true, currentWorkspace);\n    downloadObjectAsJson({\n      schema: SCHEMA_VERSION,\n      workspace: currentWorkspace || undefined,\n      threats: selectedStatementList,\n    }, exportFileName);\n  }, [currentWorkspace]);\n\n  const parseImportedData = useCallback((data: any): DataExchangeFormat => {\n    const parsedData = sanitizeHtml(data);\n\n    if (Array.isArray(parsedData)) {\n      // This is before schema version support\n      return {\n        schema: -1,\n        threats: data as TemplateThreatStatement[],\n      };\n    }\n\n    const validatedData = validateData(parsedData);\n\n    if (!validatedData.success) {\n      throw new Error(validatedData.error.issues.map(i => `${i.path}: ${i.message}`).join('\\n'));\n    }\n\n    const importedData = validatedData.data as DataExchangeFormat;\n\n    if (!parsedData.schema || parsedData.schema !== SCHEMA_VERSION) {\n      throw new Error('Unsupported Schema version');\n    }\n\n    return importedData;\n  }, []);\n\n  const importData = useCallback(async (data: DataExchangeFormat) => {\n\n    const calculatedThreats = recalculateThreatData(data.threats || []);\n\n    if (data.schema > 0) {\n      setApplicationInfo(data.applicationInfo || {});\n      setArchitectureInfo(data.architecture || {});\n      setDataflowInfo(data.dataflow || {});\n      setAssumptionList(data.assumptions || []);\n      setMitigationList(data.mitigations || []);\n      setStatementList(calculatedThreats);\n      setAssumptionLinkList(data.assumptionLinks || []);\n      setMitigationLinkList(data.mitigationLinks || []);\n      setBrainstormData(data.brainstorm || {\n        assumptions: [],\n        threatSources: [],\n        threatPrerequisites: [],\n        threatActions: [],\n        threatImpacts: [],\n        assets: [],\n        mitigations: [],\n      });\n    } else {\n      // Support ListOnly mode\n      setStatementList(data.threats || []);\n    }\n  }, [\n    setApplicationInfo,\n    setArchitectureInfo,\n    setDataflowInfo,\n    setAssumptionList,\n    setMitigationList,\n    setStatementList,\n    setAssumptionLinkList,\n    setMitigationLinkList,\n  ]);\n\n  return {\n    getWorkspaceData,\n    exportAll,\n    exportSelectedThreats,\n    parseImportedData,\n    importData,\n  };\n};\n\nexport default useImportExport;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback, useState } from 'react';\nimport { AssumptionLink } from '../../../../customTypes';\nimport { LocalStateContextProviderBaseProps } from '../../../types';\nimport { AssumptionLinksContext } from '../../context';\nimport { AssumptionLinksContextProviderProps } from '../../types';\nimport useAssumptionLinks from '../../useAssumptionLinks';\n\nconst AssumptionLinksLocalStorageContextProvider: FC<PropsWithChildren<\nAssumptionLinksContextProviderProps & LocalStateContextProviderBaseProps<AssumptionLink[]>>> = ({\n  children,\n  initialValue,\n}) => {\n  const [assumptionLinkList, setAssumptionLinkList] = useState<AssumptionLink[]>(initialValue || []);\n\n  const {\n    handlRemoveAssumptionLink,\n    handleRemoveAssumptionLinks,\n    handlRemoveAssumptionLinksByAssumptionId,\n    handlRemoveAssumptionLinksByLinkedEntityId,\n    handleAddAssumptionLink,\n    handleAddAssumptionLinks,\n    handleGetLinkedAssumptionLinks,\n    handleGetAssumptionEntityLinks,\n  } = useAssumptionLinks(assumptionLinkList, setAssumptionLinkList);\n\n  const handleRemoveAllAssumptionLinks = useCallback(async () => {\n    setAssumptionLinkList([]);\n  }, []);\n\n  const handleDeleteWorkspace = useCallback(async (_workspaceId: string) => {\n    setAssumptionLinkList([]);\n  }, []);\n\n  return (<AssumptionLinksContext.Provider value={{\n    assumptionLinkList,\n    setAssumptionLinkList,\n    getLinkedAssumptionLinks: handleGetLinkedAssumptionLinks,\n    getAssumptionEntityLinks: handleGetAssumptionEntityLinks,\n    removeAssumptionLink: handlRemoveAssumptionLink,\n    removeAssumptionLinksByAssumptionId: handlRemoveAssumptionLinksByAssumptionId,\n    removeAssumptionLinksByLinkedEntityId: handlRemoveAssumptionLinksByLinkedEntityId,\n    removeAssumptionLinks: handleRemoveAssumptionLinks,\n    addAssumptionLink: handleAddAssumptionLink,\n    addAssumptionLinks: handleAddAssumptionLinks,\n    removeAllAssumptionLinks: handleRemoveAllAssumptionLinks,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </AssumptionLinksContext.Provider>);\n};\n\nexport default AssumptionLinksLocalStorageContextProvider;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, useEffect, useState } from 'react';\nimport { useAssumptionLinksContext } from '../../../contexts/AssumptionLinksContext/context';\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\nimport { AssumptionLink } from '../../../customTypes';\nimport ThreatLinkView from '../../threats/ThreatLinkView';\n\nexport interface AssumptionThreatLinkProps {\n  assumptionId: string;\n}\n\nconst AssumptionThreatLinkComponent: FC<AssumptionThreatLinkProps> = ({\n  assumptionId,\n}) => {\n  const { statementList } = useThreatsContext();\n  const [assumptionLinks, setAssumptionLinks] = useState<AssumptionLink[]>([]);\n\n  const { getAssumptionEntityLinks } = useAssumptionLinksContext();\n\n  useEffect(() => {\n    const _assumptionLinks = getAssumptionEntityLinks(assumptionId, 'Threat');\n    setAssumptionLinks(_assumptionLinks || []);\n  }, [getAssumptionEntityLinks, assumptionId]);\n\n  const {\n    addAssumptionLink,\n    removeAssumptionLink,\n  } = useAssumptionLinksContext();\n\n  return (<ThreatLinkView\n    threatList={statementList}\n    linkedThreatIds={assumptionLinks.map(ml => ml.linkedId)}\n    onAddThreatLink={(threatId) => addAssumptionLink({\n      linkedId: threatId,\n      assumptionId,\n      type: 'Threat',\n    })}\n    onRemoveThreatLink={(threatId) => removeAssumptionLink(assumptionId, threatId)}\n  />);\n};\n\nexport default AssumptionThreatLinkComponent;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport { default as ApplicationInfoContext } from './ApplicationContext';\nexport { useApplicationInfoContext } from './ApplicationContext/context';\nexport { default as ArchitectureInfoContext } from './ArchitectureContext';\nexport { useArchitectureInfoContext } from './ArchitectureContext/context';\nexport { default as AssumptionLinksContext } from './AssumptionLinksContext';\nexport { useAssumptionLinksContext } from './AssumptionLinksContext/context';\nexport { default as AssumptionsContext } from './AssumptionsContext';\nexport { useAssumptionsContext } from './AssumptionsContext/context';\nexport { default as DataflowInfoContext } from './DataflowContext';\nexport { useDataflowInfoContext } from './DataflowContext/context';\nexport { default as GlobalSetupContext } from './GlobalSetupContext';\nexport { useGlobalSetupContext } from './GlobalSetupContext/context';\nexport { default as MitigationLinksContext } from './MitigationLinksContext';\nexport { useMitigationLinksContext } from './MitigationLinksContext/context';\nexport { default as MitigationsContext } from './MitigationsContext';\nexport { useMitigationsContext } from './MitigationsContext/context';\nexport { default as ThreatsContext } from './ThreatsContext';\nexport { useThreatsContext } from './ThreatsContext/context';\nexport { default as WorkspacesContext } from './WorkspacesContext';\nexport { useWorkspacesContext } from './WorkspacesContext/context';\nexport { default as ThreatPacksContext } from './ThreatPacksContext';\nexport { useThreatPacksContext } from './ThreatPacksContext/context';\nexport { default as MitigationPacksContext } from './MitigationPacksContext';\nexport { useMitigationPacksContext } from './MitigationPacksContext/context';\nexport { default as WorkspaceContextAggregator } from './WorkspaceContextAggregator';\nexport { default as ContextAggregator } from './ContextAggregator';\nexport { default as WorkspaceExamplesContext } from './WorkspaceExamplesContext';\nexport { default as BrainstormContextProvider } from './BrainstormContext';\nexport { useBrainstormContext } from './BrainstormContext/context';\nexport { PromotionHandlers, ThreatCreationHandlers } from './BrainstormContext';","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useMemo } from 'react';\nimport { EntityBase, MetadataCommentSchema } from '../../../customTypes';\nimport MarkdownEditor from '../MarkdownEditor';\n\nexport interface CommentsEditProps<T> {\n  entity: T;\n  onEditEntity: (entity: T, key: string, value: string | string[] | undefined) => void;\n}\n\nconst CommentsEdit = <T extends EntityBase>({\n  entity,\n  onEditEntity,\n}: CommentsEditProps<T>) => {\n  const comments = useMemo(() => {\n    return (entity.metadata?.find(m => m.key === 'Comments')?.value as string) || '';\n  }, [entity.metadata]);\n\n  return (<MarkdownEditor\n    label='Comments'\n    value={comments}\n    onChange={(value) => onEditEntity(entity, 'Comments', value)}\n    allowedHeadingLevels={[4, 5]}\n    validateData={MetadataCommentSchema.safeParse}\n  />);\n};\n\nexport default CommentsEdit;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Box from '@cloudscape-design/components/box';\nimport Button from '@cloudscape-design/components/button';\nimport ButtonDropdown, { ButtonDropdownProps } from '@cloudscape-design/components/button-dropdown';\nimport ContentLayoutComponent from '@cloudscape-design/components/content-layout';\nimport Header, { HeaderProps } from '@cloudscape-design/components/header';\nimport { CancelableEventHandler } from '@cloudscape-design/components/internal/events';\nimport Popover from '@cloudscape-design/components/popover';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport Spinner from '@cloudscape-design/components/spinner';\nimport StatusIndicator from '@cloudscape-design/components/status-indicator';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport { FC, useEffect, useCallback, useState, ReactNode, PropsWithChildren, useMemo } from 'react';\nimport { DataExchangeFormat, HasContentDetails, ViewNavigationEvent } from '../../../../../customTypes';\nimport printStyles from '../../../../../styles/print';\nimport convertToMarkdown from '../../../../../utils/convertToMarkdown';\nimport convertToYaml from '../../../../../utils/convertToYaml';\nimport {\n  downloadContentAsMarkdown,\n  downloadContentAsWordDocx,\n  downloadContentAsYaml,\n  downloadObjectAsJson,\n} from '../../../../../utils/downloadContent';\nimport MarkdownViewer from '../../../../generic/MarkdownViewer';\n\n\nconst styles = {\n  text: css({\n    display: 'flex',\n    alignItems: 'center',\n    height: '100%',\n  }),\n  nextStepsContainer: css({\n    borderTop: `2px solid ${awsui.colorBorderDividerDefault}`,\n    paddingTop: awsui.spaceScaledS,\n  }),\n  noData: css({\n    textAlign: 'center',\n    width: '100%',\n  }),\n};\n\nconst ContentLayout: FC<PropsWithChildren<HeaderProps & {\n  isPreview?: boolean;\n}>> = ({\n  isPreview,\n  children,\n  ...props\n}) => {\n  if (isPreview) {\n    return <>{children}</>;\n  }\n\n  return (<ContentLayoutComponent\n    disableOverlap\n    headerVariant=\"high-contrast\"\n    header={\n      <Header {...props} />\n    }\n  >\n    {children}\n  </ContentLayoutComponent>);\n};\n\nexport interface ThreatModelViewProps extends ViewNavigationEvent {\n  isPreview?: boolean;\n  showPrintDownloadButtons?: boolean;\n  composerMode: string;\n  data: DataExchangeFormat;\n  downloadFileName?: string;\n  onPrintButtonClick?: () => void;\n  hasContentDetails?: HasContentDetails;\n  convertToDocx?: (data: DataExchangeFormat) => Promise<Blob>;\n}\n\nconst ThreatModelView: FC<ThreatModelViewProps> = ({\n  data,\n  isPreview = false,\n  showPrintDownloadButtons = true,\n  composerMode,\n  downloadFileName,\n  onPrintButtonClick,\n  hasContentDetails,\n  convertToDocx,\n  ...props\n}) => {\n  const [content, setContent] = useState('');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const updateContent = async () => {\n      setLoading(true);\n      const processedContent = await convertToMarkdown(data, composerMode);\n      setContent(processedContent);\n      setLoading(false);\n    };\n\n    updateContent().catch(err => console.log('Error', err));\n  }, [data, composerMode, hasContentDetails]);\n\n  const handleCopyMarkdown = useCallback(async () => {\n    await navigator.clipboard.writeText(content);\n  }, [content]);\n\n  const handleDownloadMarkdown = useCallback(() => {\n    downloadFileName && downloadContentAsMarkdown(content, downloadFileName);\n  }, [content, downloadFileName]);\n\n  const handleDownloadWorddocx = useCallback(async () => {\n    const docxBlob = await convertToDocx?.(data);\n    if (docxBlob) {\n      downloadFileName && downloadContentAsWordDocx(docxBlob, downloadFileName);\n    }\n  }, [data, downloadFileName, convertToDocx]);\n\n  const handleDownloadJson = useCallback(() => {\n    downloadFileName && downloadObjectAsJson(data, downloadFileName);\n  }, [data, downloadFileName]);\n\n  const handleDownloadYaml = useCallback(() => {\n    const yamlContent = convertToYaml(data);\n    downloadFileName && downloadContentAsYaml(yamlContent, downloadFileName);\n  }, [data, downloadFileName]);\n\n  const handleDownloadClick: CancelableEventHandler<ButtonDropdownProps.ItemClickDetails> = useCallback(async ({ detail }) => {\n    switch (detail.id) {\n      case 'docx':\n        await handleDownloadWorddocx();\n        break;\n      case 'markdown':\n        handleDownloadMarkdown();\n        break;\n      case 'json':\n        handleDownloadJson();\n        break;\n      case 'yaml':\n        handleDownloadYaml();\n        break;\n      default:\n        console.log('Unknown command', detail);\n    }\n  }, [handleDownloadMarkdown, handleDownloadWorddocx, handleDownloadJson, handleDownloadYaml]);\n\n  const getNextStepButtons = useCallback(() => {\n    const buttons: ReactNode[] = [];\n    if (!hasContentDetails?.applicationInfo) {\n      buttons.push(<Button key='addApplicationInfo' onClick={props.onApplicationInfoView}>Add Application Info</Button>);\n    }\n    if (!hasContentDetails?.architecture) {\n      buttons.push(<Button key='addArchitecture' onClick={props.onArchitectureView}>Add Architecture</Button>);\n    }\n    if (!hasContentDetails?.dataflow) {\n      buttons.push(<Button key='addDataflow' onClick={props.onDataflowView}>Add Dataflow</Button>);\n    }\n    if (!hasContentDetails?.assumptions) {\n      buttons.push(<Button key='addAssumptions' onClick={props.onAssumptionListView}>Add Assumptions</Button>);\n    }\n    if (!hasContentDetails?.threats) {\n      buttons.push(<Button key='addThreats' onClick={() => props.onThreatListView?.()}>Add Threats</Button>);\n    }\n    if (!hasContentDetails?.mitigations) {\n      buttons.push(<Button key='addMitigations' onClick={() => props.onMitigationListView?.()}>Add Mitigations</Button>);\n    }\n    const len = buttons.length;\n    return buttons.flatMap((b, index) => index === len - 1 ? <Box>{b}</Box> : [b, <Box fontWeight=\"bold\" css={styles.text}>or</Box>]);\n  }, [hasContentDetails, props]);\n\n  const actions = useMemo(() => <SpaceBetween direction=\"horizontal\" size=\"xs\">\n    <Popover\n      dismissButton={false}\n      position=\"top\"\n      size=\"small\"\n      triggerType=\"custom\"\n      content={\n        <StatusIndicator type=\"success\">\n          Content copied\n        </StatusIndicator>\n      }\n    >\n      <Button\n        onClick={handleCopyMarkdown}>\n        Copy as Markdown\n      </Button>\n    </Popover>\n    {downloadFileName && showPrintDownloadButtons && <ButtonDropdown\n      items={[\n        { text: 'Download as Markdown File', id: 'markdown' },\n        ...(convertToDocx ? [{ text: 'Download as Word - Docx File', id: 'docx' }] : []),\n        { text: 'Download as JSON File', id: 'json' },\n      ]}\n      onItemClick={handleDownloadClick}\n    >\n      Download\n    </ButtonDropdown>}\n    {showPrintDownloadButtons && <Button variant=\"primary\" onClick={onPrintButtonClick || (() => window.print())}>Print</Button>}\n  </SpaceBetween>, [handleCopyMarkdown, downloadFileName, showPrintDownloadButtons, convertToDocx, handleDownloadClick, onPrintButtonClick]);\n\n  return (<ContentLayout\n    isPreview={isPreview}\n    actions={actions}>\n    <SpaceBetween direction='vertical' size='s'>\n      {isPreview && <div css={printStyles.hiddenPrint}>\n        <Header\n          actions={actions}\n        >\n        </Header>\n      </div>}\n      {content ?\n        (<MarkdownViewer allowHtml>{content}</MarkdownViewer>) :\n        (<Box fontSize='body-m' margin='xxl' fontWeight=\"bold\" css={styles.noData}>{loading ? <Spinner /> : 'No data available'}</Box>)\n      }\n      {!isPreview && composerMode === 'Full' && hasContentDetails && Object.values(hasContentDetails).some(x => !x) && <div css={printStyles.hiddenPrint}>\n        <Box css={styles.nextStepsContainer}>\n          <SpaceBetween direction=\"horizontal\" size=\"xs\">\n            <Box fontWeight=\"bold\" css={styles.text}>Suggested next steps: </Box>\n            {getNextStepButtons()}\n          </SpaceBetween>\n        </Box>\n      </div>}\n    </SpaceBetween>\n  </ContentLayout>);\n};\n\nexport default ThreatModelView;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useContext, createContext } from 'react';\nimport { ArchitectureInfo } from '../../customTypes';\n\nexport interface DataflowInfoContextApi {\n  dataflowInfo: ArchitectureInfo;\n  setDataflowInfo: React.Dispatch<React.SetStateAction<ArchitectureInfo>>;\n  removeDataflowInfo: () => Promise<void>;\n  onDeleteWorkspace: (workspaceId: string) => Promise<void>;\n}\n\nconst initialState: DataflowInfoContextApi = {\n  dataflowInfo: {},\n  setDataflowInfo: () => { },\n  removeDataflowInfo: () => Promise.resolve(),\n  onDeleteWorkspace: () => Promise.resolve(),\n};\n\nexport const DataflowInfoContext = createContext<DataflowInfoContextApi>(initialState);\n\nexport const useDataflowInfoContext = () => useContext(DataflowInfoContext);","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useCallback, useEffect } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { DEFAULT_WORKSPACE_ID } from '../../configs/constants';\nimport { EVENT_WORKSPACE_CHANGED } from '../../configs/events';\nimport { Workspace } from '../../customTypes';\nimport isWorkspaceExample from '../../utils/isWorkspaceExample';\nimport { useWorkspaceExamplesContext } from '../WorkspaceExamplesContext';\n\nconst useWorkspaces = (\n  workspaceList: Workspace[],\n  setWorkspaceList: React.Dispatch<React.SetStateAction<Workspace[]>>,\n  currentWorkspace: Workspace | null,\n  setCurrentWorkspace: React.Dispatch<React.SetStateAction<Workspace | null>>,\n  onWorkspaceChanged?: (workspaceName: string) => void,\n) => {\n  const { workspaceExamples } = useWorkspaceExamplesContext();\n\n  const getWorkspace = useCallback((toBeSwitchedWorkspaceId: string | null) => {\n    const isExample = isWorkspaceExample(toBeSwitchedWorkspaceId);\n    if (isExample) {\n      return workspaceExamples.find(w => w.id === toBeSwitchedWorkspaceId) || null;\n    }\n\n    if (toBeSwitchedWorkspaceId && toBeSwitchedWorkspaceId !== DEFAULT_WORKSPACE_ID) {\n      return workspaceList.find(w => w.id === toBeSwitchedWorkspaceId) || null;\n    }\n\n    return null;\n  }, [\n    workspaceExamples,\n    workspaceList,\n  ]);\n\n  const handleSwitchWorkspace = useCallback((toBeSwitchedWorkspace: string | null | Workspace) => {\n    const workspace = typeof toBeSwitchedWorkspace === 'string' ? getWorkspace(toBeSwitchedWorkspace) : toBeSwitchedWorkspace;\n    setCurrentWorkspace(workspace);\n    onWorkspaceChanged?.(workspace?.name || DEFAULT_WORKSPACE_ID);\n  }, [onWorkspaceChanged, getWorkspace]);\n\n  const handleAddWorkspace = useCallback(async (workspaceName: string,\n    storageType?: Workspace['storageType'],\n    metadata?: Workspace['metadata']) => {\n    const newWorkspace = {\n      id: uuidv4(),\n      name: workspaceName,\n      storageType,\n      metadata,\n    };\n    setWorkspaceList(prev => [...prev, newWorkspace]);\n    setCurrentWorkspace(newWorkspace);\n    onWorkspaceChanged?.(newWorkspace.name);\n    return newWorkspace;\n  }, [onWorkspaceChanged]);\n\n  const handleRemoveWorkspace = useCallback(async (id: string) => {\n    setWorkspaceList(prev => prev.filter(p => p.id !== id));\n  }, []);\n\n  const handleRenameWorkspace = useCallback(async (id: string, newWorkspaceName: string) => {\n    setWorkspaceList(prev => {\n      const index = prev.findIndex(w => w.id === id);\n      const newList = [...index < 1 ? [] : prev.slice(0, index), {\n        id,\n        name: newWorkspaceName,\n      }, ...prev.slice(index + 1)];\n      return newList;\n    });\n\n    setCurrentWorkspace({\n      id,\n      name: newWorkspaceName,\n    });\n  }, []);\n\n  useEffect(() => {\n    window.threatcomposer?.dispatchEvent?.(\n      new CustomEvent(EVENT_WORKSPACE_CHANGED, {\n        detail: {\n          workspace: currentWorkspace,\n        },\n      }));\n  }, [currentWorkspace]);\n\n  return {\n    handleSwitchWorkspace,\n    handleAddWorkspace,\n    handleRemoveWorkspace,\n    handleRenameWorkspace,\n  };\n};\n\nexport default useWorkspaces;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport HeaderComponent from '@cloudscape-design/components/header';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { FC, useMemo } from 'react';\nimport { ComposerMode, TemplateThreatStatement } from '../../../customTypes';\n\nexport interface HeaderProps {\n  composerMode: ComposerMode;\n  saveButtonText: string;\n  statement: TemplateThreatStatement;\n  onCancel?: () => void;\n  onComplete?: () => void;\n  onStartOver?: () => void;\n}\n\nconst Header: FC<HeaderProps> = ({\n  statement,\n  saveButtonText,\n  onComplete,\n  onCancel,\n  onStartOver,\n}) => {\n  const actions = useMemo(() => {\n    return (\n      <SpaceBetween direction=\"horizontal\" size=\"xs\">\n        <Button onClick={onCancel}>Threat list</Button>\n        {onStartOver && <Button onClick={onStartOver}>Start over</Button>}\n        <Button variant=\"primary\" onClick={onComplete} disabled={!statement.statement}>\n          {saveButtonText}\n        </Button>\n      </SpaceBetween>);\n  }, [onComplete, onCancel, onStartOver]);\n\n  return (\n    <HeaderComponent variant='h1' actions={actions}>{!statement.numericId || statement.numericId === -1 ? undefined : `Threat ${statement.numericId}`}</HeaderComponent>\n  );\n};\n\nexport default Header;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Button from '@cloudscape-design/components/button';\nimport ContentLayout from '@cloudscape-design/components/content-layout';\nimport Header from '@cloudscape-design/components/header';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport { useMemo, FC, useCallback, useState } from 'react';\nimport GeneralInfo from './components/GeneralInfo';\nimport { useThreatPacksContext } from '../../../contexts/ThreatPacksContext';\nimport { TemplateThreatStatement } from '../../../customTypes/threats';\nimport Table, { ColumnDefinition } from '../../generic/Table';\n\nexport interface ThreatPackProp {\n  threatPackId: string;\n  onEditThreat?: (threatPackId: string, threat: TemplateThreatStatement) => void;\n}\n\nconst ThreatPack: FC<ThreatPackProp> = ({\n  threatPackId,\n  onEditThreat,\n}) => {\n  const { threatPacks, threatPackUsage, addThreats } = useThreatPacksContext();\n\n  const threatPack = useMemo(() => {\n    return threatPacks.find(x => x.id === threatPackId);\n  }, []);\n\n  const [selectedItems, setSelectedItems] = useState<TemplateThreatStatement[]>([]);\n\n  const totalSelectedItems = useMemo(() => {\n    // Merge the threatPackUsage and current selectedItems\n    if (threatPack) {\n      const usedThreatPackThreatIds = threatPackId && threatPackUsage[threatPackId] ? Object.keys(threatPackUsage[threatPackId]) : [];\n      const currentSelectedItems = (threatPack.threats || []).filter(t => usedThreatPackThreatIds.includes(t.id)) || [];\n      return [...currentSelectedItems, ...selectedItems.filter(si => !currentSelectedItems.some(csi => csi.id === si.id))];\n    }\n\n    return [];\n  }, [threatPack, threatPackUsage, selectedItems]);\n\n  const handleAddToWorkspace = useCallback(async () => {\n    await addThreats(threatPackId, selectedItems);\n    setSelectedItems([]);\n  }, [threatPackId, selectedItems]);\n\n  const colDef: ColumnDefinition<TemplateThreatStatement>[] = useMemo(() => [\n    {\n      id: 'statement',\n      header: 'Threat',\n      cell: (data) => data.statement,\n      sortingField: 'statement',\n      minWidth: 500,\n    },\n    {\n      id: 'threatSource',\n      header: 'Threat source',\n      cell: (data) => data.threatSource,\n      sortingField: 'threatSource',\n    },\n    {\n      id: 'prerequisites',\n      header: 'Prerequisites',\n      cell: (data) => data.prerequisites,\n      sortingField: 'prerequisites',\n    },\n    {\n      id: 'threatImpact',\n      header: 'Threat impact',\n      cell: (data) => data.threatImpact,\n      sortingField: 'threatImpact',\n    },\n    {\n      id: 'threatAction',\n      header: 'Threat action',\n      cell: (data) => data.threatAction,\n      sortingField: 'threatAction',\n    },\n    {\n      id: 'impactedGoal',\n      header: 'Impacted goal',\n      cell: (data) => (<TextContent>\n        <ul>{data.impactedGoal?.map((x, index) => <li key={index}>{x}</li>)}</ul>\n      </TextContent>),\n      sortingField: 'impactedGoal',\n    },\n    {\n      id: 'impactedAssets',\n      header: 'Impacted assets',\n      cell: (data) => (<TextContent>\n        <ul>{data.impactedAssets?.map((x, index) => <li key={index}>{x}</li>)}</ul>\n      </TextContent>),\n      sortingField: 'impactedAssets',\n    },\n    {\n      id: 'actions',\n      header: 'Actions',\n      cell: (data) => (\n        <Button\n          variant=\"inline-link\"\n          onClick={() => onEditThreat?.(threatPackId, data)}\n        >\n          Open in editor\n        </Button>\n      ),\n      minWidth: 170,\n    },\n  ], [threatPackId]);\n\n  const actions = useMemo(() => {\n    return (<SpaceBetween direction='horizontal' size='s'>\n      <Button variant='primary'\n        onClick={handleAddToWorkspace}\n        disabled={selectedItems.length === 0\n          || selectedItems.every(i => !!threatPackUsage[i.id])\n        }>\n        Add to workspace\n      </Button>\n    </SpaceBetween>);\n  }, [handleAddToWorkspace, selectedItems, threatPackUsage]);\n\n  const isItemDisabled = useCallback((item: TemplateThreatStatement) => {\n    return !!threatPackUsage?.[threatPackId]?.[item.id];\n  }, [threatPackId, threatPackUsage]);\n\n  if (!threatPack) {\n    return null;\n  }\n\n  return (<ContentLayout\n    headerVariant=\"high-contrast\"\n    header={\n      <Header\n        variant=\"h2\"\n      >\n        Threat Pack - {threatPack.name}\n      </Header>\n    }\n  >\n    <SpaceBetween direction='vertical' size='s'>\n      <GeneralInfo threatPack={threatPack} />\n      <Table\n        columnDefinitions={colDef}\n        actions={actions}\n        header=\"Threats\"\n        items={threatPack.threats || []}\n        isItemDisabled={isItemDisabled}\n        selectedItems={totalSelectedItems}\n        onSelectionChange={({ detail }) => setSelectedItems([...detail.selectedItems])}\n        resizableColumns\n        stickyColumns={{\n          first: 1,\n        }}\n      /></SpaceBetween>\n  </ContentLayout>);\n};\n\nexport default ThreatPack;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport CloudscapeAutosuggest, { AutosuggestProps as CloudscapeAutosuggestProps } from '@cloudscape-design/components/autosuggest';\nimport FormField, { FormFieldProps } from '@cloudscape-design/components/form-field';\nimport { BaseKeyDetail, CancelableEventHandler } from '@cloudscape-design/components/internal/events';\nimport React, { FC, useCallback, useState } from 'react';\nimport { z } from 'zod';\nimport useContentValidation from '../../../hooks/useContentValidation';\n\nexport interface AutosuggestProps extends FormFieldProps, Omit<CloudscapeAutosuggestProps, 'errorText'> {\n  ref?: React.LegacyRef<any>;\n  validateData?: (newValue: string) => z.ZodSafeParseResult<string | undefined>;\n}\n\nconst Autosuggest: FC<AutosuggestProps> = React.forwardRef<CloudscapeAutosuggestProps.Ref, AutosuggestProps>(({\n  onChange,\n  value,\n  validateData,\n  errorText: _errorText,\n  ...props\n},\nref) => {\n  const [resetErrorText, setResetErrorText] = useState<boolean>();\n  const { tempValue, errorText, handleChange } = useContentValidation(value, onChange, validateData);\n\n  const handleKeyDown: CancelableEventHandler<BaseKeyDetail> = useCallback((event) => {\n    if (event.detail.keyCode === 8 && !value && errorText) {\n      // When the value is empty, press backspace to reset the errorText.\n      setResetErrorText(true);\n    } else {\n      setResetErrorText(false);\n    }\n\n    props.onKeyDown?.(event);\n  },\n  [props.onKeyDown, errorText, value]);\n\n  return (\n    <FormField\n      {...props}\n      errorText={resetErrorText ? undefined : errorText}\n    >\n      <CloudscapeAutosuggest\n        {...props}\n        ref={ref}\n        value={errorText ? value : tempValue}\n        onChange={event =>\n          handleChange(event)\n        }\n        onKeyDown={handleKeyDown}\n      />\n    </FormField>);\n});\n\nexport default Autosuggest;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren } from 'react';\nimport ArchitectureLocalStateContextProvider from './components/LocalStateContextProvider';\nimport ArchitectureLocalStorageContextProvider from './components/LocalStorageContextProvider';\nimport { useArchitectureInfoContext } from './context';\nimport { ArchitectureContextProviderProps } from './types';\nimport { STORAGE_LOCAL_STATE } from '../../configs';\nimport useWorkspaceStorage from '../../hooks/useWorkspaceStorage';\n\nconst ArchitectureContextProvider: FC<PropsWithChildren<ArchitectureContextProviderProps>> = (props) => {\n  const { storageType, value } = useWorkspaceStorage(props.workspaceId);\n\n  return storageType === STORAGE_LOCAL_STATE ?\n    (<ArchitectureLocalStateContextProvider\n      key={props.workspaceId}\n      initialValue={value?.architecture}\n      {...props} />) :\n    (<ArchitectureLocalStorageContextProvider key={props.workspaceId} {...props} />);\n};\n\nexport default ArchitectureContextProvider;\n\nexport {\n  useArchitectureInfoContext,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport { FormField, FormFieldProps } from '@cloudscape-design/components';\nimport { colorTextStatusError, borderRadiusInput, colorBorderInputDefault, colorBorderInputFocused } from '@cloudscape-design/design-tokens';\nimport { Mode } from '@cloudscape-design/global-styles';\nimport { css } from '@emotion/react';\nimport { MDXEditor, MDXEditorMethods, DiffSourceToggleWrapper, ListsToggle, toolbarPlugin, diffSourcePlugin, linkPlugin, thematicBreakPlugin, linkDialogPlugin, UndoRedo, headingsPlugin, codeBlockPlugin, codeMirrorPlugin, markdownShortcutPlugin, BoldItalicUnderlineToggles, BlockTypeSelect, CodeToggle, CreateLink, InsertCodeBlock, InsertImage, imagePlugin, InsertTable, tablePlugin, listsPlugin, HEADING_LEVEL } from '@mdxeditor/editor';\nimport { FC, useState, useRef } from 'react';\nimport { useContentValidation } from '../../../hooks';\nimport { TextAreaProps } from '../Textarea';\nimport { useThemeContext } from '../ThemeProvider';\n\nimport '@mdxeditor/editor/style.css';\n\nconst styles = {\n  default: css({\n    'borderWidth': '2px',\n    'borderStyle': 'solid',\n    'borderRadius': ` ${borderRadiusInput}`,\n    'borderColor': colorBorderInputDefault,\n    '&:focus-within': {\n      borderColor: colorBorderInputFocused,\n    },\n  }),\n  error: css({\n    '&&': { // Double ampersand for higher specificity\n      color: colorTextStatusError,\n      borderColor: colorTextStatusError,\n    },\n  }),\n  hideAutocomplete: css({\n    // Workaround to hide the HTML tag auto-complete tooltip from MDXEditor\n    '&&& .cm-tooltip-autocomplete, html body .cm-tooltip.cm-tooltip-autocomplete': {\n      display: 'none !important',\n      opacity: 0,\n      visibility: 'hidden',\n      pointerEvents: 'none',\n    },\n  }),\n};\n\nexport interface MarkdownEditorProps extends FormFieldProps {\n  onChange: (value: string) => void;\n  value: string;\n  validateData?: TextAreaProps['validateData'];\n  allowedHeadingLevels?: HEADING_LEVEL[];\n  focus?: boolean;\n}\n\nconst ALLOWED_HEADING_LEVELS: HEADING_LEVEL[] = [3, 4, 5, 6];\n\nconst MarkdownEditor: FC<MarkdownEditorProps> = ({\n  value,\n  onChange,\n  validateData,\n  allowedHeadingLevels = ALLOWED_HEADING_LEVELS,\n  focus = false,\n  ...props\n}) => {\n  const [previousValue] = useState(value);\n  const mdxEditorRef = useRef<MDXEditorMethods>(null);\n  const { theme } = useThemeContext();\n  const { tempValue, errorText, handleChange } = useContentValidation(value, onChange, validateData);\n\n  return (<FormField\n    {...props}\n    errorText={errorText}\n  >\n    <div css={[\n      styles.default, errorText && styles.error, // Put error last so it overrides previous styles\n    ]}>\n\n      <MDXEditor\n        ref={mdxEditorRef}\n        markdown={errorText ? value : tempValue}\n        className={theme == Mode.Dark ? 'dark-theme dark-editor' : 'light-theme light-editor'}\n        css={styles.hideAutocomplete}\n        autoFocus={focus}\n        suppressHtmlProcessing={true}\n        onChange={handleChange}\n        toMarkdownOptions={{\n          emphasis: '_',\n          bullet: '-',\n          rule: '_',\n        }}\n        plugins={[\n          toolbarPlugin({\n            toolbarContents: () => (\n              <DiffSourceToggleWrapper>\n                <BoldItalicUnderlineToggles options={['Bold', 'Italic']} />\n                <BlockTypeSelect />\n                <CodeToggle />\n                <CreateLink />\n                <InsertImage />\n                <InsertTable />\n                <ListsToggle options={['bullet', 'number']} />\n                <InsertCodeBlock />\n                <UndoRedo />\n              </DiffSourceToggleWrapper>\n            ),\n          }),\n          codeBlockPlugin({ defaultCodeBlockLanguage: '' }),\n          codeMirrorPlugin({\n            codeBlockLanguages: {\n              '': 'text',\n            },\n          }),\n          tablePlugin(),\n          diffSourcePlugin({ viewMode: 'rich-text', diffMarkdown: previousValue }),\n          markdownShortcutPlugin(),\n          listsPlugin(),\n          headingsPlugin({ allowedHeadingLevels }),\n          linkPlugin( { disableAutoLink: true }),\n          linkDialogPlugin(),\n          imagePlugin({ disableImageResize: true }),\n          thematicBreakPlugin(),\n        ]\n        } />\n    </div>\n  </FormField>);\n};\n\nexport default MarkdownEditor;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Button from '@cloudscape-design/components/button';\nimport Container from '@cloudscape-design/components/container';\nimport Grid from '@cloudscape-design/components/grid';\nimport Multiselect from '@cloudscape-design/components/multiselect';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextFilter from '@cloudscape-design/components/text-filter';\nimport { FC, useCallback, useMemo, useState, useRef } from 'react';\nimport { STATUS_NOT_SET } from '../../../configs';\nimport { useAssumptionLinksContext, useMitigationLinksContext } from '../../../contexts';\nimport { useMitigationsContext } from '../../../contexts/MitigationsContext/context';\nimport { AssumptionLink, Mitigation, MitigationLink, MitigationListFilter } from '../../../customTypes';\nimport mitigationStatus from '../../../data/status/mitigationStatus.json';\nimport ContentLayout from '../../generic/ContentLayout';\nimport { GenericEntityCreationCardRefProps } from '../../generic/GenericEntityCreationCard';\nimport LinkedEntityFilter, { ALL, WITHOUT_NO_LINKED_ENTITY, WITH_LINKED_ENTITY } from '../../generic/LinkedEntityFilter';\nimport TagSelector from '../../generic/TagSelector';\nimport MitigationCard from '../MitigationCard';\nimport MitigationCreationCard from '../MitigationCreationCard';\n\nconst ALL_STATUS = [...mitigationStatus.map(ia => ({\n  label: ia.label,\n  value: ia.value,\n})), {\n  label: 'Not Set',\n  value: STATUS_NOT_SET,\n}];\n\nexport interface MitigationListProps {\n  initialFilter?: MitigationListFilter;\n}\n\nconst MitigationList: FC<MitigationListProps> = ({\n  initialFilter,\n}) => {\n  const {\n    mitigationList,\n    removeMitigation,\n    saveMitigation,\n  } = useMitigationsContext();\n\n  const {\n    addMitigationLinks,\n    mitigationLinkList,\n    removeMitigationLinksByMitigationId,\n  } = useMitigationLinksContext();\n\n  const {\n    addAssumptionLinks,\n    assumptionLinkList,\n    removeAssumptionLinksByLinkedEntityId,\n  } = useAssumptionLinksContext();\n\n  const [filteringText, setFilteringText] = useState('');\n\n  const [\n    selectedTags,\n    setSelectedTags,\n  ] = useState<string[]>([]);\n\n  const [\n    selectedStatus,\n    setSelectedStatus,\n  ] = useState<string[]>(initialFilter?.status || []);\n\n  const [\n    selectedLinkedThreatsFilter,\n    setSelectedLinkedThreatsFilter,\n  ] = useState(ALL);\n\n  const [\n    selectedLinkedAssumptionsFilter,\n    setSelectedLinkedAssumptionsFilter,\n  ] = useState(ALL);\n\n\n  const handleRemove = useCallback(async (mitigationId: string) => {\n    removeMitigation(mitigationId);\n    await removeAssumptionLinksByLinkedEntityId(mitigationId);\n    await removeMitigationLinksByMitigationId(mitigationId);\n  }, [removeAssumptionLinksByLinkedEntityId, removeMitigation, removeMitigationLinksByMitigationId]);\n\n  const hasNoFilter = useMemo(() => {\n    return (filteringText === ''\n      && selectedLinkedAssumptionsFilter === ALL\n      && selectedLinkedThreatsFilter === ALL\n      && selectedTags.length === 0\n      && selectedStatus.length === 0\n    );\n  }, [filteringText, selectedTags, selectedStatus,\n    selectedLinkedThreatsFilter, selectedLinkedAssumptionsFilter]);\n\n  const handleClearFilter = useCallback(() => {\n    setFilteringText('');\n    setSelectedTags([]);\n    setSelectedStatus([]);\n    setSelectedLinkedAssumptionsFilter(ALL);\n    setSelectedLinkedThreatsFilter(ALL);\n  }, []);\n\n  const allTags = useMemo(() => {\n    return mitigationList\n      .reduce((all: string[], cur) => {\n        return [...all, ...cur.tags?.filter(ia => !all.includes(ia)) || []];\n      }, []);\n  }, [mitigationList]);\n\n  const handleAddTagToEntity = useCallback((mitigation: Mitigation, tag: string) => {\n    const updated: Mitigation = {\n      ...mitigation,\n      tags: mitigation.tags ?\n        (!mitigation.tags.includes(tag) ?\n          [...mitigation.tags, tag] : mitigation.tags) :\n        [tag],\n    };\n    saveMitigation(updated);\n  }, [saveMitigation]);\n\n  const handleRemoveTagFromEntity = useCallback((mitigation: Mitigation, tag: string) => {\n    const updated: Mitigation = {\n      ...mitigation,\n      tags: mitigation.tags?.filter(t => t !== tag),\n    };\n    saveMitigation(updated);\n  }, [saveMitigation]);\n\n  const filteredList = useMemo(() => {\n    let output = mitigationList;\n\n    if (filteringText) {\n      output = output.filter(st => st.content && st.content.toLowerCase().indexOf(filteringText.toLowerCase()) >= 0);\n    }\n\n    if (selectedTags && selectedTags.length > 0) {\n      output = output.filter(st => {\n        return st.tags?.some(t => selectedTags.includes(t));\n      });\n    }\n\n    if (selectedStatus && selectedStatus.length > 0) {\n      output = output.filter(st => {\n        return st.status ? selectedStatus.includes(st.status) : selectedStatus.includes(STATUS_NOT_SET);\n      });\n    }\n\n    if (selectedLinkedThreatsFilter !== ALL) {\n      output = output.filter(st => {\n        return mitigationLinkList.some(ml => ml.mitigationId === st.id) ?\n          selectedLinkedThreatsFilter === WITH_LINKED_ENTITY :\n          selectedLinkedThreatsFilter === WITHOUT_NO_LINKED_ENTITY;\n      });\n    }\n\n    if (selectedLinkedAssumptionsFilter !== ALL) {\n      output = output.filter(st => {\n        return assumptionLinkList.some(al => al.linkedId === st.id) ?\n          selectedLinkedAssumptionsFilter === WITH_LINKED_ENTITY :\n          selectedLinkedAssumptionsFilter === WITHOUT_NO_LINKED_ENTITY;\n      });\n    }\n\n    output = output.sort((op1, op2) => (op2.displayOrder || Number.MAX_VALUE) - (op1.displayOrder || Number.MAX_VALUE));\n\n    return output;\n  }, [filteringText, mitigationList, selectedTags, selectedStatus,\n    assumptionLinkList, mitigationLinkList,\n    selectedLinkedAssumptionsFilter, selectedLinkedThreatsFilter]);\n\n  const handleSaveNew = useCallback((mitigation: Mitigation,\n    linkedAssumptionIds: string[],\n    linkedThreatIds: string[]) => {\n    const updated = saveMitigation(mitigation);\n\n    const mitigationLinks: MitigationLink[] = [];\n    linkedThreatIds.forEach(id => {\n      mitigationLinks.push({\n        linkedId: id,\n        mitigationId: updated.id,\n      });\n    });\n\n    addMitigationLinks(mitigationLinks);\n\n    const assumptionLinks: AssumptionLink[] = [];\n    linkedAssumptionIds.forEach(id => {\n      assumptionLinks.push({\n        linkedId: updated.id,\n        assumptionId: id,\n        type: 'Mitigation',\n      });\n    });\n\n    addAssumptionLinks(assumptionLinks);\n\n  }, [saveMitigation, addMitigationLinks, addAssumptionLinks]);\n\n  const mitigationCreationCardRef = useRef<GenericEntityCreationCardRefProps>(null);\n\n  const handleAddNewMitigation = useCallback(() => {\n    mitigationCreationCardRef.current?.scrollIntoView();\n    mitigationCreationCardRef.current?.focusTextarea();\n  }, []);\n\n  const actions = useMemo(() => {\n    return (\n      <Button variant=\"primary\" onClick={handleAddNewMitigation}>\n        Add new mitigation\n      </Button>\n    );\n  }, [handleAddNewMitigation]);\n\n  return (<ContentLayout\n    title='Mitigations'\n    counter={`(${filteredList.length})`}\n    actions={actions}\n  >\n    <SpaceBetween direction='vertical' size='s'>\n      <Container>\n        <SpaceBetween direction='vertical' size='s'>\n          <TextFilter\n            filteringText={filteringText}\n            filteringPlaceholder=\"Find mitigations\"\n            filteringAriaLabel=\"Filter mitigations\"\n            onChange={({ detail }) =>\n              setFilteringText(detail.filteringText)\n            }\n          />\n          <Grid\n            gridDefinition={[\n              { colspan: { default: 12, xs: 5 } },\n              { colspan: { default: 12, xs: 5 } },\n              { colspan: { default: 12, xs: 4 } },\n              { colspan: { default: 12, xs: 4 } },\n              { colspan: { default: 3 } },\n            ]}\n          >\n            <TagSelector\n              allTags={allTags}\n              selectedTags={selectedTags}\n              setSelectedTags={setSelectedTags}\n            />\n            <Multiselect\n              tokenLimit={0}\n              selectedOptions={ALL_STATUS.filter(x => selectedStatus.includes(x.value))}\n              onChange={({ detail }) =>\n                setSelectedStatus(detail.selectedOptions?.map(o => o.value || '') || [])\n              }\n              deselectAriaLabel={e => `Remove ${e.label}`}\n              options={ALL_STATUS}\n              placeholder=\"Filtered by status\"\n              selectedAriaLabel=\"Selected\"\n            />\n            <LinkedEntityFilter\n              label='Linked threats'\n              entityDisplayName='threats'\n              selected={selectedLinkedThreatsFilter}\n              setSelected={setSelectedLinkedThreatsFilter}\n            />\n            <LinkedEntityFilter\n              label='Linked assumptions'\n              entityDisplayName='assumptions'\n              selected={selectedLinkedAssumptionsFilter}\n              setSelected={setSelectedLinkedAssumptionsFilter}\n            />\n            <Button onClick={handleClearFilter}\n              disabled={hasNoFilter}\n            >\n              Clear filters\n            </Button>\n          </Grid>\n        </SpaceBetween>\n      </Container>\n      {filteredList?.map(entity => (<MitigationCard\n        key={entity.id}\n        entity={entity}\n        onRemove={handleRemove}\n        onEdit={saveMitigation}\n        onAddTagToEntity={handleAddTagToEntity}\n        onRemoveTagFromEntity={handleRemoveTagFromEntity}\n      />))}\n      <MitigationCreationCard\n        ref={mitigationCreationCardRef}\n        onSave={handleSaveNew}\n      />\n    </SpaceBetween>\n  </ContentLayout>);\n};\n\nexport default MitigationList;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport const DEFAULT_TRACK_BY = 'id';\nexport const DEFAULT_LOADING_TEXT = 'Loading';\nexport const DEFAULT_PAGE_SIZE = 10;\nexport const DEFAULT_FILTERING_PLACEHOLDER = 'Search';\nexport const DEFAULT_FILTERING_ARIA_LABEL = 'Filter table content';\nexport const DEFAULT_COLLECTION_PREFERENCES_TITLE = 'Preferences';\nexport const DEFAULT_COLLECTION_PREFERENCES_CONFRIM_LABEL = 'Confirm';\nexport const DEFAULT_COLLECTION_PREFERENCES_CANCEL_LABEL = 'Cancel';\n\nexport const getAriaLabels = (trackBy: string = DEFAULT_TRACK_BY) => ({\n  selectionGroupLabel: 'Items selection',\n  allItemsSelectionLabel: ({ selectedItems }: any) =>\n    `${selectedItems.length} ${selectedItems.length === 1 ? 'item' : 'items'} selected`,\n  itemSelectionLabel: ({ selectedItems }: any, item: any) => {\n    const isItemSelected = selectedItems.filter((i: any) => i[trackBy] === item[trackBy]).length;\n    return `${item.name} is ${isItemSelected ? '' : 'not'} selected`;\n  },\n});\n\nexport const DEFAULT_PAGE_SIZE_OPTIONS = [\n  { value: 10, label: '10 rows' },\n  { value: 30, label: '30 rows' },\n  { value: 50, label: '50 rows' },\n];\n\nexport const DEFAULT_PAGINATION_LABELS = {\n  nextPageLabel: 'Next page',\n  previousPageLabel: 'Previous page',\n  pageLabel: (pageNumber: number) => `Page ${pageNumber} of all pages`,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useContext, createContext } from 'react';\nimport { AssumptionLink } from '../../customTypes';\nexport type View = 'list' | 'editor';\n\nexport interface AssumptionLinksContextApi {\n  assumptionLinkList: AssumptionLink[];\n  setAssumptionLinkList: (list: AssumptionLink[]) => void;\n  getLinkedAssumptionLinks: (linkedEntityId: string) => AssumptionLink[];\n  getAssumptionEntityLinks: (assumptionId: string, type: AssumptionLink['type']) => AssumptionLink[];\n  removeAssumptionLink: (assumptionId: string, linkedEntityId: string) => void;\n  removeAssumptionLinksByAssumptionId: (assumptionId: string) => Promise<void>;\n  removeAssumptionLinksByLinkedEntityId: (linkedEntityId: string) => Promise<void>;\n  removeAssumptionLinks: (entities: AssumptionLink[]) => void;\n  addAssumptionLink: (entity: AssumptionLink) => void;\n  addAssumptionLinks: (entities: AssumptionLink[]) => void;\n  removeAllAssumptionLinks: () => Promise<void>;\n  onDeleteWorkspace: (workspaceId: string) => Promise<void>;\n}\n\nconst initialState: AssumptionLinksContextApi = {\n  assumptionLinkList: [],\n  setAssumptionLinkList: () => { },\n  getLinkedAssumptionLinks: () => [],\n  getAssumptionEntityLinks: () => [],\n  removeAssumptionLink: () => { },\n  removeAssumptionLinksByAssumptionId: () => Promise.resolve(),\n  removeAssumptionLinksByLinkedEntityId: () => Promise.resolve(),\n  removeAssumptionLinks: () => { },\n  addAssumptionLink: () => { },\n  addAssumptionLinks: () => { },\n  removeAllAssumptionLinks: () => Promise.resolve(),\n  onDeleteWorkspace: () => Promise.resolve(),\n};\n\nexport const AssumptionLinksContext = createContext<AssumptionLinksContextApi>(initialState);\n\nexport const useAssumptionLinksContext = () => useContext(AssumptionLinksContext);","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport {\n  ApplicationInfo,\n  ArchitectureInfo,\n  Assumption,\n  DataExchangeFormat,\n  DataflowInfo,\n  Mitigation,\n  TemplateThreatStatement,\n  HasContentDetails,\n} from '../../customTypes';\n\nexport const hasApplicationName = (applicationInfo?: ApplicationInfo) => {\n  return !!(applicationInfo && applicationInfo.name);\n};\n\nexport const hasApplicationInfo = (applicationInfo?: ApplicationInfo) => {\n  return !!(applicationInfo && applicationInfo.description);\n};\n\nexport const hasArchitectureInfo = (archInfo?: ArchitectureInfo) => {\n  return !!(archInfo && (archInfo.description || archInfo.image));\n};\n\nexport const hasDataflowInfo = (dataflowInfo?: DataflowInfo) => {\n  return !!(dataflowInfo && (dataflowInfo.description || dataflowInfo.image));\n};\n\nexport const hasAssumptions = (assumptions?: Assumption[]) => {\n  return assumptions && assumptions.length > 0;\n};\n\nexport const hasThreats = (threatStatementList?: TemplateThreatStatement[]) => {\n  return threatStatementList && threatStatementList.length > 0;\n};\n\nexport const hasMitigations = (mitigations?: Mitigation[]) => {\n  return mitigations && mitigations.length > 0;\n};\n\nconst hasContent = (data: DataExchangeFormat): [ boolean, HasContentDetails] => {\n  const details = {\n    applicationName: hasApplicationName(data.applicationInfo),\n    applicationInfo: hasApplicationInfo(data.applicationInfo),\n    architecture: hasArchitectureInfo(data.architecture),\n    dataflow: hasDataflowInfo(data.dataflow),\n    assumptions: hasAssumptions(data.assumptions) || false,\n    mitigations: hasMitigations(data.mitigations) || false,\n    threats: hasThreats(data.threats) || false,\n  };\n\n  const sum = Object.values(details).some(x => x);\n  return [sum, details];\n};\n\nexport default hasContent;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport { DeleteConfirmationDialog } from '@aws-northstar/ui';\nimport Button from '@cloudscape-design/components/button';\nimport Container from '@cloudscape-design/components/container';\nimport Header from '@cloudscape-design/components/header';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport { FC, PropsWithChildren, useMemo, useRef, ReactNode, useState } from 'react';\nimport Tags from './components/Tags';\nimport getMobileMediaQuery from '../../../utils/getMobileMediaQuery';\nimport Tooltip from '../Tooltip';\n\nexport interface GenericCardProps {\n  header: string;\n  info?: ReactNode;\n  entityId: string;\n  tags?: string[];\n  onCopy?: (id: string) => void;\n  onRemove?: (id: string) => void;\n  onEdit?: (id: string) => void;\n  onAddTagToEntity?: (entityId: string, tag: string) => void;\n  onRemoveTagFromEntity?: (entityId: string, tag: string) => void;\n  moreActions?: ReactNode;\n}\n\nconst styles = {\n  header: css({\n    display: 'inline-flex',\n    alignItems: 'center',\n    [getMobileMediaQuery()]: {\n      display: 'block',\n      marginTop: awsui.spaceScaledS,\n    },\n  }),\n  tags: css({\n    marginRight: awsui.spaceScaledS,\n    marginLeft: awsui.spaceScaledS,\n    [getMobileMediaQuery()]: {\n      marginLeft: '0px',\n    },\n  }),\n  info: css({\n    marginLeft: awsui.spaceScaledS,\n    [getMobileMediaQuery()]: {\n      marginLeft: '0px',\n    },\n  }),\n};\n\nconst GenericCard: FC<PropsWithChildren<GenericCardProps>> = ({\n  header,\n  info,\n  entityId,\n  tags,\n  children,\n  onRemove,\n  onEdit,\n  onAddTagToEntity,\n  onRemoveTagFromEntity,\n  moreActions,\n}) => {\n  const ref = useRef<any>(null);\n  const [removeDialogVisible, setRemoveDialogVisible] = useState(false);\n\n  const actions = useMemo(() => {\n    return (<SpaceBetween direction='horizontal' size='s'>\n      {onRemove && <Tooltip tooltip='Remove From Workspace'><Button onClick={() => setRemoveDialogVisible(true)} variant='icon' iconName='remove' /></Tooltip>}\n      {onEdit && <Tooltip tooltip='Edit'><Button onClick={() => onEdit?.(entityId)} variant='icon' iconName='edit' /></Tooltip>}\n      {moreActions}\n    </SpaceBetween>);\n  }, [onRemove, onEdit, entityId]);\n\n  return (<div ref={ref}>\n    <Container\n      header={<Header actions={actions}\n      ><div css={styles.header}>\n          {header}\n          <div css={styles.info}>{info}</div>\n          <div css={styles.tags}><Tags\n            tags={tags}\n            entityId={entityId}\n            onAddTagToEntity={onAddTagToEntity}\n            onRemoveTagFromEntity={onRemoveTagFromEntity}\n          /></div>\n        </div></Header>}\n    >\n      {children}\n    </Container>\n    {removeDialogVisible && <DeleteConfirmationDialog\n      variant='confirmation'\n      title={`Remove ${header}?`}\n      visible={removeDialogVisible}\n      onCancelClicked={() => setRemoveDialogVisible(false)}\n      onDeleteClicked={() => onRemove?.(entityId)}\n      deleteButtonText='Remove'\n    ></DeleteConfirmationDialog>}\n  </div>);\n};\n\nexport default GenericCard;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback, useState } from 'react';\nimport { ApplicationInfo } from '../../../../customTypes';\nimport { INFO_DEFAULT_VALUE } from '../../../constants';\nimport { LocalStateContextProviderBaseProps } from '../../../types';\nimport { ApplicationInfoContext } from '../../context';\nimport { ApplicationContextProviderProps } from '../../types';\n\nconst ApplicationLocalStateContextProvider: FC<\nPropsWithChildren<ApplicationContextProviderProps & LocalStateContextProviderBaseProps<ApplicationInfo>>> = ({\n  children,\n  initialValue,\n}) => {\n  const [applicationInfo, setApplicationInfo] = useState<ApplicationInfo>(initialValue || INFO_DEFAULT_VALUE);\n\n  const handleRemoveApplicationInfo = useCallback(async () => {\n    setApplicationInfo(INFO_DEFAULT_VALUE);\n  }, []);\n\n  const handleDeleteWorkspace = useCallback(async (_workspaceId: string) => {\n    setApplicationInfo(INFO_DEFAULT_VALUE);\n  }, []);\n\n  return (<ApplicationInfoContext.Provider value={{\n    applicationInfo,\n    setApplicationInfo,\n    removeApplicationInfo: handleRemoveApplicationInfo,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </ApplicationInfoContext.Provider>);\n};\n\nexport default ApplicationLocalStateContextProvider;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { z } from 'zod';\nimport { MitigationSchema, MitigationLinkSchema } from './mitigations';\nimport { TemplateThreatStatementSchema } from './threats';\n\nexport const ReferencePackBaseSchema = z.object({\n  id: z.string().length(36),\n  name: z.string(),\n  description: z.string(),\n});\n\nexport const ThreatPackSchema = ReferencePackBaseSchema.extend({\n  threats: TemplateThreatStatementSchema.array().optional(),\n  mitigationLinks: MitigationLinkSchema.array().optional(),\n  mitigations: MitigationSchema.array().optional(),\n});\n\nexport type ThreatPack = z.infer<typeof ThreatPackSchema>;\n\nexport interface ThreatPackUsage {\n  [threatPackId: string]: {\n    [threatPackThreatId: string]: string[];\n  };\n};\n\nexport const MitigationPackSchema = ReferencePackBaseSchema.extend({\n  mitigations: MitigationSchema.array().optional(),\n});\n\nexport type MitigationPack = z.infer<typeof MitigationPackSchema>;\n\nexport interface MitigationPackUsage {\n  [mitigationPackId: string]: {\n    [mitigationPackMitigationId: string]: string[];\n  };\n};","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport CloudscapeHeader, { HeaderProps as CloudscapeHeaderProps } from '@cloudscape-design/components/header';\nimport { FC, isValidElement, createElement, PropsWithChildren, useMemo } from 'react';\n\nexport interface HeaderProps {\n  actions?: CloudscapeHeaderProps['actions'];\n  info?: CloudscapeHeaderProps['info'];\n  variant?: CloudscapeHeaderProps['variant'];\n  description?: CloudscapeHeaderProps['description'];\n  allItemsLength?: number;\n  selectedItemsLength?: number;\n}\n\nconst CloudscapeHeaderType = createElement(CloudscapeHeader).type;\n\nconst Header: FC<PropsWithChildren<HeaderProps>> = ({\n  selectedItemsLength,\n  allItemsLength,\n  children,\n  actions,\n  info,\n  description,\n  variant,\n}) => {\n  const customHeader = isValidElement(children) && children.type === CloudscapeHeaderType;\n\n  const counter = useMemo(\n    () =>\n      allItemsLength\n        ? selectedItemsLength\n          ? `(${selectedItemsLength}/${allItemsLength})`\n          : `(${allItemsLength})`\n        : undefined,\n    [allItemsLength, selectedItemsLength],\n  );\n\n  return customHeader ? (\n    children\n  ) : (\n    <CloudscapeHeader counter={counter} info={info} actions={actions} description={description} variant={variant}>\n      {children}\n    </CloudscapeHeader>\n  );\n};\n\nexport default Header;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Grid from '@cloudscape-design/components/grid';\nimport { css } from '@emotion/react';\nimport { FC } from 'react';\nimport styles from '../../styles';\nimport InfoModalBase from '../InfoModalBase';\n\nconst InfoModalIntro: FC = () => {\n  return (<InfoModalBase title='threat-composer'>\n    <p>This tool has <span css={css(styles.contentHighlight)}>\n      a singular focus on the <i>What can go wrong?</i> threat modeling step</span>, with the aim of making it faster and easier for you to\n    </p>\n    <div css={css(styles.featureSets)}>\n      <Grid gridDefinition={[\n        { colspan: { default: 12, xxs: 6 } },\n        { colspan: { default: 12, xxs: 6 } },\n      ]}>\n        <div css={[css(styles.featureSet), css(styles.contentBaseText)]}>\n          <div><svg focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"PsychologyIcon\" fill='#d1d5db'>\n            <path d=\"M13 8.57c-.79 0-1.43.64-1.43 1.43s.64 1.43 1.43 1.43 1.43-.64 1.43-1.43-.64-1.43-1.43-1.43z\"></path><path d=\"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2c-.25.33-.01.8.4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68c2.36-1.12 4-3.53 4-6.32 0-3.87-3.13-7-7-7zm3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39c-.05-.08-.03-.19.05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38c.05.09.03.2-.05.26l-.85.66c.03.12.04.25.04.39z\"></path>\n          </svg></div>\n          <span>Focus your brainstorming of custom and contextual threats</span>\n        </div>\n        <div css={[css(styles.featureSet), css(styles.contentBaseText)]}>\n          <div><svg focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"LoopIcon\" fill='#d1d5db'>\n            <path d=\"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z\"></path>\n          </svg></div>\n          <span>Iteratively compose useful threats with the time you have available</span>\n        </div>\n      </Grid>\n    </div>\n  </InfoModalBase>);\n};\n\nexport default InfoModalIntro;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { css } from '@emotion/react';\n\nconst styles = css({\n  maxWidth: '1024px',\n  width: '100%',\n});\n\nexport default styles;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport rehypeStringify from 'rehype-stringify';\nimport remarkGfm from 'remark-gfm';\nimport remarkParse from 'remark-parse';\nimport remarkRehype from 'remark-rehype';\nimport { unified } from 'unified';\n\nconst parseTableCellContent = async (str: string) => {\n  if (str) {\n    const htmlOutput = await unified()\n      .use(remarkParse)\n      .use(remarkGfm)\n      .use(remarkRehype)\n      .use(rehypeStringify)\n      .process(str);\n    const output = String(htmlOutput).replace(/(\\r\\n|\\n|\\r)/gm, '');\n    return output;\n  }\n\n  return str;\n};\n\nexport default parseTableCellContent;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Container from '@cloudscape-design/components/container';\nimport { FC } from 'react';\nimport { ThreatPack } from '../../../../../customTypes';\n\nexport interface GeneralInfoProps {\n  threatPack: ThreatPack;\n}\n\nconst GeneralInfo: FC<GeneralInfoProps> = ({\n  threatPack,\n}) => {\n  return (<Container>\n    {threatPack.description}\n  </Container>);\n};\n\nexport default GeneralInfo;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useContext, createContext } from 'react';\nimport { BrainstormData, BrainstormItem } from '../../customTypes/brainstorm';\n\nexport interface BrainstormContextApi {\n  brainstormData: BrainstormData;\n  setBrainstormData: (data: BrainstormData) => void;\n  addItem: (type: keyof BrainstormData, content: string) => void;\n  updateItem: (type: keyof BrainstormData, id: string, content: string) => void;\n  removeItem: (type: keyof BrainstormData, id: string) => void;\n  groupItems: (type: keyof BrainstormData, sourceId: string, targetId: string) => void;\n  ungroupItem: (type: keyof BrainstormData, id: string) => void;\n  getGroupedItems: (type: keyof BrainstormData, groupId: string) => BrainstormItem[];\n  getDisplayItems: (type: keyof BrainstormData) => Array<{ item: BrainstormItem; groupedItems: BrainstormItem[] }>;\n  mergeGroups: (type: keyof BrainstormData, sourceId: string, targetId: string) => void;\n  onDeleteWorkspace: (workspaceId: string) => Promise<void>;\n}\n\nconst initialState: BrainstormContextApi = {\n  brainstormData: {\n    assumptions: [],\n    threatSources: [],\n    threatPrerequisites: [],\n    threatActions: [],\n    threatImpacts: [],\n    assets: [],\n    mitigations: [],\n  },\n  setBrainstormData: () => {},\n  addItem: () => {},\n  updateItem: () => {},\n  removeItem: () => {},\n  groupItems: () => {},\n  ungroupItem: () => {},\n  getGroupedItems: () => [],\n  getDisplayItems: () => [],\n  mergeGroups: () => {},\n  onDeleteWorkspace: () => Promise.resolve(),\n};\n\nexport const BrainstormContext = createContext<BrainstormContextApi>(initialState);\n\nexport const useBrainstormContext = () => useContext(BrainstormContext);\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport {\n  Button,\n  Box,\n  ColumnLayout,\n} from '@cloudscape-design/components';\nimport PieChart from '@cloudscape-design/components/pie-chart';\nimport {\n  colorChartsStatusInfo,\n  colorChartsStatusPositive,\n  colorChartsStatusHigh,\n  colorChartsStatusNeutral,\n} from '@cloudscape-design/design-tokens';\nimport { useMemo, useCallback, FC } from 'react';\nimport {\n  LEVEL_HIGH,\n  LEVEL_LOW,\n  LEVEL_MEDIUM,\n  LEVEL_NOT_SET,\n  DEFAULT_NEW_ENTITY_ID,\n} from '../../../../../configs';\nimport { useThreatsContext } from '../../../../../contexts/ThreatsContext';\nimport filterThreatsByMetadata from '../../../../../utils/filterThreatsByMetadata';\nimport DashboardNumber from '../../../../generic/DashboardNumber';\nimport useThreatListLinkClicked from '../../hooks/useThreatListLinkClicked';\nimport { WorkspaceInsightsProps } from '../../types';\n\nconst ThreatPrioritization: FC<WorkspaceInsightsProps> = ({\n  onThreatEditorView,\n  onThreatListView,\n}) => {\n  const { statementList, addStatement } = useThreatsContext();\n\n  const handleLinkClicked = useThreatListLinkClicked(onThreatListView);\n\n  const missingPriority = useMemo(\n    () => filterThreatsByMetadata(statementList, 'Priority').length,\n    [statementList],\n  );\n\n  const countHigh = useMemo(\n    () => filterThreatsByMetadata(statementList, 'Priority', LEVEL_HIGH).length,\n    [statementList],\n  );\n  const countMed = useMemo(\n    () =>\n      filterThreatsByMetadata(statementList, 'Priority', LEVEL_MEDIUM).length,\n    [statementList],\n  );\n  const countLow = useMemo(\n    () => filterThreatsByMetadata(statementList, 'Priority', LEVEL_LOW).length,\n    [statementList],\n  );\n\n  const handleAddStatement = useCallback(() => {\n    addStatement();\n    onThreatEditorView?.(DEFAULT_NEW_ENTITY_ID);\n  }, [addStatement, onThreatEditorView]);\n\n  return (\n    <ColumnLayout columns={1} borders=\"horizontal\">\n      {!statementList.length ? (\n        <Box\n          margin=\"xxl\"\n          padding=\"xxl\"\n          color=\"text-body-secondary\"\n          textAlign=\"center\"\n        >\n          <b>No threats available</b>\n          <Box variant=\"p\" color=\"text-body-secondary\">\n            Start by adding a threat to this workspace\n          </Box>\n          <Button variant=\"primary\" onClick={() => handleAddStatement()}>Add a threat</Button>\n        </Box>\n      ) : (\n        <Box padding=\"s\">\n          <PieChart\n            data={[\n              {\n                title: 'High',\n                value: countHigh,\n                color: colorChartsStatusHigh,\n              },\n              {\n                title: 'Medium',\n                value: countMed,\n                color: colorChartsStatusInfo,\n              },\n              {\n                title: 'Low',\n                value: countLow,\n                color: colorChartsStatusPositive,\n              },\n              {\n                title: 'Undefined',\n                value: missingPriority,\n                color: colorChartsStatusNeutral,\n              },\n            ]}\n            detailPopoverContent={(datum, sum) => [\n              { key: 'Threat count', value: datum.value },\n              {\n                key: 'Percentage',\n                value: `${((datum.value / sum) * 100).toFixed(0)}%`,\n              },\n            ]}\n            segmentDescription={(datum, sum) =>\n              `${datum.value} threats, ${((datum.value / sum) * 100).toFixed(0)}%`\n            }\n            ariaDescription=\"Pie chart showing the prioritization of threats.\"\n            ariaLabel=\"Pie chart\"\n            hideFilter\n            innerMetricDescription=\"Threats\"\n            innerMetricValue={statementList.length.toString()}\n            variant=\"donut\"\n            size=\"medium\"\n            noMatch={\n              <Box textAlign=\"center\" color=\"inherit\">\n                <b>No matching data</b>\n                <Box variant=\"p\" color=\"inherit\">\n                  There is no matching data to display\n                </Box>\n                <Button>Clear filter</Button>\n              </Box>\n            }\n          />\n        </Box>\n      )}\n      {missingPriority > 0 ? (\n        <div>\n          <Box variant=\"awsui-key-label\">Missing priority</Box>\n          <DashboardNumber\n            showWarning\n            featuredNumber={missingPriority}\n            onLinkClicked={handleLinkClicked({\n              priority: LEVEL_NOT_SET,\n            })}\n          />\n        </div>\n      ) : null}\n    </ColumnLayout>\n  );\n};\nexport default ThreatPrioritization;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren } from 'react';\nimport WindowExporter from '../../components/generic/WindowExporter';\nimport { ComposerMode, DataExchangeFormat, ViewNavigationEvent } from '../../customTypes';\nimport ApplicationInfoContextProvider from '../ApplicationContext';\nimport ArchitectureInfoContextProvider from '../ArchitectureContext';\nimport AssumptionLinksContextProvider from '../AssumptionLinksContext';\nimport AssumptionsContextProvider from '../AssumptionsContext';\nimport BrainstormContextProvider from '../BrainstormContext';\nimport CrossWorkspaceContextProvider from '../CrossWorkspaceContext';\nimport DataflowInfoContextProvider from '../DataflowContext';\nimport GlobalSetupContextProvider from '../GlobalSetupContext';\nimport MitigationLinksContextProvider from '../MitigationLinksContext';\nimport MitigationPacksContextProvider from '../MitigationPacksContext';\nimport MitigationsContextProvider from '../MitigationsContext';\nimport ThreatPacksContextProvider from '../ThreatPacksContext';\nimport ThreatsContextProvider from '../ThreatsContext';\n\nexport interface WorkspaceContextAggregatorProps extends ViewNavigationEvent {\n  workspaceId: string | null;\n  composerMode?: ComposerMode;\n  requiredGlobalSetupContext?: boolean;\n  onPreview?: (content: DataExchangeFormat) => void;\n  onPreviewClose?: () => void;\n  onImported?: () => void;\n}\n\nconst WorkspaceContextInnerAggregator: FC<PropsWithChildren<WorkspaceContextAggregatorProps>> = ({\n  children,\n  workspaceId,\n}) => {\n  return (\n    <ThreatsContextProvider\n      workspaceId={workspaceId || null}\n    >\n      <MitigationsContextProvider workspaceId={workspaceId}>\n        <AssumptionsContextProvider workspaceId={workspaceId}>\n          <MitigationLinksContextProvider workspaceId={workspaceId}>\n            <AssumptionLinksContextProvider workspaceId={workspaceId}>\n              <ApplicationInfoContextProvider workspaceId={workspaceId}>\n                <ArchitectureInfoContextProvider workspaceId={workspaceId}>\n                  <DataflowInfoContextProvider workspaceId={workspaceId}>\n                    <ThreatPacksContextProvider workspaceId={workspaceId}>\n                      <MitigationPacksContextProvider workspaceId={workspaceId}>\n                        <BrainstormContextProvider workspaceId={workspaceId}>\n                          <CrossWorkspaceContextProvider>\n                            <WindowExporter>\n                              {children}\n                            </WindowExporter>\n                          </CrossWorkspaceContextProvider>\n                        </BrainstormContextProvider>\n                      </MitigationPacksContextProvider>\n                    </ThreatPacksContextProvider>\n                  </DataflowInfoContextProvider>\n                </ArchitectureInfoContextProvider>\n              </ApplicationInfoContextProvider>\n            </AssumptionLinksContextProvider>\n          </MitigationLinksContextProvider>\n        </AssumptionsContextProvider >\n      </MitigationsContextProvider>\n    </ThreatsContextProvider>\n  );\n};\n\nconst WorkspaceContextAggregator: FC<PropsWithChildren<WorkspaceContextAggregatorProps>> = ({\n  children,\n  workspaceId,\n  composerMode,\n  requiredGlobalSetupContext = true,\n  onPreview,\n  onPreviewClose,\n  onImported,\n  ...rest\n}) => {\n  return requiredGlobalSetupContext ? (\n    <GlobalSetupContextProvider composerMode={composerMode}>\n      <WorkspaceContextInnerAggregator workspaceId={workspaceId} {...rest}>\n        {children}\n      </WorkspaceContextInnerAggregator>\n    </GlobalSetupContextProvider>\n  ) : (\n    <WorkspaceContextInnerAggregator workspaceId={workspaceId} {...rest}>\n      {children}\n    </WorkspaceContextInnerAggregator>\n  );\n};\n\nexport default WorkspaceContextAggregator;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport { default as ThreatStatementGenerator } from './ThreatStatementGenerator';","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport ColumnLayout from '@cloudscape-design/components/column-layout';\nimport { InputProps } from '@cloudscape-design/components/input';\nimport { FC, useCallback, useEffect, useRef, forwardRef } from 'react';\nimport { useBrainstormContext } from '../../../contexts/BrainstormContext/context';\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\nimport { TemplateThreatStatementSchema } from '../../../customTypes';\nimport Input from '../../generic/Input';\nimport BrainstormList from '../BrainstormList';\nimport EditorLayout from '../EditorLayout';\nimport styles from '../EditorLayout/styles';\nimport ExampleList from '../ExampleList';\nimport PreviousInputList from '../PreviousInputList';\nimport { EditorProps } from '../ThreatStatementEditor/types';\n\nconst EditorThreatSource: FC<EditorProps> = forwardRef<InputProps.Ref, EditorProps>(({\n  statement, setStatement, fieldData,\n}, ref) => {\n  const { perFieldExamples, previousInputs } = useThreatsContext();\n  const { brainstormData } = useBrainstormContext();\n\n  const valueRef = useRef<string | undefined>(statement.threatSource);\n  useEffect(() => {\n    valueRef.current = statement.threatSource?.trim();\n  }, [statement.threatSource]);\n\n  const handleChange = useCallback((threatSource: string) => {\n    setStatement(prevStatement => prevStatement && ({\n      ...prevStatement,\n      threatSource: threatSource,\n    }));\n  }, [setStatement]);\n\n  return (<EditorLayout\n    title={fieldData.displayTitle}\n    description={fieldData.description}\n  >\n    <div css={styles.textEditorLayout}>\n      <div css={styles.input}>\n        <Input\n          ref={ref}\n          spellcheck\n          onChange={({ detail }) => handleChange(detail.value)}\n          value={statement.threatSource || ''}\n          placeholder='Enter threat source'\n          validateData={TemplateThreatStatementSchema.shape.threatSource.safeParse}\n          stretch\n        />\n      </div>\n      {statement.threatSource && <div css={styles.inputClearSmall}>\n        <Button variant='icon' iconName='close' onClick={() => handleChange('')} />\n      </div>}\n    </div>\n    <ColumnLayout columns={\n      (perFieldExamples.threat_source.length > 0 ? 1 : 0) +\n      (previousInputs.threat_source.length > 0 ? 1 : 0) +\n      ((brainstormData.threatSources?.length || 0) > 0 ? 1 : 0)\n    }>\n      {perFieldExamples.threat_source.length > 0 &&\n        <ExampleList examples={perFieldExamples.threat_source} onSelect={handleChange} showSearch={false}></ExampleList>}\n      {previousInputs.threat_source.length > 0 &&\n        <PreviousInputList\n          items={previousInputs.threat_source}\n          onSelect={handleChange}\n        />\n      }\n      {(brainstormData.threatSources?.length || 0) > 0 &&\n        <BrainstormList\n          items={brainstormData.threatSources || []}\n          onSelect={handleChange}\n        />\n      }\n    </ColumnLayout>\n  </EditorLayout>);\n});\n\nexport default EditorThreatSource;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback, useState } from 'react';\nimport { ArchitectureInfo } from '../../../../customTypes';\nimport { INFO_DEFAULT_VALUE } from '../../../constants';\nimport { LocalStateContextProviderBaseProps } from '../../../types';\nimport { ArchitectureInfoContext } from '../../context';\nimport { ArchitectureContextProviderProps } from '../../types';\n\nconst ArchitectureLocalStateContextProvider: FC<PropsWithChildren<\nArchitectureContextProviderProps & LocalStateContextProviderBaseProps<ArchitectureInfo>>> = ({\n  children,\n  initialValue,\n}) => {\n  const [architectureInfo, setArchitectureInfo] = useState<ArchitectureInfo>(initialValue || INFO_DEFAULT_VALUE);\n\n  const handleRemoveArchitectureInfo = useCallback(async () => {\n    setArchitectureInfo(INFO_DEFAULT_VALUE);\n  }, []);\n\n  const handleDeleteWorkspace = useCallback(async (_workspaceId: string) => {\n    setArchitectureInfo(INFO_DEFAULT_VALUE);\n  }, []);\n\n  return (<ArchitectureInfoContext.Provider value={{\n    architectureInfo,\n    setArchitectureInfo,\n    removeArchitectureInfo: handleRemoveArchitectureInfo,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </ArchitectureInfoContext.Provider>);\n};\n\nexport default ArchitectureLocalStateContextProvider;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { Button, Container, ContentLayout, Header, SpaceBetween, TextContent } from '@cloudscape-design/components';\nimport { FC, useCallback, useState } from 'react';\n// Navigation will be handled via props instead of direct router dependency\nimport ColumnVisibilityToggles from './components/ColumnVisibilityToggles';\nimport DiagramModal from './components/DiagramModal';\nimport ItemColumn, { columnConfig } from './components/ItemColumn';\nimport { useArchitectureInfoContext } from '../../../contexts/ArchitectureContext';\nimport { useAssumptionsContext } from '../../../contexts/AssumptionsContext';\nimport BrainstormContextProvider from '../../../contexts/BrainstormContext';\nimport { PromotionHandlers, ThreatCreationHandlers } from '../../../contexts/BrainstormContext/types';\nimport { useDataflowInfoContext } from '../../../contexts/DataflowContext';\nimport { useMitigationsContext } from '../../../contexts/MitigationsContext';\nimport { useWorkspacesContext } from '../../../contexts/WorkspacesContext';\nimport { BrainstormItem } from '../../../customTypes/brainstorm';\n\n/**\n * Navigation handler for creating threats with specific field values\n */\nexport type NavigateToThreatHandler = (workspaceName: string, itemId: string, fieldKey: string, fieldValue: string) => void;\n\n/**\n * Props interface for BrainstormBoard component\n */\nexport interface BrainstormBoardProps {\n  /**\n   * Handler for navigating to threat creation with pre-filled field values\n   */\n  onNavigateToThreat?: NavigateToThreatHandler;\n}\n\n/**\n * Inner BrainstormBoard component that contains the main logic\n * This component assumes it's wrapped in BrainstormContextProvider\n */\nconst BrainstormBoardInner: FC<{ onNavigateToThreat?: NavigateToThreatHandler }> = ({ onNavigateToThreat }) => {\n  const { architectureInfo } = useArchitectureInfoContext();\n  const { dataflowInfo } = useDataflowInfoContext();\n  const { saveAssumption, assumptionList } = useAssumptionsContext();\n  const { saveMitigation, mitigationList } = useMitigationsContext();\n  const { currentWorkspace } = useWorkspacesContext();\n\n  // Modal state management\n  const [showArchitectureModal, setShowArchitectureModal] = useState(false);\n  const [showDataflowModal, setShowDataflowModal] = useState(false);\n\n  // Column visibility state management\n  const [visibleColumns, setVisibleColumns] = useState<Record<string, boolean>>(\n    columnConfig.reduce((acc, col) => ({ ...acc, [col.id]: col.defaultVisible }), {}),\n  );\n\n  // Threat inputs master toggle state\n  const [threatInputsVisible, setThreatInputsVisible] = useState(true);\n\n  // Handle individual column visibility changes\n  const handleColumnVisibilityChange = useCallback((columnId: string, visible: boolean) => {\n    setVisibleColumns(prev => ({ ...prev, [columnId]: visible }));\n  }, []);\n\n  // Handle threat inputs group visibility changes\n  const handleThreatInputsVisibilityChange = useCallback((visible: boolean) => {\n    setThreatInputsVisible(visible);\n  }, []);\n\n  // Assumption promotion handlers\n  const isAssumptionPromoted = useCallback((item: BrainstormItem) => {\n    return assumptionList.some(assumption => assumption.id === item.id);\n  }, [assumptionList]);\n\n  const promoteAssumption = useCallback((item: BrainstormItem) => {\n    if (!isAssumptionPromoted(item)) {\n      const newAssumption = {\n        id: item.id,\n        numericId: assumptionList.length + 1,\n        content: item.content,\n      };\n      saveAssumption(newAssumption);\n    }\n  }, [assumptionList, saveAssumption, isAssumptionPromoted]);\n\n  const assumptionPromotionHandlers: PromotionHandlers = {\n    promote: promoteAssumption,\n    isPromoted: isAssumptionPromoted,\n  };\n\n  // Mitigation promotion handlers\n  const isMitigationPromoted = useCallback((item: BrainstormItem) => {\n    return mitigationList.some(mitigation => mitigation.id === item.id);\n  }, [mitigationList]);\n\n  const promoteMitigation = useCallback((item: BrainstormItem) => {\n    if (!isMitigationPromoted(item)) {\n      const newMitigation = {\n        id: item.id,\n        numericId: mitigationList.length + 1,\n        content: item.content,\n      };\n      saveMitigation(newMitigation);\n    }\n  }, [mitigationList, saveMitigation, isMitigationPromoted]);\n\n  const mitigationPromotionHandlers: PromotionHandlers = {\n    promote: promoteMitigation,\n    isPromoted: isMitigationPromoted,\n  };\n\n  // Threat creation handlers\n  const createThreatWithField = useCallback((item: BrainstormItem, fieldKey: string) => {\n    if (onNavigateToThreat) {\n      onNavigateToThreat(currentWorkspace?.name || 'default', item.id, fieldKey, item.content);\n    }\n  }, [onNavigateToThreat, currentWorkspace]);\n\n  const threatSourceHandlers: ThreatCreationHandlers = {\n    createThreat: (item: BrainstormItem) => createThreatWithField(item, 'threatSource'),\n    fieldName: 'Threat Source',\n    fieldKey: 'threatSource',\n  };\n\n  const prerequisiteHandlers: ThreatCreationHandlers = {\n    createThreat: (item: BrainstormItem) => createThreatWithField(item, 'prerequisites'),\n    fieldName: 'Prerequisite',\n    fieldKey: 'prerequisites',\n  };\n\n  const threatActionHandlers: ThreatCreationHandlers = {\n    createThreat: (item: BrainstormItem) => createThreatWithField(item, 'threatAction'),\n    fieldName: 'Threat Action',\n    fieldKey: 'threatAction',\n  };\n\n  const threatImpactHandlers: ThreatCreationHandlers = {\n    createThreat: (item: BrainstormItem) => createThreatWithField(item, 'threatImpact'),\n    fieldName: 'Threat Impact',\n    fieldKey: 'threatImpact',\n  };\n\n  const assetHandlers: ThreatCreationHandlers = {\n    createThreat: (item: BrainstormItem) => createThreatWithField(item, 'impactedAssets'),\n    fieldName: 'Asset',\n    fieldKey: 'impactedAssets',\n  };\n\n  // Get handlers for each column type\n  const getHandlersForColumn = (columnId: string) => {\n    switch (columnId) {\n      case 'assumptions':\n        return { promotionHandlers: assumptionPromotionHandlers };\n      case 'mitigations':\n        return { promotionHandlers: mitigationPromotionHandlers };\n      case 'threatSources':\n        return { threatCreationHandlers: threatSourceHandlers };\n      case 'threatPrerequisites':\n        return { threatCreationHandlers: prerequisiteHandlers };\n      case 'threatActions':\n        return { threatCreationHandlers: threatActionHandlers };\n      case 'threatImpacts':\n        return { threatCreationHandlers: threatImpactHandlers };\n      case 'assets':\n        return { threatCreationHandlers: assetHandlers };\n      default:\n        return {};\n    }\n  };\n\n  // Render a column based on configuration\n  const renderColumn = (config: any) => {\n    const { promotionHandlers, threatCreationHandlers } = getHandlersForColumn(config.id);\n\n    return (\n      <div key={config.id} style={{ width: '300px', flexShrink: 0 }}>\n        <Container header={\n          <div>\n            <Header variant=\"h2\">\n              <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                <Button iconName={config.icon} variant=\"icon\" disabled />\n                {config.title}\n              </div>\n            </Header>\n            <TextContent>\n              <small><i>{config.description}</i></small>\n            </TextContent>\n          </div>\n        }>\n          <ItemColumn\n            title={config.title}\n            itemType={config.id}\n            placeholder={`Add ${config.title.toLowerCase().slice(0, -1)}...`}\n            description={config.description}\n            icon={config.icon}\n            isPromotable={config.isPromotable}\n            onPromote={promotionHandlers}\n            canCreateThreat={config.canCreateThreat}\n            onCreateThreat={threatCreationHandlers}\n          />\n        </Container>\n      </div>\n    );\n  };\n\n  return (\n    <ContentLayout\n      headerVariant='high-contrast'\n      header={\n        <Header\n          variant=\"h1\"\n          actions={\n            <SpaceBetween direction=\"horizontal\" size=\"xs\">\n              <Button onClick={() => setShowArchitectureModal(true)}>Architecture Diagram</Button>\n              <Button onClick={() => setShowDataflowModal(true)}>Data Flow Diagram</Button>\n            </SpaceBetween>\n          }\n          description=\"Quickly capture ideas, then selectively add or use them in to your threat model\"\n        >\n          Brainstorm\n        </Header>\n      }\n    >\n      <SpaceBetween direction=\"vertical\" size=\"m\">\n        <ColumnVisibilityToggles\n          visibleColumns={visibleColumns}\n          onColumnVisibilityChange={handleColumnVisibilityChange}\n          threatInputsVisible={threatInputsVisible}\n          onThreatInputsVisibilityChange={handleThreatInputsVisibilityChange}\n        />\n        <div style={{\n          overflowX: 'auto',\n          width: '100%',\n          paddingBottom: '8px', // Space for the scrollbar\n        }}>\n          <div style={{\n            display: 'flex',\n            flexDirection: 'row',\n            gap: '20px',\n            width: 'fit-content', // Allow container to grow based on content\n          }}>\n            {columnConfig.map(column => {\n              // Show assumptions and mitigations based on individual visibility\n              if (column.id === 'assumptions' || column.id === 'mitigations') {\n                return visibleColumns[column.id] ? renderColumn(column) : null;\n              }\n              // Show threat input columns based on master toggle\n              if (column.isThreatInput) {\n                return threatInputsVisible ? renderColumn(column) : null;\n              }\n              return null;\n            })}\n          </div>\n        </div>\n      </SpaceBetween>\n      <DiagramModal\n        visible={showArchitectureModal}\n        onDismiss={() => setShowArchitectureModal(false)}\n        title=\"Architecture Diagram\"\n        image={architectureInfo.image}\n      />\n      <DiagramModal\n        visible={showDataflowModal}\n        onDismiss={() => setShowDataflowModal(false)}\n        title=\"Data Flow Diagram\"\n        image={dataflowInfo.image}\n      />\n    </ContentLayout>\n  );\n};\n\n/**\n * Main BrainstormBoard component with BrainstormContextProvider wrapper\n *\n * This component orchestrates all extracted components and provides the main\n * brainstorming interface with column visibility management, promotion handlers,\n * and threat creation functionality.\n */\nexport const BrainstormBoard: FC<BrainstormBoardProps> = ({ onNavigateToThreat }) => {\n  const { currentWorkspace } = useWorkspacesContext();\n\n  return (\n    <BrainstormContextProvider workspaceId={currentWorkspace?.id || null}>\n      <BrainstormBoardInner onNavigateToThreat={onNavigateToThreat} />\n    </BrainstormContextProvider>\n  );\n};\n\nexport default BrainstormBoard;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport StatusIndicator from '@cloudscape-design/components/status-indicator';\nimport { css } from '@emotion/react';\nimport { FC } from 'react';\n\nconst styles = css({\n  background: 'transparent',\n  border: 'none !important',\n  cursor: 'pointer',\n});\n\nexport interface StatusProps {\n  completed?: boolean;\n  label: string;\n  onClick: () => void;\n}\n\nconst Status: FC<StatusProps> = ({ completed, label, onClick }) => {\n  return (<button css={styles} onClick={onClick}><StatusIndicator type={completed ? 'success' : 'stopped'}>{label}</StatusIndicator></button>);\n};\n\nexport default Status;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { FC } from 'react';\nimport threatStatementElements from '../../../../../assets/threat-statement-elements.png';\nimport styles from '../../styles';\nimport InfoModalBase from '../InfoModalBase';\n\nconst InfoModalSelector: FC = () => {\n  return (<InfoModalBase>\n    <p>A useful threat statement considers <span css={css(styles.contentHighlight)}>threat source</span>,{' '}\n      <span css={css(styles.contentHighlight)}>prerequisites</span>,{' '}\n      <span css={css(styles.contentHighlight)}>threat action</span>,{' '}\n      <span css={css(styles.contentHighlight)}>threat impact</span>,{' '}\n      <span css={css(styles.contentHighlight)}>impacted goal</span>{' '}\n      and <span css={css(styles.contentHighlight)}>impacted assets</span>.</p>\n    <p>This tool empowers you to compose useful threat statements by providing examples and suggestions\n      for each section and generating the final statement for you.</p>\n    <img css={css(styles.image)} src={threatStatementElements} alt=\"ThreatStatementElements\" />\n  </InfoModalBase>);\n};\n\nexport default InfoModalSelector;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { ThreatFieldData } from '../customTypes';\n\nconst threatFieldData: {\n  [fieldName: string]: ThreatFieldData;\n} = {\n  threat_source: {\n    fieldId: 1,\n    fieldPosition: 1,\n    weight: 10,\n    displayTitle: 'Threat source',\n    displayField: 'threat source',\n    tooltip: 'threat source',\n    description: 'Consider who or what is the source of the threat.',\n  },\n  prerequisites: {\n    fieldId: 2,\n    fieldPosition: 2,\n    weight: 10,\n    displayTitle: 'Prerequisites',\n    displayField: 'prerequisites',\n    tooltip: 'prerequisites',\n    description: 'Consider what conditions or requirement that must be met in order for a threat sources (e.g. threat actor) actions to be viable.',\n  },\n  threat_action: {\n    fieldId: 4,\n    fieldPosition: 3,\n    weight: 30,\n    displayTitle: 'Threat action',\n    displayField: 'threat action',\n    tooltip: 'threat action',\n    description: 'What actions are being performed by, or related to the threat source?',\n  },\n  threat_impact: {\n    fieldId: 8,\n    fieldPosition: 4,\n    weight: 10,\n    displayTitle: 'Threat impact',\n    displayField: 'threat impact',\n    tooltip: 'threat impact',\n    description: 'What are the direct/initial impacts of the threat actions if they were to be successful?',\n  },\n  impacted_goal: {\n    fieldId: 16,\n    fieldPosition: 5,\n    weight: 20,\n    displayTitle: 'Impacted goal',\n    displayField: 'impacted goal',\n    tooltip: 'impacted goal',\n    description: 'Which desirable goal for the organisation assets is impacted negatively as a result?',\n    tokens: ['confidentiality', 'integrity', 'availability'],\n  },\n  impacted_assets: {\n    fieldId: 32,\n    fieldPosition: 6,\n    weight: 20,\n    displayTitle: 'Impacted assets',\n    displayField: 'impacted assets',\n    tooltip: 'impacted assets',\n    description: 'Which assets are in scope for negative impact as a result?',\n    tokens: [],\n  },\n};\n\nexport default threatFieldData;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback, useState } from 'react';\nimport { Mitigation } from '../../../../customTypes';\nimport { LocalStateContextProviderBaseProps } from '../../../types';\nimport { MitigationsContext } from '../../context';\nimport { MitigationsContextProviderProps } from '../../types';\nimport useMitigations from '../../useMitigations';\n\nconst MitigationsLocalStateContextProvider: FC<PropsWithChildren<\nMitigationsContextProviderProps & LocalStateContextProviderBaseProps<Mitigation[]>>> = ({\n  children,\n  initialValue,\n}) => {\n  const [mitigationList, setMitigationList] = useState<Mitigation[]>(initialValue || []);\n\n  const {\n    handlRemoveMitigation,\n    handleSaveMitigation,\n  } = useMitigations(mitigationList, setMitigationList);\n\n  const handleRemoveAllMitigations = useCallback(async () => {\n    setMitigationList([]);\n  }, []);\n\n  const handleDeleteWorkspace = useCallback(async (_workspaceId: string) => {\n    setMitigationList([]);\n  }, []);\n\n  return (<MitigationsContext.Provider value={{\n    mitigationList,\n    setMitigationList,\n    removeMitigation: handlRemoveMitigation,\n    saveMitigation: handleSaveMitigation,\n    removeAllMitigations: handleRemoveAllMitigations,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </MitigationsContext.Provider>);\n};\n\nexport default MitigationsLocalStateContextProvider;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { z } from 'zod';\nimport { BaseImageInfoSchema } from './entities';\n\nexport const DataflowInfoSchema = z.object({\n  description: BaseImageInfoSchema.shape.description.describe('Markdown detailed description of the application data flows. Start your headers from H3 maximum'),\n  image: BaseImageInfoSchema.shape.image.describe('Data-flow diagram image. ' + BaseImageInfoSchema.shape.image.description),\n}).strict();\n\nexport type DataflowInfo = z.infer<typeof DataflowInfoSchema>;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Box from '@cloudscape-design/components/box';\nimport Button from '@cloudscape-design/components/button';\nimport FormField from '@cloudscape-design/components/form-field';\nimport Header from '@cloudscape-design/components/header';\nimport { InputProps } from '@cloudscape-design/components/input';\nimport Modal from '@cloudscape-design/components/modal';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport React, { FC, RefObject, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { WorkspaceSchema, Workspace } from '../../../customTypes';\nimport Input from '../../generic/Input';\n\nexport interface EditWorkspaceProps {\n  visible: boolean;\n  setVisible: React.Dispatch<React.SetStateAction<boolean>>;\n  onConfirm: (workspace: string) => Promise<void>;\n  value?: string;\n  editMode: 'add' | 'update' | 'clone';\n  currentWorkspace?: Workspace;\n  workspaceList: Workspace[];\n  exampleWorkspaceList: Workspace[];\n}\n\nconst BUTTON_LABEL = {\n  add: 'Add',\n  update: 'Update',\n  clone: 'Clone',\n};\n\nconst HEADER_TEXT = {\n  add: 'Add new workspace',\n  update: 'Update workspace',\n  clone: 'Clone workspace',\n};\n\nconst EditWorkspace: FC<EditWorkspaceProps> = ({\n  visible,\n  setVisible,\n  onConfirm,\n  editMode = 'add',\n  workspaceList,\n  exampleWorkspaceList,\n  currentWorkspace,\n  ...props\n}) => {\n  const inputRef = useRef<InputProps.Ref>();\n  const [value, setValue] = useState(props.value || '');\n  const [errorText, setErrorText] = useState('');\n\n  useEffect(() => {\n    setErrorText('');\n  }, [value]);\n\n  const handleConfirm = useCallback(async () => {\n    setErrorText('');\n    if (workspaceList.find(x => x.name === value && (!currentWorkspace || currentWorkspace.id !== x.id))) {\n      setErrorText('A workspace already exists with that name');\n    } else if (exampleWorkspaceList.find(x => x.name === value)) {\n      setErrorText('A workspace example already exists with that name');\n    } else {\n      await onConfirm(value);\n      setVisible(false);\n    }\n  }, [onConfirm, value, workspaceList, exampleWorkspaceList, currentWorkspace]);\n\n  useEffect(() => {\n    inputRef.current?.focus();\n  }, [inputRef.current]);\n\n  const footer = useMemo(() => {\n    return (<Box float=\"right\">\n      <SpaceBetween direction=\"horizontal\" size=\"xs\">\n        <Button variant=\"link\" onClick={() => setVisible(false)}>Cancel</Button>\n        <Button variant=\"primary\" disabled={value.length < 3} onClick={handleConfirm}>{\n          BUTTON_LABEL[editMode as 'add' | 'update' | 'clone'] || 'Add'\n        }</Button>\n      </SpaceBetween>\n    </Box>);\n  }, [setVisible, handleConfirm, value, editMode]);\n\n  return <Modal\n    header={<Header>{HEADER_TEXT[editMode as 'add' | 'update' | 'clone'] || 'Add'}</Header>}\n    visible={visible}\n    footer={footer}\n    onDismiss={() => setVisible(false)}\n  >\n    <SpaceBetween direction=\"vertical\" size=\"m\">\n      <FormField\n        label=\"New workspace name\"\n        errorText={errorText}\n      >\n        <Input ref={inputRef as RefObject<InputProps.Ref>}\n          value={value}\n          onChange={({ detail }) => setValue(detail.value)}\n          validateData={WorkspaceSchema.shape.name.safeParse}\n        />\n      </FormField>\n    </SpaceBetween>\n  </Modal>;\n};\n\nexport default EditWorkspace;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Box from '@cloudscape-design/components/box';\nimport SegmentedControl from '@cloudscape-design/components/segmented-control';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport { FC } from 'react';\nimport svgStyles from '../../../styles/svg';\nimport getMobileMediaQuery from '../../../utils/getMobileMediaQuery';\nimport Tooltip from '../Tooltip';\n\nexport const WITHOUT_NO_LINKED_ENTITY = 'WITHOUT_LINKED_ENTITY';\nexport const ALL = 'ALL';\nexport const WITH_LINKED_ENTITY = 'WITH_LINKED_ENTITY';\n\nexport interface LinkedEntityFilterProps {\n  label: string;\n  entityDisplayName: string;\n  selected?: string;\n  setSelected: (selected: string) => void;\n}\n\nconst styles = {\n  root: css({\n    display: 'flex',\n    alignItems: 'center',\n    gap: awsui.spaceScaledS,\n    [getMobileMediaQuery()]: {\n      display: 'block',\n    },\n  }),\n};\n\nconst LinkedEntityFilter: FC<LinkedEntityFilterProps> = ({\n  selected = ALL,\n  setSelected,\n  entityDisplayName,\n  label,\n}) => {\n  return (<div css={styles.root}>\n    <Box variant='awsui-key-label'>{label}</Box>\n    <SegmentedControl\n      selectedId={selected}\n      onChange={({ detail }) =>\n        setSelected(detail.selectedId)\n      }\n      options={[\n        {\n          iconAlt: `Without linked ${entityDisplayName}`,\n          id: WITHOUT_NO_LINKED_ENTITY,\n          iconSvg: (<Tooltip tooltip={`Show threats without linked ${entityDisplayName}`}>\n            <svg css={svgStyles} aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"LinkOffIcon\">\n              <path d=\"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z\"></path>\n            </svg>\n          </Tooltip>),\n        },\n        {\n          iconAlt: 'All',\n          id: ALL,\n          iconSvg: (<Tooltip tooltip='Show all threats'>\n            <svg css={svgStyles} aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"AllInclusiveIcon\">\n              <path d=\"M18.6 6.62c-1.44 0-2.8.56-3.77 1.53L12 10.66 10.48 12h.01L7.8 14.39c-.64.64-1.49.99-2.4.99-1.87 0-3.39-1.51-3.39-3.38S3.53 8.62 5.4 8.62c.91 0 1.76.35 2.44 1.03l1.13 1 1.51-1.34L9.22 8.2C8.2 7.18 6.84 6.62 5.4 6.62 2.42 6.62 0 9.04 0 12s2.42 5.38 5.4 5.38c1.44 0 2.8-.56 3.77-1.53l2.83-2.5.01.01L13.52 12h-.01l2.69-2.39c.64-.64 1.49-.99 2.4-.99 1.87 0 3.39 1.51 3.39 3.38s-1.52 3.38-3.39 3.38c-.9 0-1.76-.35-2.44-1.03l-1.14-1.01-1.51 1.34 1.27 1.12c1.02 1.01 2.37 1.57 3.82 1.57 2.98 0 5.4-2.41 5.4-5.38s-2.42-5.37-5.4-5.37z\"></path>\n            </svg>\n          </Tooltip>),\n        },\n        {\n          iconAlt: `With ${entityDisplayName}`,\n          id: WITH_LINKED_ENTITY,\n          iconSvg: (<Tooltip tooltip={`Show threats with linked ${entityDisplayName}`}>\n            <svg css={svgStyles} aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"LinkIcon\">\n              <path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path>\n            </svg>\n          </Tooltip>),\n        },\n      ]}\n    /></div>);\n};\n\nexport default LinkedEntityFilter;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\n\nconst styles = {\n  print: css({\n    '@media print': {\n      color: `${awsui.colorBackgroundHomeHeader} !important`,\n    },\n  }),\n  hiddenPrint: css({\n    '@media print': {\n      display: 'none !important;',\n    },\n  }),\n};\n\nexport default styles;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Badge, { BadgeProps } from '@cloudscape-design/components/badge';\nimport { SelectProps } from '@cloudscape-design/components/select';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport { FC, useMemo, useState, useRef } from 'react';\nimport StatusSelector, { StatusSelectorProps } from '../StatusSelector';\n\nexport interface StatusBadgeProps extends Omit<StatusSelectorProps, 'showLabel'> {\n  statusColorMapping: {\n    [status: string]: BadgeProps['color'];\n  };\n}\n\nconst StatusBadge: FC<StatusBadgeProps> = ({\n  selectedOption,\n  setSelectedOption,\n  options,\n  statusColorMapping,\n}) => {\n  const ref = useRef<SelectProps.Ref>();\n\n  const [editMode, setEditMode] = useState(false);\n\n  const editor = useMemo(() => {\n    return <StatusSelector\n      ref={ref}\n      showLabel={false}\n      options={options}\n      selectedOption={selectedOption}\n      setSelectedOption={setSelectedOption}\n      onBlur={() => setEditMode(false)}\n    />;\n  }, [options, selectedOption, setSelectedOption]);\n\n  return <div>{editMode ? (editor) :\n    (<button\n      onClick={() => {\n        setEditMode(true);\n        setTimeout(() => ref.current?.focus(), 200);\n      }}\n      css={css`\n        background: none;\n        color: inherit;\n        border: none;\n        padding: 0;\n        paddingBottom: ${awsui.spaceScaledXxs};\n        font: inherit;\n        cursor: pointer;\n        outline: inherit;\n        verticalAlign: middle;\n      `}>\n      <Badge color={statusColorMapping[selectedOption || 'NotSet'] || 'grey'}>{selectedOption && options.find(x => x.value === selectedOption)?.label || 'Status Not Set'}</Badge>\n    </button>)}</div>;\n};\n\nexport default StatusBadge;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback } from 'react';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { LOCAL_STORAGE_KEY_DATAFLOW_INFO } from '../../../../configs/localStorageKeys';\nimport { DataflowInfo } from '../../../../customTypes';\nimport removeLocalStorageKey from '../../../../utils/removeLocalStorageKey';\nimport { INFO_DEFAULT_VALUE } from '../../../constants';\nimport { DataflowInfoContext, useDataflowInfoContext } from '../../context';\nimport { DataflowContextProviderProps } from '../../types';\n\nexport const getLocalStorageKey = (workspaceId: string | null) => {\n  if (workspaceId) {\n    return `${LOCAL_STORAGE_KEY_DATAFLOW_INFO}_${workspaceId}`;\n  }\n\n  return LOCAL_STORAGE_KEY_DATAFLOW_INFO;\n};\n\nconst DataflowLocalStorageContextProvider: FC<PropsWithChildren<DataflowContextProviderProps>> = ({\n  children,\n  workspaceId: currentWorkspaceId,\n}) => {\n  const [dataflowInfo, setDataflowInfo, { removeItem }] = useLocalStorageState<DataflowInfo>(getLocalStorageKey(currentWorkspaceId), {\n    defaultValue: INFO_DEFAULT_VALUE,\n  });\n\n  const handleRemoveDataflowInfo = useCallback(async () => {\n    removeItem();\n  }, [removeItem]);\n\n  const handleDeleteWorkspace = useCallback(async (workspaceId: string) => {\n    window.setTimeout(() => {\n      // to delete after the workspace is switched. Otherwise the default value is set again.\n      removeLocalStorageKey(getLocalStorageKey(workspaceId));\n    }, 1000);\n  }, []);\n\n  return (<DataflowInfoContext.Provider value={{\n    dataflowInfo,\n    setDataflowInfo,\n    removeDataflowInfo: handleRemoveDataflowInfo,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </DataflowInfoContext.Provider>);\n};\n\nexport default DataflowLocalStorageContextProvider;\n\nexport {\n  useDataflowInfoContext,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { MOBILE_BREAKPOINT, SMALL_DEVICE_BREAKPOINT } from '../../configs';\n\nconst getMobileMediaQuery = () => {\n  return `@media (max-width: ${MOBILE_BREAKPOINT}px)`;\n};\n\nexport const getSmallMobileMediaQuery = () => {\n  return `@media (max-width: ${SMALL_DEVICE_BREAKPOINT}px)`;\n};\n\nexport default getMobileMediaQuery;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useCallback, useEffect, useState } from 'react';\nimport { ComposerMode, TemplateThreatStatement } from '../../../../customTypes';\nimport getNewThreatStatement from '../../../../utils/getNewThreatStatement';\nimport { View } from '../../types';\n\nconst useThreats = (\n  composerMode: ComposerMode,\n  statementList: TemplateThreatStatement[],\n  setStatementList: React.Dispatch<React.SetStateAction<TemplateThreatStatement[]>>,\n  editingStatement: TemplateThreatStatement | null,\n  setEditingStatement: React.Dispatch<React.SetStateAction<TemplateThreatStatement | null>>,\n) => {\n  const [view, setView] = useState<View>('list');\n\n  const handleAddStatement = useCallback((idToCopy?: string) => {\n    if (composerMode !== 'Full') { // If Full mode, the value will be set via the route in the app.\n      const newDefaultStatement = getNewThreatStatement();\n\n      if (idToCopy) {\n        const copiedStatement = statementList.find(st => st.id === idToCopy);\n        if (copiedStatement) {\n          const { id: _id, displayOrder, tags, metadata, ...rest } = copiedStatement;\n          const newStatement = {\n            ...rest,\n            ...newDefaultStatement,\n          };\n\n          setEditingStatement(newStatement);\n        }\n      } else {\n        setEditingStatement(newDefaultStatement);\n      }\n    }\n  }, [statementList, setEditingStatement]);\n\n  const handlRemoveStatement = useCallback((id: string) => {\n    setStatementList((prevList) => prevList.filter(x => x.id !== id));\n  }, [setStatementList]);\n\n  const handleEditStatement = useCallback((id: string) => {\n    if (composerMode !== 'Full') { // If Full mode, the value will be set via the route in the app.\n      const statement = statementList.find(s => s.id === id);\n      if (statement) {\n        setEditingStatement(statement as TemplateThreatStatement);\n      }\n    }\n  }, [statementList]);\n\n  const handleSaveStatement = useCallback((statement: TemplateThreatStatement) => {\n    setStatementList((prevList) => {\n      let numericId = statement.numericId;\n\n      if (numericId === -1) {\n        const maxId = prevList.reduce((max: number, cur: TemplateThreatStatement) => {\n\n          if (cur.numericId > max) {\n            return cur.numericId;\n          }\n\n          return max;\n        }, 0);\n        numericId = maxId + 1;\n      }\n\n      let updatedStatement: TemplateThreatStatement = {\n        ...statement,\n        numericId,\n        displayOrder: numericId,\n      };\n\n      updatedStatement = {\n        ...updatedStatement,\n        threatSource: updatedStatement.threatSource?.trim(),\n        prerequisites: updatedStatement.prerequisites?.trim(),\n        threatAction: updatedStatement.threatAction?.trim(),\n        threatImpact: updatedStatement.threatImpact?.trim(),\n      };\n\n      const foundIndex = prevList.findIndex(st => st.id === statement.id);\n      if (foundIndex >= 0) {\n        return [...prevList.slice(0, foundIndex), updatedStatement, ...prevList.slice(foundIndex + 1)];\n      }\n\n      return [...prevList, updatedStatement];\n    });\n  }, [setStatementList]);\n\n  useEffect(() => {\n    if (composerMode === 'ThreatsOnly') {\n      if (editingStatement) {\n        setView('editor');\n      } else {\n        setView('list');\n      }\n    }\n  }, [composerMode, editingStatement, setView]);\n\n  const lenStatementList = statementList.length;\n  const editingStatementExist = !!editingStatement;\n\n  return {\n    view,\n    setView,\n    handleAddStatement,\n    handlRemoveStatement,\n    handleEditStatement,\n    handleSaveStatement,\n    lenStatementList,\n    editingStatementExist,\n  };\n};\n\nexport default useThreats;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { z } from 'zod';\nimport { ContentEntityBaseSchema, EntityLinkBaseSchema } from './entities';\n\nexport const AssumptionSchema = ContentEntityBaseSchema.extend({\n  content: ContentEntityBaseSchema.shape.content.describe('Assumption. Plain-text'),\n}).strict();\n\nexport type Assumption = z.infer<typeof AssumptionSchema>;\n\nexport const AssumptionLinkSchema = EntityLinkBaseSchema.extend({\n  type: z.union([z.literal('Mitigation'), z.literal('Threat')]),\n  /**\n   * The assumption being linked.\n   */\n  assumptionId: z.string().length(36).describe('UUID for the assumption'),\n  /**\n   * The linked entity Id.\n   */\n  linkedId: z.string().length(36).describe('UUID of the linked threat or mitigation'),\n}).strict();\n\nexport type AssumptionLink = z.infer<typeof AssumptionLinkSchema>;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { EXPORT_FILE_NAME } from '../../configs/export';\nimport { ComposerMode, Workspace } from '../../customTypes';\n\nconst getExportFileName = (composerMode: ComposerMode, filtered: boolean, currentWorkspace: Workspace | null) => {\n  const exportFileName = `${EXPORT_FILE_NAME}_Workspace_${currentWorkspace ? currentWorkspace.name.replace(' ', '-') : 'Default'}${composerMode !== 'Full' ? '_ThreatsOnly' : ''}${filtered ? '_Filtered' : ''}`;\n  return exportFileName;\n};\n\nexport default getExportFileName;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { DataExchangeFormat, DataExchangeFormatSchema } from '../../customTypes';\n\nconst validateData = (data: DataExchangeFormat) => {\n  const validation = DataExchangeFormatSchema.safeParse(data);\n  return validation;\n};\n\nexport default validateData;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Button from '@cloudscape-design/components/button';\nimport FormField, { FormFieldProps } from '@cloudscape-design/components/form-field';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport React, { FC, useCallback, useRef, useMemo, useState, useEffect } from 'react';\nimport FileTokenLabel from './components/FileTokenLabel';\nimport getDisplaySize from './utils/getDisplaySize';\n\nexport interface FileUploadProps extends FormFieldProps {\n  accept?: string;\n  sizeLimit?: number;\n  buttonText?: string;\n  name?: string;\n  onChange?: (files: File[]) => void;\n  files?: File[];\n}\n\nconst FileUpload: FC<FileUploadProps> = ({\n  controlId,\n  label,\n  description,\n  constraintText,\n  secondaryControl,\n  info,\n  buttonText = 'Choose file',\n  name,\n  accept,\n  files,\n  sizeLimit,\n  onChange,\n  ...props\n}) => {\n  const inputElement = useRef<HTMLInputElement | null>(null);\n  const [errorText, setErrorText] = useState<React.ReactNode>(props.errorText);\n\n  useEffect(() => {\n    setErrorText(props.errorText);\n  }, [props.errorText]);\n\n  const footer = useMemo(() => {\n    if (!files || files.length === 0) {\n      return null;\n    }\n    return (\n      <FileTokenLabel\n        name={files[0].name}\n        lastModified={files[0].lastModified}\n        size={files[0].size}\n      />\n    );\n  }, [files]);\n\n  const handleFileSelectionButtonClick = useCallback(() => {\n    inputElement.current?.click();\n  }, []);\n\n  const handleFileSelectionChange: React.ChangeEventHandler<HTMLInputElement> = useCallback(\n    (event) => {\n      const newFiles: File[] = [];\n      setErrorText(undefined);\n\n      if (event.target.files) {\n        const targetFiles = event.target.files;\n        const len = targetFiles.length;\n        for (let i = 0; i < len; i++) {\n          const file = targetFiles.item(i);\n          if (file) {\n            if (sizeLimit && file.size > sizeLimit) {\n              setErrorText(`File ${file.name} exceeds maximum file size limit: ${getDisplaySize(sizeLimit)}`);\n              break;\n            }\n\n            newFiles.push(file);\n          }\n        }\n      }\n\n      onChange?.(newFiles);\n    },\n    [files, onChange],\n  );\n\n  return (\n    <SpaceBetween direction=\"vertical\" size=\"m\">\n      <FormField\n        {...props}\n        label={label}\n        info={info}\n        description={description}\n        constraintText={constraintText}\n        secondaryControl={secondaryControl}\n        errorText={errorText}\n      >\n        <input\n          ref={inputElement}\n          name={name}\n          style={{ display: 'none' }}\n          type=\"file\"\n          accept={accept}\n          onChange={handleFileSelectionChange}\n        />\n        <Button iconName=\"upload\" onClick={handleFileSelectionButtonClick}>\n          {buttonText}\n        </Button>\n      </FormField>\n      {footer}\n    </SpaceBetween>\n  );\n};\n\nexport default FileUpload;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { METADATA_KEY_SOURCE, METADATA_KEY_SOURCE_THREAT_PACK, METADATA_KEY_SOURCE_THREAT_PACK_THREAT, METADATA_SOURCE_THREAT_PACK } from '../../configs';\nimport { TemplateThreatStatement } from '../../customTypes';\nimport getNewThreatStatement from '../getNewThreatStatement';\n\nconst getThreatFromThreactPackThreat = (threatPackId: string, t: TemplateThreatStatement) => {\n  return {\n    ...t,\n    ...getNewThreatStatement(),\n    tags: t.tags,\n    metadata: [\n      ...(t.metadata || []),\n      {\n        key: METADATA_KEY_SOURCE,\n        value: METADATA_SOURCE_THREAT_PACK,\n      },\n      {\n        key: METADATA_KEY_SOURCE_THREAT_PACK,\n        value: threatPackId,\n      },\n      {\n        key: METADATA_KEY_SOURCE_THREAT_PACK_THREAT,\n        value: t.id,\n      },\n    ],\n  };\n};\n\nexport default getThreatFromThreactPackThreat;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport sanitizeHtmlString from 'sanitize-html';\n\nconst sanitizeHtml: any = (data: any) => {\n  if (data) {\n    if (Array.isArray(data)) {\n      return data.map(d => sanitizeHtml(d));\n    } else if (typeof data === 'string') {\n      return sanitizeHtmlString(data, {\n        allowedTags: [],\n      });\n    } else if (typeof data === 'object') {\n      return Object.keys(data).reduce(\n        (attrs, key) => ({\n          ...attrs,\n          [key]: sanitizeHtml(data[key]),\n        }),\n        {},\n      );\n    }\n  }\n\n  return data;\n};\n\nexport default sanitizeHtml;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport ColumnLayout from '@cloudscape-design/components/column-layout';\nimport { TextareaProps } from '@cloudscape-design/components/textarea';\nimport { FC, useCallback, forwardRef, useRef, RefObject, useImperativeHandle } from 'react';\nimport { useBrainstormContext } from '../../../contexts/BrainstormContext/context';\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\nimport { TemplateThreatStatementSchema } from '../../../customTypes';\nimport Textarea from '../../generic/Textarea';\nimport BrainstormList from '../BrainstormList';\nimport EditorLayout from '../EditorLayout';\nimport styles from '../EditorLayout/styles';\nimport ExampleList from '../ExampleList';\nimport PreviousInputList from '../PreviousInputList';\nimport { EditorProps } from '../ThreatStatementEditor/types';\n\nconst EditorThreatAction: FC<EditorProps> = forwardRef<TextareaProps.Ref, EditorProps>(({\n  statement, setStatement, fieldData,\n}, ref) => {\n  const inputRef = useRef<TextareaProps.Ref>();\n  const { perFieldExamples, previousInputs } = useThreatsContext();\n  const { brainstormData } = useBrainstormContext();\n\n  useImperativeHandle(ref, () => {\n    return {\n      focus() {\n        inputRef.current?.focus();\n      },\n    };\n  }, []);\n\n  const handleChange = useCallback((threatAction: string) => {\n    setStatement(prevStatement => prevStatement && ({\n      ...prevStatement,\n      threatAction: threatAction,\n    }));\n  }, [setStatement]);\n\n  const handleSelect = useCallback((threatAction: string) => {\n    handleChange(threatAction);\n    inputRef.current?.focus();\n  }, [handleChange]);\n\n  return (<EditorLayout\n    title={fieldData.displayTitle}\n    description={fieldData.description}\n  >\n    <div css={styles.textEditorLayout}>\n      <div css={styles.input}>\n        <Textarea\n          ref={inputRef as RefObject<TextareaProps.Ref>}\n          spellcheck\n          onChange={({ detail }) => handleChange(detail.value)}\n          value={statement.threatAction || ''}\n          placeholder=\"Enter threat action\"\n          validateData={TemplateThreatStatementSchema.shape.threatAction.safeParse}\n          rows={2}\n          singleLine\n          stretch\n        />\n      </div>\n      {statement.threatAction && <div css={styles.inputClear}>\n        <Button variant='icon' iconName='close' onClick={() => handleChange('')} />\n      </div>}\n    </div>\n    <ColumnLayout columns={\n      (perFieldExamples.threat_action.length > 0 ? 1 : 0) +\n      (previousInputs.threat_action.length > 0 ? 1 : 0) +\n      ((brainstormData.threatActions?.length || 0) > 0 ? 1 : 0)\n    }>\n      {perFieldExamples.threat_action.length > 0 &&\n        <ExampleList examples={perFieldExamples.threat_action} onSelect={handleSelect}></ExampleList>}\n      {previousInputs.threat_action.length > 0 &&\n        <PreviousInputList\n          items={previousInputs.threat_action}\n          onSelect={(content) => handleSelect(content)}\n        />\n      }\n      {(brainstormData.threatActions?.length || 0) > 0 &&\n        <BrainstormList\n          items={brainstormData.threatActions || []}\n          onSelect={handleSelect}\n        />\n      }\n    </ColumnLayout>\n  </EditorLayout>);\n});\n\nexport default EditorThreatAction;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { ThreatStatementFormat } from '../customTypes';\n\nconst threatStatementFormat: ThreatStatementFormat = {\n  7: {\n    template: 'A [threat_source] [prerequisites] can [threat_action]',\n    suggestions: [\n      '[threat_impact] Consider if there is any initial impact of the threat as a result of the threat action being successful',\n      '[impacted_goal] Consider which specific desirable goal (e.g. confidentially) is being diminished against the listed assests. It is important to understand the impact of the risk, and to help with prioritisation',\n      '[impacted_assets] Consider which assets are being impacted. It is important to understand the impact of the risk, and to help with prioritisation',\n    ],\n  },\n  15: {\n    template: 'A [threat_source] [prerequisites] can [threat_action], which leads to [threat_impact]',\n    suggestions: [\n      '[impacted_assets] Consider which assets could be negatively impacted. It is important to understand the impact of the risk, and to help with prioritisation',\n      '[impacted_goal] Consider which specific desirable goal (e.g. confidentially) is being diminished. It is important to understand the impact of the risk, and to help with prioritisation',\n    ],\n  },\n  23: {\n    template: 'A [threat_source] [prerequisites] can [threat_action], resulting in reduced [impacted_goal]',\n    suggestions: [\n      '[threat_impact] Consider if there is any initial impact of the threat leading up to the dimineshing of the desirable goal',\n      '[impacted_assets] Consider which assets are being impacted. It is important to understand the impact of the risk, and to help with prioritisation',\n    ],\n  },\n  31: {\n    template: 'A [threat_source] [prerequisites] can [threat_action], which leads to [threat_impact], resulting in reduced [impacted_goal]',\n    suggestions: [\n      '[impacted_assets] Consider which assets are being impacted. It is important to understand the impact of the risk, and to help with prioritisation',\n    ],\n  },\n  39: {\n    template: 'A [threat_source] [prerequisites] can [threat_action], negatively impacting [impacted_assets]',\n    suggestions: [\n      '[threat_impact] Consider if there is any initial impact of the threat as a result of the threat action being successful',\n      '[impacted_goal] Consider which specific desirable goal (e.g. confidentially) is being diminished against the listed assests. It is important to understand the impact of the risk, and to help with prioritisation',\n    ],\n  },\n  47: {\n    template: 'A [threat_source] [prerequisites] can [threat_action], which leads to [threat_impact], negatively impacting [impacted_assets]',\n    suggestions: [\n      '[impacted_goal] Consider which specific desirable goal (e.g. confidentially) is being diminished. It is important to understand the impact of the risk, and to help with prioritisation',\n    ],\n  },\n  55: {\n    template: 'A [threat_source] [prerequisites] can [threat_action], resulting in reduced [impacted_goal] of [impacted_assets]',\n    suggestions: [\n      '[threat_impact] Consider if there is any initial impact of the threat leading up to the desirable goal being diminished in specified assets',\n    ],\n  },\n  63: {\n    template: 'A [threat_source] [prerequisites] can [threat_action], which leads to [threat_impact], resulting in reduced [impacted_goal] of [impacted_assets]',\n    suggestions: [],\n  },\n};\n\nexport default threatStatementFormat;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { STATUS_NOT_SET } from '../../../../configs';\nimport { DataExchangeFormat } from '../../../../customTypes';\nimport mitigationStatus from '../../../../data/status/mitigationStatus.json';\nimport escapeMarkdown from '../../../../utils/escapeMarkdown';\nimport parseTableCellContent from '../../../../utils/parseTableCellContent';\nimport standardizeNumericId from '../../../../utils/standardizeNumericId';\n\nexport const getMitigationsContent = async (\n  data: DataExchangeFormat,\n) => {\n  const rows: string[] = [];\n  rows.push('## Mitigations');\n\n  rows.push('\\n');\n\n  rows.push('| Mitigation Number | Mitigation | Threats Mitigating | Assumptions | Status | Comments |');\n  rows.push('| --- | --- | --- | --- | --- | --- |');\n\n  if (data.mitigations) {\n    const promises = data.mitigations.map(async (x) => {\n      const threats = data.mitigationLinks?.filter(ml => ml.mitigationId === x.id) || [];\n      const assumpptionLinks = data.assumptionLinks?.filter(al => al.linkedId === x.id) || [];\n\n      const threatsContent = threats.map(tl => {\n        const threat = data.threats?.find(s => s.id === tl.linkedId);\n        if (threat) {\n          const threatId = `T-${standardizeNumericId(threat.numericId)}`;\n          return `[**${threatId}**](#${threatId}): ${escapeMarkdown(threat.statement || '')}`;\n        }\n        return null;\n      }).filter(t => !!t).join('<br/>');\n\n      const assumptionsContent = assumpptionLinks.map(al => {\n        const assumption = data.assumptions?.find(a => a.id === al.assumptionId);\n        if (assumption) {\n          const assumptionId = `A-${standardizeNumericId(assumption.numericId)}`;\n          return `[**${assumptionId}**](#${assumptionId}): ${escapeMarkdown(assumption.content)}`;\n        }\n        return null;\n      }).filter(a => !!a).join('<br/>');\n\n      const status = (x.status && mitigationStatus.find(ms => ms.value === x.status)?.label) || STATUS_NOT_SET;\n\n      const comments = await parseTableCellContent((x.metadata?.find(m => m.key === 'Comments')?.value as string) || '');\n\n      const mitigationId = `M-${standardizeNumericId(x.numericId)}`;\n      return `| <a name=\"${mitigationId}\"></a>${mitigationId} | ${escapeMarkdown(x.content)} | ${threatsContent} | ${assumptionsContent} | ${status} | ${comments} |`;\n    });\n\n    rows.push(...(await Promise.all(promises)));\n  }\n\n  rows.push('\\n');\n\n  return rows.join('\\n');\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport {\n  Button,\n  Box,\n  FormField,\n  Select,\n  ColumnLayout,\n  BarChart,\n  BarChartProps,\n} from '@cloudscape-design/components';\nimport { useState, useMemo, useCallback, FC } from 'react';\nimport {\n  ALL_LEVELS,\n  LEVEL_NOT_SET,\n  LEVEL_SELECTOR_OPTIONS_INCLUDING_ALL,\n  DEFAULT_NEW_ENTITY_ID,\n} from '../../../../../configs';\nimport { useThreatsContext } from '../../../../../contexts/ThreatsContext';\nimport filterThreatsByMetadata from '../../../../../utils/filterThreatsByMetadata';\nimport DashboardNumber from '../../../../generic/DashboardNumber';\nimport useThreatListLinkClicked from '../../hooks/useThreatListLinkClicked';\nimport { WorkspaceInsightsProps } from '../../types';\n\nconst STRIDEAllocation: FC<WorkspaceInsightsProps> = ({\n  onThreatEditorView,\n  onThreatListView,\n}) => {\n  const { statementList, addStatement } = useThreatsContext();\n\n  const [selectedPriority, setSelectedPriority] = useState<string | undefined>(\n    ALL_LEVELS,\n  );\n\n  const filteredStatementList = useMemo(() => {\n    return filterThreatsByMetadata(statementList, 'Priority', selectedPriority);\n  }, [statementList, selectedPriority]);\n\n  const handleAddStatement = useCallback(() => {\n    addStatement();\n    onThreatEditorView?.(DEFAULT_NEW_ENTITY_ID);\n  }, [addStatement, onThreatEditorView]);\n\n  const missingStride = useMemo(\n    () => filterThreatsByMetadata(filteredStatementList, 'STRIDE').length,\n    [filteredStatementList],\n  );\n  const countSpoofing = useMemo(\n    () => filterThreatsByMetadata(filteredStatementList, 'STRIDE', 'S').length,\n    [filteredStatementList],\n  );\n  const countTampering = useMemo(\n    () => filterThreatsByMetadata(filteredStatementList, 'STRIDE', 'T').length,\n    [filteredStatementList],\n  );\n  const countRepudiation = useMemo(\n    () => filterThreatsByMetadata(filteredStatementList, 'STRIDE', 'R').length,\n    [filteredStatementList],\n  );\n  const countInformationDisclosure = useMemo(\n    () => filterThreatsByMetadata(filteredStatementList, 'STRIDE', 'I').length,\n    [filteredStatementList],\n  );\n  const countDenialOfService = useMemo(\n    () => filterThreatsByMetadata(filteredStatementList, 'STRIDE', 'D').length,\n    [filteredStatementList],\n  );\n  const countElevationOfPrivilege = useMemo(\n    () => filterThreatsByMetadata(filteredStatementList, 'STRIDE', 'E').length,\n    [filteredStatementList],\n  );\n\n  const handleLinkClicked = useThreatListLinkClicked(onThreatListView);\n\n  const barSeries: BarChartProps<string>['series'] = [\n    {\n      title: 'Spoofing',\n      type: 'bar',\n      data: [{ x: 'Spoofing', y: countSpoofing }],\n    },\n    {\n      title: 'Tampering',\n      type: 'bar',\n      data: [{ x: 'Tampering', y: countTampering }],\n    },\n    {\n      title: 'Repudiation',\n      type: 'bar',\n      data: [{ x: 'Repudiation', y: countRepudiation }],\n    },\n    {\n      title: 'Information disclosure',\n      type: 'bar',\n      data: [{ x: 'Information disclosure', y: countInformationDisclosure }],\n    },\n    {\n      title: 'Denial of service',\n      type: 'bar',\n      data: [{ x: 'Denial of Service', y: countDenialOfService }],\n    },\n    {\n      title: 'Elevation of Privilege',\n      type: 'bar',\n      data: [{ x: 'Elevation of Privilege', y: countElevationOfPrivilege }],\n    },\n  ];\n\n  return (\n    <ColumnLayout columns={1} borders=\"horizontal\">\n      {!statementList.length ? (\n        <Box\n          margin=\"xxl\"\n          padding=\"xxl\"\n          color=\"text-body-secondary\"\n          textAlign=\"center\"\n        >\n          <b>No threats available</b>\n          <Box variant=\"p\" color=\"text-body-secondary\">\n            Start by adding a threat to this workspace\n          </Box>\n          <Button variant=\"primary\" onClick={() => handleAddStatement()}>Add a threat</Button>\n        </Box>\n      ) : (\n        <div>\n          <FormField label=\"Filter by threat priority\">\n            <Select\n              selectedOption={\n                LEVEL_SELECTOR_OPTIONS_INCLUDING_ALL.find(\n                  (x) => x.value === selectedPriority,\n                ) || null\n              }\n              onChange={({ detail }) => {\n                setSelectedPriority(detail.selectedOption.value);\n              }}\n              options={LEVEL_SELECTOR_OPTIONS_INCLUDING_ALL}\n            />\n          </FormField>\n          {!filteredStatementList.length ? (\n            <Box\n              margin=\"xxl\"\n              padding=\"xxl\"\n              color=\"text-body-secondary\"\n              textAlign=\"center\"\n            >\n              <b>No threats meet the filter criteria</b>\n            </Box>\n          ) : (\n            <Box padding=\"s\">\n              <BarChart\n                series={barSeries}\n                ariaLabel=\"Threat category allocation chart\"\n                emphasizeBaselineAxis={false}\n                height={280}\n                hideFilter\n                hideLegend\n                horizontalBars\n                stackedBars\n                noMatch={\n                  <Box textAlign=\"center\" color=\"inherit\">\n                    <b>No matching data</b>\n                    <Box variant=\"p\" color=\"inherit\">\n                      There is no matching data to display\n                    </Box>\n                    <Button>Clear filter</Button>\n                  </Box>\n                }\n              />\n            </Box>\n          )}\n        </div>\n      )}\n      {missingStride > 0 ? (\n        <div>\n          <Box variant=\"awsui-key-label\">Missing STRIDE</Box>\n          <DashboardNumber\n            showWarning\n            featuredNumber={missingStride}\n            onLinkClicked={handleLinkClicked({\n              stride: LEVEL_NOT_SET,\n            })}\n          />\n        </div>\n      ) : null}\n    </ColumnLayout>\n  );\n};\n\nexport default STRIDEAllocation;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport ContentLayoutComponent from '@cloudscape-design/components/content-layout';\nimport Grid from '@cloudscape-design/components/grid';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport React, { FC, useCallback, useMemo, useState, useRef, useEffect, ReactNode, PropsWithChildren } from 'react';\nimport { EditorProps } from './types';\nimport { METADATA_KEY_SOURCE, METADATA_KEY_SOURCE_THREAT_PACK, METADATA_KEY_SOURCE_THREAT_PACK_MITIGATION_CANDIDATE, METADATA_KEY_SOURCE_THREAT_PACK_THREAT } from '../../../configs';\nimport { DEFAULT_NEW_ENTITY_ID, DEFAULT_WORKSPACE_LABEL } from '../../../configs/constants';\nimport { useAssumptionLinksContext } from '../../../contexts/AssumptionLinksContext/context';\nimport { useAssumptionsContext } from '../../../contexts/AssumptionsContext/context';\nimport { GlobalSetupContextApi, useGlobalSetupContext } from '../../../contexts/GlobalSetupContext/context';\nimport { useMitigationLinksContext } from '../../../contexts/MitigationLinksContext/context';\nimport { useMitigationsContext } from '../../../contexts/MitigationsContext/context';\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\nimport { useWorkspacesContext } from '../../../contexts/WorkspacesContext/context';\nimport { Mitigation, TemplateThreatStatement, ViewNavigationEvent } from '../../../customTypes';\nimport { ThreatFieldTypes } from '../../../customTypes/threatFieldTypes';\nimport threatFieldData from '../../../data/threatFieldData';\nimport threatStatementExamples from '../../../data/threatStatementExamples.json';\nimport threatStatementFormat from '../../../data/threatStatementFormat';\nimport useEditMetadata from '../../../hooks/useEditMetadata';\nimport getMetadata from '../../../utils/getMetadata';\nimport getNewMitigation from '../../../utils/getNewMitigation';\nimport getNewThreatStatement from '../../../utils/getNewThreatStatement';\nimport getRecommendedEditor from '../../../utils/getRecommandedEditor';\nimport matchThreatPackMitigationCandidate from '../../../utils/matchThreatPackMitigationCandidate';\nimport renderThreatStatement from '../../../utils/renderThreatStatement';\nimport scrollToTop from '../../../utils/scrollToTop';\nimport AssumptionLinkComponent from '../../assumptions/AssumptionLinkView';\nimport Tooltip from '../../generic/Tooltip';\nimport MitigationLinkComponent from '../../mitigations/MitigationLinkView';\nimport CustomTemplate from '../CustomTemplate';\nimport EditorImpactedAssets from '../EditorImpactedAssets';\nimport EditorImpactedGoal from '../EditorImpactedGoal';\nimport EditorPrerequisites from '../EditorPrerequisites';\nimport EditorThreatAction from '../EditorThreatAction';\nimport EditorThreatImpact from '../EditorThreatImpact';\nimport EditorThreatSource from '../EditorThreatSource';\nimport FieldSelector from '../FieldSelector';\nimport FinalStatement from '../FinalStatement';\nimport FullExamples from '../FullExamples';\nimport Header from '../Header';\nimport MetadataEditor from '../MetadataEditor';\nimport Metrics from '../Metrics';\nimport MitigationCandidates from '../MitigationCandidates';\n\nconst styles = {\n  finalStatementSection: css({\n    '&:hover': {\n      backgroundColor: awsui.colorBackgroundDropdownItemHover,\n    },\n  }),\n  metadataContainer: css({\n    'h3>span>span': {\n      fontSize: '20px',\n    },\n  }),\n};\n\nconst defaultThreatStatementFormat = threatStatementFormat[63];\n\nexport interface ThreatStatementEditorProps {\n  onThreatListView?: ViewNavigationEvent['onThreatListView'];\n  threatPackId?: string;\n  threatPackThreatId?: string;\n  initialEditorField?: ThreatFieldTypes;\n}\n\nconst editorMapping: { [key in ThreatFieldTypes]: React.ComponentType<EditorProps & { ref?: React.ForwardedRef<any> }> } = {\n  threat_source: EditorThreatSource,\n  prerequisites: EditorPrerequisites,\n  threat_action: EditorThreatAction,\n  threat_impact: EditorThreatImpact,\n  impacted_goal: EditorImpactedGoal,\n  impacted_assets: EditorImpactedAssets,\n};\n\nconst ContentLayout: FC<PropsWithChildren<{\n  composerMode: GlobalSetupContextApi['composerMode'];\n  editingStatement: TemplateThreatStatement;\n  saveButtonText: string;\n  onCancel: () => void;\n  onStartOver?: () => void;\n  onComplete: () => void;\n}>> = ({\n  children,\n  editingStatement,\n  composerMode,\n  onCancel,\n  onStartOver,\n  onComplete,\n  saveButtonText,\n}) => {\n  if (composerMode !== 'Full') {\n    return (<>{children}</>);\n  }\n\n  return (<ContentLayoutComponent\n    disableOverlap\n    headerVariant=\"high-contrast\"\n    header={<Header\n      composerMode={composerMode}\n      statement={editingStatement}\n      saveButtonText={saveButtonText}\n      onCancel={onCancel}\n      onStartOver={onStartOver}\n      onComplete={onComplete} />\n    }>\n    {children}\n  </ContentLayoutComponent>);\n};\n\nexport const ThreatStatementEditorInner: FC<ThreatStatementEditorProps & { editingStatement: TemplateThreatStatement }> = ({\n  editingStatement,\n  onThreatListView,\n  ...props\n}) => {\n  const { setEditingStatement, saveStatement, addStatement } = useThreatsContext();\n  const inputRef = useRef<{ focus(): void }>();\n  const fullExamplesRef = useRef<{ collapse(): void }>();\n  const { currentWorkspace, workspaceList } = useWorkspacesContext();\n  const [editor, setEditor] = useState<ThreatFieldTypes | undefined>(props.initialEditorField ?? getRecommendedEditor(editingStatement));\n  const [suggestions, setSuggestions] = useState<string[]>([]);\n  const [displayStatement, setDisplayStatement] = useState<ReactNode[] | undefined>([]);\n  const [customTemplateEditorVisible, setCustomTemplateEditorVisible] = useState(false);\n\n  const { addAssumptionLinks, getLinkedAssumptionLinks, removeAssumptionLinks } = useAssumptionLinksContext();\n  const { addMitigationLinks, getLinkedMitigationLinks, removeMitigationLinks } = useMitigationLinksContext();\n\n  const prevLinkedAssumptionIds = useMemo(() => {\n    return getLinkedAssumptionLinks(editingStatement.id).map(la => la.assumptionId);\n  }, [getLinkedAssumptionLinks, editingStatement]);\n\n  const prevLinkedMitigationIds = useMemo(() => {\n    return getLinkedMitigationLinks(editingStatement.id).map(lm => lm.mitigationId);\n  }, [getLinkedMitigationLinks, editingStatement]);\n\n  const [linkedAssumptionIds, setLinkedAssumptionIds] = useState<string[]>(editingStatement\n    && editingStatement?.numericId === -1 ? [] : prevLinkedAssumptionIds);\n  const [linkedMitigationIds, setLinkedMitigationIds] = useState<string[]>(editingStatement\n    && editingStatement?.numericId === -1 ? [] : prevLinkedMitigationIds);\n\n  const { composerMode } = useGlobalSetupContext();\n\n  const { assumptionList, saveAssumption } = useAssumptionsContext();\n  const { mitigationList, saveMitigation } = useMitigationsContext();\n\n  const Component = useMemo(() => {\n    return editor && editorMapping[editor];\n  }, [editor]);\n\n  const handleCancel = useCallback(() => {\n    setEditingStatement(null);\n    onThreatListView?.();\n  }, [setEditingStatement, onThreatListView]);\n\n  useEffect(() => {\n    inputRef.current?.focus();\n  }, [editor]);\n\n  useEffect(() => {\n    if (editingStatement) {\n      const { statement, suggestions: currentSuggestions, displayedStatement } = renderThreatStatement(editingStatement);\n      if (statement !== editingStatement.statement) {\n        setEditingStatement(prev => prev && ({\n          ...prev,\n          statement,\n          displayedStatement,\n        }));\n      }\n      const displayedHtml = displayedStatement?.map((s, index) => typeof s === 'string' ?\n        s : s.type === 'b' ?\n          <Tooltip tooltip={s.tooltip} key={index} anchor={composerMode === 'EditorOnly' ? 'bottom' : 'top'}><b css={styles.finalStatementSection}>{s.content}</b></Tooltip> :\n          s.type === 'span' ?\n            <Tooltip tooltip={s.tooltip} key={index} anchor={composerMode === 'EditorOnly' ? 'bottom' : 'top'}><span css={styles.finalStatementSection}>{s.content}</span></Tooltip> :\n            <>{s.content}</>);\n\n      setDisplayStatement(displayedHtml);\n      setSuggestions(currentSuggestions);\n    } else {\n      setSuggestions([]);\n      setDisplayStatement([]);\n    }\n  }, [editingStatement, composerMode]);\n\n  const handleStartOver = useCallback(() => {\n    setEditingStatement(getNewThreatStatement());\n    setEditor(undefined);\n    fullExamplesRef.current?.collapse();\n  }, [addStatement]);\n\n  const handleComplete = useCallback(() => {\n    if (editingStatement) {\n      saveStatement(editingStatement);\n      const id = editingStatement.id;\n      if (editingStatement.numericId === -1) {\n        linkedAssumptionIds && linkedAssumptionIds.length > 0 && addAssumptionLinks(linkedAssumptionIds.map(la => ({\n          assumptionId: la,\n          linkedId: id,\n          type: 'Threat',\n        })));\n        linkedMitigationIds && linkedMitigationIds.length > 0 && addMitigationLinks(linkedMitigationIds.map(lm => ({\n          mitigationId: lm,\n          linkedId: id,\n        })));\n      } else {\n        const toAddlinkedAssumptionIds = linkedAssumptionIds.filter(x =>\n          !prevLinkedAssumptionIds.includes(x));\n        const toRemovelinkedAssumptionIds = prevLinkedAssumptionIds.filter(x =>\n          !linkedAssumptionIds.includes(x));\n        toAddlinkedAssumptionIds && toAddlinkedAssumptionIds.length > 0 && addAssumptionLinks(toAddlinkedAssumptionIds.map(la => ({\n          assumptionId: la,\n          linkedId: id,\n          type: 'Threat',\n        })));\n        toRemovelinkedAssumptionIds && toRemovelinkedAssumptionIds.length > 0 && removeAssumptionLinks(toRemovelinkedAssumptionIds.map(la => ({\n          assumptionId: la,\n          linkedId: id,\n          type: 'Threat',\n        })));\n        const toAddlinkedMitigationIds = linkedMitigationIds.filter(x =>\n          !prevLinkedMitigationIds.includes(x));\n        const toRemovelinkedMitigationIds = prevLinkedMitigationIds.filter(x =>\n          !linkedMitigationIds.includes(x));\n        toAddlinkedMitigationIds && toAddlinkedMitigationIds.length > 0 && addMitigationLinks(toAddlinkedMitigationIds.map(lm => ({\n          mitigationId: lm,\n          linkedId: id,\n        })));\n        toRemovelinkedMitigationIds && toRemovelinkedMitigationIds.length > 0 && removeMitigationLinks(toRemovelinkedMitigationIds.map(lm => ({\n          mitigationId: lm,\n          linkedId: id,\n        })));\n      }\n    }\n\n    setEditingStatement(null);\n    onThreatListView?.();\n  }, [saveStatement,\n    editingStatement,\n    linkedAssumptionIds,\n    linkedMitigationIds,\n    prevLinkedAssumptionIds,\n    prevLinkedMitigationIds,\n    onThreatListView]);\n\n  const handleExampleClicked = useCallback((statement: TemplateThreatStatement) => {\n    setEditingStatement({\n      ...statement,\n      ...getNewThreatStatement(),\n      tags: [],\n      metadata: [],\n    });\n    const recommendedEditor = getRecommendedEditor(statement);\n    recommendedEditor && setEditor(recommendedEditor);\n    fullExamplesRef.current?.collapse();\n  }, []);\n\n  const handleGiveExampleClicked = useCallback(() => {\n    const len = threatStatementExamples.length;\n    const randomNumber = Math.floor(Math.random() * len);\n    const example = threatStatementExamples[randomNumber] as TemplateThreatStatement;\n    const statement = {\n      ...example,\n      ...getNewThreatStatement(),\n      tags: [],\n      metadata: [],\n    };\n\n    setEditingStatement(statement);\n    const recommendedEditor = getRecommendedEditor(statement);\n    recommendedEditor && setEditor(recommendedEditor);\n    scrollToTop();\n  }, []);\n\n  const saveButtonText = useMemo(() => {\n    if (!currentWorkspace && workspaceList.length === 0) {\n      // For most of use cases, if there is only the default workspace, use list to reduce cognitive load.\n      return editingStatement?.numericId === -1 ? 'Add to list' : 'Save';\n    }\n\n    const workspace = currentWorkspace?.name || DEFAULT_WORKSPACE_LABEL;\n    return editingStatement?.numericId === -1 ? `Add to workspace ${workspace}` : `Save to workspace ${workspace}`;\n\n  }, [currentWorkspace, workspaceList, editingStatement]);\n\n  const handleCustomTemplateConfirm = useCallback((template: string) => {\n    setCustomTemplateEditorVisible(false);\n    if (template !== defaultThreatStatementFormat.template) {\n      setEditingStatement({\n        ...editingStatement,\n        customTemplate: template,\n      } as TemplateThreatStatement);\n    } else {\n      setEditingStatement({\n        ...editingStatement,\n        customTemplate: undefined,\n      } as TemplateThreatStatement);\n    }\n  }, [editingStatement]);\n\n  const handleAddAssumptionLink = useCallback((assumptionIdOrNewAssumption: string) => {\n    if (assumptionList.find(a => a.id === assumptionIdOrNewAssumption)) {\n      setLinkedAssumptionIds(prev => [...prev, assumptionIdOrNewAssumption]);\n    } else {\n      const newAssumption = saveAssumption({\n        id: DEFAULT_NEW_ENTITY_ID,\n        numericId: -1,\n        content: assumptionIdOrNewAssumption,\n      });\n      setLinkedAssumptionIds(prev => [...prev, newAssumption.id]);\n    }\n\n  }, [setLinkedAssumptionIds, assumptionList, saveAssumption]);\n\n  const handleAddMitigationLink = useCallback((mitigationIdOrNewMitigation: string) => {\n    if (mitigationList.find(a => a.id === mitigationIdOrNewMitigation)) {\n      setLinkedMitigationIds(prev => [...prev, mitigationIdOrNewMitigation]);\n    } else {\n      const newMitigation = saveMitigation(getNewMitigation(mitigationIdOrNewMitigation));\n      setLinkedMitigationIds(prev => [...prev, newMitigation.id]);\n    }\n\n  }, [setLinkedMitigationIds, mitigationList, saveMitigation]);\n\n  const handleAddMitigationsFromMitigationCandidates = useCallback((mitigationCandidates: Mitigation[], threatPackId: string) => {\n    mitigationCandidates.forEach(mitigationCandidate => {\n      const matchMitigation = mitigationList.find(x => matchThreatPackMitigationCandidate(x, threatPackId, mitigationCandidate.id));\n      if (matchMitigation) {\n        setLinkedMitigationIds(prev => [...prev, matchMitigation.id]);\n      } else {\n        const data = {\n          ...mitigationCandidate,\n          ...getNewMitigation(mitigationCandidate.content),\n          metadata: [\n            ...mitigationCandidate.metadata || [],\n            { key: METADATA_KEY_SOURCE, value: METADATA_KEY_SOURCE_THREAT_PACK },\n            { key: METADATA_KEY_SOURCE_THREAT_PACK, value: threatPackId },\n            { key: METADATA_KEY_SOURCE_THREAT_PACK_MITIGATION_CANDIDATE, value: mitigationCandidate.id },\n          ],\n        };\n        const newMitigation = saveMitigation(data);\n        setLinkedMitigationIds(prev => [...prev, newMitigation.id]);\n      }\n    });\n  }, [setLinkedMitigationIds, mitigationList, saveMitigation]);\n\n  const handleEditMetadata = useEditMetadata(setEditingStatement);\n\n  const [threatPackId, threatPackThreatId] = useMemo(() => {\n    if (props.threatPackId && props.threatPackThreatId) {\n      return [props.threatPackId, props.threatPackThreatId];\n    }\n\n    const metadata = getMetadata(editingStatement.metadata);\n\n    const tpId = metadata[METADATA_KEY_SOURCE_THREAT_PACK] as string;\n    const tptId = metadata[METADATA_KEY_SOURCE_THREAT_PACK_THREAT] as string;\n\n    return [tpId, tptId];\n  }, [editingStatement, props]);\n\n  const isExampleVisible = useMemo(() => {\n    return editingStatement?.numericId === -1 && !threatPackId;\n  }, [editingStatement.numericId, threatPackId]);\n\n  if (!editingStatement) {\n    return <TextContent>Not threat statement editing in place</TextContent>;\n  }\n\n  return (\n    <ContentLayout\n      composerMode={composerMode}\n      saveButtonText={saveButtonText}\n      editingStatement={editingStatement}\n      onCancel={handleCancel}\n      onStartOver={isExampleVisible ? handleStartOver : undefined}\n      onComplete={handleComplete}\n    >\n      <SpaceBetween direction='vertical' size='l'>\n        {composerMode === 'ThreatsOnly' && <Header\n          composerMode={composerMode}\n          statement={editingStatement}\n          saveButtonText={saveButtonText}\n          onCancel={handleCancel}\n          onStartOver={handleStartOver}\n          onComplete={handleComplete} />}\n        <FinalStatement statement={editingStatement} displayStatement={displayStatement} />\n        <FieldSelector\n          composerMode={composerMode}\n          onStartOver={handleStartOver}\n          setEditor={setEditor}\n          statement={editingStatement}\n          currentEditor={editor}\n          suggestions={suggestions}\n          onGiveExampleClick={isExampleVisible ? handleGiveExampleClicked : undefined}\n          setCustomTemplateEditorVisible={setCustomTemplateEditorVisible}\n        />\n        {Component && editor &&\n          <Grid\n            gridDefinition={[{ colspan: { default: 12, xs: 9 } }, { colspan: { default: 12, xs: 3 } }]}\n          >\n            <div>\n              <Component\n                ref={inputRef}\n                statement={editingStatement}\n                setStatement={setEditingStatement}\n                fieldData={threatFieldData[editor]}\n              />\n            </div>\n            <Metrics statement={editingStatement} onClick={(token) => setEditor(token as ThreatFieldTypes)} />\n          </Grid>}\n        {composerMode === 'Full' && <div css={styles.metadataContainer}>\n          <MitigationLinkComponent\n            variant='container'\n            linkedMitigationIds={linkedMitigationIds}\n            mitigationList={mitigationList}\n            onAddMitigationLink={handleAddMitigationLink}\n            onRemoveMitigationLink={(id) => setLinkedMitigationIds(prev => prev.filter(p => p !== id))}\n          >\n            <MitigationCandidates\n              threatPackId={threatPackId}\n              threatPackThreatId={threatPackThreatId}\n              linkedMitigationIds={linkedMitigationIds}\n              mitigationList={mitigationList}\n              onAddMitigationsFromMitigationCandidates={handleAddMitigationsFromMitigationCandidates}\n            />\n          </MitigationLinkComponent>\n        </div>}\n        {composerMode === 'Full' && <div css={styles.metadataContainer}>\n          <AssumptionLinkComponent\n            variant='container'\n            linkedAssumptionIds={linkedAssumptionIds}\n            assumptionList={assumptionList}\n            onAddAssumptionLink={handleAddAssumptionLink}\n            onRemoveAssumptionLink={(id) => setLinkedAssumptionIds(prev => prev.filter(p => p !== id))}\n          />\n        </div>}\n        {composerMode === 'Full' && <div css={styles.metadataContainer}>\n          <MetadataEditor\n            variant='container'\n            editingStatement={editingStatement}\n            onEditStatementStatus={(_statement, status) => setEditingStatement((prev => ({\n              ...prev,\n              status,\n            } as TemplateThreatStatement)))}\n            onEditMetadata={handleEditMetadata}\n          />\n        </div>}\n        {isExampleVisible && <FullExamples ref={fullExamplesRef} onClick={handleExampleClicked} />}\n      </SpaceBetween>\n      {customTemplateEditorVisible && <CustomTemplate\n        statement={editingStatement}\n        visible={customTemplateEditorVisible}\n        setVisible={setCustomTemplateEditorVisible}\n        onConfirm={handleCustomTemplateConfirm}\n        defaultTemplate={defaultThreatStatementFormat.template}\n      />}\n    </ContentLayout>);\n};\n\nconst ThreatStatementEditor: FC<ThreatStatementEditorProps> = (props) => {\n  const { editingStatement } = useThreatsContext();\n\n  return editingStatement ? <ThreatStatementEditorInner editingStatement={editingStatement} {...props} /> : null;\n};\n\nexport default ThreatStatementEditor;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, useEffect, ReactNode } from 'react';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { v4 as uuidv4 } from 'uuid';\nimport { LOCAL_STORAGE_KEY_WORKSPACE_LIST_MIGRATION } from '../../configs/localStorageKeys';\nimport { useWorkspacesContext } from '../../contexts/WorkspacesContext/context';\n\nexport interface WorkspacesMigrationProps {\n  children: ReactNode;\n}\n\n/**\n * Migrates the old workspaces list to the new format\n */\nconst WorkspacesMigration: FC<WorkspacesMigrationProps> = ({ children }) => {\n  const { workspaceList, setWorkspaceList } = useWorkspacesContext();\n\n  const [migrated, setMigrated] = useLocalStorageState<boolean>(LOCAL_STORAGE_KEY_WORKSPACE_LIST_MIGRATION, {\n    defaultValue: false,\n  });\n\n  // Temporarily tracking Workspace data structure migration\n  useEffect(() => {\n    if (!migrated) {\n      if (workspaceList.length > 0 && typeof workspaceList[0] === 'string') {\n        // @ts-ignore\n        setWorkspaceList((prev: any) => {\n          // @ts-ignore\n          const newList = prev.map((p: string) => ({\n            id: uuidv4(),\n            name: p,\n          }));\n          // @ts-ignore\n          currentWorkspace && typeof currentWorkspace === 'string' && setCurrentWorkspace(prevWs => newList.find(x => x.name === prevWs));\n          return newList;\n        });\n      }\n\n      setMigrated(true);\n    }\n  }, [workspaceList, migrated]);\n\n  return migrated && children ? <>{children}</> : null;\n};\n\nexport default WorkspacesMigration;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport ExpandableSection, { ExpandableSectionProps } from '@cloudscape-design/components/expandable-section';\nimport Grid from '@cloudscape-design/components/grid';\nimport { useState } from 'react';\nimport { EntityBase } from '../../../customTypes';\nimport expandablePanelHeaderStyles from '../../../styles/expandablePanelHeader';\nimport CommentsEdit from '../CommentsEdit';\n\nexport interface MetadataEditorProps<T> {\n  variant: ExpandableSectionProps['variant'];\n  entity: T;\n  onEditEntity: (entity: T, key: string, value: string | string[] | undefined) => void;\n  defaultExpanded?: boolean;\n}\n\nconst MetadataEditor = <T extends EntityBase>({\n  variant,\n  entity,\n  onEditEntity,\n  defaultExpanded,\n}: MetadataEditorProps<T>) => {\n  const [expanded, setExpanded] = useState(defaultExpanded);\n  return (\n    <ExpandableSection\n      headerText={<span css={expandablePanelHeaderStyles}>Metadata</span>}\n      headingTagOverride='h3'\n      variant={variant}\n      expanded={expanded}\n      onChange={({ detail }) => setExpanded(detail.expanded)}\n    >\n      <Grid\n        gridDefinition={[\n          { colspan: { default: 12, xs: 12 } },\n        ]}\n      >\n        {expanded && <CommentsEdit\n          entity={entity}\n          onEditEntity={onEditEntity}\n        />}\n      </Grid>\n    </ExpandableSection>\n  );\n};\n\nexport default MetadataEditor;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport const LOCAL_STORAGE_KEY_NEW_VISIT_FLAG = 'ThreatStatementGenerator.newVisitFlag';\n\nexport const LOCAL_STORAGE_KEY_CURRENT_WORKSPACE = 'ThreatStatementGenerator.currentWorkspace';\nexport const LOCAL_STORAGE_KEY_WORKSPACE_LIST = 'ThreatStatementGenerator.workspaceList';\n\nexport const LOCAL_STORAGE_KEY_EDITING_STATEMENT = 'ThreatStatementGenerator.editingStatement';\nexport const LOCAL_STORAGE_KEY_STATEMENT_LIST = 'ThreatStatementGenerator.threatStatementList';\n\nexport const LOCAL_STORAGE_KEY_ASSUMPTION_LIST = 'ThreatStatementGenerator.AssumptionList';\nexport const LOCAL_STORAGE_KEY_MITIGATION_LIST = 'ThreatStatementGenerator.MitigationList';\n\nexport const LOCAL_STORAGE_KEY_ASSUMPTION_LINK_LIST = 'ThreatStatementGenerator.AssumptionLinkList';\nexport const LOCAL_STORAGE_KEY_MITIGATION_LINK_LIST = 'ThreatStatementGenerator.MitigationLinkList';\n\nexport const LOCAL_STORAGE_KEY_APPLICATION_INFO = 'ThreatStatementGenerator.ApplicationInfo';\nexport const LOCAL_STORAGE_KEY_ARCHIECTURE_INFO = 'ThreatStatementGenerator.ArchitectureInfo';\nexport const LOCAL_STORAGE_KEY_DATAFLOW_INFO = 'ThreatStatementGenerator.DataflowInfo';\n\nexport const LOCAL_STORAGE_KEY_WORKSPACE_LIST_MIGRATION = 'ThreatStatementGenerator.workspaceListMigration';\nexport const LOCAL_STORAGE_KEY_THREATS_LIST_MIGRATION = 'ThreatStatementGenerator.threatListMigration';\n\n\nexport const LOCAL_STORAGE_KEY_THEME_MODE = 'ThreatComposer.theme.mode';\nexport const LOCAL_STORAGE_KEY_THEME_DENSITY = 'ThreatComposer.theme.density';\n\nexport const LOCAL_STORAGE_KEY_BRAINSTORM_DATA = 'ThreatStatementGenerator.BrainstormData';\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport * from './assumptions';\nexport * from './brainstorm';\nexport * from './mitigations';\nexport * from './threats';\nexport * from './threatFieldTypes';\nexport * from './workspaces';\nexport * from './entities';\nexport * from './composerMode';\nexport * from './application';\nexport * from './architecture';\nexport * from './dataflow';\nexport * from './dataExchange';\nexport * from './events';\nexport * from './components';\nexport * from './referencePacks';\nexport * from './windowAPI';\nexport * from './appMode';","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback, useMemo } from 'react';\n\nimport { ThreatPacksContext, useThreatPacksContext } from './context';\nimport { ThreatPacksContextProviderProps } from './types';\nimport { METADATA_KEY_SOURCE, METADATA_KEY_SOURCE_THREAT_PACK, METADATA_KEY_SOURCE_THREAT_PACK_THREAT, METADATA_SOURCE_THREAT_PACK } from '../../configs';\nimport { ThreatPack, ThreatPackUsage, TemplateThreatStatement } from '../../customTypes';\nimport threatPacks from '../../data/threatPacks/threatPacks';\nimport getMetadata from '../../utils/getMetadata';\nimport getThreatFromThreactPackThreat from '../../utils/getThreatFromThreatPacksThreat';\nimport { useThreatsContext } from '../ThreatsContext';\n\nconst ThreatPacksContextProvider: FC<PropsWithChildren<ThreatPacksContextProviderProps>> = ({\n  children,\n}) => {\n  const getThreatPack = useCallback(async (id: string) => {\n    return threatPacks.find(x => x.id === id) as ThreatPack;\n  }, []);\n\n  const { statementList, saveStatement } = useThreatsContext();\n\n  const threatPackUsage: ThreatPackUsage = useMemo(() => {\n    const usage: ThreatPackUsage = {};\n\n    statementList.forEach(s => {\n      const metadata = getMetadata(s.metadata);\n      if (metadata[METADATA_KEY_SOURCE] === METADATA_SOURCE_THREAT_PACK\n        && metadata[METADATA_KEY_SOURCE_THREAT_PACK]\n        && metadata[METADATA_KEY_SOURCE_THREAT_PACK_THREAT]) {\n\n        const threatPackId = metadata[METADATA_KEY_SOURCE_THREAT_PACK] as string;\n\n        if (!usage[threatPackId]) {\n          usage[threatPackId] = {};\n        }\n\n        const threatPackThreatId = metadata[METADATA_KEY_SOURCE_THREAT_PACK_THREAT] as string;\n\n        if (!usage[threatPackId][threatPackThreatId]) {\n          usage[threatPackId][threatPackThreatId] = [];\n        }\n\n        usage[threatPackId][threatPackThreatId].push(s.id);\n      }\n    });\n\n    return usage;\n  }, [statementList]);\n\n  const addThreats = useCallback(async (threatPackId: string, threats: TemplateThreatStatement[]) => {\n    const usage = threatPackUsage[threatPackId] || {};\n\n    threats.forEach(t => {\n      if (!usage[t.id]) {\n        saveStatement(getThreatFromThreactPackThreat(threatPackId, t));\n      }\n    });\n  }, [threatPackUsage, saveStatement]);\n\n  const getMitigationCandidates = useCallback(async(threatPackId: string, threatPackThreatId: string) => {\n    const threatPack = await getThreatPack(threatPackId);\n    if (threatPack) {\n      const linkedMitigations = threatPack.mitigationLinks?.filter(x => x.linkedId === threatPackThreatId) || [];\n      return threatPack.mitigations?.filter(x => linkedMitigations.some(y => y.mitigationId === x.id)) || [];\n    }\n\n    return [];\n  }, []);\n\n  return (<ThreatPacksContext.Provider\n    value={{\n      threatPacks,\n      threatPackUsage,\n      getThreatPack,\n      addThreats,\n      getMitigationCandidates,\n    }}\n  >\n    {children}\n  </ThreatPacksContext.Provider>);\n};\n\nexport default ThreatPacksContextProvider;\n\nexport {\n  useThreatPacksContext,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { SpaceBetween } from '@cloudscape-design/components';\nimport Autosuggest from '@cloudscape-design/components/autosuggest';\nimport ExpandableSection, { ExpandableSectionProps } from '@cloudscape-design/components/expandable-section';\nimport TokenGroup from '@cloudscape-design/components/token-group';\nimport React, { FC, PropsWithChildren, useMemo } from 'react';\nimport { Mitigation } from '../../../customTypes';\n\nexport interface MitigationLinkProps {\n  variant?: ExpandableSectionProps['variant'];\n  linkedMitigationIds: string[];\n  mitigationList: Mitigation[];\n  onAddMitigationLink: (mitigationId: string) => void;\n  onRemoveMitigationLink: (mitigationId: string) => void;\n}\n\nconst MitigationLinkComponent: FC<PropsWithChildren<MitigationLinkProps>> = ({\n  variant,\n  linkedMitigationIds,\n  mitigationList,\n  onAddMitigationLink,\n  onRemoveMitigationLink,\n  children,\n}) => {\n  const [searchValue, setSearchValue] = React.useState('');\n\n  const linkedMitigations = useMemo(() => {\n    return mitigationList.filter(al => linkedMitigationIds.includes(al.id));\n  }, [linkedMitigationIds, mitigationList]);\n\n  const filteredMitigations = useMemo(() => {\n    const mitigations = mitigationList.filter(x => !linkedMitigationIds.includes(x.id));\n\n    if (!searchValue) {\n      return mitigations;\n    }\n\n    return mitigations.filter(x => x.content.toLowerCase().indexOf(searchValue.toLowerCase()) >= 0);\n  }, [searchValue, mitigationList, linkedMitigationIds]);\n\n  return (<ExpandableSection\n    variant={variant}\n    headingTagOverride={variant === 'container' ? 'h3' : undefined}\n    headerText={`Linked mitigations (${linkedMitigations.length})`}>\n    <SpaceBetween direction='vertical' size=\"l\">\n      <div>\n        <Autosuggest\n          onChange={({ detail }) => setSearchValue(detail.value)}\n          value={searchValue}\n          options={filteredMitigations.map(x => ({\n            value: x.id,\n            label: x.content,\n          }))}\n          onSelect={({ detail }) => {\n            onAddMitigationLink(detail.value);\n            setSearchValue('');\n          }}\n          filteringType='manual'\n          enteredTextLabel={value => `Add new mitigation: \"${value}\"`}\n          placeholder=\"Search mitigation\"\n          empty=\"No matches found\"\n        />\n        <div\n          style={{\n            display: 'flex',\n          }}\n        >\n          <TokenGroup\n            items={\n              linkedMitigations.map(x => ({\n                label: x.content,\n                dismissLabel: `Unlink mitigation ${x.numericId}`,\n              }))\n            }\n            onDismiss={({ detail: { itemIndex } }) => {\n              onRemoveMitigationLink(linkedMitigations[itemIndex].id);\n            }}\n          />\n        </div>\n      </div>\n      {children}\n    </SpaceBetween>\n  </ExpandableSection>);\n};\n\nexport default MitigationLinkComponent;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport FormField from '@cloudscape-design/components/form-field';\nimport Select, { SelectProps } from '@cloudscape-design/components/select';\nimport React, { FC } from 'react';\nimport { LEVEL_SELECTOR_OPTIONS } from '../../../configs';\n\nexport const NO_VALUE = '-';\n\nexport interface LevelSelectorProps {\n  label?: string;\n  placeholder?: string;\n  selectedLevel?: string;\n  setSelectedLevel?: (level: string | undefined) => void;\n  allowNoValue?: boolean;\n  onFocus?: () => void;\n  onBlur?: () => void;\n  ref?: React.LegacyRef<SelectProps.Ref>;\n}\n\nconst LevelSelector: FC<LevelSelectorProps> = React.forwardRef<SelectProps.Ref, LevelSelectorProps>(({\n  label,\n  selectedLevel,\n  setSelectedLevel,\n  allowNoValue,\n  placeholder,\n  onFocus,\n  onBlur,\n}, ref) => {\n  return (\n    <FormField\n      label={label}\n    >\n      <Select\n        ref={ref}\n        selectedOption={LEVEL_SELECTOR_OPTIONS.find(x => x.value === selectedLevel) || null}\n        onChange={({ detail }) => {\n          const selected = detail.selectedOption.value;\n          setSelectedLevel?.(!selected || selected === NO_VALUE ? undefined : selected);\n        }}\n        options={allowNoValue ? [{\n          label: NO_VALUE, value: NO_VALUE,\n        }, ...LEVEL_SELECTOR_OPTIONS] : LEVEL_SELECTOR_OPTIONS}\n        selectedAriaLabel=\"Selected\"\n        onFocus={onFocus}\n        onBlur={onBlur}\n        expandToViewport\n        placeholder={placeholder}\n      />\n    </FormField>\n  );\n});\n\nexport default LevelSelector;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useCallback, FC, PropsWithChildren, useEffect } from 'react';\nimport { useWorkspacesContext } from '../../../contexts';\nimport useExportImport, { PLACEHOLDER_EXCHANGE_DATA } from '../../../hooks/useExportImport';\nimport useRemoveData from '../../../hooks/useRemoveData';\nimport convertToMarkdown from '../../../utils/convertToMarkdown';\n\n/**\n * Export threat-composer functionalities via window object.\n */\nconst WindowExporter: FC<PropsWithChildren<{}>> = ({ children }) => {\n  const { getWorkspaceData, parseImportedData, importData } = useExportImport();\n  const {\n    currentWorkspace,\n    workspaceList,\n    addWorkspace,\n    switchWorkspace,\n    renameWorkspace,\n  } = useWorkspacesContext();\n  const { deleteWorkspace } = useRemoveData();\n\n  const setWorkspaceData = useCallback(\n    async (data: any) => {\n      const parsedData = parseImportedData(data || PLACEHOLDER_EXCHANGE_DATA);\n      await importData(parsedData);\n    },\n    [importData],\n  );\n\n  const getCurrentWorkspaceDataMarkdown = useCallback(async () => {\n    return convertToMarkdown(getWorkspaceData());\n  }, [getWorkspaceData]);\n\n\n  useEffect(() => {\n    window.threatcomposer.getWorkspaceList = () => workspaceList;\n  }, [workspaceList]);\n\n  useEffect(() => {\n    window.threatcomposer.getCurrentWorkspaceMetadata = () => currentWorkspace;\n  }, [currentWorkspace]);\n\n  useEffect(() => {\n    window.threatcomposer.getCurrentWorkspaceData = getWorkspaceData;\n  }, [getWorkspaceData]);\n\n  useEffect(() => {\n    window.threatcomposer.getCurrentWorkspaceDataMarkdown = getCurrentWorkspaceDataMarkdown;\n  }, [getCurrentWorkspaceDataMarkdown]);\n\n  useEffect(() => {\n    window.threatcomposer.setCurrentWorkspaceData = setWorkspaceData;\n  }, [setWorkspaceData]);\n\n  useEffect(() => {\n    window.threatcomposer.createWorkspace = addWorkspace;\n  }, [addWorkspace]);\n\n  useEffect(() => {\n    window.threatcomposer.deleteWorkspace = deleteWorkspace;\n  }, [deleteWorkspace]);\n\n  useEffect(() => {\n    window.threatcomposer.switchWorkspace = switchWorkspace;\n  }, [switchWorkspace]);\n\n  useEffect(() => {\n    window.threatcomposer.renameWorkspace = renameWorkspace;\n  }, [renameWorkspace]);\n\n  return <>{children}</>;\n};\n\nexport default WindowExporter;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Button from '@cloudscape-design/components/button';\nimport Container from '@cloudscape-design/components/container';\nimport FormField from '@cloudscape-design/components/form-field';\nimport Header from '@cloudscape-design/components/header';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { FC, useState, useCallback, useMemo, useEffect } from 'react';\nimport { useApplicationInfoContext } from '../../../contexts/ApplicationContext/context';\nimport { ApplicationInfoSchema, EditableComponentBaseProps } from '../../../customTypes';\nimport ContentLayout from '../../generic/ContentLayout';\nimport Input from '../../generic/Input';\nimport MarkdownEditor from '../../generic/MarkdownEditor';\nimport MarkdownViewer from '../../generic/MarkdownViewer';\n\nconst ApplicationInfo: FC<EditableComponentBaseProps> = ({\n  onEditModeChange,\n  MarkdownEditorComponentType = MarkdownEditor,\n}) => {\n  const { applicationInfo, setApplicationInfo } = useApplicationInfoContext();\n  const [editMode, setEditMode] = useState(!applicationInfo.name && !applicationInfo.description);\n  const [content, setContent] = useState('');\n  const [name, setName] = useState('');\n\n  useEffect(() => {\n    onEditModeChange?.(editMode);\n  }, [editMode]);\n\n  const handleSaveApplicationInfo = useCallback(() => {\n    setApplicationInfo(prev => ({\n      ...prev,\n      description: content,\n      name,\n    }));\n    setEditMode(false);\n  }, [content, name, setApplicationInfo, setEditMode]);\n\n  const handleEdit = useCallback(() => {\n    setContent(applicationInfo.description || '');\n    setName(applicationInfo.name || '');\n    setEditMode(true);\n  }, [applicationInfo]);\n\n  const actions = useMemo(() => {\n    return editMode ? (<SpaceBetween direction='horizontal' size='s'>\n      <Button onClick={() => setEditMode(false)}>Cancel</Button>\n      <Button variant='primary' onClick={handleSaveApplicationInfo}>Confirm</Button>\n    </SpaceBetween>) : (<Button onClick={handleEdit}>Edit</Button>);\n  }, [editMode, handleSaveApplicationInfo, handleEdit, setEditMode]);\n\n  return (<ContentLayout title='Application information'>\n    <Container\n      header={<Header actions={actions}>{applicationInfo.name || 'Application Introduction'}</Header>}\n    >{editMode ? (<SpaceBetween direction='vertical' size='s'>\n        <FormField\n          label=\"Application name\"\n        >\n          <Input\n            value={name}\n            onChange={event =>\n              setName(event.detail.value)\n            }\n            validateData={ApplicationInfoSchema.shape.name.safeParse}\n            placeholder='Enter application name'\n          />\n        </FormField>\n        <MarkdownEditorComponentType\n          value={content}\n          onChange={setContent}\n          label='Description'\n          validateData={ApplicationInfoSchema.shape.description.safeParse}\n        />\n      </SpaceBetween>) :\n        (<MarkdownViewer>\n          {applicationInfo.description || ''}\n        </MarkdownViewer>)}\n    </Container>\n  </ContentLayout>);\n};\n\nexport default ApplicationInfo;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport FormField from '@cloudscape-design/components/form-field';\nimport RadioGroup from '@cloudscape-design/components/radio-group';\nimport Select from '@cloudscape-design/components/select';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { css } from '@emotion/react';\nimport { FC } from 'react';\n\nconst styles = {\n  selector: css({\n    minWidth: '100px',\n  }),\n  radioGroup: css({\n    marginTop: '10px',\n  }),\n};\n\nexport const DEFAULT_SORT_BY = {\n  field: 'Id',\n  ascending: false,\n};\n\nexport interface SortByOption {\n  field: string;\n  ascending: boolean;\n}\n\nexport interface SortByProps {\n  value?: SortByOption;\n  setValue: (value: SortByOption) => void;\n}\n\nconst SELECT_OPTIONS = [\n  { label: 'Id', value: 'Id' },\n  { label: 'Priority', value: 'Priority' },\n];\n\nconst SORTING_OPTIONS = [\n  { value: 'ascending', label: 'Ascending' },\n  { value: 'descending', label: 'Descending' },\n];\n\nconst SortByComponent: FC<SortByProps> = ({\n  value = DEFAULT_SORT_BY,\n  setValue,\n}) => {\n  return (<SpaceBetween direction='horizontal' size='s'>\n    <div css={styles.selector}>\n      <FormField\n        label=\"Sort by\"\n      >\n        <Select\n          selectedOption={{ label: value.field, value: value.field }}\n          onChange={({ detail }) =>\n            setValue({\n              ...value,\n              field: detail.selectedOption.value || DEFAULT_SORT_BY.field,\n            })\n          }\n          options={SELECT_OPTIONS}\n          selectedAriaLabel=\"Selected\"\n        />\n      </FormField>\n    </div>\n    <div css={styles.radioGroup}>\n      <RadioGroup\n        onChange={({ detail }) => setValue({\n          ...value,\n          ascending: detail.value === 'ascending',\n        })}\n        value={value.ascending ? 'ascending' : 'descending'}\n        items={SORTING_OPTIONS}\n      />\n    </div>\n  </SpaceBetween>);\n};\n\nexport default SortByComponent;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { z } from 'zod';\nimport { ContentEntityBaseSchema, EntityLinkBaseSchema, StatusSchema, MetadataSchemaMitigation } from './entities';\nimport { MITIGATION_STATUS_IDENTIFIED, MITIGATION_STATUS_IN_PROGRESS, MITIGATION_STATUS_RESOLVED, MITIGATION_STATUS_RESOLVED_WILLNOTACTION, STATUS_NOT_SET } from '../configs';\nimport mitigationStatus from '../data/status/mitigationStatus.json';\n\n\nexport const MitigationSchema = ContentEntityBaseSchema.extend({\n  content: ContentEntityBaseSchema.shape.content.describe('Mitigation. Plain-text'),\n  /**\n   * The metadata - overridden to support mitigation-specific metadata schema.\n   */\n  metadata: MetadataSchemaMitigation.array().optional().describe('Additional metadata as key-value pairs for mitigations'),\n  status: StatusSchema.pipe(z.enum(mitigationStatus.map(x => x.value) as [string, ...string[]])).optional().describe('Status of the mitigation'),\n}).strict();\n\nexport type Mitigation = z.infer<typeof MitigationSchema>;\n\nexport const MitigationLinkSchema = EntityLinkBaseSchema.extend({\n  /**\n   * The mitigation being linked.\n   */\n  mitigationId: z.string().length(36).describe('UUID for the mitigation'),\n  /**\n   * The linked entity Id.\n   */\n  linkedId: z.string().length(36).describe('UUID of the linked threat or assumption'),\n}).strict();;\n\nexport type MitigationLink = z.infer<typeof MitigationLinkSchema>;\n\nexport interface MitigationListFilter {\n  status?: (typeof MITIGATION_STATUS_IDENTIFIED\n    | typeof MITIGATION_STATUS_IN_PROGRESS\n    | typeof MITIGATION_STATUS_RESOLVED\n    | typeof MITIGATION_STATUS_RESOLVED_WILLNOTACTION\n    | typeof STATUS_NOT_SET)[];\n}\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { useState, useCallback, forwardRef } from 'react';\nimport { useMitigationsContext } from '../../../contexts/MitigationsContext/context';\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\nimport { Assumption, AssumptionSchema } from '../../../customTypes';\nimport getNewAssumption from '../../../utils/getNewAssumption';\nimport getNewMitigation from '../../../utils/getNewMitigation';\nimport GenericEntityCreationCard, { GenericEntityCreationCardRefProps } from '../../generic/GenericEntityCreationCard';\nimport MitigationLinkView from '../../mitigations/MitigationLinkView';\nimport ThreatLinkView from '../../threats/ThreatLinkView';\n\nexport interface AssumptionCreationCardProps {\n  ref?: React.Ref<GenericEntityCreationCardRefProps>;\n  onSave?: (entity: Assumption, linkedMitigationIds: string[], linkedThreatIds: string[]) => void;\n}\n\nconst AssumptionCreationCard = forwardRef<\nGenericEntityCreationCardRefProps,\nAssumptionCreationCardProps\n>(({ onSave }, ref) => {\n  const [editingEntity, setEditingEntity] = useState<Assumption>(getNewAssumption());\n  const [linkedMitigationIds, setLinkedMitigationIds] = useState<string[]>([]);\n  const [linkedThreatIds, setLinkedThreatIds] = useState<string[]>([]);\n\n  const { mitigationList, saveMitigation } = useMitigationsContext();\n  const { statementList } = useThreatsContext();\n\n  const handleSave = useCallback(() => {\n    onSave?.(editingEntity, linkedMitigationIds, linkedThreatIds);\n    setEditingEntity(getNewAssumption());\n    setLinkedMitigationIds([]);\n    setLinkedThreatIds([]);\n  }, [editingEntity, linkedMitigationIds, linkedThreatIds]);\n\n  const handleReset = useCallback(() => {\n    setEditingEntity(getNewAssumption());\n    setLinkedMitigationIds([]);\n    setLinkedThreatIds([]);\n  }, []);\n\n  const handleAddMitigationLink = useCallback((mitigationIdOrNewMitigation: string) => {\n    if (mitigationList.find(m => m.id === mitigationIdOrNewMitigation)) {\n      setLinkedMitigationIds(prev => [...prev, mitigationIdOrNewMitigation]);\n    } else {\n      const newMitigation = saveMitigation(getNewMitigation(mitigationIdOrNewMitigation));\n      setLinkedMitigationIds(prev => [...prev, newMitigation.id]);\n    }\n  }, [mitigationList, saveMitigation]);\n\n  return (<GenericEntityCreationCard\n    ref={ref}\n    editingEntity={editingEntity}\n    setEditingEntity={setEditingEntity}\n    header='Add new assumption'\n    onSave={handleSave}\n    onReset={handleReset}\n    validateData={AssumptionSchema.shape.content.safeParse}\n    customEditors={<SpaceBetween direction='vertical' size='s'>\n      <ThreatLinkView\n        linkedThreatIds={linkedThreatIds}\n        threatList={statementList}\n        onAddThreatLink={(id) => setLinkedThreatIds(prev => [...prev, id])}\n        onRemoveThreatLink={(id) => setLinkedThreatIds(prev => prev.filter(p => p !== id))}\n      />\n      <MitigationLinkView\n        linkedMitigationIds={linkedMitigationIds}\n        mitigationList={mitigationList}\n        onAddMitigationLink={handleAddMitigationLink}\n        onRemoveMitigationLink={(id) => setLinkedMitigationIds(prev => prev.filter(p => p !== id))}\n      />\n    </SpaceBetween>}\n  />);\n});\n\nexport default AssumptionCreationCard;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport { css } from '@emotion/react';\nimport { FC } from 'react';\nimport styles from '../../styles';\nimport InfoModalBase from '../InfoModalBase';\n\nexport interface InfoModalGetStartedProps {\n  onClick: () => void;\n}\n\nconst InfoModalGetStarted: FC<InfoModalGetStartedProps> = ({ onClick }) => {\n  return (<InfoModalBase title='Guiding principles of this tool'>\n    <div css={css(styles.contentList)}>\n      <ol>\n        <li>Do one thing, well</li>\n        <li>Optimise for approachability over completeness</li>\n        <li>Encourage (not mandate) more complete threat statements</li>\n        <li>Spur creativity through example</li>\n        <li>Support iterative threat statement writing</li>\n        <li>No user-supplied data leaves the browser</li>\n      </ol>\n    </div>\n    <div css={css(styles.getStartedBtnContainer)}>\n      <Button onClick={onClick} variant='primary'>\n        Get Started\n      </Button>\n    </div>\n  </InfoModalBase>);\n};\n\nexport default InfoModalGetStarted;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport FormField from '@cloudscape-design/components/form-field';\nimport Select, { SelectProps } from '@cloudscape-design/components/select';\nimport React, { FC } from 'react';\n\nexport interface StatusSelectorProps {\n  options: SelectProps.Option[];\n  selectedOption?: string;\n  setSelectedOption?: (option: string) => void;\n  showLabel?: boolean;\n  onFocus?: () => void;\n  onBlur?: () => void;\n  ref?: React.LegacyRef<any>;\n}\n\nconst StatusSelector: FC<StatusSelectorProps> = React.forwardRef<SelectProps.Ref, StatusSelectorProps>(({\n  options,\n  selectedOption,\n  setSelectedOption,\n  showLabel = true,\n  onFocus,\n  onBlur,\n}, ref) => {\n  return (<FormField\n    label={showLabel ? 'Status' : undefined}\n  >\n    <Select\n      ref={ref}\n      selectedOption={(selectedOption && options?.find(x => x.value === selectedOption)) || null}\n      onChange={({ detail }) =>\n        detail.selectedOption.value && setSelectedOption?.(detail.selectedOption.value)\n      }\n      options={options}\n      onFocus={onFocus}\n      onBlur={onBlur}\n      placeholder='Select status'\n    />\n  </FormField>);\n});\n\nexport default StatusSelector;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nconst getDisplayLastModified = (lastModified: number | Date) => {\n  const date = new Date(lastModified);\n  return `Last modified: ${date.toLocaleString()}`;\n};\n\nexport default getDisplayLastModified;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Button from '@cloudscape-design/components/button';\nimport Container from '@cloudscape-design/components/container';\nimport Grid from '@cloudscape-design/components/grid';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextFilter from '@cloudscape-design/components/text-filter';\nimport { FC, useCallback, useMemo, useState, useRef } from 'react';\nimport { useAssumptionLinksContext } from '../../../contexts';\nimport { useAssumptionsContext } from '../../../contexts/AssumptionsContext/context';\nimport { Assumption, AssumptionLink } from '../../../customTypes';\nimport { addTagToEntity, removeTagFromEntity } from '../../../utils/entityTag';\nimport ContentLayout from '../../generic/ContentLayout';\nimport { GenericEntityCreationCardRefProps } from '../../generic/GenericEntityCreationCard';\nimport LinkedEntityFilter, { ALL, WITHOUT_NO_LINKED_ENTITY, WITH_LINKED_ENTITY } from '../../generic/LinkedEntityFilter';\nimport TagSelector from '../../generic/TagSelector';\nimport AssumptionCard from '../AssumptionCard';\nimport AssumptionCreationCard from '../AssumptionCreationCard';\n\nconst AssumptionList: FC = () => {\n  const {\n    assumptionList,\n    removeAssumption,\n    saveAssumption,\n  } = useAssumptionsContext();\n\n  const {\n    assumptionLinkList,\n    addAssumptionLinks,\n    removeAssumptionLinksByAssumptionId,\n  } = useAssumptionLinksContext();\n\n  const [filteringText, setFilteringText] = useState('');\n\n  const [\n    selectedTags,\n    setSelectedTags,\n  ] = useState<string[]>([]);\n\n  const [\n    selectedLinkedThreatsFilter,\n    setSelectedLinkedThreatsFilter,\n  ] = useState(ALL);\n\n  const [\n    selectedLinkedMitigationFilter,\n    setSelectedLinkedMitigationFilter,\n  ] = useState(ALL);\n\n  const handleAddTagToEntity = useCallback((assumption: Assumption, tag: string) => {\n    const updated = addTagToEntity(assumption, tag);\n    saveAssumption(updated as Assumption);\n  }, []);\n\n  const handleRemoveTagFromEntity = useCallback((assumption: Assumption, tag: string) => {\n    const updated = removeTagFromEntity(assumption, tag);\n    saveAssumption(updated as Assumption);\n  }, []);\n\n  const handleRemove = useCallback(async (assumptionId: string) => {\n    removeAssumption(assumptionId);\n    await removeAssumptionLinksByAssumptionId(assumptionId);\n  }, [removeAssumption, removeAssumptionLinksByAssumptionId]);\n\n  const filteredList = useMemo(() => {\n    let output = assumptionList;\n\n    if (filteringText) {\n      output = output.filter(st => st.content && st.content.toLowerCase().indexOf(filteringText.toLowerCase()) >= 0);\n    }\n\n    if (selectedTags && selectedTags.length > 0) {\n      output = output.filter(st => {\n        return st.tags?.some(t => selectedTags.includes(t));\n      });\n    }\n\n    if (selectedLinkedThreatsFilter !== ALL) {\n      output = output.filter(st => {\n        return assumptionLinkList.some(al => al.assumptionId === st.id && al.type === 'Threat') ?\n          selectedLinkedThreatsFilter === WITH_LINKED_ENTITY :\n          selectedLinkedThreatsFilter === WITHOUT_NO_LINKED_ENTITY;\n      });\n    }\n\n    if (selectedLinkedMitigationFilter !== ALL) {\n      output = output.filter(st => {\n        return assumptionLinkList.some(al => al.assumptionId === st.id && al.type === 'Mitigation') ?\n          selectedLinkedMitigationFilter === WITH_LINKED_ENTITY :\n          selectedLinkedMitigationFilter === WITHOUT_NO_LINKED_ENTITY;\n      });\n    }\n\n    output = output.sort((op1, op2) => (op2.displayOrder || Number.MAX_VALUE) - (op1.displayOrder || Number.MAX_VALUE));\n\n    return output;\n  }, [filteringText, assumptionList, selectedTags,\n    assumptionLinkList,\n    selectedLinkedMitigationFilter, selectedLinkedThreatsFilter]);\n\n  const hasNoFilter = useMemo(() => {\n    return (filteringText === ''\n      && selectedLinkedMitigationFilter === ALL\n      && selectedLinkedThreatsFilter === ALL\n      && selectedTags.length === 0);\n  }, [filteringText, selectedTags, selectedLinkedThreatsFilter, selectedLinkedThreatsFilter]);\n\n  const allTags = useMemo(() => {\n    return assumptionList\n      .reduce((all: string[], cur) => {\n        return [...all, ...cur.tags?.filter(ia => !all.includes(ia)) || []];\n      }, []);\n  }, [assumptionList]);\n\n  const handleClearFilter = useCallback(() => {\n    setFilteringText('');\n    setSelectedTags([]);\n    setSelectedLinkedMitigationFilter(ALL);\n    setSelectedLinkedThreatsFilter(ALL);\n  }, []);\n\n  const handleSaveNew = useCallback((assumption: Assumption,\n    linkedMitigationIds: string[],\n    linkedThreatIds: string[]) => {\n    const updated = saveAssumption(assumption);\n\n    const assumptionLinks: AssumptionLink[] = [];\n\n    linkedMitigationIds.forEach(id => {\n      assumptionLinks.push({\n        linkedId: id,\n        assumptionId: updated.id,\n        type: 'Mitigation',\n      });\n    });\n\n    linkedThreatIds.forEach(id => {\n      assumptionLinks.push({\n        linkedId: id,\n        assumptionId: updated.id,\n        type: 'Threat',\n      });\n    });\n\n    addAssumptionLinks(assumptionLinks);\n\n  }, [saveAssumption, addAssumptionLinks]);\n\n  const assumptionCreationCardRef = useRef<GenericEntityCreationCardRefProps>(null);\n\n  const handleAddNewAssumption = useCallback(() => {\n    assumptionCreationCardRef.current?.scrollIntoView();\n    assumptionCreationCardRef.current?.focusTextarea();\n  }, []);\n\n  const actions = useMemo(() => {\n    return (\n      <Button variant=\"primary\" onClick={handleAddNewAssumption}>\n        Add new assumption\n      </Button>\n    );\n  }, [handleAddNewAssumption]);\n\n  return (<ContentLayout\n    title='Assumptions'\n    counter={`(${filteredList.length})`}\n    actions={actions}\n  >\n    <SpaceBetween direction='vertical' size='s'>\n      <Container>\n        <SpaceBetween direction='vertical' size='s'>\n          <TextFilter\n            filteringText={filteringText}\n            filteringPlaceholder=\"Find assumptions\"\n            filteringAriaLabel=\"Filter assumptions\"\n            onChange={({ detail }) =>\n              setFilteringText(detail.filteringText)\n            }\n          />\n          <Grid\n            gridDefinition={[\n              { colspan: { default: 12, xs: 3 } },\n              { colspan: { default: 12, xs: 4 } },\n              { colspan: { default: 12, xs: 4 } },\n              { colspan: { default: 1 } },\n            ]}\n          >\n            <TagSelector\n              allTags={allTags}\n              selectedTags={selectedTags}\n              setSelectedTags={setSelectedTags}\n            />\n            <LinkedEntityFilter\n              label='Linked threats'\n              entityDisplayName='threats'\n              selected={selectedLinkedThreatsFilter}\n              setSelected={setSelectedLinkedThreatsFilter}\n            />\n            <LinkedEntityFilter\n              label='Linked mitigations'\n              entityDisplayName='mitigations'\n              selected={selectedLinkedMitigationFilter}\n              setSelected={setSelectedLinkedMitigationFilter}\n            />\n            <Button onClick={handleClearFilter}\n              variant='icon'\n              iconSvg={<svg\n                focusable=\"false\"\n                aria-hidden=\"true\"\n                viewBox=\"0 0 24 24\"\n                tabIndex={-1}\n              >\n                <path d=\"M19.79 5.61C20.3 4.95 19.83 4 19 4H6.83l7.97 7.97 4.99-6.36zM2.81 2.81 1.39 4.22 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.17l5.78 5.78 1.41-1.41L2.81 2.81z\"></path>\n              </svg>}\n              ariaLabel='Clear filters'\n              disabled={hasNoFilter}\n            />\n          </Grid>\n        </SpaceBetween>\n      </Container>\n      {filteredList?.map(entity => (<AssumptionCard\n        key={entity.id}\n        assumption={entity}\n        onRemove={handleRemove}\n        onEdit={saveAssumption}\n        onAddTagToAssumption={handleAddTagToEntity}\n        onRemoveTagFromAssumption={handleRemoveTagFromEntity}\n      />))}\n      <AssumptionCreationCard\n        ref={assumptionCreationCardRef}\n        onSave={handleSaveNew}\n      />\n    </SpaceBetween>\n  </ContentLayout>);\n};\n\nexport default AssumptionList;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useContext, createContext } from 'react';\nimport { ArchitectureInfo } from '../../customTypes';\n\nexport interface ArchitectureInfoContextApi {\n  architectureInfo: ArchitectureInfo;\n  setArchitectureInfo: React.Dispatch<React.SetStateAction<ArchitectureInfo>>;\n  removeArchitectureInfo: () => Promise<void>;\n  onDeleteWorkspace: (workspaceId: string) => Promise<void>;\n}\n\nconst initialState: ArchitectureInfoContextApi = {\n  architectureInfo: {},\n  setArchitectureInfo: () => { },\n  removeArchitectureInfo: () => Promise.resolve(),\n  onDeleteWorkspace: () => Promise.resolve(),\n};\n\nexport const ArchitectureInfoContext = createContext<ArchitectureInfoContextApi>(initialState);\n\nexport const useArchitectureInfoContext = () => useContext(ArchitectureInfoContext);","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { TemplateThreatStatement, ThreatFieldTypes, threatFieldTypeMapping } from '../../customTypes';\nimport calculateFieldCombination from '../calculateFieldCombination';\n\nconst allFields = Object.keys(threatFieldTypeMapping);\n\nconst getRecommendedEditor = (statement?: TemplateThreatStatement | null) => {\n  if (statement) {\n    const { fieldCombination, filledField } = calculateFieldCombination(statement);\n    if (fieldCombination !== 0) {\n      const unFilledFields = allFields.filter(af => !filledField.includes(af));\n      const unFilledFieldsLen = unFilledFields.length;\n      if (unFilledFieldsLen === 1) {\n        return unFilledFields[0] as ThreatFieldTypes;\n      }\n\n      if (unFilledFieldsLen > 1) {\n        const randomFieldNum = Math.floor(Math.random() * unFilledFieldsLen);\n        return unFilledFields[randomFieldNum] as ThreatFieldTypes;\n      }\n\n      const randomFieldNum = Math.floor(Math.random() * filledField.length);\n\n      return filledField[randomFieldNum] as ThreatFieldTypes;\n    }\n  }\n\n  return undefined;\n};\n\nexport default getRecommendedEditor;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { ALL_LEVELS, LEVEL_HIGH, LEVEL_MEDIUM, LEVEL_LOW } from './constants';\n\nexport const LEVEL_SELECTOR_OPTIONS = [\n  { label: LEVEL_HIGH, value: LEVEL_HIGH },\n  { label: LEVEL_MEDIUM, value: LEVEL_MEDIUM },\n  { label: LEVEL_LOW, value: LEVEL_LOW },\n];\n\nexport const LEVEL_SELECTOR_OPTIONS_INCLUDING_ALL = [\n  { lable: ALL_LEVELS, value: ALL_LEVELS },\n  ...LEVEL_SELECTOR_OPTIONS,\n];","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback } from 'react';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { LOCAL_STORAGE_KEY_BRAINSTORM_DATA } from '../../../../configs/localStorageKeys';\nimport { BrainstormData } from '../../../../customTypes/brainstorm';\nimport removeLocalStorageKey from '../../../../utils/removeLocalStorageKey';\nimport { BrainstormContext } from '../../context';\nimport useBrainstorm, { initialState } from '../../useBrainstorm';\n\nexport interface BrainstormContextProviderProps {\n  workspaceId: string | null;\n}\n\nexport const getLocalStorageKey = (workspaceId: string | null) => {\n  if (workspaceId) {\n    return `${LOCAL_STORAGE_KEY_BRAINSTORM_DATA}_${workspaceId}`;\n  }\n\n  return LOCAL_STORAGE_KEY_BRAINSTORM_DATA;\n};\n\nconst BrainstormLocalStorageContextProvider: FC<PropsWithChildren<BrainstormContextProviderProps>> = ({\n  children,\n  workspaceId: currentWorkspaceId,\n}) => {\n  const [brainstormData, setBrainstormData] = useLocalStorageState<BrainstormData>(\n    getLocalStorageKey(currentWorkspaceId),\n    {\n      defaultValue: initialState,\n    },\n  );\n\n  const {\n    addItem,\n    updateItem,\n    removeItem: removeItemFromHook,\n    groupItems,\n    ungroupItem,\n    getGroupedItems,\n    getDisplayItems,\n    mergeGroups,\n  } = useBrainstorm(brainstormData, setBrainstormData);\n\n  const handleDeleteWorkspace = useCallback(async (workspaceId: string) => {\n    window.setTimeout(() => {\n      // to delete after the workspace is switched. Otherwise the default value is set again.\n      removeLocalStorageKey(getLocalStorageKey(workspaceId));\n    }, 1000);\n  }, []);\n\n  return (\n    <BrainstormContext.Provider\n      value={{\n        brainstormData,\n        setBrainstormData,\n        addItem,\n        updateItem,\n        removeItem: removeItemFromHook,\n        groupItems,\n        ungroupItem,\n        getGroupedItems,\n        getDisplayItems,\n        mergeGroups,\n        onDeleteWorkspace: handleDeleteWorkspace,\n      }}\n    >\n      {children}\n    </BrainstormContext.Provider>\n  );\n};\n\nexport default BrainstormLocalStorageContextProvider;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport genAIChatbot from './GenAIChatbot.tc.json';\nimport threatComposer from './ThreatComposer.tc.json';\nimport { WorkspaceExample } from '../../customTypes';\n// {IMPORT_PLACEHOLDER}\n\nconst workspaceExamples = [\n  {\n    name: 'Threat Composer',\n    value: threatComposer,\n  },\n  {\n    name: 'GenAI Chatbot',\n    value: genAIChatbot,\n  },\n  // {ENTRY_PLACEHOLDER}\n] as WorkspaceExample[];\n\nexport default workspaceExamples;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useCallback } from 'react';\nimport { useWorkspacesContext } from '../../contexts';\nimport { useCrossWorkspaceContext } from '../../contexts/CrossWorkspaceContext';\nimport useImportExport from '../useExportImport';\n\nconst useCloneWorkspace = () => {\n  const { addWorkspace, switchWorkspace } = useWorkspacesContext();\n  const { getWorkspaceData } = useImportExport();\n  const { cloneWorkspaceData } = useCrossWorkspaceContext();\n\n  const cloneWorkspace= useCallback(async (newWorkspaceName: string) => {\n    const newWorkspace = await addWorkspace(newWorkspaceName);\n    const data = await getWorkspaceData();\n    await cloneWorkspaceData(newWorkspace.id, data);\n    switchWorkspace(newWorkspace);\n  }, [addWorkspace, cloneWorkspaceData]);\n\n  return cloneWorkspace;\n};\n\nexport default useCloneWorkspace;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport React, { useContext, createContext } from 'react';\nimport { AppMode, ComposerMode } from '../../customTypes';\n\nexport interface GlobalSetupContextApi {\n  hasVisitBefore: boolean;\n  showInfoModal: () => void;\n  composerMode: ComposerMode;\n  appMode: AppMode;\n  features: string[];\n  fileImportModalVisible: boolean;\n  setFileImportModalVisible: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nconst initialState: GlobalSetupContextApi = {\n  hasVisitBefore: false,\n  composerMode: 'Full',\n  appMode: undefined,\n  features: [],\n  showInfoModal: () => { },\n  fileImportModalVisible: false,\n  setFileImportModalVisible: () => {},\n};\n\nexport const GlobalSetupContext = createContext<GlobalSetupContextApi>(initialState);\n\nexport const useGlobalSetupContext = () => useContext(GlobalSetupContext);","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport const APP_MODE_IDE_EXTENSION='ide-extension';\nexport const APP_MODE_BROWSER_EXTENSION ='browser-extension';","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { FC, PropsWithChildren } from 'react';\nimport styles from '../../styles';\n\nexport interface InfoModalBaseProps {\n  title?: React.ReactNode;\n}\n\nconst InfoModalBase: FC<PropsWithChildren<InfoModalBaseProps>> = ({ children, title }) => {\n  return (<div css={css(styles.contentBase)}>\n    {title && <div css={css(styles.contentBaseHeader)}>{title}</div>}\n    <div css={[css(styles.contentBaseMain), css(styles.contentBaseText)]}>{children}</div>\n  </div>);\n};\n\nexport default InfoModalBase;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Box from '@cloudscape-design/components/box';\nimport { FC } from 'react';\n\nconst EmptyState: FC<{\n  title: string;\n  subtitle: string;\n  action?: React.ReactNode;\n}> = ({ title, subtitle, action }) => {\n  return (\n    <Box textAlign=\"center\" color=\"inherit\">\n      <Box variant=\"strong\" textAlign=\"center\" color=\"inherit\">\n        {title}\n      </Box>\n      <Box variant=\"p\" padding={{ bottom: 's' }} color=\"inherit\">\n        {subtitle}\n      </Box>\n      {action}\n    </Box>\n  );\n};\n\nexport default EmptyState;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nconst replacements = [\n  [/\\*/g, '\\\\*', 'asterisks'],\n  [/#/g, '\\\\#', 'number signs'],\n  [/\\//g, '\\\\/', 'slashes'],\n  [/\\(/g, '\\\\(', 'parentheses'],\n  [/\\)/g, '\\\\)', 'parentheses'],\n  [/\\[/g, '\\\\[', 'square brackets'],\n  [/\\]/g, '\\\\]', 'square brackets'],\n  [/</g, '&lt;', 'angle brackets'],\n  [/>/g, '&gt;', 'angle brackets'],\n  [/_/g, '\\\\_', 'underscores'],\n  [/`/g, '\\\\`', 'codeblocks'],\n];\n\nconst escapeMarkdown = (input: string, skips: string[] = []) => {\n  return replacements.reduce((str, replacement) => {\n    var name = replacement[2] as string;\n    return skips.indexOf(name) !== -1\n      ? str\n      : str.replace(replacement[0], replacement[1] as string);\n  }, input);\n};\n\nexport default escapeMarkdown;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { FC } from 'react';\nimport threatStatementEditor from '../../../../../assets/threat-statement-flow.png';\nimport styles from '../../styles';\nimport InfoModalBase from '../InfoModalBase';\n\nconst InfoModalSelector: FC = () => {\n  return (<InfoModalBase>\n    <img css={css(styles.image)} src={threatStatementEditor} alt=\"ThreatStatementEditor\"/>\n  </InfoModalBase>);\n};\n\nexport default InfoModalSelector;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useCallback } from 'react';\nimport { v4 as uuidV4 } from 'uuid';\nimport { DEFAULT_NEW_ENTITY_ID } from '../../configs';\nimport { Mitigation } from '../../customTypes';\n\nconst useMitigations = (\n  _mitigationList: Mitigation[],\n  setMitigationList: React.Dispatch<React.SetStateAction<Mitigation[]>>,\n) => {\n  const handlRemoveMitigation = useCallback((id: string) => {\n    setMitigationList((prevList) => prevList.filter(x => x.id !== id));\n  }, [setMitigationList]);\n\n  const handleSaveMitigation = useCallback((mitigation: Mitigation) => {\n    let newEntity = mitigation;\n    setMitigationList((prevList) => {\n      let numericId = mitigation.numericId;\n\n      if (numericId === -1) {\n        const maxId = prevList.reduce((max: number, cur: Mitigation) => {\n\n          if (cur.numericId > max) {\n            return cur.numericId;\n          }\n\n          return max;\n        }, 0);\n        numericId = maxId + 1;\n      }\n\n      let updated: Mitigation = {\n        ...mitigation,\n        numericId,\n        id: mitigation.id === DEFAULT_NEW_ENTITY_ID ? uuidV4() : mitigation.id,\n        displayOrder: numericId,\n      };\n\n      newEntity = { ...updated };\n\n      const foundIndex = prevList.findIndex(st => st.id === updated.id);\n      if (foundIndex >= 0) {\n        return [...prevList.slice(0, foundIndex), updated, ...prevList.slice(foundIndex + 1)];\n      }\n\n      return [...prevList, updated];\n    });\n\n    return newEntity;\n  }, [setMitigationList]);\n\n  return {\n    handlRemoveMitigation,\n    handleSaveMitigation,\n  };\n};\n\nexport default useMitigations;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useContext, createContext } from 'react';\nimport { DEFAULT_NEW_ENTITY_ID } from '../../configs';\nimport { Mitigation } from '../../customTypes';\nexport type View = 'list' | 'editor';\n\nexport interface MitigationsContextApi {\n  mitigationList: Mitigation[];\n  setMitigationList: (entity: Mitigation[]) => void;\n  removeMitigation: (id: string) => void;\n  saveMitigation: (entity: Mitigation) => Mitigation;\n  removeAllMitigations: () => Promise<void>;\n  onDeleteWorkspace: (workspaceId: string) => Promise<void>;\n}\n\nconst initialState: MitigationsContextApi = {\n  mitigationList: [],\n  setMitigationList: () => { },\n  removeMitigation: () => { },\n  saveMitigation: () => ({\n    id: DEFAULT_NEW_ENTITY_ID,\n    numericId: -1,\n    content: '',\n  }),\n  removeAllMitigations: () => Promise.resolve(),\n  onDeleteWorkspace: () => Promise.resolve(),\n};\n\nexport const MitigationsContext = createContext<MitigationsContextApi>(initialState);\n\nexport const useMitigationsContext = () => useContext(MitigationsContext);","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport {\n  Button,\n  Box,\n  FormField,\n  Select,\n  ColumnLayout,\n  BarChart,\n  BarChartProps,\n} from '@cloudscape-design/components';\nimport {\n  colorChartsPaletteCategorical2,\n  colorChartsPaletteCategorical1,\n} from '@cloudscape-design/design-tokens';\nimport { useState, useMemo, useCallback, FC } from 'react';\nimport {\n  ALL_LEVELS,\n  LEVEL_SELECTOR_OPTIONS_INCLUDING_ALL,\n  DEFAULT_NEW_ENTITY_ID,\n} from '../../../../../configs';\nimport { useThreatsContext } from '../../../../../contexts/ThreatsContext';\nimport filterThreatsByMetadata from '../../../../../utils/filterThreatsByMetadata';\nimport DashboardNumber from '../../../../generic/DashboardNumber';\nimport { WorkspaceInsightsProps } from '../../types';\n\nconst ThreatGrammar: FC<WorkspaceInsightsProps> = ({\n  onThreatEditorView,\n}) => {\n  const { statementList, addStatement } = useThreatsContext();\n\n  const [selectedPriority, setSelectedPriority] = useState<string | undefined>(\n    ALL_LEVELS,\n  );\n\n  const filteredStatementList = useMemo(() => {\n    return filterThreatsByMetadata(statementList, 'Priority', selectedPriority);\n  }, [statementList, selectedPriority]);\n\n  const handleAddStatement = useCallback(() => {\n    addStatement();\n    onThreatEditorView?.(DEFAULT_NEW_ENTITY_ID);\n  }, [addStatement, onThreatEditorView]);\n\n  const countThreatSource = useMemo(\n    () => filteredStatementList.filter((s) => s.threatSource).length,\n    [filteredStatementList],\n  );\n  const countPrerequisites = useMemo(\n    () => filteredStatementList.filter((s) => s.prerequisites).length,\n    [filteredStatementList],\n  );\n  const countThreatAction = useMemo(\n    () => filteredStatementList.filter((s) => s.threatAction).length,\n    [filteredStatementList],\n  );\n  const countThreatImpact = useMemo(\n    () => filteredStatementList.filter((s) => s.threatImpact).length,\n    [filteredStatementList],\n  );\n  const countImpactedGoal = useMemo(\n    () =>\n      filteredStatementList.filter(\n        (s) => s.impactedGoal && s.impactedGoal?.length != 0,\n      ).length,\n    [filteredStatementList],\n  );\n  const countImpactedAssets = useMemo(\n    () =>\n      filteredStatementList.filter(\n        (s) => s.impactedAssets && s.impactedAssets?.length != 0,\n      ).length,\n    [filteredStatementList],\n  );\n  const notUsingGrammar = useMemo(\n    () =>\n      filteredStatementList.filter(\n        (s) =>\n          !s.threatSource &&\n          !s.prerequisites &&\n          !s.threatAction &&\n          !s.threatImpact &&\n          !s.impactedGoal?.length &&\n          !s.impactedAssets?.length,\n      ).length,\n    [filteredStatementList],\n  );\n\n  let barSeries: BarChartProps<string>['series'] = [\n    {\n      title: 'Inputs for mitigation',\n      type: 'bar',\n      data: [\n        { x: 'Threat source', y: countThreatSource },\n        {\n          x: 'Prerequisites',\n          y: countPrerequisites,\n        },\n        {\n          x: 'Threat action',\n          y: countThreatAction,\n        },\n      ],\n      color: colorChartsPaletteCategorical2,\n    },\n    {\n      title: 'Inputs for prioritisation',\n      type: 'bar',\n      data: [\n        { x: 'Threat impact', y: countThreatImpact },\n        {\n          x: 'Impacted goal',\n          y: countImpactedGoal,\n        },\n        {\n          x: 'Impacted assets',\n          y: countImpactedAssets,\n        },\n      ],\n      color: colorChartsPaletteCategorical1,\n    },\n  ];\n\n  return (\n    <ColumnLayout columns={1} borders=\"horizontal\">\n      {!statementList.length ? (\n        <Box\n          margin=\"xxl\"\n          padding=\"xxl\"\n          color=\"text-body-secondary\"\n          textAlign=\"center\"\n        >\n          <b>No threats available</b>\n          <Box variant=\"p\" color=\"text-body-secondary\">\n            Start by adding a threat to this workspace\n          </Box>\n          <Button variant=\"primary\" onClick={() => handleAddStatement()}>Add a threat</Button>\n        </Box>\n      ) : (\n        <div>\n          <FormField label=\"Filter by threat priority\">\n            <Select\n              selectedOption={\n                LEVEL_SELECTOR_OPTIONS_INCLUDING_ALL.find(\n                  (x) => x.value === selectedPriority,\n                ) || null\n              }\n              onChange={({ detail }) => {\n                setSelectedPriority(detail.selectedOption.value);\n              }}\n              options={LEVEL_SELECTOR_OPTIONS_INCLUDING_ALL}\n            />\n          </FormField>\n          {!filteredStatementList.length ? (\n            <Box\n              margin=\"xxl\"\n              padding=\"xxl\"\n              color=\"text-body-secondary\"\n              textAlign=\"center\"\n            >\n              <b>No threats meet the filter criteria</b>\n            </Box>\n          ) : (\n            <Box padding=\"s\">\n              <BarChart\n                series={barSeries}\n                ariaLabel=\"Threat Grammer Chart\"\n                emphasizeBaselineAxis={false}\n                height={245}\n                hideFilter\n                horizontalBars\n                stackedBars\n                noMatch={\n                  <Box textAlign=\"center\" color=\"inherit\">\n                    <b>No matching data</b>\n                    <Box variant=\"p\" color=\"inherit\">\n                      There is no matching data to display\n                    </Box>\n                    <Button>Clear filter</Button>\n                  </Box>\n                }\n              />\n            </Box>\n          )}\n        </div>\n      )}\n      {notUsingGrammar > 0 ? (\n        <div>\n          <Box variant=\"awsui-key-label\">Not using grammar</Box>\n          <DashboardNumber\n            showWarning\n            featuredNumber={notUsingGrammar}\n          />\n        </div>\n      ) : null}\n    </ColumnLayout>\n  );\n};\n\nexport default ThreatGrammar;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback } from 'react';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { LOCAL_STORAGE_KEY_APPLICATION_INFO } from '../../../../configs/localStorageKeys';\nimport { ApplicationInfo } from '../../../../customTypes';\nimport removeLocalStorageKey from '../../../../utils/removeLocalStorageKey';\nimport { INFO_DEFAULT_VALUE } from '../../../constants';\nimport { ApplicationInfoContext } from '../../context';\nimport { ApplicationContextProviderProps } from '../../types';\n\nexport const getLocalStorageKey = (workspaceId: string | null) => {\n  if (workspaceId) {\n    return `${LOCAL_STORAGE_KEY_APPLICATION_INFO}_${workspaceId}`;\n  }\n\n  return LOCAL_STORAGE_KEY_APPLICATION_INFO;\n};\n\nconst ApplicationLocalStorageContextProvider: FC<PropsWithChildren<ApplicationContextProviderProps>> = ({\n  children,\n  workspaceId: currentWorkspaceId,\n}) => {\n  const [applicationInfo, setApplicationInfo, { removeItem }] = useLocalStorageState<ApplicationInfo>(getLocalStorageKey(currentWorkspaceId), {\n    defaultValue: INFO_DEFAULT_VALUE,\n  });\n\n  const handleRemoveApplicationInfo = useCallback(async () => {\n    removeItem();\n  }, [removeItem]);\n\n  const handleDeleteWorkspace = useCallback(async (workspaceId: string) => {\n    window.setTimeout(() => {\n      // to delete after the workspace is switched. Otherwise the default value is set again.\n      removeLocalStorageKey(getLocalStorageKey(workspaceId));\n    }, 1000);\n  }, []);\n\n  return (<ApplicationInfoContext.Provider value={{\n    applicationInfo,\n    setApplicationInfo,\n    removeApplicationInfo: handleRemoveApplicationInfo,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </ApplicationInfoContext.Provider>);\n};\n\nexport default ApplicationLocalStorageContextProvider;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport GenAIChatbot from './generated/GenAIChatbot.json';\nimport { MitigationPack } from '../../customTypes';\n// {IMPORT_PLACEHOLDER}\n\nconst mitigationPacks = [\n  GenAIChatbot,\n  // {ENTRY_PLACEHOLDER}\n] as MitigationPack[];\n\nexport default mitigationPacks;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport a from 'indefinite';\n\nconst correctIndefiniteArticle = (statement: string) => {\n  const output = statement.replace(/\\b(a|an) ([\\s\\(\\\"'-]?\\w*)\\b/gim, (_match, article: string, following: string) => {\n    var input = following.replace(/^[\\s\\(\\\"'-]+|\\s+$/g, '');\n    var newArticle = a(input, { capitalize: article.startsWith('A'), articleOnly: true });\n    return newArticle + ' ' + following;\n  });\n\n  return output;\n};\n\nexport default correctIndefiniteArticle;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC } from 'react';\nimport WorkspacesLocalStateContextProvider from './components/LocalStateContextProvider';\nimport WorkspacesLocalStorageContextProvider from './components/LocalStorageContextProvider';\nimport { useWorkspacesContext } from './context';\nimport { WorkspacesContextProviderProps } from './types';\nimport { APP_MODE_IDE_EXTENSION, DEFAULT_WORKSPACE_ID } from '../../configs';\nimport { useGlobalSetupContext } from '../GlobalSetupContext';\n\nconst WorkspacesContextProvider: FC<WorkspacesContextProviderProps> = (props) => {\n  const { appMode } = useGlobalSetupContext();\n\n  return appMode === APP_MODE_IDE_EXTENSION ?\n    (<WorkspacesLocalStateContextProvider\n      key={props.workspaceName || DEFAULT_WORKSPACE_ID}\n      {...props} />) :\n    (<WorkspacesLocalStorageContextProvider key={props.workspaceName || DEFAULT_WORKSPACE_ID} {...props} />);\n};\n\nexport default WorkspacesContextProvider;\n\nexport {\n  useWorkspacesContext,\n  WorkspacesContextProviderProps,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { LOCAL_STORAGE_KEY_CURRENT_WORKSPACE, Workspace } from '@aws/threat-composer';\nimport { generatePath, redirect } from 'react-router-dom';\nimport { ROUTE_WORKSPACE_DEFAULT, ROUTE_WORKSPACE_PATH } from '../config/routes';\n\nconst isGithubPages = process.env.REACT_APP_GITHUB_PAGES === 'true';\n\nconst requiredRewriteUrl = (search: string) => {\n  return search && (search.startsWith('?/') || search.startsWith('?%2F'));\n};\n\nconst initialWorkspaceLoader = async () => {\n  const l = window.location;\n\n  // For github page, the direct navigation to workspace pages (e.g., https://awslabs.github.io/threat-composer/workspaces/default/dashboard) results in 404.\n  // In 404.html, the url is rewrited to https://awslabs.github.io/threat-composer?/workspaces/default/dashboard so that the index.html can be loaded.\n  // And here is to reconstruct the original url and navigate to the right page.\n  if (isGithubPages && requiredRewriteUrl(l.search)) {\n    let search = decodeURIComponent(l.search);\n    if (search.indexOf('=') === search.length - 1) {\n      search = search.slice(0, search.length - 1);\n    }\n    var decoded = search.slice(1).split('&').map(function (s) {\n      return s.replace(/~and~/g, '&');\n    }).join('?');\n\n    return redirect(decoded + l.hash);\n  }\n\n  const currentWorkspaceValue = window.localStorage.getItem(LOCAL_STORAGE_KEY_CURRENT_WORKSPACE);\n\n  if (currentWorkspaceValue) {\n    try {\n      const currentWorkspace = JSON.parse(currentWorkspaceValue) as Workspace | null | undefined;\n      if (currentWorkspace) {\n        const redirectUrl = generatePath(ROUTE_WORKSPACE_PATH, {\n          workspaceId: currentWorkspace.name,\n        });\n        return redirect(redirectUrl);\n      }\n\n    } catch (e) {\n      console.log('Error in retrieving current workspace', currentWorkspaceValue);\n    }\n  }\n\n  return redirect(ROUTE_WORKSPACE_DEFAULT);\n};\n\nexport default initialWorkspaceLoader;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport React from 'react';\nimport { createBrowserRouter, createMemoryRouter, redirect } from 'react-router-dom';\nimport initialWorkspaceLoader from './initialWorkspaceLoader';\nimport {\n  ROUTE_WORKSPACE_HOME_PATH,\n  ROUTE_APPLICATION_INFO_PATH,\n  ROUTE_ARCHITECTURE_INFO_PATH,\n  ROUTE_ASSUMPTION_LIST_PATH,\n  ROUTE_DATAFLOW_INFO_PATH,\n  ROUTE_MITIGATION_LIST_PATH,\n  ROUTE_THREAT_EDITOR_PATH,\n  ROUTE_THREAT_LIST_PATH,\n  ROUTE_VIEW_THREAT_MODEL_PATH,\n  ROUTE_THREAT_PACK_PATH,\n  ROUTE_THREAT_PACKS_PATH,\n  ROUTE_MITIGATION_PACK_PATH,\n  ROUTE_MITIGATION_PACKS_PATH,\n  ROUTE_WORKSPACE_PATH,\n  ROUTE_PREVIEW_PATH,\n  ROUTE_BRAINSTORM_PATH,\n} from '../config/routes';\nimport isMemoryRouterUsed from '../utils/isMemoryRouterUsed';\n\nconst ROUTE_BASE_PATH = process.env.REACT_APP_ROUTE_BASE_PATH;\n\nconst AppRoot = React.lazy(() => import('../containers/AppRoot'));\nconst WorkspaceRoot = React.lazy(() => import('../containers/WorkspaceRoot'));\nconst Architecture = React.lazy(() => import('../containers/Architecture'));\nconst Application = React.lazy(() => import('../containers/Application'));\nconst BrainstormBoard = React.lazy(() => import('../containers/BrainstormBoard'));\nconst Dataflow = React.lazy(() => import('../containers/Dataflow'));\nconst AssumptionList = React.lazy(() => import('../containers/AssumptionList'));\nconst MitigationList = React.lazy(() => import('../containers/MitigationList'));\nconst MitigationPack = React.lazy(() => import('../containers/MitigationPack'));\nconst MitigationPacks = React.lazy(() => import('../containers/MitigationPacks'));\nconst ThreatModelPreview = React.lazy(() => import('../containers/ThreatModelPreview'));\nconst ThreatModelReport = React.lazy(() => import('../containers/ThreatModelReport'));\nconst ThreatPack = React.lazy(() => import('../containers/ThreatPack'));\nconst ThreatPacks = React.lazy(() => import('../containers/ThreatPacks'));\nconst ThreatStatementEditor = React.lazy(() => import('../containers/ThreatStatementEditor'));\nconst ThreatStatementList = React.lazy(() => import('../containers/ThreatStatementList'));\nconst WorkspaceHome = React.lazy(() => import('../containers/WorkspaceHome'));\n\nconst workspaceRoutes = [\n  {\n    index: true,\n    loader: async () => redirect(ROUTE_WORKSPACE_HOME_PATH),\n  },\n  {\n    path: ROUTE_WORKSPACE_HOME_PATH,\n    element: <WorkspaceHome />,\n  },\n  {\n    path: ROUTE_APPLICATION_INFO_PATH,\n    element: <Application />,\n  },\n  {\n    path: ROUTE_ARCHITECTURE_INFO_PATH,\n    element: <Architecture />,\n  },\n  {\n    path: ROUTE_ASSUMPTION_LIST_PATH,\n    element: <AssumptionList />,\n  },\n  {\n    path: ROUTE_DATAFLOW_INFO_PATH,\n    element: <Dataflow />,\n  },\n  {\n    path: ROUTE_MITIGATION_LIST_PATH,\n    element: <MitigationList />,\n  },\n  {\n    path: ROUTE_VIEW_THREAT_MODEL_PATH,\n    element: <ThreatModelReport />,\n  },\n  {\n    path: ROUTE_THREAT_PACK_PATH,\n    element: <ThreatPack />,\n  },\n  {\n    path: ROUTE_THREAT_PACKS_PATH,\n    element: <ThreatPacks />,\n  },\n  {\n    path: ROUTE_MITIGATION_PACK_PATH,\n    element: <MitigationPack />,\n  },\n  {\n    path: ROUTE_MITIGATION_PACKS_PATH,\n    element: <MitigationPacks />,\n  },\n  {\n    path: ROUTE_THREAT_EDITOR_PATH,\n    element: <ThreatStatementEditor />,\n  },\n  {\n    path: ROUTE_THREAT_LIST_PATH,\n    element: <ThreatStatementList />,\n  },\n  {\n    path: ROUTE_BRAINSTORM_PATH,\n    element: <BrainstormBoard />,\n  },\n];\n\nexport const createRouter = isMemoryRouterUsed() ? createMemoryRouter : createBrowserRouter;\n\nexport const routerOpts = ROUTE_BASE_PATH ? {\n  basename: ROUTE_BASE_PATH,\n} : {};\n\nexport const routes = [\n  {\n    index: true,\n    loader: initialWorkspaceLoader,\n  },\n  {\n    path: '/',\n    element: <AppRoot />,\n    children: [\n      {\n        path: ROUTE_WORKSPACE_PATH,\n        element: <WorkspaceRoot />,\n        children: [\n          ...workspaceRoutes,\n        ],\n      },\n      {\n        path: ROUTE_PREVIEW_PATH,\n        element: <ThreatModelPreview />,\n      },\n    ],\n  },\n];\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { Loading } from '@aws/threat-composer';\nimport { FC, Suspense, useState } from 'react';\nimport { RouterProvider } from 'react-router-dom';\nimport { routerOpts, createRouter, routes } from '../../../../routes';\n\nconst Full: FC = () => {\n  const [router] = useState(() => {\n    //Initialize here to ensure the default index loader only call when Full is mount without affecting Standalone mode\n    return createRouter(routes, routerOpts);\n  });\n\n  return (\n    <Suspense fallback={<Loading />}>\n      <RouterProvider router={router} />\n    </Suspense>\n  );\n};\n\nexport default Full;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useThemeContext } from '@aws/threat-composer';\nimport TopNavigation, { TopNavigationProps } from '@cloudscape-design/components/top-navigation';\nimport { Mode, Density } from '@cloudscape-design/global-styles';\nimport { FC, useMemo } from 'react';\n\n/**\n * Props for Top Navigation Header\n */\nexport interface NavHeaderProps extends Partial<TopNavigationProps> {\n  /**\n     * The title of the app.\n     */\n  title: string;\n  /**\n     * The src of the logo.\n     */\n  logo?: string;\n  /**\n     * The href that the header links to\n     */\n  href: string;\n}\n\n/**\n * Top Navigation Header displayed on AppLayout.\n */\nconst NavHeader: FC<NavHeaderProps> = ({ title, href, logo, ...props }) => {\n  const { theme, setTheme, density, setDensity } = useThemeContext();\n  const utilities: TopNavigationProps.Utility[] = useMemo(() => {\n    const menu: TopNavigationProps.Utility[] = [\n      {\n        type: 'menu-dropdown',\n        iconName: 'settings',\n        ariaLabel: 'Settings',\n        title: 'Settings',\n        items: [\n          {\n            id: 'theme',\n            text: 'Theme',\n            items: [\n              {\n                id: 'theme.light',\n                text: 'Light',\n                disabled: theme === Mode.Light,\n                disabledReason: 'currently selected',\n              },\n              {\n                id: 'theme.dark',\n                text: 'Dark',\n                disabled: theme === Mode.Dark,\n                disabledReason: 'currently selected',\n              },\n            ],\n          },\n          {\n            id: 'density',\n            text: 'Density',\n            items: [\n              {\n                id: 'density.comfortable',\n                text: 'Comfortable',\n                disabled: density === Density.Comfortable,\n                disabledReason: 'currently selected',\n              },\n              {\n                id: 'density.compact',\n                text: 'Compact',\n                disabled: density === Density.Compact,\n                disabledReason: 'currently selected',\n              },\n            ],\n          },\n        ],\n        onItemClick: (e) => {\n          switch (e.detail.id) {\n            case 'theme.light':\n              setTheme(Mode.Light);\n              break;\n            case 'theme.dark':\n              setTheme(Mode.Dark);\n              break;\n            case 'density.comfortable':\n              setDensity(Density.Comfortable);\n              break;\n            case 'density.compact':\n              setDensity(Density.Compact);\n              break;\n            default:\n              break;\n          }\n        },\n      },\n    ];\n\n    return menu;\n  }, [theme, density]);\n\n  return (\n    <div style={{ position: 'fixed', top: 0, left: 0, right: 0, zIndex: 1002, margin: 0 }}>\n      <TopNavigation\n        {...props}\n        utilities={utilities}\n        i18nStrings={{ overflowMenuTitleText: title, overflowMenuTriggerText: title }}\n        identity={{\n          title: title,\n          href: href,\n          logo: logo\n            ? {\n              src: logo,\n              alt: title,\n            }\n            : undefined,\n        }}\n      />\n    </div>\n  );\n};\n\nexport default NavHeader;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useMobileMediaQuery } from '@aws/threat-composer';\nimport Box from '@cloudscape-design/components/box';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { FC, PropsWithChildren, useMemo, ReactNode } from 'react';\nimport NavHeader from '../NavHeader';\n\nexport interface StandaloneAppLayoutProps {\n  href: string;\n  title: string;\n  notifications?: ReactNode;\n}\n\nconst baseStyles = {\n  width: '100%',\n  background: awsui.colorBackgroundContainerContent,\n};\n\nconst StandaloneAppLayout: FC<PropsWithChildren<StandaloneAppLayoutProps>> = ({\n  title,\n  children,\n  notifications,\n  ...props\n}) => {\n  const isMobileView = useMobileMediaQuery();\n  const headerHref = useMemo(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const mode = urlParams.get('mode');\n    const href = props.href || '/';\n    return mode ? `${href}/?mode=${mode}` : href;\n  }, [props]);\n\n  return (<div style={{\n    background: awsui.colorBackgroundContainerContent,\n    width: '100%',\n    height: '100vh',\n  }}>\n    <NavHeader\n      title={title}\n      href={headerHref}\n    />\n    <main>\n      <div style={isMobileView ? {\n        ...baseStyles,\n        paddingTop: `calc(24px + ${awsui.spaceScaledL})`,\n      } : {\n        ...baseStyles,\n        paddingTop: `calc(36px + ${awsui.spaceScaledL})`,\n      }}>\n        {notifications && <div>{notifications}</div>}\n        <div style={{\n          display: 'flex',\n          justifyContent: 'center',\n        }}>\n          <div style={{\n            maxWidth: '1419px',\n            width: '100%',\n          }}>\n            <Box padding='l'>\n              {children}\n            </Box>\n          </div>\n        </div>\n      </div>\n    </main>\n  </div>);\n};\n\nexport default StandaloneAppLayout;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { ThreatStatementGenerator } from '@aws/threat-composer';\nimport { FC } from 'react';\nimport StandaloneAppLayout from '../../../../components/StandaloneAppLayout';\nimport useNotifications from '../../../../hooks/useNotifications';\n\nconst defaultHref = process.env.PUBLIC_URL || '/';\n\nexport interface StandaloneProps {\n  composeMode: string | null;\n}\n\nconst Standalone: FC<StandaloneProps> = ({\n  composeMode,\n}) => {\n  const notifications = useNotifications(true);\n  return (\n    <StandaloneAppLayout\n      title='threat-composer'\n      href={defaultHref}\n      notifications={notifications}\n    >\n      <ThreatStatementGenerator composerMode={composeMode !== 'EditorOnly' ? 'ThreatsOnly' : 'EditorOnly'} />\n    </StandaloneAppLayout>\n\n  );\n};\n\nexport default Standalone;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n\nimport { SEARCH_PARAM_MODE } from '../../config/searchParams';\n\nconst DEFAULT_MODE = process.env.REACT_APP_DEFAULT_MODE;\n\nconst getComposerMode = () => {\n  const searchParams = new URLSearchParams(window.location.search);\n  const mode = searchParams.get(SEARCH_PARAM_MODE);\n  const composerMode = mode || DEFAULT_MODE || 'Full';\n  return composerMode;\n};\n\nexport default getComposerMode;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC } from 'react';\nimport Full from './components/Full';\nimport Standalone from './components/Standalone';\nimport getComposerMode from '../../utils/getComposerMode';\n\n\n/**\n * Demo app for threat-composer\n */\nconst App: FC = () => {\n  const composerMode = getComposerMode();\n\n  console.log('App-ComposerMode', composerMode);\n\n  return (composerMode === 'ThreatsOnly' || composerMode === 'EditorOnly') ? (\n    <Standalone composeMode={composerMode} />\n  ) : (<Full />);\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(\n      ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n        getCLS(onPerfEntry);\n        getFID(onPerfEntry);\n        getFCP(onPerfEntry);\n        getLCP(onPerfEntry);\n        getTTFB(onPerfEntry);\n      },\n      () => {}\n    );\n  }\n};\n\nexport default reportWebVitals;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { ThemeProvider, Mode } from '@aws/threat-composer';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './containers/App';\nimport reportWebVitals from './reportWebVitals';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport isMemoryRouterUsed from './utils/isMemoryRouterUsed';\n\n//For the ide-extension, the theme can be set via meta tag.\nconst initialThemeString = (document.querySelector('meta[name=\"dark-mode\"]') as HTMLMetaElement)?.content;\n\nlet initialTheme = initialThemeString ?\n  (initialThemeString === 'true' ? Mode.Dark : Mode.Light) :\n  undefined;\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={initialTheme} appMode={process.env.REACT_APP_APP_MODE || undefined}>\n      <App />\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\n!isMemoryRouterUsed() && serviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\n\nimport DeleteConfirmationDialog from '@aws-northstar/ui/components/DeleteConfirmationDialog';\nimport Alert from '@cloudscape-design/components/alert';\nimport Button from '@cloudscape-design/components/button';\nimport ButtonDropdown, {\n  ButtonDropdownProps,\n} from '@cloudscape-design/components/button-dropdown';\nimport {\n  CancelableEventHandler,\n  NonCancelableEventHandler,\n} from '@cloudscape-design/components/internal/events';\nimport Select, { SelectProps } from '@cloudscape-design/components/select';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { css } from '@emotion/react';\nimport { FC, useMemo, useState, useCallback, PropsWithChildren } from 'react';\nimport { APP_MODE_IDE_EXTENSION } from '../../../configs';\nimport {\n  DEFAULT_WORKSPACE_ID,\n  DEFAULT_WORKSPACE_LABEL,\n  EXAMPLES_SECTION_WORKSPACE_LABEL,\n} from '../../../configs/constants';\nimport { useGlobalSetupContext } from '../../../contexts/GlobalSetupContext';\nimport { useWorkspaceExamplesContext } from '../../../contexts/WorkspaceExamplesContext';\nimport { useWorkspacesContext } from '../../../contexts/WorkspacesContext';\nimport {\n  DataExchangeFormat,\n  TemplateThreatStatement,\n} from '../../../customTypes';\nimport useCloneWorkspace from '../../../hooks/useCloneWorkspace';\nimport useImportExport from '../../../hooks/useExportImport';\nimport useRemoveData from '../../../hooks/useRemoveData';\nimport getMobileMediaQuery from '../../../utils/getMobileMediaQuery';\nimport isWorkspaceExample from '../../../utils/isWorkspaceExample';\nimport ThemeToggle from '../../generic/ThemeToggle';\nimport EditWorkspace from '../../workspaces/EditWorkspace';\nimport FileImport from '../../workspaces/FileImport';\n\nconst styles = {\n  themeToggle: css({\n    height: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    [getMobileMediaQuery()]: {\n      display: 'none',\n    },\n  }),\n};\n\nexport interface WorkspaceSelectorProps {\n  embededMode: boolean;\n  enabledExportAll?: boolean;\n  enabledRemoveAll?: boolean;\n  enabledExportFiltered?: boolean;\n  filteredThreats?: TemplateThreatStatement[];\n  singletonMode?: boolean;\n  singletonPrimaryActionButtonConfig?: {\n    text: string;\n    eventName?: string;\n    onClick?: (data: DataExchangeFormat) => void;\n  };\n  onPreview?: (data: DataExchangeFormat) => void;\n  onPreviewClose?: () => void;\n  onImported?: () => void;\n  onClone?: () => Promise<void>;\n}\n\nconst WorkspaceSelector: FC<PropsWithChildren<WorkspaceSelectorProps>> = ({\n  embededMode = true,\n  children,\n  enabledExportAll,\n  enabledExportFiltered,\n  enabledRemoveAll,\n  filteredThreats,\n  singletonMode = false,\n  singletonPrimaryActionButtonConfig,\n  onPreview,\n  onPreviewClose,\n  onImported,\n}) => {\n  const [addWorkspaceModalVisible, setAddWorkspaceModalVisible] =\n    useState(false);\n  const [editWorkspaceModalVisible, setEditWorkspaceModalVisible] =\n    useState(false);\n  const [cloneWorkspaceModalVisible, setCloneWorkspaceModalVisible] =\n    useState(false);\n  const [removeDataModalVisible, setRemoveDataModalVisible] = useState(false);\n  const [removeWorkspaceModalVisible, setRemoveWorkspaceModalVisible] =\n    useState(false);\n  const [isRemovingWorkspace, setIsRemovingWorkspace] = useState(false);\n\n  const { workspaceExamples } = useWorkspaceExamplesContext();\n  const { importData, exportAll, exportSelectedThreats, getWorkspaceData } =\n    useImportExport();\n  const { removeData, deleteWorkspace } = useRemoveData();\n\n  const {\n    appMode,\n    composerMode,\n    fileImportModalVisible,\n    setFileImportModalVisible,\n  } = useGlobalSetupContext();\n\n  const {\n    currentWorkspace,\n    workspaceList,\n    addWorkspace,\n    renameWorkspace,\n    switchWorkspace,\n  } = useWorkspacesContext();\n\n  const cloneWorkspace = useCloneWorkspace();\n\n  const workspacesOptions = useMemo(() => {\n    const options: (SelectProps.Option | SelectProps.OptionGroup)[] = [\n      {\n        label: DEFAULT_WORKSPACE_LABEL,\n        value: DEFAULT_WORKSPACE_ID,\n      },\n      {\n        label: EXAMPLES_SECTION_WORKSPACE_LABEL,\n        options: workspaceExamples.map((we) => ({\n          label: we.name,\n          value: we.id,\n        })),\n      },\n    ];\n\n    workspaceList &&\n      workspaceList.length > 0 &&\n      options.push({\n        label: 'Workspaces',\n        options: workspaceList.map((w) => ({\n          label: w.name,\n          value: w.id,\n        })),\n      });\n\n    return options;\n  }, [workspaceList]);\n\n  const handleSelectWorkspace: NonCancelableEventHandler<SelectProps.ChangeDetail> =\n    useCallback(\n      ({ detail }) => {\n        const selectedItem = detail.selectedOption;\n        if (selectedItem.value === DEFAULT_WORKSPACE_ID) {\n          switchWorkspace(null);\n        } else {\n          selectedItem.value &&\n            selectedItem.label &&\n            switchWorkspace(selectedItem.value);\n        }\n      },\n      [switchWorkspace],\n    );\n\n  const handleSingletonPrimaryButtonClick = useCallback(() => {\n    if (singletonPrimaryActionButtonConfig) {\n      const data = getWorkspaceData();\n      singletonPrimaryActionButtonConfig.onClick?.(data);\n      singletonPrimaryActionButtonConfig.eventName &&\n        window.threatcomposer.dispatchEvent(\n          new CustomEvent(singletonPrimaryActionButtonConfig.eventName, {\n            detail: data,\n          }),\n        );\n    } else {\n      exportAll();\n    }\n  }, [singletonPrimaryActionButtonConfig, getWorkspaceData, exportAll]);\n\n  const handleMoreActions: CancelableEventHandler<ButtonDropdownProps.ItemClickDetails> =\n    useCallback(\n      async ({ detail }) => {\n        switch (detail.id) {\n          case 'add':\n            setAddWorkspaceModalVisible(true);\n            break;\n          case 'import':\n            setFileImportModalVisible(true);\n            break;\n          case 'clone':\n            setCloneWorkspaceModalVisible(true);\n            break;\n          case 'exportAll':\n            exportAll();\n            break;\n          case 'exportFilteredList':\n            exportSelectedThreats(filteredThreats || []);\n            break;\n          case 'removeAll':\n            setRemoveDataModalVisible(true);\n            break;\n          case 'delete':\n            currentWorkspace && setRemoveWorkspaceModalVisible(true);\n            break;\n          case 'renameWorkspace':\n            setEditWorkspaceModalVisible(true);\n            break;\n          default:\n            console.log('Unknown action', detail.id);\n        }\n      },\n      [\n        setFileImportModalVisible,\n        exportAll,\n        exportSelectedThreats,\n        filteredThreats,\n        deleteWorkspace,\n        currentWorkspace,\n        setRemoveDataModalVisible,\n        setRemoveWorkspaceModalVisible,\n        setAddWorkspaceModalVisible,\n        setCloneWorkspaceModalVisible,\n        setEditWorkspaceModalVisible,\n        handleSingletonPrimaryButtonClick,\n      ],\n    );\n\n  const handleRemoveData = useCallback(async () => {\n    try {\n      await removeData?.();\n    } catch (e) {\n      console.log('Error in removing data from workspace', e);\n    } finally {\n      setRemoveDataModalVisible(false);\n    }\n  }, [removeData]);\n\n  const handleDeleteWorkspace = useCallback(\n    async (toDeleteWorkspaceId: string) => {\n      setIsRemovingWorkspace(true);\n\n      try {\n        await deleteWorkspace(toDeleteWorkspaceId);\n      } catch (e) {\n        console.log('Error in deleting workspace', e);\n      } finally {\n        setRemoveWorkspaceModalVisible(false);\n        setIsRemovingWorkspace(false);\n      }\n    },\n    [],\n  );\n\n  const handleImport = useCallback(\n    async (data: DataExchangeFormat) => {\n      await importData(data);\n      onImported?.();\n    },\n    [importData, onImported],\n  );\n\n  const buttonDropdownItems = useMemo(() => {\n    const items: ButtonDropdownProps.Item[] = [];\n\n    if (singletonMode && singletonPrimaryActionButtonConfig && appMode !== APP_MODE_IDE_EXTENSION) {\n      // If primary action button is not specified, use Export data as primary action button in Singleton app mode.\n      items.push({\n        id: 'exportAll',\n        text: 'Export data',\n      });\n    }\n\n    if (!singletonMode) {\n      items.push(\n        { id: 'add', text: 'Add new workspace' },\n        {\n          id: 'import',\n          text: 'Import into current workspace',\n          disabled: isWorkspaceExample(currentWorkspace?.id),\n        },\n        {\n          id: 'clone',\n          text: 'Clone current workspace',\n        },\n        {\n          id: 'exportAll',\n          text: embededMode\n            ? 'Export all statements from current workspace'\n            : 'Export data from current workspace',\n          disabled: embededMode && !enabledExportAll,\n        },\n      );\n    } else {\n      items.push({\n        id: 'import',\n        text: 'Import',\n      });\n    }\n\n    if (embededMode) {\n      items.push({\n        id: 'exportFilteredList',\n        text: 'Export filtered statement list from current workspace',\n        disabled: !enabledExportFiltered,\n      });\n    }\n\n    if (singletonMode) {\n      items.push({\n        id: 'removeAll',\n        text: 'Remove data',\n      });\n    } else {\n      items.push({\n        id: 'removeAll',\n        text: embededMode\n          ? 'Remove all statements from current workspace'\n          : 'Remove data from current workspace',\n        disabled:\n          (embededMode && !enabledRemoveAll) ||\n          isWorkspaceExample(currentWorkspace?.id),\n      });\n    }\n\n    if (!singletonMode) {\n      items.push(\n        {\n          id: 'delete',\n          text: 'Delete workspace',\n          disabled:\n            !currentWorkspace || isWorkspaceExample(currentWorkspace.id),\n        },\n        {\n          id: 'renameWorkspace',\n          text: 'Rename workspace',\n          disabled:\n            !currentWorkspace || isWorkspaceExample(currentWorkspace.id),\n        },\n      );\n    }\n\n    return items;\n  }, [\n    appMode,\n    singletonMode,\n    singletonPrimaryActionButtonConfig,\n    embededMode,\n    enabledRemoveAll,\n    enabledExportAll,\n    enabledExportFiltered,\n    currentWorkspace,\n  ]);\n\n  return (\n    <>\n      <SpaceBetween direction=\"horizontal\" size=\"xs\">\n        {!singletonMode && (\n          <Select\n            controlId=\"WorkspacesSelect\"\n            selectedOption={{\n              value: currentWorkspace?.id || DEFAULT_WORKSPACE_ID,\n              label: `Workspace: ${currentWorkspace?.name || DEFAULT_WORKSPACE_LABEL\n              }`,\n            }}\n            options={workspacesOptions}\n            onChange={handleSelectWorkspace}\n          />\n        )}\n        {singletonMode && (\n          <Button variant=\"primary\" onClick={handleSingletonPrimaryButtonClick}>\n            {singletonPrimaryActionButtonConfig\n              ? singletonPrimaryActionButtonConfig.text\n              : 'Export data'}\n          </Button>\n        )}\n        {children}\n        {buttonDropdownItems.length > 0 && (\n          <ButtonDropdown\n            items={buttonDropdownItems}\n            ariaLabel=\"More actions\"\n            variant=\"icon\"\n            onItemClick={handleMoreActions}\n          />\n        )}\n        {appMode !== 'ide-extension' && composerMode === 'Full' && <div css={styles.themeToggle}><ThemeToggle /></div>}\n      </SpaceBetween>\n      {fileImportModalVisible && (\n        <FileImport\n          composerMode={composerMode}\n          visible={fileImportModalVisible}\n          setVisible={setFileImportModalVisible}\n          onExport={exportAll}\n          onImport={handleImport}\n          onPreview={onPreview}\n          onPreviewClose={onPreviewClose}\n        />\n      )}\n      {addWorkspaceModalVisible && (\n        <EditWorkspace\n          editMode='add'\n          visible={addWorkspaceModalVisible}\n          setVisible={setAddWorkspaceModalVisible}\n          onConfirm={async (workspaceName: string) => {\n            await addWorkspace(workspaceName);\n          }}\n          workspaceList={workspaceList}\n          exampleWorkspaceList={workspaceExamples}\n        />\n      )}\n      {cloneWorkspaceModalVisible && (\n        <EditWorkspace\n          editMode='clone'\n          visible={cloneWorkspaceModalVisible}\n          setVisible={setCloneWorkspaceModalVisible}\n          onConfirm={async (workspaceName: string) => {\n            await cloneWorkspace(workspaceName);\n          }}\n          workspaceList={workspaceList}\n          exampleWorkspaceList={workspaceExamples}\n        />\n      )}\n      {editWorkspaceModalVisible && currentWorkspace && (\n        <EditWorkspace\n          editMode='update'\n          visible={editWorkspaceModalVisible}\n          setVisible={setEditWorkspaceModalVisible}\n          value={currentWorkspace.name}\n          onConfirm={(newWorkspaceName) =>\n            renameWorkspace(currentWorkspace.id, newWorkspaceName)\n          }\n          currentWorkspace={currentWorkspace}\n          workspaceList={workspaceList}\n          exampleWorkspaceList={workspaceExamples}\n        />\n      )}\n      {removeDataModalVisible && (\n        <DeleteConfirmationDialog\n          variant=\"friction\"\n          visible={removeDataModalVisible}\n          title=\"Delete data from current workspace?\"\n          onCancelClicked={() => setRemoveDataModalVisible(false)}\n          onDeleteClicked={handleRemoveData}\n          deleteButtonText=\"Remove data\"\n        >\n          <Alert\n            action={<Button onClick={() => exportAll()}>Export data</Button>}\n            type=\"warning\"\n          >\n            Delete{' '}\n            <b>\n              Data from{' '}\n              {currentWorkspace\n                ? `workspace ${currentWorkspace.name}`\n                : 'Default workspace'}\n            </b>{' '}\n            permenantly? This action cannot be undone.\n            <br />\n            You can export the data to a json file as backup.\n          </Alert>\n        </DeleteConfirmationDialog>\n      )}\n      {removeWorkspaceModalVisible && currentWorkspace && (\n        <DeleteConfirmationDialog\n          variant=\"friction\"\n          visible={removeWorkspaceModalVisible}\n          title=\"Delete Workspace?\"\n          onCancelClicked={() => setRemoveWorkspaceModalVisible(false)}\n          onDeleteClicked={() => handleDeleteWorkspace(currentWorkspace.id)}\n          loading={isRemovingWorkspace}\n          deleteButtonText=\"Delete workspace\"\n        >\n          <Alert\n            action={<Button onClick={() => exportAll()}>Export data</Button>}\n            type=\"warning\"\n          >\n            Delete <b>workspace {currentWorkspace?.name}</b> permenantly? All\n            the data inside workspace will be deleted. This action cannot be\n            undone.\n            <br />\n            You can export the data to a json file as backup.\n          </Alert>\n        </DeleteConfirmationDialog>\n      )}\n    </>\n  );\n};\n\nexport default WorkspaceSelector;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport const DEFAULT_WORKSPACE_ID = 'default';\nexport const DEFAULT_WORKSPACE_LABEL = 'Default';\nexport const DEFAULT_NEW_ENTITY_ID = 'new';\n\nexport const EXAMPLES_WORKSPACE_ID_PREFIX = 'EXAMPLE_';\nexport const EXAMPLES_SECTION_WORKSPACE_LABEL = 'Examples';\n\n// Tags\nexport const SINGLE_FIELD_INPUT_TAG_MAX_LENGTH = 30;\n// Metadata key, Workspace name\nexport const SINGLE_FIELD_INPUT_SMALL_MAX_LENGTH = 50;\n// Threat statement elements, Application name, custom template length\nexport const SINGLE_FIELD_INPUT_MAX_LENGTH = 200;\n// Entity comments, Assumption/Mitigation content\nexport const FREE_TEXT_INPUT_SMALL_MAX_LENGTH = 1000;\n// Application info, Architecture description, Dataflow description\nexport const FREE_TEXT_INPUT_MAX_LENGTH = 100000;\n// Architecture diagram, data flow diagram\nexport const IMAGE_BASE64_MAX_LENGTH = 1000000;\n//  Architecture diagram url, data flow diagram, url\nexport const IMAGE_URL_MAX_LENGTH = 2048;\n\nexport const STORAGE_LOCAL_STORAGE = 'LocalStorage';\nexport const STORAGE_LOCAL_STATE = 'LocalState';\n\nexport const ALL_LEVELS = 'All';\nexport const LEVEL_NOT_SET = '-';\nexport const LEVEL_HIGH = 'High';\nexport const LEVEL_MEDIUM = 'Medium';\nexport const LEVEL_LOW = 'Low';","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport ButtonDropdown, { ButtonDropdownProps } from '@cloudscape-design/components/button-dropdown';\nimport Container from '@cloudscape-design/components/container';\nimport Header from '@cloudscape-design/components/header';\nimport { CancelableEventHandler } from '@cloudscape-design/components/internal/events';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport { css } from '@emotion/react';\nimport { ReactNode, FC, useMemo, useState, useEffect, useCallback } from 'react';\nimport ExpandableToken from './components/ExpandableToken';\nimport Token from './components/Token';\nimport { useGlobalSetupContext } from '../../../contexts/GlobalSetupContext/context';\nimport { ComposerMode, TemplateThreatStatement } from '../../../customTypes';\nimport { ThreatFieldTypes } from '../../../customTypes/threatFieldTypes';\nimport threatFieldData from '../../../data/threatFieldData';\nimport threatStatementFormat from '../../../data/threatStatementFormat';\n\nimport getRecommendedEditor from '../../../utils/getRecommandedEditor';\nimport parseThreatStatement from '../../../utils/parseThreatStatement';\nimport Suggestions from '../Suggestions';\n\nconst defaultThreatStatementFormat = threatStatementFormat[63];\n\nexport interface FieldSelectorProps {\n  composerMode: ComposerMode;\n  currentEditor?: ThreatFieldTypes;\n  setEditor: (type: ThreatFieldTypes) => void;\n  statement: TemplateThreatStatement;\n  suggestions?: string[];\n  onGiveExampleClick?: () => void;\n  setCustomTemplateEditorVisible: (visible: boolean) => void;\n  onStartOver?: () => void;\n}\n\nconst styles = {\n  selector: css({\n    lineHeight: '2.5',\n  }),\n};\nconst FieldSelector: FC<FieldSelectorProps> = ({\n  composerMode,\n  onStartOver,\n  setEditor,\n  currentEditor,\n  statement,\n  suggestions,\n  onGiveExampleClick,\n  setCustomTemplateEditorVisible,\n}) => {\n  const [expandedImpactedGoal, setExpandedImpactedGoal] = useState(false);\n\n  useEffect(() => {\n    currentEditor === 'impacted_goal' && setExpandedImpactedGoal(true);\n  }, [currentEditor]);\n\n  useEffect(() => {\n    // Set default to collapse impacted goal when current editing statement change\n    setExpandedImpactedGoal(false);\n  }, [statement]);\n\n  const { showInfoModal } = useGlobalSetupContext();\n\n  const selector = useMemo(() => {\n    let renderShortenImpactedGoal = false;\n\n    let template = statement.customTemplate || defaultThreatStatementFormat.template;\n    const outputProcessor = (token: string, content: string, before: string, filled: boolean) => {\n      const output: ReactNode[] = [];\n      if (token === 'impacted_goal' && !expandedImpactedGoal && !filled && !statement.customTemplate) {\n        // If impacted goal is empty, display shorten message.\n        output.push(',');\n        output.push(\n          <ExpandableToken\n            key='field_selector_impacted_goal_expand'\n            tooltip={`Expand ${threatFieldData[token]?.tooltip}`}\n            expanded={false}\n            onClick={() => {\n              setExpandedImpactedGoal(true);\n              setEditor('impacted_goal');\n            }}\n          />);\n        renderShortenImpactedGoal = true;\n      } else {\n        if (renderShortenImpactedGoal) {\n          output.push('negatively impacting ');\n        } else {\n          output.push(before);\n        }\n\n        output.push(<Token\n          key={token}\n          highlighted={currentEditor === token}\n          filled={!!filled}\n          tooltip={threatFieldData[token]?.tooltip}\n          onClick={() => setEditor(token as ThreatFieldTypes)}>\n          {content}\n        </Token>);\n\n        token === 'impacted_goal' &&\n          !filled &&\n          output.push(\n            <ExpandableToken\n              expanded\n              key='field_selector_impacted_goal_collpase'\n              tooltip={`Collapse ${threatFieldData[token]?.tooltip}`}\n              onClick={() => {\n                setExpandedImpactedGoal(false);\n                const nextEditor = getRecommendedEditor(statement);\n                nextEditor && setEditor(nextEditor);\n              }}\n            />);\n      }\n\n      return output;\n    };\n\n    return parseThreatStatement({\n      statement,\n      template,\n      outputProcessor,\n    });\n\n  }, [statement, setEditor, currentEditor, suggestions, expandedImpactedGoal, setExpandedImpactedGoal]);\n\n  const handleMoreActions: CancelableEventHandler<ButtonDropdownProps.ItemClickDetails> = useCallback(({ detail }) => {\n    switch (detail.id) {\n      case 'customTemplate':\n        setCustomTemplateEditorVisible(true);\n        break;\n      default:\n        console.log('Unknown action', detail.id);\n    }\n  }, [setCustomTemplateEditorVisible]);\n\n  return (<Container\n    header={<Header\n      info={composerMode === 'Full' ? undefined : <Button variant='icon' iconName='status-info' onClick={showInfoModal} />}\n      actions={<SpaceBetween direction='horizontal' size='s'>\n        {composerMode === 'EditorOnly' && <Button onClick={onStartOver}>Start over</Button>}\n        {onGiveExampleClick && <Button onClick={onGiveExampleClick}>Give me a random example</Button>}\n        <ButtonDropdown items={[\n          { id: 'customTemplate', text: 'Custom Template' },\n        ]}\n        ariaLabel=\"More actions\"\n        variant=\"icon\"\n        onItemClick={handleMoreActions} />\n      </SpaceBetween>}\n      description='Start by clicking ANY field you like and work from there...'>Let's write a threat statement!</Header>}>\n    <SpaceBetween direction='vertical' size='s'>\n      <TextContent>\n        <div css={styles.selector}>\n          {selector}\n        </div>\n      </TextContent>\n      <Suggestions suggestions={suggestions} setEditor={setEditor} />\n    </SpaceBetween>\n  </Container>);\n};\n\nexport default FieldSelector;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport Container from '@cloudscape-design/components/container';\nimport { FC } from 'react';\nimport { MitigationPack } from '../../../../../customTypes';\n\nexport interface GeneralInfoProps {\n  mitigationPack: MitigationPack;\n}\n\nconst GeneralInfo: FC<GeneralInfoProps> = ({\n  mitigationPack,\n}) => {\n  return (<Container>\n    {mitigationPack.description}\n  </Container>);\n};\n\nexport default GeneralInfo;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren } from 'react';\nimport ApplicationLocalStateContextProvider from './components/LocalStateContextProvider';\nimport ApplicationLocalStorageContextProvider from './components/LocalStorageContextProvider';\nimport { useApplicationInfoContext } from './context';\nimport { ApplicationContextProviderProps } from './types';\nimport { STORAGE_LOCAL_STATE } from '../../configs';\nimport useWorkspaceStorage from '../../hooks/useWorkspaceStorage';\n\nconst ApplicationContextProvider: FC<PropsWithChildren<ApplicationContextProviderProps>> = (props) => {\n  const { storageType, value } = useWorkspaceStorage(props.workspaceId);\n\n  return storageType === STORAGE_LOCAL_STATE ?\n    (<ApplicationLocalStateContextProvider\n      key={props.workspaceId}\n      initialValue={value?.applicationInfo}\n      {...props} />) :\n    (<ApplicationLocalStorageContextProvider key={props.workspaceId} {...props} />);\n};\n\nexport default ApplicationContextProvider;\n\nexport {\n  useApplicationInfoContext,\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport ColumnLayout from '@cloudscape-design/components/column-layout';\nimport { TextareaProps } from '@cloudscape-design/components/textarea';\nimport { FC, forwardRef, useCallback, useRef, RefObject, useImperativeHandle } from 'react';\nimport { useBrainstormContext } from '../../../contexts/BrainstormContext/context';\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\nimport { TemplateThreatStatementSchema } from '../../../customTypes';\nimport Textarea from '../../generic/Textarea';\nimport BrainstormList from '../BrainstormList';\nimport EditorLayout from '../EditorLayout';\nimport styles from '../EditorLayout/styles';\nimport ExampleList from '../ExampleList';\nimport PreviousInputList from '../PreviousInputList';\nimport { EditorProps } from '../ThreatStatementEditor/types';\n\nconst EditorThreatImpact: FC<EditorProps> = forwardRef<TextareaProps.Ref, EditorProps>(({\n  statement, setStatement, fieldData,\n}, ref) => {\n  const inputRef = useRef<TextareaProps.Ref>();\n  const { perFieldExamples, previousInputs } = useThreatsContext();\n  const { brainstormData } = useBrainstormContext();\n\n  useImperativeHandle(ref, () => {\n    return {\n      focus() {\n        inputRef.current?.focus();\n      },\n    };\n  }, []);\n\n  const handleChange = useCallback((threatImpact: string) => {\n    setStatement(prevStatement => prevStatement && ({\n      ...prevStatement,\n      threatImpact: threatImpact,\n    }));\n  }, [setStatement]);\n\n  const handleSelect = useCallback((threatImpact: string) => {\n    handleChange(threatImpact);\n    inputRef.current?.focus();\n  }, [handleChange]);\n\n  return (<EditorLayout\n    title={fieldData.displayTitle}\n    description={fieldData.description}\n  >\n    <div css={styles.textEditorLayout}>\n      <div css={styles.input}>\n        <Textarea\n          ref={inputRef as RefObject<TextareaProps.Ref>}\n          spellcheck\n          onChange={({ detail }) => handleChange(detail.value)}\n          value={statement.threatImpact || ''}\n          placeholder=\"Enter threat impact\"\n          validateData={TemplateThreatStatementSchema.shape.threatImpact.safeParse}\n          rows={2}\n          singleLine\n          stretch\n        />\n      </div>\n      {statement.threatImpact && <div css={styles.inputClear}>\n        <Button variant='icon' iconName='close' onClick={() => handleChange('')} />\n      </div>}\n    </div>\n    <ColumnLayout columns={\n      (perFieldExamples.threat_impact.length > 0 ? 1 : 0) +\n      (previousInputs.threat_impact.length > 0 ? 1 : 0) +\n      ((brainstormData.threatImpacts?.length || 0) > 0 ? 1 : 0)\n    }>\n      {perFieldExamples.threat_impact.length > 0 &&\n        <ExampleList examples={perFieldExamples.threat_impact} onSelect={handleSelect}></ExampleList>}\n      {previousInputs.threat_impact.length > 0 &&\n        <PreviousInputList\n          items={previousInputs.threat_impact}\n          onSelect={(content) => handleSelect(content)}\n        />\n      }\n      {(brainstormData.threatImpacts?.length || 0) > 0 &&\n        <BrainstormList\n          items={brainstormData.threatImpacts || []}\n          onSelect={handleSelect}\n        />\n      }\n    </ColumnLayout>\n  </EditorLayout>);\n});\n\nexport default EditorThreatImpact;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { DEFAULT_NEW_ENTITY_ID } from '../../configs';\nimport { Assumption } from '../../customTypes';\n\nconst getNewAssumption = (content: string = ''): Assumption => {\n  return {\n    id: DEFAULT_NEW_ENTITY_ID,\n    numericId: -1,\n    content: content,\n  };\n};\n\nexport default getNewAssumption;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback } from 'react';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { LOCAL_STORAGE_KEY_ARCHIECTURE_INFO } from '../../../../configs/localStorageKeys';\nimport { ArchitectureInfo } from '../../../../customTypes';\nimport removeLocalStorageKey from '../../../../utils/removeLocalStorageKey';\nimport { INFO_DEFAULT_VALUE } from '../../../constants';\nimport { ArchitectureInfoContext } from '../../context';\nimport { ArchitectureContextProviderProps } from '../../types';\n\nexport const getLocalStorageKey = (workspaceId: string | null) => {\n  if (workspaceId) {\n    return `${LOCAL_STORAGE_KEY_ARCHIECTURE_INFO}_${workspaceId}`;\n  }\n\n  return LOCAL_STORAGE_KEY_ARCHIECTURE_INFO;\n};\n\nconst ArchitectureLocalStorageContextProvider: FC<PropsWithChildren<ArchitectureContextProviderProps>> = ({\n  children,\n  workspaceId: currentWorkspaceId,\n}) => {\n  const [architectureInfo, setArchitectureInfo, { removeItem }] = useLocalStorageState<ArchitectureInfo>(getLocalStorageKey(currentWorkspaceId), {\n    defaultValue: INFO_DEFAULT_VALUE,\n  });\n\n  const handleRemoveArchitectureInfo = useCallback(async () => {\n    removeItem();\n  }, [removeItem]);\n\n  const handleDeleteWorkspace = useCallback(async (workspaceId: string) => {\n    window.setTimeout(() => {\n      // to delete after the workspace is switched. Otherwise the default value is set again.\n      removeLocalStorageKey(getLocalStorageKey(workspaceId));\n    }, 1000);\n  }, []);\n\n  return (<ArchitectureInfoContext.Provider value={{\n    architectureInfo,\n    setArchitectureInfo,\n    removeArchitectureInfo: handleRemoveArchitectureInfo,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </ArchitectureInfoContext.Provider>);\n};\n\nexport default ArchitectureLocalStorageContextProvider;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useContext, createContext } from 'react';\nimport { Workspace } from '../../customTypes';\nimport { PLACEHOLDER_EXCHANGE_DATA_FOR_WORKSPACE } from '../../hooks/useExportImport';\n\nexport interface WorkspacesContextApi {\n  workspaceList: Workspace[];\n  setWorkspaceList: (workspace: Workspace[]) => void;\n  currentWorkspace: Workspace | null;\n  switchWorkspace: (toBeSwitchedWorkspace: string | null | Workspace) => void;\n  removeWorkspace: (id: string) => Promise<void>;\n  addWorkspace: (workspaceName: string, storageType?: Workspace['storageType'], metadata?: Workspace['metadata']) => Promise<Workspace>;\n  renameWorkspace: (id: string, newWorkspaceName: string) => Promise<void>;\n}\n\nconst initialState: WorkspacesContextApi = {\n  workspaceList: [],\n  setWorkspaceList: () => { },\n  currentWorkspace: null,\n  switchWorkspace: () => { },\n  addWorkspace: () => Promise.resolve(PLACEHOLDER_EXCHANGE_DATA_FOR_WORKSPACE),\n  removeWorkspace: () => Promise.resolve(),\n  renameWorkspace: () => Promise.resolve(),\n};\n\nexport const WorkspacesContext = createContext<WorkspacesContextApi>(initialState);\nexport const useWorkspacesContext = () => useContext(WorkspacesContext);","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { useEffect, useMemo } from 'react';\nimport { DEFAULT_WORKSPACE_ID } from '../../configs';\nimport { Workspace } from '../../customTypes';\n\nconst useCurrentWorkspace = (\n  lastWorkspace: Workspace | null,\n  workspaceName: string | undefined,\n  workspaceList: Workspace[],\n  workspaceExamples: Workspace[],\n  onWorkspaceChanged?: (workspaceId: string) => void) => {\n  const [currentWorkspace, navigateToWorkspace] = useMemo(() => {\n    if (workspaceName) { // If the workspaceName is specified by outside scope (e.g. Url), return the workspace specified by the id\n      if (workspaceName === DEFAULT_WORKSPACE_ID) {\n        return [null, null];\n      }\n\n      const foundWorkspace = workspaceList.find(x => x.name === workspaceName);\n      if (foundWorkspace) {\n        return [foundWorkspace, null];\n      }\n\n      const foundWorkspaceExample = workspaceExamples.find(x => x.name === workspaceName);\n      if (foundWorkspaceExample) {\n        return [foundWorkspaceExample, null];\n      }\n\n      // Unable to located the workspace from workspace name, redirect to last visited workspace or default workspace.\n      return [null, lastWorkspace || {\n        name: DEFAULT_WORKSPACE_ID,\n      }];\n    }\n\n    return [lastWorkspace, null];\n  }, [lastWorkspace, workspaceName, workspaceExamples, workspaceList]);\n\n  useEffect(() => {\n    if (navigateToWorkspace) {\n      onWorkspaceChanged?.(navigateToWorkspace?.name || DEFAULT_WORKSPACE_ID);\n    }\n  }, [navigateToWorkspace, onWorkspaceChanged]);\n\n  return currentWorkspace;\n};\n\nexport default useCurrentWorkspace;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { useState, useCallback, forwardRef } from 'react';\nimport { DEFAULT_NEW_ENTITY_ID } from '../../../configs';\nimport { useAssumptionsContext } from '../../../contexts/AssumptionsContext/context';\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\nimport { Mitigation, MitigationSchema } from '../../../customTypes';\nimport getNewMitigation from '../../../utils/getNewMitigation';\nimport AssumptionLinkView from '../../assumptions/AssumptionLinkView';\nimport GenericEntityCreationCard, { GenericEntityCreationCardRefProps } from '../../generic/GenericEntityCreationCard';\nimport ThreatLinkView from '../../threats/ThreatLinkView';\n\nexport interface MitigationCreationCardProps {\n  ref?: React.Ref<GenericEntityCreationCardRefProps>;\n  onSave?: (entity: Mitigation, linkedAssumptionIds: string[], linkedThreatIds: string[]) => void;\n}\n\nconst MitigationCreationCard = forwardRef<\nGenericEntityCreationCardRefProps,\nMitigationCreationCardProps\n>(({ onSave }, ref) => {\n  const [editingEntity, setEditingEntity] = useState<Mitigation>(getNewMitigation());\n  const [linkedAssumptionIds, setLinkedAssumptionIds] = useState<string[]>([]);\n  const [linkedThreatIds, setLinkedThreatIds] = useState<string[]>([]);\n\n  const { assumptionList, saveAssumption } = useAssumptionsContext();\n  const { statementList } = useThreatsContext();\n\n  const handleSave = useCallback(() => {\n    onSave?.(editingEntity, linkedAssumptionIds, linkedThreatIds);\n    setEditingEntity(getNewMitigation());\n    setLinkedAssumptionIds([]);\n    setLinkedThreatIds([]);\n  }, [editingEntity, linkedAssumptionIds, linkedThreatIds]);\n\n  const handleReset = useCallback(() => {\n    setEditingEntity(getNewMitigation());\n    setLinkedAssumptionIds([]);\n    setLinkedThreatIds([]);\n  }, []);\n\n  const handleAddAssumptionLink = useCallback((assumptionIdOrNewAssumption: string) => {\n    if (assumptionList.find(a => a.id === assumptionIdOrNewAssumption)) {\n      setLinkedAssumptionIds(prev => [...prev, assumptionIdOrNewAssumption]);\n    } else {\n      const newAssumption = saveAssumption({\n        numericId: -1,\n        content: assumptionIdOrNewAssumption,\n        id: DEFAULT_NEW_ENTITY_ID,\n      });\n      setLinkedAssumptionIds(prev => [...prev, newAssumption.id]);\n    }\n  }, [assumptionList, saveAssumption, setLinkedAssumptionIds]);\n\n  return (<GenericEntityCreationCard\n    ref={ref}\n    editingEntity={editingEntity}\n    setEditingEntity={setEditingEntity}\n    header='Add new mitigation'\n    onSave={handleSave}\n    onReset={handleReset}\n    validateData={MitigationSchema.shape.content.safeParse}\n    customEditors={<SpaceBetween direction='vertical' size='s'>\n      <ThreatLinkView\n        linkedThreatIds={linkedThreatIds}\n        threatList={statementList}\n        onAddThreatLink={(id) => setLinkedThreatIds(prev => [...prev, id])}\n        onRemoveThreatLink={(id) => setLinkedThreatIds(prev => prev.filter(p => p !== id))}\n      />\n      <AssumptionLinkView\n        linkedAssumptionIds={linkedAssumptionIds}\n        assumptionList={assumptionList}\n        onAddAssumptionLink={handleAddAssumptionLink}\n        onRemoveAssumptionLink={(id) => setLinkedAssumptionIds(prev => prev.filter(p => p !== id))}\n      />\n    </SpaceBetween>}\n  />);\n});\n\nexport default MitigationCreationCard;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport const INFO_DEFAULT_VALUE = {\n  description: '',\n};","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { z } from 'zod';\nimport { EntityBaseSchema, StatusSchema, MetadataSchemaThreats } from './entities';\nimport { SINGLE_FIELD_INPUT_MAX_LENGTH, LEVEL_HIGH, LEVEL_MEDIUM, LEVEL_LOW, LEVEL_NOT_SET, STATUS_NOT_SET, THREAT_STATUS_IDENTIFIED, THREAT_STATUS_NOT_USEFUL, THREAT_STATUS_RESOLVED } from '../configs';\nimport threatStatus from '../data/status/threatStatus.json';\n\nexport const ThreatStatementDisplayTokenSchema = z.object({\n  /**\n   * the html tag type for the content. If not type is specified. <span> will be used.\n   */\n  type: z.union([z.literal('b'), z.literal('span')]).optional().describe('HTML element type for rendering'),\n  /**\n    * The tooltip content of the node.\n    */\n  tooltip: z.string().max(30).optional().describe('Threat statement element to anchor tool tip'),\n  /**\n    * The text content of the node.\n    */\n  content: z.string().max(SINGLE_FIELD_INPUT_MAX_LENGTH).describe('Displayed tooltip text'),\n}).strict();\n\nexport type ThreatStatementDisplayToken = z.infer<typeof ThreatStatementDisplayTokenSchema>;\n\nexport const ThreatStatementImpactedGoalItem = z.string().max(SINGLE_FIELD_INPUT_MAX_LENGTH);\n\nexport const ThreatStatementImpactedAssetItem = z.string().max(SINGLE_FIELD_INPUT_MAX_LENGTH);\n\nexport const TemplateThreatStatementSchema = EntityBaseSchema.extend({\n  /**\n    * Source of the threat.\n    */\n  threatSource: z.string().max(SINGLE_FIELD_INPUT_MAX_LENGTH).optional().describe('The entity taking action. For example: An actor (a useful default), An internet-based actor, An internal or external actor.'),\n  /**\n    * Prerequisites of the threat.\n    */\n  prerequisites: z.string().max(SINGLE_FIELD_INPUT_MAX_LENGTH).optional().describe('Conditions or requirements that must be met for a threat source\\'s action to be viable. For example: -with access to another user\\'s token. -who has administrator access -with user permissions - in a mitm position -with a network path to the API. If no prerequistes known return empty string, if know return but first word must be lower case'),\n  /**\n    * Threat action.\n    */\n  threatAction: z.string().max(SINGLE_FIELD_INPUT_MAX_LENGTH).optional().describe('The action being performed by the threat source. For example: -spoof another user -tamper with data stored in the database -make thousands of concurrent requests. first word must be lower case'),\n  /**\n    * Impact of the threat.\n    */\n  threatImpact: z.string().max(SINGLE_FIELD_INPUT_MAX_LENGTH).optional().describe('What impact this has on the system.The direct impact of a successful threat action. For example: - unauthorized access to the user\\'s bank account information -modifying the username for the all-time high score. -a web application being unable to handle other user requests.if know return but first word must be lower case'),\n  /**\n    * Impacted goal of the threat.\n    */\n  impactedGoal: ThreatStatementImpactedGoalItem.array().optional().describe('The information security or business objective that is negatively affected.  This is most commonly the CIA triad: -confidentiality, -integrity, -availability. If not known return empty string in array, else strings in array first word must be lower case'),\n  /**\n    * Impacted assets of the threat.\n    */\n  impactedAssets: ThreatStatementImpactedAssetItem.array().optional().describe('List of assets affected by this threat. If not known return empty string in array, else strings in array first word must be lower case'),\n  /**\n    * The full rendered statement as string.\n    */\n  statement: z.string().max(SINGLE_FIELD_INPUT_MAX_LENGTH * 7).optional().describe('concatenate the above as follows into a one of the following permutations based on if the default is available or not - trim any repated white space into a single white space: 1/ A/an [threat_source] [prerequisites] can [threat_action], 2/ A/an [threat_source] [prerequisites] can [threat_action], which leads to [threat_impact], 3/ A/an [threat_source] [prerequisites] can [threat_action], resulting in reduced [impacted_goal], 4/ A/An [threat_source] [prerequisites] can [threat_action], which leads to [threat_impact], resulting in reduced [impacted_goal], 5/ A/An [threat_source] [prerequisites] can [threat_action], negatively impacting [impacted_assets], 6/ A/An [threat_source] [prerequisites] can [threat_action], which leads to [threat_impact], negatively impacting [impacted_assets], 7/ A/An [threat_source] [prerequisites] can [threat_action], resulting in reduced [impacted_goal] of [impacted_assets], 8/ A/An [threat_source] [prerequisites] can [threat_action], which leads to [threat_impact], resulting in reduced [impacted_goal] of [impacted_assets]'),\n  /**\n    * The custom templates applied to the threat statement.\n    */\n  customTemplate: z.string().max(SINGLE_FIELD_INPUT_MAX_LENGTH).optional().describe('Custom template used for threat statement generation. Example: A [threatSource] [prerequisites] can [threatAction]'),\n  /**\n    * A list of displayed statement token\n    */\n  displayedStatement: z.union([ThreatStatementDisplayTokenSchema, z.string()]).array().optional().meta({ internal: true }).describe('Parsed threat statement components for display rendering. This uses use of supporting HTML tags'),\n  /**\n   * The metadata - overridden to support full metadata schema for threats.\n   */\n  metadata: MetadataSchemaThreats.array().optional().describe('Additional metadata as key-value pairs for threats'),\n  /**\n   * The status of the threats.\n   */\n  status: StatusSchema.pipe(z.enum(threatStatus.map(x => x.value) as [string, ...string[]])).optional().describe('Status of the threat'),\n}).strict();\n\nexport type TemplateThreatStatement = z.infer<typeof TemplateThreatStatementSchema>;\n\nexport interface ThreatFieldData {\n  fieldId: number;\n  fieldPosition: number;\n  weight: number;\n  displayTitle: string;\n  displayField: string;\n  tooltip: string;\n  description: string;\n  examples?: string[];\n  tokens?: string[];\n}\nexport interface ThreatStatementListFilter {\n  linkedMitigations?: boolean;\n  linkedAssumptions?: boolean;\n  priority?: typeof LEVEL_HIGH | typeof LEVEL_MEDIUM | typeof LEVEL_LOW | typeof LEVEL_NOT_SET;\n  stride?: 'S' | 'T' | 'R' | 'I' | 'D' | 'E' | typeof LEVEL_NOT_SET;\n  status?: (typeof THREAT_STATUS_IDENTIFIED | typeof THREAT_STATUS_NOT_USEFUL | typeof THREAT_STATUS_RESOLVED | typeof STATUS_NOT_SET)[];\n}\n\nexport interface ThreatStatementFormat {\n  [fieldCombination: number]: {\n    template: string;\n    suggestions?: string[];\n  };\n}\n\nexport const PerFieldExampleSchema = z.object({\n  /**Example string */\n  example: z.string(),\n  /**\n  * The statement Id.\n  * For now, use the array index.\n  * In future, if the examples are downloaded online, should change to use threatStatementId.\n  */\n  fromId: z.number(),\n  /**\n    * The stride from the statement.\n    */\n  stride: z.string().array().optional(),\n});\n\nexport type PerFieldExample = z.infer<typeof PerFieldExampleSchema>;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { DataExchangeFormat } from '../../../../customTypes';\n\nexport const getArchitectureContent = async (\n  data: DataExchangeFormat,\n) => {\n  const rows: string[] = [];\n  rows.push('## Architecture');\n  if (data.architecture) {\n    if (data.architecture.description) {\n      rows.push('### Introduction');\n      rows.push(data.architecture.description);\n    }\n\n    if (data.architecture.image) {\n      rows.push('### Architecture Diagram');\n      rows.push(`![Architecture Diagram](${data.architecture.image})`);\n    }\n  }\n\n  rows.push('\\n');\n\n  return rows.join('\\n');\n};\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport * from './constants';\nexport * from './export';\nexport * from './localStorageKeys';\nexport * from './content';\nexport * from './styles';\nexport * from './options';\nexport * from './metadata';\nexport * from './appMode';\nexport * from './status';\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport FormField from '@cloudscape-design/components/form-field';\nimport Header from '@cloudscape-design/components/header';\nimport RadioGroup from '@cloudscape-design/components/radio-group';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport imageCompression from 'browser-image-compression';\nimport { FC, useCallback, useEffect, useState } from 'react';\nimport { IMAGE_BASE64_MAX_LENGTH } from '../../../configs';\nimport { ImageUrlSchema } from '../../../customTypes';\nimport imageStyles from '../../../styles/image';\nimport getBase64 from '../../../utils/getBase64';\nimport Input from '../../generic/Input';\nimport FileUpload from '../FileUpload';\n\nexport interface ImageUploadProps {\n  value: string;\n  onChange: (value: string) => void;\n}\n\nconst IMAGE_COMPRESSION_OPTIONS = {\n  maxSizeMB: 0.5,\n  maxWidthOrHeight: 1024,\n  useWebWorker: true,\n};\n\nconst IMAGE_COMPRESSION_TYPES = [\n  'image/png',\n  'image/gif',\n  'image/jpeg',\n];\n\nconst ImageEdit: FC<ImageUploadProps> = ({\n  value,\n  onChange,\n}) => {\n  const isValueBase64String = value && value.startsWith('data:');\n  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\n  const [inputValue, setInputValue] = useState(isValueBase64String ? '' : value);\n  const [imageSource, setImageSource] = useState<string>(!value ? 'no' : isValueBase64String ? 'file' : 'url');\n  const [image, setImage] = useState<string>(isValueBase64String ? value : '');\n  const [errorText, setErrorText] = useState<string>();\n\n  useEffect(() => {\n    if (imageSource === 'no') {\n      onChange('');\n    } else if (imageSource === 'file') {\n      onChange(image);\n    } else if (imageSource === 'url') {\n      onChange(inputValue);\n    }\n  }, [onChange, imageSource, image, inputValue]);\n\n  const handleImageUpload = useCallback(async (imageFile: File) => {\n    try {\n      // Compress the image if it is supported by browser-image-compression\n      if (IMAGE_COMPRESSION_TYPES.includes(imageFile.type)) {\n        const compressedFile = await imageCompression(imageFile, IMAGE_COMPRESSION_OPTIONS);\n        const base64String = await getBase64(compressedFile);\n        return base64String;\n      }\n\n      return await getBase64(imageFile);\n    } catch (error) {\n      console.log(error);\n      return '';\n    }\n  }, []);\n\n  const handleChange = useCallback(async (_selectedFiles: File[]) => {\n    setSelectedFiles(_selectedFiles);\n    setErrorText(undefined);\n    if (_selectedFiles.length > 0) {\n      const _image = await handleImageUpload(_selectedFiles[0]);\n      if (_image.length > IMAGE_BASE64_MAX_LENGTH) {\n        setErrorText('Image size limit exceeded');\n      } else {\n        setImage(_image || '');\n      }\n    }\n  }, []);\n\n  return <SpaceBetween direction='vertical' size='s'>\n    <FormField\n      label=\"Image source\"\n      key=\"imageSource\"\n    >\n      <RadioGroup\n        onChange={({ detail }) => setImageSource(detail.value)}\n        value={imageSource}\n        items={[\n          { value: 'file', label: 'From file upload' },\n          { value: 'url', label: 'From url' },\n          { value: 'no', label: 'No Image' },\n        ]}\n      />\n    </FormField>\n    {imageSource === 'file' && <SpaceBetween\n      direction='vertical'\n      size='s'>\n      {image && <Header key='header' variant='h3'>Preview</Header>}\n      {image && <img key='image' css={imageStyles} src={image} alt='Preview Diagram' />}\n      <FileUpload\n        key='fileUpload'\n        label='Image Upload'\n        accept='image/*'\n        errorText={errorText}\n        files={selectedFiles}\n        onChange={handleChange} />\n    </SpaceBetween>\n    }\n    {imageSource === 'url' && <FormField\n      label=\"Image Url\"\n      key=\"imageUrl\"\n    >\n      {inputValue && <Header key='header' variant='h3'>Preview</Header>}\n      {inputValue && <img css={imageStyles} src={inputValue} alt='Preview Diagram' />}\n      <Input\n        value={inputValue}\n        onChange={event =>\n          setInputValue(event.detail.value)\n        }\n        validateData={ImageUrlSchema.safeParse}\n      />\n    </FormField>}\n  </SpaceBetween>;\n};\n\nexport default ImageEdit;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { TemplateThreatStatement, threatFieldTypeMapping, ThreatFieldTypes, ThreatStatementDisplayToken } from '../../customTypes';\nimport threatFieldData from '../../data/threatFieldData';\nimport threatStatementFormat from '../../data/threatStatementFormat';\nimport calculateFieldCombination from '../calculateFieldCombination';\nimport getFieldContentByToken from '../getFieldContentByToken';\nimport parseThreatStatement from '../parseThreatStatement';\n\nconst threatStatementFormatKeys = Object.keys(threatStatementFormat);\n\nexport const PLACEHOLDER = '<placeholder>';\n\nconst renderThreatStatement = (statement: TemplateThreatStatement): {\n  statement: string;\n  displayedStatement?: (ThreatStatementDisplayToken | string)[];\n  suggestions: string[];\n} => {\n  const { fieldCombination, filledField } = calculateFieldCombination(statement);\n\n  // No field is filled\n  if (fieldCombination === 0) {\n    return {\n      statement: '',\n      displayedStatement: [],\n      suggestions: [],\n    };\n  }\n\n  const suggestions: string[] = [];\n\n  (['prerequisites', 'threat_action', 'threat_impact'] as ThreatFieldTypes[]).forEach((token) => {\n    const content = statement[threatFieldTypeMapping[token]];\n    if (content !== '' && typeof content === 'string' && content.split(' ').length === 1) {\n      suggestions.push(\n        `[${token}] Looks like your ${token} is a single word, consider being more descriptive`,\n      );\n    }\n  });\n\n  // Only one field is filled\n  if (filledField.length === 1) {\n    let prefix = '...', suffix = '...';\n    if (threatFieldData[filledField[0]].fieldPosition === 1) {\n      prefix = '';\n      suffix = '...';\n    } else if (threatFieldData[filledField[0]].fieldPosition === Object.keys(threatFieldData).length) {\n      prefix = '...';\n      suffix = '';\n    }\n\n    return {\n      statement: `${prefix}${getFieldContentByToken(filledField[0] as ThreatFieldTypes, statement)}${suffix}`,\n      suggestions,\n    };\n  }\n\n  // Multiple fields are filled\n  if (!statement.threatSource) {\n    suggestions.push(\n      '[threat_source] Consider specifying who or what is the source of the threat',\n    );\n  }\n\n  if (!statement.prerequisites) {\n    suggestions.push(\n      '[prerequisites] Consider what conditions or requirement that must be met in order for a threat sources actions to be viable',\n    );\n    suggestions.push(\n      '[prerequisites] No prerequisites this is often a sign you can decompose into multiple threat statements that have different prerequisites',\n    );\n  }\n\n  if (!statement.threatAction) {\n    suggestions.push(\n      '[threat_action] Consider what actions are being performed by, or related to the threat source. Knowing this is required in order to mitigate the threat',\n    );\n  }\n\n  const updatedStatement: TemplateThreatStatement = {\n    ...statement,\n    threatSource: statement.threatSource || 'threat source',\n    prerequisites: statement.prerequisites || PLACEHOLDER,\n    threatAction: statement.threatAction || 'perform a threat action',\n  };\n\n  const { fieldCombination: updatedFieldCombination } = calculateFieldCombination(updatedStatement);\n\n  let format = null;\n\n  if (threatStatementFormatKeys.includes(updatedFieldCombination.toString())) {\n    format = threatStatementFormat[updatedFieldCombination];\n  }\n\n  suggestions.push(...format?.suggestions || []);\n\n  const outputProcessor = (token: string, content: string, before: string, _filled: boolean) => {\n    const output: {\n      stringOutput: string;\n      displayOutput: string | ThreatStatementDisplayToken;\n    }[] = [];\n\n    output.push({\n      stringOutput: before,\n      displayOutput: before,\n    });\n\n    const updatedContent = token === 'prerequisites' && content === PLACEHOLDER ? '' : content;\n\n    const displayedOutput = token === 'threat_action' ? {\n      type: 'b',\n      content: updatedContent,\n      tooltip: threatFieldData[token]?.tooltip,\n    } : {\n      type: 'span',\n      content: updatedContent,\n      tooltip: threatFieldData[token]?.tooltip,\n    };\n\n    output.push({\n      stringOutput: updatedContent,\n      displayOutput: displayedOutput as ThreatStatementDisplayToken,\n    });\n\n    return output;\n  };\n\n  const parseOutput = parseThreatStatement({\n    statement: updatedStatement,\n    template: statement.customTemplate || format?.template || '',\n    outputProcessor: outputProcessor,\n  });\n\n  return {\n    statement: parseOutput.map(x => x.stringOutput).join(' ').replace(/\\s\\s+/g, ' ').replace(/ ,/g, ','),\n    displayedStatement: parseOutput.map(x => x.displayOutput),\n    suggestions: suggestions.sort(),\n  };\n};\n\nexport default renderThreatStatement;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport Button from '@cloudscape-design/components/button';\nimport Grid from '@cloudscape-design/components/grid';\nimport Input from '@cloudscape-design/components/input';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport TextContent from '@cloudscape-design/components/text-content';\nimport Toggle from '@cloudscape-design/components/toggle';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport { useCallback, useMemo, useState } from 'react';\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\nimport { PerFieldExample } from '../../../customTypes';\nimport renderArrayField from '../../../utils/renderArrayField';\nimport shuffle from '../../../utils/shuffle';\n\nexport const DEFAULT_NUM_DISPLAY = 5;\n\nconst styles = {\n  list: css({\n    '& button': {\n      padding: `0px ${awsui.spaceStaticXxs} !important`,\n    },\n  }),\n};\n\nexport interface ExampleListProps<T> {\n  examples: T[];\n  onSelect: (example: string) => void;\n  showSearch?: boolean;\n}\n\nconst ExampleList = <T extends string | PerFieldExample | string[]>({\n  examples,\n  onSelect,\n  showSearch = true,\n}: ExampleListProps<T>) => {\n  const [showMoreExamples, setShowMoreExamples] = useState(false);\n  const [showFullExample, setShowFullExample] = useState(false);\n  const { threatStatementExamples } = useThreatsContext();\n  const [filterText, setFilterText] = useState('');\n\n  const randomDislayList = useMemo(() => {\n    let randomExamples = shuffle(examples);\n    if (filterText) {\n      randomExamples = randomExamples.filter(re => {\n        if (typeof re === 'string') {\n          return re.toLowerCase().indexOf(filterText) >= 0;\n        }\n\n        if (Array.isArray(re)) {\n          return re.some(e => e.toLowerCase().indexOf(filterText) >= 0);\n        }\n\n        return (re as PerFieldExample).example.toLowerCase().indexOf(filterText) >= 0;\n      });\n    }\n\n    return randomExamples;\n  }, [examples, filterText]);\n\n  const showFullExampleToggle = useMemo(() => {\n    if (examples && examples.length > 0) {\n      return typeof examples[0] !== 'string' && !!(examples[0] as PerFieldExample).example;\n    }\n\n    return false;\n  }, [examples]);\n\n  const renderExample = useCallback((example: T) => {\n    if (typeof example === 'string') {\n      return (<Button variant='link' onClick={() => onSelect(example)}>\n        {example}\n      </Button>);\n    }\n\n    if (Array.isArray(example) && example.length > 0 && typeof example[0] === 'string') {\n      const exampleStr = renderArrayField(example);\n      return (<Button variant='link' onClick={() => onSelect(exampleStr)}>\n        {exampleStr}\n      </Button>);\n    }\n\n    const perFieldExamples = example as PerFieldExample;\n\n    if (typeof perFieldExamples.fromId !== 'undefined' && typeof perFieldExamples.example !== 'undefined') {\n      if (showFullExample) {\n        const fullExample = threatStatementExamples[perFieldExamples.fromId].statement;\n\n        if (fullExample) {\n          const index = fullExample.indexOf(perFieldExamples.example);\n          return (<>\n            <span>{fullExample.slice(0, index)}</span>\n            <Button variant='link' onClick={() => onSelect(perFieldExamples.example)}>\n              {perFieldExamples.example}\n            </Button>\n            <span>{fullExample.slice(index + perFieldExamples.example.length)}</span>\n          </>);\n        }\n      }\n\n      return (<Button variant='link' onClick={() => onSelect(perFieldExamples.example)}>\n        {perFieldExamples.example}\n      </Button>);\n    }\n\n    return undefined;\n  }, [showFullExample, threatStatementExamples]);\n\n  return (<TextContent>\n    <SpaceBetween direction='vertical' size='m'>\n      <SpaceBetween direction='horizontal' size='m'>\n        <span>Examples:</span>\n        {showFullExampleToggle &&\n          <Toggle checked={showFullExample} onChange={({ detail }) => setShowFullExample(detail.checked)}>Show full examples</Toggle>}\n      </SpaceBetween>\n      {showSearch && <Grid gridDefinition={[\n        { colspan: { default: 12, xxs: 6 } },\n      ]}>\n        <Input value={filterText} onChange={({ detail }) => setFilterText(detail.value)} placeholder='Search examples' />\n      </Grid>}\n      <ul>\n        {randomDislayList.slice(0, showMoreExamples ? undefined : DEFAULT_NUM_DISPLAY).map((example, index) => (\n          <li key={index} css={styles.list}>{renderExample(example)}</li>\n        ))}\n      </ul>\n      {randomDislayList.length > DEFAULT_NUM_DISPLAY && (<Button\n        iconName={showMoreExamples ? 'treeview-collapse' : 'treeview-expand'}\n        onClick={() => setShowMoreExamples(prev => !prev)}\n        variant='link'>\n        {showMoreExamples ? 'Show less examples' : 'Show more examples'}\n      </Button>)}\n    </SpaceBetween>\n  </TextContent>);\n};\n\nexport default ExampleList;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { z } from 'zod';\nimport { SINGLE_FIELD_INPUT_MAX_LENGTH, SINGLE_FIELD_INPUT_SMALL_MAX_LENGTH } from '../configs';\n\n// Factory function to create context-specific brainstorm item schemas\nconst createBrainstormItemSchema = (contentDescription: string) => z.object({\n  id: z.string().max(36)\n    .describe('UUID v4 identifier'),\n  content: z.string().max(SINGLE_FIELD_INPUT_MAX_LENGTH)\n    .describe(contentDescription),\n  createdAt: z.string().datetime()\n    .describe('ISO 8601 UTC timestamp when the item was created (e.g., \"2024-01-15T14:30:45.123Z\")'),\n  createdBy: z.string().max(SINGLE_FIELD_INPUT_SMALL_MAX_LENGTH).optional()\n    .describe('Identifier of who created this item (user email, ID, display name, or \"ai-agent\"). AI agents should use \"ai-agent\" as the default value.'),\n  groupId: z.string().max(36).optional()\n    .describe('UUID v4 identifier of the group this item belongs to. If not provided, item is not grouped.'),\n}).strict();\n\nexport const BrainstormDataSchema = z.object({\n  assumptions: createBrainstormItemSchema(\n    'Brainstorm item for assumption. Assumption about the design, threats and migations of the application being threat modeled. Plain-text',\n  ).array()\n    .describe('Assumptions about the design, threats and migations of the application being threat modeled').optional(),\n\n  threatSources: createBrainstormItemSchema(\n    'Brainstorm item for threat source. The entity taking action. For example: An actor (a useful default), An internet-based actor, An internal or external actor. Plain-text',\n  ).array()\n    .describe('Brainstormed threat sources for the application being threat modeled').optional(),\n\n  threatPrerequisites: createBrainstormItemSchema(\n    'Brainstorm item for threat prerequisite. Conditions or requirements that must be met for a threat source\\'s action to be viable. For example: -with access to another user\\'s token. -who has administrator access -with user permissions - in a mitm position -with a network path to the API. If no prerequistes known return empty string, if know return but first word must be lower case. Plain-text',\n  ).array()\n    .describe('Brainstormed prerequisites for threats against the application being threat modeled').optional(),\n\n  threatActions: createBrainstormItemSchema(\n    'Brainstorm item for threat action. The action being performed by the threat source. For example: -spoof another user -tamper with data stored in the database -make thousands of concurrent requests. first word must be lower case. Plain-text',\n  ).array()\n    .describe('Brainstormed threat actions against the application being threat modeled').optional(),\n\n  threatImpacts: createBrainstormItemSchema(\n    'Brainstorm item for threat impact. What impact this has on the system.The direct impact of a successful threat action. For example: - unauthorized access to the user\\'s bank account information -modifying the username for the all-time high score. -a web application being unable to handle other user requests.if know return but first word must be lower case. Plain-text',\n  ).array()\n    .describe('Brainstormed threat impacts for the application being threat modeled').optional(),\n\n  assets: createBrainstormItemSchema(\n    'Brainstorm item for asset. List of assets affected by this threat. If not known return empty string in array, else strings in array first word must be lower case. Plain-text',\n  ).array()\n    .describe('Brainstormed assets for the application being threat modeled').optional(),\n\n  mitigations: createBrainstormItemSchema(\n    'Brainstorm item for mitigation. Mitigation for the application being threat modeled. Plain-text',\n  ).array()\n    .describe('Mitigations for the application being threat modeled').optional(),\n}).strict();\n\nexport const BrainstormItemSchema = createBrainstormItemSchema('Brainstorm content. Plain-text');\n\nexport type BrainstormData = z.infer<typeof BrainstormDataSchema>;\nexport type BrainstormItem = z.infer<typeof BrainstormItemSchema>;\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nexport const EVENT_WORKSPACE_DATA_CHANGED = 'workspace_data_changed';\nexport const EVENT_WORKSPACE_CHANGED = 'workspace_changed';","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { PerFieldExample, TemplateThreatStatement } from '../../customTypes';\n\nexport const addNewValueToStringArray = (arr: string[], newValue?: string) => {\n  return newValue && !arr.includes(newValue) ? [...arr, newValue] : arr;\n};\n\nexport const addNewValueArrayToStringArrayArray = (arr: string[][], newValue?: string[]) => {\n  if (newValue && newValue.length > 0) {\n    if (!arr.find(strArr => strArr.length === newValue.length && newValue.every(v => strArr.includes(v)))) {\n      return [...arr, newValue];\n    }\n  }\n\n  return arr;\n};\n\nexport const addNewValueArrayToStringArray = (arr: string[], newValue?: string[]) => {\n  if (newValue && newValue.length > 0) {\n    return [...arr, ...newValue.filter(v => !arr.includes(v))];\n  }\n\n  return arr;\n};\n\nexport const addNewValueToPerFieldExampleArray = (\n  arr: PerFieldExample[],\n  field: keyof TemplateThreatStatement,\n  newValue: TemplateThreatStatement,\n  fromId: number) => {\n  return newValue[field] ? [\n    ...arr, {\n      example: newValue[field] as string,\n      fromId,\n      stride: [],\n    },\n  ] : arr;\n};","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { CancelableEventHandler, BaseNavigationDetail } from '@cloudscape-design/components/internal/events';\nimport { useCallback } from 'react';\nimport { ThreatStatementListFilter, ViewNavigationEvent } from '../../../../../customTypes';\n\nconst useThreatListLinkClicked = (onThreatListView: ViewNavigationEvent['onThreatListView']) => {\n  return useCallback((filter?: ThreatStatementListFilter): CancelableEventHandler<BaseNavigationDetail> => (event) => {\n    event?.preventDefault?.();\n    onThreatListView?.(filter);\n  }, [onThreatListView]);\n};\n\nexport default useThreatListLinkClicked;\n\n","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { APP_MODE_IDE_EXTENSION, APP_MODE_BROWSER_EXTENSION } from '@aws/threat-composer';\n\nconst appMode = process.env.REACT_APP_APP_MODE;\n\nconst isMemoryRouterUsed = () => {\n  return appMode === APP_MODE_IDE_EXTENSION || appMode === APP_MODE_BROWSER_EXTENSION;\n};\n\nexport default isMemoryRouterUsed;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nconst shuffle = (array: any[]) => {\n  const resultArray = [...array]; '';\n  let currentIndex = array.length, randomIndex;\n\n  while (currentIndex != 0) {\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex--;\n\n    [resultArray[currentIndex], resultArray[randomIndex]] = [\n      resultArray[randomIndex], resultArray[currentIndex],\n    ];\n  }\n\n  return resultArray;\n};\n\nexport default shuffle;","/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\nimport { FC, PropsWithChildren, useCallback } from 'react';\nimport useLocalStorageState from 'use-local-storage-state';\nimport { LOCAL_STORAGE_KEY_MITIGATION_LINK_LIST } from '../../../../configs/localStorageKeys';\nimport { MitigationLink } from '../../../../customTypes';\nimport removeLocalStorageKey from '../../../../utils/removeLocalStorageKey';\nimport { MitigationLinksContext } from '../../context';\nimport { MitigationLinksContextProviderProps } from '../../types';\nimport useMitigationLinks from '../../useMitigationLinks';\n\nexport const getLocalStorageKey = (workspaceId: string | null) => {\n  if (workspaceId) {\n    return `${LOCAL_STORAGE_KEY_MITIGATION_LINK_LIST}_${workspaceId}`;\n  }\n\n  return LOCAL_STORAGE_KEY_MITIGATION_LINK_LIST;\n};\n\n\nconst MitigationLinksLocalStorageContextProvider: FC<PropsWithChildren<MitigationLinksContextProviderProps>> = ({\n  children,\n  workspaceId: currentWorkspaceId,\n}) => {\n  const [mitigationLinkList, setMitigationLinkList, { removeItem }] = useLocalStorageState<MitigationLink[]>(getLocalStorageKey(currentWorkspaceId), {\n    defaultValue: [],\n  });\n\n  const {\n    handlRemoveMitigationLink,\n    handleRemoveMitigationLinks,\n    handlRemoveMitigationLinksByMitigationId,\n    handlRemoveMitigationLinksByLinkedEntityId,\n    handleAddMitigationLink,\n    handleAddMitigationLinks,\n    handleGetLinkedMitigationLinks,\n    handleGetMitigationThreatLinks,\n  } = useMitigationLinks(mitigationLinkList, setMitigationLinkList);\n\n  const handleRemoveAllMitigationLinks = useCallback(async () => {\n    removeItem();\n  }, [removeItem]);\n\n  const handleDeleteWorkspace = useCallback(async (workspaceId: string) => {\n    window.setTimeout(() => {\n      // to delete after the workspace is switched. Otherwise the default value is set again.\n      removeLocalStorageKey(getLocalStorageKey(workspaceId));\n    }, 1000);\n  }, []);\n\n  return (<MitigationLinksContext.Provider value={{\n    mitigationLinkList,\n    setMitigationLinkList,\n    getLinkedMitigationLinks: handleGetLinkedMitigationLinks,\n    getMitigtaionThreatLinks: handleGetMitigationThreatLinks,\n    removeMitigationLink: handlRemoveMitigationLink,\n    removeMitigationLinksByMitigationId: handlRemoveMitigationLinksByMitigationId,\n    removeMitigationLinksByLinkedEntityId: handlRemoveMitigationLinksByLinkedEntityId,\n    removeMitigationLinks: handleRemoveMitigationLinks,\n    addMitigationLink: handleAddMitigationLink,\n    addMitigationLinks: handleAddMitigationLinks,\n    removeAllMitigationLinks: handleRemoveAllMitigationLinks,\n    onDeleteWorkspace: handleDeleteWorkspace,\n  }}>\n    {children}\n  </MitigationLinksContext.Provider>);\n};\n\nexport default MitigationLinksLocalStorageContextProvider;\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"132\":\"3ad5335f\",\"343\":\"5408bf49\",\"382\":\"41a16247\",\"410\":\"5dc6aed3\",\"520\":\"d67e3217\",\"525\":\"ef46e9e5\",\"622\":\"e37eb026\",\"770\":\"8126d6d2\",\"831\":\"c946f51c\",\"897\":\"1899d418\",\"1001\":\"802f05b6\",\"1044\":\"0eec1355\",\"1266\":\"0e7d15f0\",\"1317\":\"7dab9f5e\",\"1333\":\"d28f7db9\",\"1337\":\"7d024c6c\",\"1417\":\"09c284e2\",\"1556\":\"2146a4c2\",\"1626\":\"b61bb276\",\"1695\":\"2338190f\",\"1710\":\"c2e49610\",\"1813\":\"24e0f307\",\"1874\":\"cbfe68fb\",\"1879\":\"f1441475\",\"2076\":\"2f507de0\",\"2138\":\"9aa6cbf4\",\"2213\":\"74028e21\",\"2225\":\"15e04c77\",\"2255\":\"919952a5\",\"2314\":\"4723001d\",\"2379\":\"d39d4642\",\"2575\":\"f0ca359b\",\"2631\":\"c7e5db7c\",\"2844\":\"e3959527\",\"2875\":\"1fa0fd0e\",\"2947\":\"0744d6fc\",\"2970\":\"64036d51\",\"3067\":\"8429fef4\",\"3383\":\"d7658635\",\"3398\":\"7ad649de\",\"3430\":\"43124a47\",\"3480\":\"80c1f32b\",\"3503\":\"54f3e421\",\"3611\":\"06a6b9c6\",\"3637\":\"ca412ba1\",\"3705\":\"02f781dd\",\"3743\":\"01c808c8\",\"3809\":\"a8d085f2\",\"3895\":\"5319e088\",\"3940\":\"549b38aa\",\"4189\":\"0133b81f\",\"4370\":\"84bc2971\",\"4380\":\"eeaf4991\",\"4545\":\"8802e31a\",\"4635\":\"e7b743bc\",\"4676\":\"740b7295\",\"4798\":\"1eb78f3f\",\"4818\":\"be0920a0\",\"4915\":\"82b87f11\",\"4962\":\"35f6243a\",\"5215\":\"59a5d950\",\"5252\":\"f9c67111\",\"5421\":\"c905e846\",\"5518\":\"56f03ac1\",\"5621\":\"f44ed4dc\",\"5622\":\"a19954f3\",\"5727\":\"9954df59\",\"5850\":\"ba834831\",\"5936\":\"a760c7a6\",\"6055\":\"90534bb0\",\"6137\":\"844dbbc2\",\"6181\":\"1efdb9a4\",\"6226\":\"252ba21a\",\"6252\":\"e9e51210\",\"6259\":\"d08052f6\",\"6267\":\"0d955283\",\"6296\":\"dde8141b\",\"6360\":\"edd9ab31\",\"6362\":\"68be23d2\",\"6448\":\"739de67f\",\"6449\":\"197e825f\",\"6470\":\"0f0e2902\",\"6475\":\"1ad44fad\",\"6524\":\"571c4dd5\",\"6534\":\"89b3acba\",\"6810\":\"3dbb1abf\",\"6915\":\"372d3559\",\"6928\":\"f49bed26\",\"6988\":\"cb7af6b0\",\"7014\":\"1051f071\",\"7018\":\"4cfcec0e\",\"7244\":\"e6f2d468\",\"7254\":\"6e45980f\",\"7347\":\"8a82c966\",\"7404\":\"eda4e7ee\",\"7487\":\"4f772ee0\",\"7558\":\"30b60a97\",\"7623\":\"308e90fc\",\"7712\":\"3c217cc3\",\"7713\":\"3b2014ee\",\"7867\":\"d9731176\",\"7905\":\"8ac2abd9\",\"7920\":\"779ab430\",\"7935\":\"d0f19c14\",\"8046\":\"db6d4394\",\"8087\":\"ff6d757e\",\"8098\":\"73126a80\",\"8131\":\"89f6d83a\",\"8228\":\"a44eaed5\",\"8317\":\"3df1385e\",\"8509\":\"71a56ef2\",\"8588\":\"f3d1f411\",\"8608\":\"476ef7f4\",\"8785\":\"89f7ec09\",\"8829\":\"6cb25dd5\",\"8842\":\"34dd9f4a\",\"8917\":\"7983bb38\",\"8932\":\"d9219b0f\",\"8971\":\"2ab72d21\",\"9086\":\"0f3fae8f\",\"9099\":\"6029cba8\",\"9223\":\"e6b5cab7\",\"9276\":\"69ab6f2a\",\"9349\":\"76ae2d11\",\"9367\":\"581909d3\",\"9445\":\"b94acb94\",\"9466\":\"9354e425\",\"9502\":\"0b82e882\",\"9550\":\"0a2f1182\",\"9603\":\"1fbbc442\",\"9630\":\"4719647b\",\"9661\":\"039a1c83\",\"9757\":\"eaac05a4\",\"9843\":\"4830de36\",\"9951\":\"a17a6bf7\",\"9972\":\"43beee67\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"@aws/threat-composer-app:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t8792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_aws_threat_composer_app\"] = self[\"webpackChunk_aws_threat_composer_app\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [9489], () => (__webpack_require__(92948)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["react_1","require","context_1","context_2","getNewMitigation_1","__importDefault","MitigationLinkView_1","exports","_ref","linkedEntityId","mitigationList","saveMitigation","useMitigationsContext","mitigationLinks","setMitigationLinks","useState","getLinkedMitigationLinks","useMitigationLinksContext","useEffect","_mitigationLinks","addMitigationLink","removeMitigationLink","handleAddMitigationLink","useCallback","mitigationIdOrNewMitigation","find","m","id","linkedId","mitigationId","newMitigation","default","jsx_runtime_1","jsx","linkedMitigationIds","map","ml","onAddMitigationLink","onRemoveMitigationLink","onSaveEntity","entity","key","value","updatedEntity","metadata","prevIndex","findIndex","x","slice","push","filter","threatStatus_json_1","Object","enumerable","get","mitigationStatus_json_1","assumptions","threatSources","threatPrerequisites","threatActions","threatImpacts","assets","mitigations","useBrainstorm","brainstormData","setBrainstormData","addItem","type","content","prev","crypto","randomUUID","createdAt","Date","toISOString","createdBy","undefined","updateItem","item","removeItem","groupItems","sourceId","targetId","items","sourceItem","targetItem","targetGroupId","groupId","currentItem","ungroupItem","itemsInGroup","_","ungroupedItem","length","__","getGroupedItems","getDisplayItems","groupMap","Map","individualItems","forEach","has","set","sort","a","b","getTime","result","groupedItems","earliestCreatedAt","earliestItem","mergeGroups","initialState","mitigationPacks","mitigationPackUsage","getMitigationPack","Promise","resolve","name","description","addMitigations","createContext","useMitigationPacksContext","useContext","MitigationPacksContext","alert_1","box_1","button_1","modal_1","progress_bar_1","space_between_1","text_content_1","useExportImport_1","FileUpload_1","composerMode","visible","setVisible","onImport","onExport","onPreview","onPreviewClose","selectedFiles","setSelectedFiles","data","setData","error","setError","loading","setLoading","loadingPercentage","setLoadingPercentage","parseImportedData","handleImport","files","file","reader","FileReader","addEventListener","event","_a","target","importedData","JSON","parse","e","message","loaded","total","percent","readAsText","handleConfirmImport","handlePreview","footer","useMemo","float","children","jsxs","direction","size","variant","onClick","disabled","onDismiss","action","statusIconAriaLabel","accept","onChange","label","threats","useWorkspaceExamplesContext","configs_1","workspaceExamples_1","workspaceExamples","EXAMPLES_WORKSPACE_ID_PREFIX","replace","storageType","STORAGE_LOCAL_STATE","handleGetWorkspaceExample","workspaceExampleId","WorkspaceExamplesContext","Provider","getWorkspaceExample","spinner_1","styles","container","css","width","height","display","justifyContent","alignItems","Loading","awsui","__importStar","marginTop","spaceScaledL","marginBottom","spaceScaledXxxl","textEditorLayout","position","input","inputClear","top","right","inputClearSmall","threat_statement_copy_png_1","styles_1","InfoModalBase_1","InfoModalCopy","image","src","alt","grid_1","input_1","react_2","list","padding","spaceStaticXxs","onSelect","showSearch","showMoreItems","setShowMoreItems","filterText","setFilterText","filteredItems","toLowerCase","includes","gridDefinition","colspan","xxs","_ref2","detail","placeholder","DEFAULT_NUM_DISPLAY","index","iconName","collection_hooks_1","pagination_1","table_1","text_filter_1","config_1","EmptyState_1","Header_1","ariaLabels","columnDefinitions","allItems","disablePagination","pagination","paginationComponent","disableSettings","preferences","collectionPreferenceComponent","disableFilters","disableRowSelect","selectionType","filterComponent","selectedItems","header","trackBy","DEFAULT_TRACK_BY","collectionPreferences","onSelectionChange","defaultPageIndex","props","actions","collectionProps","filterProps","paginationProps","useCollection","filtering","empty","title","subtitle","noMatch","setFiltering","pageSize","defaultPage","sorting","defaultState","sortingColumn","selection","defaultSelectedItems","setSelectedItems","currentPageIndex","filteringText","collectionPropsOnSelectionChange","handleSelectionChange","loadingText","DEFAULT_LOADING_TEXT","columnDisplay","contentDisplay","wrapLines","stripedRows","getAriaLabels","DEFAULT_PAGINATION_LABELS","filteringPlaceholder","DEFAULT_FILTERING_PLACEHOLDER","filteringAriaLabel","DEFAULT_FILTERING_ARIA_LABEL","info","headerVariant","allItemsLength","selectedItemsLength","svg","stroke","colorTextInteractiveDefault","fill","useMediaQuery","query","getMatches","matchQuery","window","matchMedia","matches","setMatches","handleChange","addListener","removeListener","removeEventListener","useMobileMediaQuery","MOBILE_BREAKPOINT","multiselect_1","allTags","selectedTags","setSelectedTags","sortedTags","localeCompare","tokenLimit","selectedOptions","ia","o","deselectAriaLabel","options","g","filteringType","selectedAriaLabel","defaultVisible","icon","isPromotable","canCreateThreat","isThreatInput","getThreatInputColumns","columnConfig","col","getPromotableColumns","getThreatCreationColumns","threatFieldTypes_1","threatFieldData_1","renderArrayField_1","getFieldContentByToken","token","statement","fieldKey","threatFieldTypeMapping","Array","isArray","displayField","threat_statement_examples_png_1","InfoModalFullExamples","useAssumptions_1","initialValue","assumptionList","setAssumptionList","handleSaveAssumption","handlRemoveAssumption","handleRemoveAllAssumptions","async","handleDeleteWorkspace","AssumptionsContext","removeAssumption","saveAssumption","removeAllAssumptions","onDeleteWorkspace","expandable_section_1","getMobileMediaQuery_1","suggestionGroups","suggestionGroup","suggestionButtonWrapper","whiteSpace","suggestion","alignSelf","suggestions","setEditor","showMoresuggestions","setShowMoresuggestions","reduce","group","indexOf","endIndex","trim","GENERAL","renderSuggestionGroup","groups","displayTitle","r","headerText","defaultExpanded","keys","i","Math","floor","log","parseFloat","pow","toFixed","zod_1","z","object","string","max","SINGLE_FIELD_INPUT_MAX_LENGTH","optional","describe","FREE_TEXT_INPUT_MAX_LENGTH","strict","icon_1","link_1","link","textDecoration","showWarning","featuredNumber","totalNumber","onLinkClicked","href","onFollow","column_layout_1","customTypes_1","useEditMetadata_1","CopyToClipboard_1","EntityMetadataEditor_1","GenericCard_1","Textarea_1","AssumptionMitigationLink_1","AssumptionThreatLink_1","assumption","onCopy","onRemove","onEdit","onAddTagToAssumption","onRemoveTagFromAssumption","editingMode","setEditingMode","editingValue","setEditingValue","handleSave","updated","handleCancel","handleMetadataEdit","numericId","entityId","tags","onAddTagToEntity","_entityId","tag","onRemoveTagFromEntity","columns","validateData","AssumptionSchema","shape","safeParse","singleLine","assumptionId","onEditEntity","setLocalStorageKey","localStorage","setItem","stringify","indefinite_1","correctIndefiniteArticle_1","getFieldContentByToken_1","args","output","template","startIndex","before","capitalize","articleOnly","filled","outputProcessor","uuid_1","useAssumptions","_assumptionList","prevList","newEntity","cur","DEFAULT_NEW_ENTITY_ID","v4","displayOrder","foundIndex","st","BrainstormBoard_1","status_1","AssumptionLink_1","StatusBadge_1","MitigationThreatLink_1","selectedOption","status","setSelectedOption","option","statusColorMapping","MITIGATION_STATUS_COLOR_MAPPING","MitigationSchema","obj","scrollToTop","scrollTo","behavior","getMetadata_1","matchThreatPackMitigationCandidate","mitigation","threatPackId","mitigationCandiateId","METADATA_KEY_SOURCE","METADATA_KEY_SOURCE_THREAT_PACK","METADATA_KEY_SOURCE_THREAT_PACK_MITIGATION_CANDIDATE","application_1","architecture_1","assumptions_1","brainstorm_1","dataflow_1","mitigations_1","threats_1","workspaces_1","schema","number","workspace","WorkspaceSchema","meta","internal","applicationInfo","ApplicationInfoSchema","architecture","ArchitectureInfoSchema","dataflow","DataflowInfoSchema","array","assumptionLinks","AssumptionLinkSchema","MitigationLinkSchema","TemplateThreatStatementSchema","brainstorm","BrainstormDataSchema","DataExchangeFormatSchema","WorkspaceExampleSchema","extend","badge_1","contexts_1","MitigationLinksContext_1","ThreatsContext_1","filterThreatsByMetadata_1","DashboardNumber_1","useMitigationListLinkClicked_1","useThreatListLinkClicked_1","flexDirection","contentContainer","flex","LabelValuePair","totalValue","onLinkFollow","onThreatListView","onMitigationListView","statementList","useThreatsContext","mitigationLinkList","assumptionLinkList","useAssumptionLinksContext","missingMitigationOrAssumption","s","al","handleThreatListLinkClicked","handleMitigationListLinkClicked","missingMitigation","missingPriority","completedMitigations","totalMitigations","MITIGATION_STATUS_RESOLVED","MITIGATION_STATUS_RESOLVED_WILLNOTACTION","completedThreats","totalThreats","THREAT_STATUS_NOT_USEFUL","THREAT_STATUS_RESOLVED","countHigh","LEVEL_HIGH","countMed","countLow","minColumnWidth","linkedMitigations","linkedAssumptions","color","priority","LEVEL_MEDIUM","LEVEL_LOW","LEVEL_NOT_SET","STATUS_NOT_SET","THREAT_STATUS_IDENTIFIED","MITIGATION_STATUS_IN_PROGRESS","MITIGATION_STATUS_IDENTIFIED","yaml_1","BaseDiagramInfo_1","dataflowInfo","setDataflowInfo","useDataflowInfoContext","headerTitle","diagramTitle","onConfirm","diagram","useBrainstorm_1","removeItemFromHook","BrainstormContext","escapeMarkdown_1","parseTableCellContent_1","standardizeNumericId_1","threatsOnly","arguments","rows","promises","assumpptionLinks","_b","threatId","assumptionsContent","join","mitigationsContent","_c","ts","_e","_d","STRIDE","_g","_f","comments","_j","_h","all","autosuggest_1","token_group_1","linkedAssumptionIds","onAddAssumptionLink","onRemoveAssumptionLink","searchValue","setSearchValue","filteredAssumptions","headingTagOverride","_ref3","enteredTextLabel","dismissLabel","_ref4","itemIndex","Table_1","threatPackThreatId","onAddMitigationsFromMitigationCandidates","getMitigationCandidates","useThreatPacksContext","setMitigations","linkedMitigationsFromThreakpack","mitigationCandidates","setupMitigations","catch","err","console","Comments","colDef","cell","minWidth","sortingField","Fragment","isItemDisabled","appMode_1","union","literal","APP_MODE_BROWSER_EXTENSION","APP_MODE_IDE_EXTENSION","use_local_storage_state_1","localStorageKeys_1","removeLocalStorageKey_1","useThreatExamples_1","useThreats_1","workspaceId","LOCAL_STORAGE_KEY_STATEMENT_LIST","ThreatsContextProviderInner","currentWorkspaceId","editingStatement","setEditingStatement","removeEditingStatement","setStatementList","removeStatementList","getLocalStorageKey","defaultValue","hasVisitBefore","useGlobalSetupContext","threatStatementExamples","perFieldExamples","previousInputs","view","setView","handleAddStatement","handlRemoveStatement","handleEditStatement","handleSaveStatement","lenStatementList","editingStatementExist","handleRemoveAllStatements","setTimeout","ThreatsContext","addStatement","removeStatement","editStatement","saveStatement","removeAllStatements","ThreatsContextProviderInnerFullMode","ThreatsContextProviderInnerThreatsOnlyMode","LOCAL_STORAGE_KEY_EDITING_STATEMENT","setMitigationLinkList","getMitigtaionThreatLinks","removeMitigationLinksByMitigationId","removeMitigationLinksByLinkedEntityId","removeMitigationLinks","addMitigationLinks","removeAllMitigationLinks","MitigationLinksContext","useAssumptionsContext","getNewThreatStatement","DEFAULT_THREAT_STATUS","container_1","header_1","entityTag_1","AssetSelector_1","ContentLayout_1","LinkedEntityFilter_1","STRIDESelector_1","TagSelector_1","WorkspaceSelector_1","SortBy_1","ThreatStatementCard_1","LevelOptionsWithNoValue","LEVEL_SELECTOR_OPTIONS","STRIDE_OPTION_NO_VALUE","STRIDEOptionsWithNoValue","OPTIONS","LELEV_MAPPING","High","Medium","Low","btnClearFilter","ALL_STATUS","ContentLayout","initialFilter","onThreatEditorView","removeAssumptionLinksByLinkedEntityId","showInfoModal","handleRemove","statementId","setFilteringText","sortBy","setSortBy","DEFAULT_SORT_BY","selectedImpactedGoal","setSelectedImpactedGoal","selectedImpactedAssets","setSelectedImpactedAssets","selectedStatus","setSelectedStatus","selectedPriorities","setSelectedPriorities","selectedSTRIDEs","setSelectedSTRIDEs","stride","selectedLinkedAssumptionFilter","setSelectedLinkedAssumptionFilter","WITH_LINKED_ENTITY","WITHOUT_NO_LINKED_ENTITY","ALL","selectedLinkedMitigationFilter","setSelectedLinkedMitigationFilter","handleEditMetadata","handleAddTagToStatement","updatedStatement","addTagToEntity","handleRemoveTagFromStatement","removeTagFromEntity","handleUpdateStatementStatus","filteredStatementList","impactedAssets","some","impactedGoal","t","field","op1","op2","priority1","priority2","Number","MAX_VALUE","ascending","reverse","hasNoFilter","idToCopy","embededMode","enabledExportAll","enabledRemoveAll","enabledExportFiltered","filteredThreats","allImpactedGoal","ig","allImpactedAssets","handleClearFilter","xs","counter","_ref5","_ref6","allAssets","selectedAssets","setSelectedAssets","_ref7","entityDisplayName","selected","setSelected","setValue","onEditInWizard","onEditMetadata","onEditStatementStatus","onAddTagToStatement","onRemoveTagFromStatement","showLinkedEntities","LocalStateContextProvider_1","LocalStorageContextProvider_1","useBrainstormContext","useWorkspaceStorage_1","__exportStar","sanitizeHtml_1","useContentValidation","tempValue","setTempValue","errorText","setErrorText","eventData","initialMarkdownNormalize","newValue","split","line","endsWith","validation","success","issues","expandablePanelHeader_1","CommentsEdit_1","StatusSelector_1","PriorityEdit_1","expanded","setExpanded","useCrossWorkspaceContext","ThreatLinkView_1","threatList","linkedThreatIds","onAddThreatLink","onRemoveThreatLink","nt","displayedStatement","filterThreatsByMetadata","metadataKey","metadataValue","ALL_LEVELS","form_field_1","BrainstormList_1","EditorLayout_1","ExampleList_1","PreviousInputList_1","EditorPrerequisites","forwardRef","ref","setStatement","fieldData","inputRef","useRef","useImperativeHandle","focus","current","prerequisites","prevStatement","handleSelect","spellcheck","stretch","examples","constants_1","INFO_DEFAULT_VALUE","handleRemoveDataflowInfo","DataflowInfoContext","removeDataflowInfo","example","renderItem","perFieldExample","sortedAssets","threat_source","threat_action","threat_impact","impacted_goal","impacted_assets","renderThreatStatement_1","defaultTemplate","customTemplate","renderedStatement","isUsingDefaultTemplate","constraintText","fieldCombination","filledField","fieldId","BrainstormContext_1","GroupableItemCard_1","EntityCreationCard_1","columnConfig_1","getColumnById","itemType","onPromote","onCreateThreat","setContent","handleContentChange","newContent","handleUpdate","updatedItem","handleGroup","handleUngroup","displayItems","onContentChange","onSave","onDelete","onUpdate","onGroup","onUngroup","getApplicationInfo_1","getApplicationName_1","getArchitecture_1","getAssets_1","getAssumptions_1","getDataFlow_1","getMitigations_1","getThreats_1","hasContent_1","sanitizedData","hasContentDetails","applicationName","getApplicationName","getApplicationInfoContent","getArchitectureContent","getDataflowContent","getAssumptionsContent","getThreatsContent","getMitigationsContent","getAssetsContent","components_1","zoomLevel","setZoomLevel","panPosition","setPanPosition","y","viewMode","setViewMode","imageDimensions","setImageDimensions","containerDimensions","setContainerDimensions","isPanning","setIsPanning","panStart","setPanStart","img","Image","onload","aspectRatio","naturalWidth","naturalHeight","maxWidth","min","innerWidth","maxHeight","innerHeight","containerWidth","containerHeight","scaleX","scaleY","fitZoom","handleFitToWindow","handleWheel","preventDefault","delta","deltaY","newZoom","handleMouseDown","button","clientX","clientY","handleMouseMove","deltaX","handleMouseUp","handleZoomPresetChange","zoomValue","parseInt","selectedId","getSelectedZoomPreset","toString","handleKeyPress","imageContainerStyles","margin","overflow","border","borderRadius","cursor","imageStyles","transform","transformOrigin","transition","userSelect","pointerEvents","left","marginLeft","Modal","SpaceBetween","style","fontSize","Box","Grid","SegmentedControl","text","Button","StatusIndicator","round","fontWeight","ariaLabel","onWheel","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","draggable","textAlign","DiagramModal","ThreatStatementEditor_1","ThreatStatementList_1","ContextAggregator_1","ThreatStatementGeneratorInner","onImported","setAssumptionLinks","getAssumptionEntityLinks","_assumptionLinks","addAssumptionLink","removeAssumptionLink","global_styles_1","Density","Mode","useTheme","theme","setTheme","density","setDensity","densitiy","applyMode","applyDensity","ThemeLocalStateProvider","Light","Compact","Comfortable","ThemeContext","ThemeLocalStorageProvider","LOCAL_STORAGE_KEY_THEME_MODE","LOCAL_STORAGE_KEY_THEME_DENSITY","useThemeContext","appMode","content_layout_1","GeneralInfo_1","MitigationPacksContext_1","mitigationPackId","mitigationPack","handleAddToWorkspace","every","totalSelectedItems","usedMitigationPackMitigationIds","currentSelectedItems","si","csi","ApplicationContext_1","ArchitectureContext_1","AssumptionLinksContext_1","AssumptionsContext_1","DataflowContext_1","GlobalSetupContext_1","MitigationsContext_1","useRemoveData","removeWorkspace","switchWorkspace","useWorkspacesContext","removeApplicationInfo","applicationInfoDeleteWorkspace","useApplicationInfoContext","removeArchitectureInfo","architectureInfoDeleteWorkspace","useArchitectureInfoContext","dataflowInfoDeleteWorkspace","assumptionsDeleteWorkspace","removeAllMitigations","mitigationsDeleteWorkspace","threatsDeleteWorkspace","removeAllAssumptionLinks","assumptionLinksDeleteWorkspace","mitigationLinksDeleteWorkspace","brainstormDeleteWorkspace","removeData","deleteWorkspace","toDeleteWorkspaceId","useContentValidation_1","Input","textarea_1","design_tokens_1","currentDragData","ItemContent","brainstormItem","showUngroupButton","editingItemId","setEditingItemId","handleUngroupItem","itemShowButtons","setItemShowButtons","localEditContent","setLocalEditContent","handleItemMouseEnter","handleItemMouseLeave","isThisItemBeingEdited","handleStartEdit","handleSaveEdit","handleCancelEdit","autoFocus","onMouseEnter","isPromoted","call","promote","createThreat","fieldName","isDragging","setIsDragging","isDropTarget","setIsDropTarget","hoverTimeoutRef","cardRef","isGrouped","isAnyItemBeingEdited","handleMouseEnter","handleMouseLeave","handleDragStart","dragData","itemId","dataTransfer","effectAllowed","handleDragEnd","handleDragOver","dropEffect","handleDragEnter","handleDragLeave","contains","relatedTarget","handleDrop","getData","ungroupItemId","clearTimeout","containerStyle","opacity","onDragStart","onDragEnd","onDragOver","onDragEnter","onDragLeave","onDrop","groupedItem","backgroundColor","colorBorderDividerDefault","colorBackgroundButtonPrimaryActive","zIndex","boxShadow","Autosuggest_1","EditorImpactedAssets","handleAddAsset","asset","handleRemoveAsset","handleKeyDown","keyCode","from","Set","assetValue","enteredValue","onKeyDown","ThreatStatementImpactedAssetItem","useAssumptionLinks_1","LOCAL_STORAGE_KEY_ASSUMPTION_LINK_LIST","setAssumptionLinkList","handlRemoveAssumptionLink","handleRemoveAssumptionLinks","handlRemoveAssumptionLinksByAssumptionId","handlRemoveAssumptionLinksByLinkedEntityId","handleAddAssumptionLink","handleAddAssumptionLinks","handleGetLinkedAssumptionLinks","handleGetAssumptionEntityLinks","handleRemoveAllAssumptionLinks","AssumptionLinksContext","getLinkedAssumptionLinks","removeAssumptionLinksByAssumptionId","removeAssumptionLinks","addAssumptionLinks","useMediaQuery_1","migrated","setMigrated","LOCAL_STORAGE_KEY_THREATS_LIST_MIGRATION","isNaN","newList","p","prevT","renderArrayField","includesOr","inputLen","getThreatFromThreatPacksThreat_1","getNewThreatStatement_1","threatPacks","ThreatPacksContext_1","onThreatPackLinkClicked","threatPackUsage","isRowHeader","InfoModalFeatures","featureSets","featureSet","contentBaseText","focusable","viewBox","d","contentHighlight","assetThreatMap","at","atId","threatsContent","reject","readAsDataURL","onerror","DEFAULT_MITIGATION_STATUS","threatLinks","tl","threat","SEARCH_PARAM_MODE","SEARCH_PARAM_FEATURES","useMitigations_1","LOCAL_STORAGE_KEY_MITIGATION_LIST","setMitigationList","handlRemoveMitigation","handleSaveMitigation","handleRemoveAllMitigations","MitigationsContext","removeMitigation","ThemeProvider_1","InfoModal_1","eventController","threatcomposer","stringifyWorkspaceData","eventName","eventHandler","dispatchEvent","features","fileImportModalVisible","setFileImportModalVisible","applyTheme","newTheme","Dark","setHasVisitBefore","LOCAL_STORAGE_KEY_NEW_VISIT_FLAG","infoModalVisible","setInfoModalVisible","GlobalSetupContext","contentRoot","paddingBottom","slide","boxSizing","lineHeight","navBtn","bottom","nextBtn","prevBtn","navBtnDotContainer","navBtnDot","marginRight","navBtnDotActive","contentBase","contentBaseHeader","contentBaseMain","contentList","counterReset","paddingLeft","listStyle","counterIncrement","background","getStartedBtnContainer","getThreatPack","addThreats","ThreatPacksContext","WorkspaceExamplesContext_1","WorkspacesContext_1","isWorkspaceExample_1","workspaceList","STORAGE_LOCAL_STORAGE","react_simply_carousel_1","Copy_1","Editor_1","Features_1","FullExample_1","GetStarted_1","Intro_1","MoreFeatures_1","Selector_1","Modal_1","contentRef","activeSlide","setActiveSlide","isMobileView","document","contentRefDimention","clientWidth","clientHeight","ClassNames","cx","containerProps","className","preventScrollOnSwipe","swipeTreshold","activeSlideIndex","activeSlideProps","onRequestChange","forwardBtnProps","hidden","TOTAL_SLIDES","backwardBtnProps","dotsNav","show","itemBtnProps","activeItemBtnProps","itemsToShow","speed","handleClick","navigator","clipboard","writeText","isSameMitigationLink","entity1","entity2","useMitigationLinks","handlRemoveMitigationLink","handleRemoveMitigationLinks","pl","handlRemoveMitigationLinksByMitigationId","handlRemoveMitigationLinksByLinkedEntityId","mitigationLink","handleAddMitigationLinks","filteredLinks","handleGetLinkedMitigationLinks","handleGetMitigationThreatLinks","threatStatementExamples_json_1","DEFAULT_PER_FIELD_EXAMPLES","button_dropdown_1","MitigationLink_1","MetadataEditor_1","PriorityBadge_1","handleMoreActions","moreActions","onItemClick","displayStatement","THREAT_STATUS_COLOR_MAPPING","visibleColumns","onColumnVisibilityChange","threatInputsVisible","onThreatInputsVisibilityChange","Container","Toggle","checked","ColumnVisibilityToggles","WorkspaceContextAggregator_1","onWorkspaceChanged","requiredGlobalSetupContext","ThreatsMigration_1","Input_1","spaceScaledS","isMoblieView","handleAddTag","TagSchema","secondaryControl","String","padStart","Header","TextContent","EntityCreationCard","Status_1","completed","threatSource","threatAction","threatImpact","utils_1","agg","addNewValueToStringArray","addNewValueToPerFieldExampleArray","addNewValueArrayToStringArrayArray","addNewValueArrayToStringArray","how_it_works_png_1","switch_to_example_workspace_gif_1","onDefineWorkload","external","board_1","board_item_1","MitigationStatus_1","Overview_1","STRIDEAllocation_1","ThreatGrammar_1","ThreatPrioritization_1","ThreatStatus_1","setItems","rowSpan","columnSpan","handleRenderItem","_actions","i18nStrings","dragHandleAriaLabel","dragHandleAriaDescription","resizeHandleAriaLabel","resizeHandleAriaDescription","onItemsChange","createAnnouncement","operationAnnouncement","conflicts","disturbed","c","Boolean","liveAnnouncementDndStarted","operationType","liveAnnouncementDndItemReordered","operation","placement","liveAnnouncementDndItemResized","columnsConstraint","isMinimalColumnsReached","rowsConstraint","isMinimalRowsReached","liveAnnouncementDndItemInserted","liveAnnouncementDndCommitted","liveAnnouncementDndDiscarded","liveAnnouncementItemRemoved","op","navigationAriaLabel","navigationAriaDescription","navigationItemAriaLabel","startsWith","LOCAL_STORAGE_KEY","addPadding","sessionStorage","getItem","dismissible","prevItems","_jsxs","_Fragment","_jsx","Link","Flashbar","toDisplayNotification","process","REACT_APP_GITHUB_PAGES","Notifications","entities_1","SINGLE_FIELD_INPUT_SMALL_MAX_LENGTH","regex","REGEX_WORKSPACE_NAME","enum","MetadataNodeSchema","PRIORITY_COLOR_MAPPING","NoSet","editMode","setEditMode","editor","showLabel","onBlur","spaceScaledXxs","EditorImpactedGoal","handleAddImpactedGoal","handleRemoveImpactedGoal","handleExampleClicked","tokens","ThreatStatementImpactedGoalItem","goal","GenericEntityCreationCard","editingEntity","setEditingEntity","onReset","customEditors","containerRef","textareaRef","scrollIntoView","block","focusTextarea","handleAddTagToEntity","handleRemoveTagFromEntity","ROUTE_WORKSPACE_PATH","ROUTE_WORKSPACE_HOME_PATH","ROUTE_WORKSPACE_HOME","ROUTE_THREAT_LIST_PATH","ROUTE_THREAT_LIST","ROUTE_THREAT_EDITOR_PATH","ROUTE_THREAT_EDITOR","ROUTE_MITIGATION_LIST_PATH","ROUTE_MITIGATION_LIST","ROUTE_ASSUMPTION_LIST_PATH","ROUTE_ASSUMPTION_LIST","ROUTE_APPLICATION_INFO_PATH","ROUTE_APPLICATION_INFO","ROUTE_ARCHITECTURE_INFO_PATH","ROUTE_ARCHITECTURE_INFO","ROUTE_DATAFLOW_INFO_PATH","ROUTE_DATAFLOW_INFO","ROUTE_VIEW_THREAT_MODEL_PATH","ROUTE_VIEW_THREAT_MODEL","ROUTE_THREAT_PACKS_PATH","ROUTE_THREAT_PACK_PATH","ROUTE_THREAT_PACK","ROUTE_MITIGATION_PACKS_PATH","ROUTE_MITIGATION_PACK_PATH","ROUTE_MITIGATION_PACK","ROUTE_PREVIEW_PATH","ROUTE_PREVIEW","ROUTE_WORKSPACE_DEFAULT","ROUTE_BRAINSTORM_PATH","toggle_1","ThemeToggle","collection_preferences_1","FullDataTable_1","setPreferences","defaultPageSize","visibleContent","cd","visibleContentOptions","handlePreferenceChange","preferenceComponent","DEFAULT_COLLECTION_PREFERENCES_TITLE","confirmLabel","DEFAULT_COLLECTION_PREFERENCES_CONFRIM_LABEL","cancelLabel","DEFAULT_COLLECTION_PREFERENCES_CANCEL_LABEL","pageSizePreference","DEFAULT_PAGE_SIZE_OPTIONS","wrapLinesPreference","stripedRowsPreference","visibleContentPreference","collectionPreferencesProps","image_1","ImageEdit_1","MarkdownEditor_1","MarkdownViewer_1","onEditModeChange","MarkdownEditorComponentType","setImage","handleSaveDiagramInfo","handleEdit","mitigationPacks_1","usage","METADATA_SOURCE_MITIGATION_PACK","METADATA_KEY_SOURCE_MITIGATION_PACK","METADATA_KEY_SOURCE_MITIGATION_PACK_MITIGATION","mitigationPackMitigationId","InfoModalMoreFeatures","mitigationIdentified","mitigationInProgress","mitigationResolved","mitigationResolvedWillNotAction","NotSet","threatIdentified","threatResolvedNotUseful","threatResolved","LOCAL_STORAGE_KEY_ASSUMPTION_LIST","ApplicationInfo_1","ArchitectureInfo_1","DataflowInfo_1","AssumptionList_1","MitigationList_1","ThreatModel_1","ThreatModelView_1","WorkspaceHome_1","ThreatPacks_1","ThreatPack_1","MitigationPacks_1","MitigationPack_1","Loading_1","LandingPage_1","WorkspaceInsights_1","getWorkspaceData","hasContentSum","constructor","this","eventStore","setLocalStorageKey_1","LocalStorageContextProvider_2","LocalStorageContextProvider_3","LocalStorageContextProvider_4","LocalStorageContextProvider_5","LocalStorageContextProvider_6","LocalStorageContextProvider_7","LocalStorageContextProvider_8","handleCloneWorkspaceData","targetWorkspaceId","CrossWorkspaceContext","cloneWorkspaceData","Tooltip_1","highlighted","tooltip","bgColor","colorBackgroundToggleCheckedDisabled","colorBackgroundItemSelected","colorBackgroundButtonPrimaryDisabled","borderRadiusBadge","colorTextBodyDefault","useCurrentWorkspace_1","useWorkspaces_1","workspaceName","setWorkspaceList","lastWorkspace","setCurrentWorkspace","currentWorkspace","handleSwitchWorkspace","handleAddWorkspace","handleRemoveWorkspace","handleRenameWorkspace","WorkspacesContext","addWorkspace","renameWorkspace","architectureInfo","setArchitectureInfo","AssumptionLinkView_1","assumptionIdOrNewAssumption","newAssumption","LevelSelector_1","PriorityEdit","allowNoValue","selectedLevel","setSelectedLevel","WorkspacesMigration_1","LOCAL_STORAGE_KEY_WORKSPACE_LIST","LOCAL_STORAGE_KEY_CURRENT_WORKSPACE","main","mainInactive","mainActive","contentMain","closeButton","spaceScaledM","isSameAssumptionLink","useAssumptionLinks","assumptionLink","violates","downloadObjectURL","ObjectURL","exportName","fileExtension","downloadAnchorNode","createElement","setAttribute","body","appendChild","click","remove","downloadContent","mime","dataStr","encodeURIComponent","downloadObjectAsJson","exportObj","downloadContentAsMarkdown","downloadContentAsWordDocx","blob","URL","createObjectURL","downloadContentAsYaml","setApplicationInfo","ApplicationInfoContext","intersection","arr1","arr2","res","_len","arrs","_key","visibility","tooltipAnchor","borderWidth","borderStyle","borderColor","tooltipTop","tooltipBottom","anchor","react_markdown_1","rehype_raw_1","remark_frontmatter_1","remark_gfm_1","externalPattern","borderCollapse","borderTop","colorChartsLineGrid","colorBackgroundCellShaded","components","test","rel","allowHtml","remarkPlugins","rehypePlugins","linkedThreats","pie_chart_1","data_1","handleLinkClicked","countNotSet","countIdentified","countResolved","countInProgress","countWillNotAction","handleAddMitigation","ColumnLayout","borders","mitigationStatus","colorChartsStatusPositive","colorChartsStatusLow","colorChartsStatusInfo","colorChartsStatusNeutral","colorChartsStatusHigh","detailPopoverContent","datum","sum","segmentDescription","ariaDescription","hideFilter","innerMetricDescription","innerMetricValue","countNotUseful","threatStatus","onMitigationPackLinkClicked","getExportFileName_1","onPrintButtonClick","downloadFileName","details","showPrintDownloadButtons","onApplicationInfoView","onArchitectureView","onDataflowView","onAssumptionListView","property_filter_1","stride_1","intersectArrays_1","shuffle_1","FullExamples","setQuery","collapse","filteredThreatStatementList","resultExamples","queryResult","parseToken","statements","targetValue","toUpperCase","propertyKey","operator","toLocaleLowerCase","mergeResult","arr","n","_r","filteringOptions","v","filteringProperties","operators","propertyLabel","groupValuesLabel","dismissAriaLabel","groupValuesText","groupPropertiesText","operatorsText","operationAndText","operationOrText","operatorLessText","operatorLessOrEqualText","operatorGreaterText","operatorGreaterOrEqualText","operatorContainsText","operatorDoesNotContainText","operatorEqualsText","operatorDoesNotEqualText","editTokenHeader","propertyText","operatorText","valueText","cancelActionText","applyActionText","allPropertiesLabel","tokenLimitShowMore","tokenLimitShowFewer","clearFiltersText","removeTokenButtonAriaLabel","countText","expandToViewport","BaseImageInfoSchema","status_indicator_1","getDisplayLastModified_1","getDisplaySize_1","lastModified","Textarea","handleValueChange","useMitigationLinks_1","handleRemoveAllMitigationLinks","nonempty","SINGLE_FIELD_INPUT_TAG_MAX_LENGTH","FREE_TEXT_INPUT_SMALL_MAX_LENGTH","METADATA_KEY_COMMENTS","MetadataCommentSchema","METADATA_KEY_PREFIX_CUSTOM","MetadataSchemaMinimal","METADATA_SOURCE_THREAT_PACK","METADATA_KEY_STRIDE","METADATA_KEY_PRIORITY","METADATA_KEY_SOURCE_THREAT_PACK_THREAT","EntityBaseSchema","IMAGE_URL_MAX_LENGTH","REGEX_CONTENT_IMAGE_URL","IMAGE_BASE64_MAX_LENGTH","REGEX_CONTENT_IMAGE_BASE64","refine","ImageUrlSchema","ImageBase64Schema","path","context_3","context_4","context_5","context_6","context_7","context_8","context_9","context_10","cleanupThreatData_1","downloadContent_1","recalculateThreatData_1","validateData_1","useImportExport","isBrainstormDataEmpty","cleanedThreats","baseData","exportAll","exportFileName","exportObject","exportSelectedThreats","selectedStatementList","parsedData","validatedData","Error","importData","calculatedThreats","context_11","context_12","context_13","allowedHeadingLevels","popover_1","print_1","convertToMarkdown_1","convertToYaml_1","nextStepsContainer","paddingTop","noData","isPreview","disableOverlap","convertToDocx","processedContent","updateContent","handleCopyMarkdown","handleDownloadMarkdown","handleDownloadWorddocx","docxBlob","handleDownloadJson","handleDownloadYaml","yamlContent","handleDownloadClick","getNextStepButtons","buttons","len","flatMap","dismissButton","triggerType","print","hiddenPrint","values","events_1","useWorkspaces","getWorkspace","toBeSwitchedWorkspaceId","w","DEFAULT_WORKSPACE_ID","toBeSwitchedWorkspace","newWorkspace","newWorkspaceName","CustomEvent","EVENT_WORKSPACE_CHANGED","saveButtonText","onComplete","onCancel","onStartOver","onEditThreat","threatPack","usedThreatPackThreatIds","resizableColumns","stickyColumns","first","Autosuggest","_errorText","resetErrorText","setResetErrorText","editor_1","hooks_1","borderRadiusInput","colorBorderInputDefault","colorBorderInputFocused","colorTextStatusError","hideAutocomplete","ALLOWED_HEADING_LEVELS","previousValue","mdxEditorRef","FormField","MDXEditor","markdown","suppressHtmlProcessing","toMarkdownOptions","emphasis","bullet","rule","plugins","toolbarPlugin","toolbarContents","DiffSourceToggleWrapper","BoldItalicUnderlineToggles","BlockTypeSelect","CodeToggle","CreateLink","InsertImage","InsertTable","ListsToggle","InsertCodeBlock","UndoRedo","codeBlockPlugin","defaultCodeBlockLanguage","codeMirrorPlugin","codeBlockLanguages","tablePlugin","diffSourcePlugin","diffMarkdown","markdownShortcutPlugin","listsPlugin","headingsPlugin","linkPlugin","disableAutoLink","linkDialogPlugin","imagePlugin","disableImageResize","thematicBreakPlugin","MitigationCard_1","MitigationCreationCard_1","selectedLinkedThreatsFilter","setSelectedLinkedThreatsFilter","selectedLinkedAssumptionsFilter","setSelectedLinkedAssumptionsFilter","filteredList","handleSaveNew","mitigationCreationCardRef","handleAddNewMitigation","selectionGroupLabel","allItemsSelectionLabel","itemSelectionLabel","isItemSelected","nextPageLabel","previousPageLabel","pageLabel","pageNumber","archInfo","threatStatementList","hasApplicationName","hasApplicationInfo","hasArchitectureInfo","hasDataflowInfo","hasAssumptions","hasMitigations","hasThreats","ui_1","Tags_1","removeDialogVisible","setRemoveDialogVisible","DeleteConfirmationDialog","onCancelClicked","onDeleteClicked","deleteButtonText","handleRemoveApplicationInfo","ReferencePackBaseSchema","CloudscapeHeaderType","customHeader","isValidElement","InfoModalIntro","rehype_stringify_1","remark_parse_1","remark_rehype_1","unified_1","str","htmlOutput","unified","use","WindowExporter_1","CrossWorkspaceContext_1","WorkspaceContextInnerAggregator","rest","ThreatStatementGenerator_1","EditorThreatSource","valueRef","handleRemoveArchitectureInfo","ArchitectureInfoContext","ColumnVisibilityToggles_1","DiagramModal_1","ItemColumn_1","BrainstormBoardInner","onNavigateToThreat","showArchitectureModal","setShowArchitectureModal","showDataflowModal","setShowDataflowModal","setVisibleColumns","acc","setThreatInputsVisible","handleColumnVisibilityChange","columnId","handleThreatInputsVisibilityChange","isAssumptionPromoted","assumptionPromotionHandlers","isMitigationPromoted","mitigationPromotionHandlers","createThreatWithField","threatSourceHandlers","prerequisiteHandlers","threatActionHandlers","threatImpactHandlers","assetHandlers","renderColumn","config","promotionHandlers","threatCreationHandlers","getHandlersForColumn","flexShrink","gap","overflowX","column","BrainstormBoard","threat_statement_elements_png_1","InfoModalSelector","fieldPosition","weight","BUTTON_LABEL","add","update","clone","HEADER_TEXT","exampleWorkspaceList","handleConfirm","segmented_control_1","svg_1","root","iconAlt","iconSvg","colorBackgroundHomeHeader","LOCAL_STORAGE_KEY_DATAFLOW_INFO","getSmallMobileMediaQuery","SMALL_DEVICE_BREAKPOINT","getMobileMediaQuery","useThreats","newDefaultStatement","copiedStatement","_id","newStatement","ContentEntityBaseSchema","EntityLinkBaseSchema","export_1","getExportFileName","filtered","EXPORT_FILE_NAME","FileTokenLabel_1","controlId","buttonText","sizeLimit","inputElement","handleFileSelectionButtonClick","handleFileSelectionChange","newFiles","targetFiles","getThreatFromThreactPackThreat","sanitize_html_1","sanitizeHtml","allowedTags","attrs","EditorThreatAction","ms","selectedPriority","setSelectedPriority","missingStride","countSpoofing","countTampering","countRepudiation","countInformationDisclosure","countDenialOfService","countElevationOfPrivilege","barSeries","Select","LEVEL_SELECTOR_OPTIONS_INCLUDING_ALL","BarChart","series","emphasizeBaselineAxis","hideLegend","horizontalBars","stackedBars","threatStatementFormat_1","getRecommandedEditor_1","matchThreatPackMitigationCandidate_1","scrollToTop_1","CustomTemplate_1","EditorImpactedAssets_1","EditorImpactedGoal_1","EditorPrerequisites_1","EditorThreatAction_1","EditorThreatImpact_1","EditorThreatSource_1","FieldSelector_1","FinalStatement_1","FullExamples_1","Metrics_1","MitigationCandidates_1","finalStatementSection","colorBackgroundDropdownItemHover","metadataContainer","defaultThreatStatementFormat","editorMapping","fullExamplesRef","initialEditorField","setSuggestions","setDisplayStatement","customTemplateEditorVisible","setCustomTemplateEditorVisible","prevLinkedAssumptionIds","la","prevLinkedMitigationIds","lm","setLinkedAssumptionIds","setLinkedMitigationIds","Component","currentSuggestions","displayedHtml","handleStartOver","handleComplete","toAddlinkedAssumptionIds","toRemovelinkedAssumptionIds","toAddlinkedMitigationIds","toRemovelinkedMitigationIds","recommendedEditor","handleGiveExampleClicked","randomNumber","random","DEFAULT_WORKSPACE_LABEL","handleCustomTemplateConfirm","handleAddMitigationsFromMitigationCandidates","mitigationCandidate","matchMitigation","isExampleVisible","currentEditor","onGiveExampleClick","_statement","ThreatStatementEditorInner","LOCAL_STORAGE_KEY_WORKSPACE_LIST_MIGRATION","prevWs","threatPacks_1","filteredMitigations","select_1","LevelSelector","onFocus","NO_VALUE","useRemoveData_1","setWorkspaceData","PLACEHOLDER_EXCHANGE_DATA","getCurrentWorkspaceDataMarkdown","getWorkspaceList","getCurrentWorkspaceMetadata","getCurrentWorkspaceData","setCurrentWorkspaceData","createWorkspace","setName","handleSaveApplicationInfo","radio_group_1","selector","radioGroup","SELECT_OPTIONS","SORTING_OPTIONS","MetadataSchemaMitigation","StatusSchema","pipe","getNewAssumption_1","GenericEntityCreationCard_1","AssumptionCreationCard","setLinkedThreatIds","handleReset","StatusSelector","toLocaleString","AssumptionCard_1","AssumptionCreationCard_1","AssumptionList","assumptionCreationCardRef","handleAddNewAssumption","tabIndex","calculateFieldCombination_1","allFields","unFilledFields","af","unFilledFieldsLen","randomFieldNum","lable","LOCAL_STORAGE_KEY_BRAINSTORM_DATA","GenAIChatbot_tc_json_1","useCloneWorkspace","replacements","skips","replacement","threat_statement_flow_png_1","useMitigations","_mitigationList","countThreatSource","countPrerequisites","countThreatAction","countThreatImpact","countImpactedGoal","countImpactedAssets","notUsingGrammar","colorChartsPaletteCategorical2","colorChartsPaletteCategorical1","LOCAL_STORAGE_KEY_APPLICATION_INFO","_match","article","following","isGithubPages","l","location","search","decodeURIComponent","decoded","redirect","hash","currentWorkspaceValue","redirectUrl","generatePath","ROUTE_BASE_PATH","REACT_APP_ROUTE_BASE_PATH","AppRoot","React","WorkspaceRoot","Architecture","Application","Dataflow","MitigationList","MitigationPack","MitigationPacks","ThreatModelPreview","ThreatModelReport","ThreatPack","ThreatPacks","ThreatStatementEditor","ThreatStatementList","WorkspaceHome","workspaceRoutes","loader","element","createRouter","isMemoryRouterUsed","createMemoryRouter","createBrowserRouter","routerOpts","basename","routes","initialWorkspaceLoader","Full","router","Suspense","fallback","RouterProvider","logo","utilities","disabledReason","TopNavigation","overflowMenuTitleText","overflowMenuTriggerText","identity","baseStyles","notifications","headerHref","mode","URLSearchParams","NavHeader","composeMode","useNotifications","StandaloneAppLayout","ThreatStatementGenerator","DEFAULT_MODE","REACT_APP_DEFAULT_MODE","getComposerMode","App","Standalone","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","isLocalhost","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onSuccess","initialThemeString","_document$querySelect","querySelector","initialTheme","ReactDOM","ThemeProvider","getElementById","origin","fetch","headers","response","contentType","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration","reportWebVitals","DeleteConfirmationDialog_1","useCloneWorkspace_1","ThemeToggle_1","EditWorkspace_1","FileImport_1","themeToggle","singletonMode","singletonPrimaryActionButtonConfig","addWorkspaceModalVisible","setAddWorkspaceModalVisible","editWorkspaceModalVisible","setEditWorkspaceModalVisible","cloneWorkspaceModalVisible","setCloneWorkspaceModalVisible","removeDataModalVisible","setRemoveDataModalVisible","removeWorkspaceModalVisible","setRemoveWorkspaceModalVisible","isRemovingWorkspace","setIsRemovingWorkspace","cloneWorkspace","workspacesOptions","EXAMPLES_SECTION_WORKSPACE_LABEL","we","handleSelectWorkspace","selectedItem","handleSingletonPrimaryButtonClick","handleRemoveData","buttonDropdownItems","ExpandableToken_1","Token_1","parseThreatStatement_1","Suggestions_1","expandedImpactedGoal","setExpandedImpactedGoal","renderShortenImpactedGoal","nextEditor","EditorThreatImpact","LOCAL_STORAGE_KEY_ARCHIECTURE_INFO","PLACEHOLDER_EXCHANGE_DATA_FOR_WORKSPACE","useCurrentWorkspace","navigateToWorkspace","foundWorkspace","foundWorkspaceExample","MitigationCreationCard","ThreatStatementDisplayTokenSchema","MetadataSchemaThreats","fromId","browser_image_compression_1","getBase64_1","IMAGE_COMPRESSION_OPTIONS","maxSizeMB","maxWidthOrHeight","useWebWorker","IMAGE_COMPRESSION_TYPES","isValueBase64String","inputValue","setInputValue","imageSource","setImageSource","handleImageUpload","imageFile","compressedFile","_selectedFiles","_image","threatStatementFormatKeys","prefix","suffix","PLACEHOLDER","updatedFieldCombination","format","parseOutput","_filled","stringOutput","displayOutput","updatedContent","displayedOutput","showMoreExamples","setShowMoreExamples","showFullExample","setShowFullExample","randomDislayList","randomExamples","re","showFullExampleToggle","renderExample","exampleStr","fullExample","createBrainstormItemSchema","contentDescription","datetime","strArr","resultArray","randomIndex","currentIndex","LOCAL_STORAGE_KEY_MITIGATION_LINK_LIST","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","amdD","deferred","O","chunkIds","fn","notFulfilled","Infinity","fulfilled","j","splice","getter","__esModule","leafPrototypes","getProto","getPrototypeOf","ns","create","def","getOwnPropertyNames","definition","defineProperty","f","chunkId","u","miniCssF","globalThis","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","url","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","timeout","nc","onScriptComplete","doneFns","parentNode","removeChild","bind","head","Symbol","toStringTag","nmd","paths","installedChunks","installedChunkData","promise","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}